<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of Virginia, Charlottesville</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of Virginia, Charlottesville</h1>
    <div class="pagination">
        <a href='3_47.html'>&lt;&lt;Prev</a><a href='3.html'>1</a><a href='3_2.html'>2</a><a href='3_3.html'>3</a><a href='3_4.html'>4</a><a href='3_5.html'>5</a><a href='3_6.html'>6</a><a href='3_7.html'>7</a><a href='3_8.html'>8</a><a href='3_9.html'>9</a><a href='3_10.html'>10</a><a href='3_11.html'>11</a><a href='3_12.html'>12</a><a href='3_13.html'>13</a><a href='3_14.html'>14</a><a href='3_15.html'>15</a><a href='3_16.html'>16</a><a href='3_17.html'>17</a><a href='3_18.html'>18</a><a href='3_19.html'>19</a><a href='3_20.html'>20</a><a href='3_21.html'>21</a><a href='3_22.html'>22</a><a href='3_23.html'>23</a><a href='3_24.html'>24</a><a href='3_25.html'>25</a><a href='3_26.html'>26</a><a href='3_27.html'>27</a><a href='3_28.html'>28</a><a href='3_29.html'>29</a><a href='3_30.html'>30</a><a href='3_31.html'>31</a><a href='3_32.html'>32</a><a href='3_33.html'>33</a><a href='3_34.html'>34</a><a href='3_35.html'>35</a><a href='3_36.html'>36</a><a href='3_37.html'>37</a><a href='3_38.html'>38</a><a href='3_39.html'>39</a><a href='3_40.html'>40</a><a href='3_41.html'>41</a><a href='3_42.html'>42</a><a href='3_43.html'>43</a><a href='3_44.html'>44</a><a href='3_45.html'>45</a><a href='3_46.html'>46</a><a href='3_47.html'>47</a><span>[48]</span><a href='3_49.html'>49</a><a href='3_50.html'>50</a><a href='3_51.html'>51</a><a href='3_52.html'>52</a><a href='3_53.html'>53</a><a href='3_54.html'>54</a><a href='3_55.html'>55</a><a href='3_56.html'>56</a><a href='3_57.html'>57</a><a href='3_58.html'>58</a><a href='3_59.html'>59</a><a href='3_60.html'>60</a><a href='3_61.html'>61</a><a href='3_62.html'>62</a><a href='3_63.html'>63</a><a href='3_64.html'>64</a><a href='3_65.html'>65</a><a href='3_66.html'>66</a><a href='3_67.html'>67</a><a href='3_68.html'>68</a><a href='3_69.html'>69</a><a href='3_70.html'>70</a><a href='3_71.html'>71</a><a href='3_72.html'>72</a><a href='3_73.html'>73</a><a href='3_74.html'>74</a><a href='3_75.html'>75</a><a href='3_76.html'>76</a><a href='3_77.html'>77</a><a href='3_78.html'>78</a><a href='3_79.html'>79</a><a href='3_80.html'>80</a><a href='3_81.html'>81</a><a href='3_82.html'>82</a><a href='3_83.html'>83</a><a href='3_49.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit 83897badcb20243465b67a5826dfdda50a052eb5
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Fri Apr 30 09:34:29 2010 -0400

    agp: use NULL instead of 0 when pointer is needed
    
    Fixes sparse warning:
    
    drivers/char/agp/generic.c:1217:33: warning: Using plain integer as
    NULL pointer
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    CC: linux-kernel@vger.kernel.org
    Signed-off-by: Jiri Kosina &lt;jkosina@suse.cz&gt;

diff --git a/drivers/char/agp/generic.c b/drivers/char/agp/generic.c
index fb86708e47ed..4b51982fd23a 100644
--- a/drivers/char/agp/generic.c
+++ b/drivers/char/agp/generic.c
@@ -1214,7 +1214,7 @@ struct agp_memory *agp_generic_alloc_user(size_t page_count, int type)
 		return NULL;
 
 	for (i = 0; i &lt; page_count; i++)
-		new-&gt;pages[i] = 0;
+		new-&gt;pages[i] = NULL;
 	new-&gt;page_count = 0;
 	new-&gt;type = type;
 	new-&gt;num_scratch_pages = pages;</pre><hr><pre>commit 758ef749f3b1a4c5e6ba5b5bca5eae968a2c0c5f
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Fri Apr 30 09:34:38 2010 -0400

    rtc-v3020: make bitfield unsigned
    
    Fix sparse warning:
    
    include/linux/rtc-v3020.h:18:23: error: dubious one-bit signed bitfield
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    CC: p_gortmaker@yahoo.com
    Signed-off-by: Jiri Kosina &lt;jkosina@suse.cz&gt;

diff --git a/include/linux/rtc-v3020.h b/include/linux/rtc-v3020.h
index 8ba646e610d9..e55d82cebf80 100644
--- a/include/linux/rtc-v3020.h
+++ b/include/linux/rtc-v3020.h
@@ -15,7 +15,7 @@
 struct v3020_platform_data {
 	int leftshift; /* (1&lt;&lt;(leftshift)) &amp; readl() */
 
-	int use_gpio:1;
+	unsigned int use_gpio:1;
 	unsigned int gpio_cs;
 	unsigned int gpio_wr;
 	unsigned int gpio_rd;</pre><hr><pre>commit 8356dda2a573775b651ed13625d3a9ec48e0116c
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Fri Apr 30 09:34:28 2010 -0400

    PCI: make bitfield unsigned
    
    Fix sparse warning:
    
    drivers/pci/pci.h:247:25: error: dubious one-bit signed bitfield
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    CC: linux-pci@vger.kernel.org
    Signed-off-by: Jiri Kosina &lt;jkosina@suse.cz&gt;

diff --git a/drivers/pci/pci.h b/drivers/pci/pci.h
index 4eb10f48d270..f8077b3c8c8c 100644
--- a/drivers/pci/pci.h
+++ b/drivers/pci/pci.h
@@ -244,7 +244,7 @@ struct pci_ats {
 	int stu;	/* Smallest Translation Unit */
 	int qdep;	/* Invalidate Queue Depth */
 	int ref_cnt;	/* Physical Function reference count */
-	int is_enabled:1;	/* Enable bit is set */
+	unsigned int is_enabled:1;	/* Enable bit is set */
 };
 
 #ifdef CONFIG_PCI_IOV</pre><hr><pre>commit 8ac97b74bca1fc8a63b28cc6121519d1cfa2af99
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Fri Apr 30 09:34:31 2010 -0400

    jbd2: use NULL instead of 0 when pointer is needed
    
    Fixes sparse warning:
    
    fs/jbd2/journal.c:1892:9: warning: Using plain integer as NULL pointer
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    CC: linux-ext4@vger.kernel.org
    Signed-off-by: Jiri Kosina &lt;jkosina@suse.cz&gt;

diff --git a/fs/jbd2/journal.c b/fs/jbd2/journal.c
index c03d4dce4d76..bc2ff5932769 100644
--- a/fs/jbd2/journal.c
+++ b/fs/jbd2/journal.c
@@ -1889,7 +1889,7 @@ static struct kmem_cache *get_slab(size_t size)
 	BUG_ON(i &gt;= JBD2_MAX_SLABS);
 	if (unlikely(i &lt; 0))
 		i = 0;
-	BUG_ON(jbd2_slab[i] == 0);
+	BUG_ON(jbd2_slab[i] == NULL);
 	return jbd2_slab[i];
 }
 </pre><hr><pre>commit c2d45b4da042720ae94648b417d0e051742441d4
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Fri Apr 30 09:34:32 2010 -0400

    cciss: fix shadows sparse warning
    
    Fix sparse warnings:
    
    drivers/block/cciss.c:1591:37: warning: symbol 'i' shadows an earlier one
    drivers/block/cciss.c:2437:21: warning: symbol 'i' shadows an earlier one
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Acked-by: Mike Miller &lt;mike.miller@hp.com&gt;
    Signed-off-by: Jiri Kosina &lt;jkosina@suse.cz&gt;

diff --git a/drivers/block/cciss.c b/drivers/block/cciss.c
index eb5ff0531cfb..51ceaee98f9f 100644
--- a/drivers/block/cciss.c
+++ b/drivers/block/cciss.c
@@ -1588,7 +1588,6 @@ static int cciss_ioctl(struct block_device *bdev, fmode_t mode,
 
 			c-&gt;Request = ioc-&gt;Request;
 			if (ioc-&gt;buf_size &gt; 0) {
-				int i;
 				for (i = 0; i &lt; sg_used; i++) {
 					temp64.val =
 					    pci_map_single(host-&gt;pdev, buff[i],
@@ -2434,7 +2433,7 @@ static int deregister_disk(ctlr_info_t *h, int drv_index,
 
 	/* if it was the last disk, find the new hightest lun */
 	if (clear_all &amp;&amp; recalculate_highest_lun) {
-		int i, newhighest = -1;
+		int newhighest = -1;
 		for (i = 0; i &lt;= h-&gt;highest_lun; i++) {
 			/* if the disk has size &gt; 0, it is available */
 			if (h-&gt;drv[i] &amp;&amp; h-&gt;drv[i]-&gt;heads)</pre><hr><pre>commit 05be7a868e229b26a5a7de217343f39b4dfed205
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Tue Apr 27 16:20:15 2010 -0400

    doc: Change urls for sparse
    
    The location of the sparse web page and git tree were no longer
    valid.  This changes them to point to the current versions.
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Jiri Kosina &lt;jkosina@suse.cz&gt;

diff --git a/Documentation/sparse.txt b/Documentation/sparse.txt
index 34c76a55bc04..9b659c79a547 100644
--- a/Documentation/sparse.txt
+++ b/Documentation/sparse.txt
@@ -54,12 +54,12 @@ Getting sparse
 ~~~~~~~~~~~~~~
 
 You can get latest released versions from the Sparse homepage at
-http://www.kernel.org/pub/linux/kernel/people/josh/sparse/
+https://sparse.wiki.kernel.org/index.php/Main_Page
 
 Alternatively, you can get snapshots of the latest development version
 of sparse using git to clone..
 
-        git://git.kernel.org/pub/scm/linux/kernel/git/josh/sparse.git
+        git://git.kernel.org/pub/scm/devel/sparse/sparse.git
 
 DaveJ has hourly generated tarballs of the git tree available at..
 </pre><hr><pre>commit 2b0b39517d1af5294128dbc2fd7ed39c8effa540
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Fri Apr 16 08:01:20 2010 -0500

    jfs: fix diAllocExt error in resizing filesystem
    
    Resizing the filesystem would result in an diAllocExt error in some
    instances because changes in bmp-&gt;db_agsize would not get noticed if
    goto extendBmap was called.
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Dave Kleikamp &lt;shaggy@linux.vnet.ibm.com&gt;
    Cc: jfs-discussion@lists.sourceforge.net
    Cc: linux-kernel@vger.kernel.org

diff --git a/fs/jfs/resize.c b/fs/jfs/resize.c
index 7f24a0bb08ca..1aba0039f1c9 100644
--- a/fs/jfs/resize.c
+++ b/fs/jfs/resize.c
@@ -81,6 +81,7 @@ int jfs_extendfs(struct super_block *sb, s64 newLVSize, int newLogSize)
 	struct inode *iplist[1];
 	struct jfs_superblock *j_sb, *j_sb2;
 	uint old_agsize;
+	int agsizechanged = 0;
 	struct buffer_head *bh, *bh2;
 
 	/* If the volume hasn't grown, get out now */
@@ -333,6 +334,9 @@ int jfs_extendfs(struct super_block *sb, s64 newLVSize, int newLogSize)
 	 */
 	if ((rc = dbExtendFS(ipbmap, XAddress, nblocks)))
 		goto error_out;
+
+	agsizechanged |= (bmp-&gt;db_agsize != old_agsize);
+
 	/*
 	 * the map now has extended to cover additional nblocks:
 	 * dn_mapsize = oldMapsize + nblocks;
@@ -432,7 +436,7 @@ int jfs_extendfs(struct super_block *sb, s64 newLVSize, int newLogSize)
 	 * will correctly identify the new ag);
 	 */
 	/* if new AG size the same as old AG size, done! */
-	if (bmp-&gt;db_agsize != old_agsize) {
+	if (agsizechanged) {
 		if ((rc = diExtendFS(ipimap, ipbmap)))
 			goto error_out;
 </pre><hr><pre>commit 2386b331802b1b2664c35f9f4c7aef778aac725f
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Aug 6 15:22:01 2009 -0400

    Staging: serqt_usb2: fix qt_open parameters
    
    The parameter list for qt_open() was from the old non usb-serial
    driver.
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/serqt_usb2/serqt_usb2.c b/drivers/staging/serqt_usb2/serqt_usb2.c
index 0fdf8c6dc648..52af44cfbe83 100644
--- a/drivers/staging/serqt_usb2/serqt_usb2.c
+++ b/drivers/staging/serqt_usb2/serqt_usb2.c
@@ -874,7 +874,7 @@ static void qt_release(struct usb_serial *serial)
 }
 
 static int qt_open(struct tty_struct *tty,
-	    struct usb_serial_port *port, struct file *filp)
+		   struct usb_serial_port *port)
 {
 	struct usb_serial *serial;
 	struct quatech_port *quatech_port;</pre><hr><pre>commit 19d7810624d9a05d73c03b567145b7743c22b8a4
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Fri Sep 11 21:46:46 2009 -0400

    Staging: hv: Remove List.h
    
    List.h is no longer used and can be removed.
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Hank Janssen &lt;hjanssen@microsoft.com&gt;
    Cc: Haiyang Zhang &lt;haiyangz@microsoft.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/hv/List.h b/drivers/staging/hv/List.h
deleted file mode 100644
index 735a938a2189..000000000000
--- a/drivers/staging/hv/List.h
+++ /dev/null
@@ -1,263 +0,0 @@
-/*
- *
- * Copyright (c) 2009, Microsoft Corporation.
- *
- * This program is free software; you can redistribute it and/or modify it
- * under the terms and conditions of the GNU General Public License,
- * version 2, as published by the Free Software Foundation.
- *
- * This program is distributed in the hope it will be useful, but WITHOUT
- * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
- * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
- * more details.
- *
- * You should have received a copy of the GNU General Public License along with
- * this program; if not, write to the Free Software Foundation, Inc., 59 Temple
- * Place - Suite 330, Boston, MA 02111-1307 USA.
- *
- * Authors:
- *   Haiyang Zhang &lt;haiyangz@microsoft.com&gt;
- *   Hank Janssen  &lt;hjanssen@microsoft.com&gt;
- *
- */
-
-
-#ifndef _LIST_H_
-#define _LIST_H_
-
-/*
- *
- *  Doubly-linked list manipulation routines.  Implemented as macros
- *  but logically these are procedures.
- *
- */
-
-typedef struct _LIST_ENTRY {
-	struct _LIST_ENTRY *Flink;
-	struct _LIST_ENTRY *Blink;
-} LIST_ENTRY, *PLIST_ENTRY;
-
-/*
- *  void
- *  InitializeListHead(
- *      PLIST_ENTRY ListHead
- *      );
- */
-#define INITIALIZE_LIST_HEAD	InitializeListHead
-
-#define InitializeListHead(ListHead) (\
-    (ListHead)-&gt;Flink = (ListHead)-&gt;Blink = (ListHead))
-
-
-/*
- *  bool
- *  IsListEmpty(
- *      PLIST_ENTRY ListHead
- *      );
- */
-#define IS_LIST_EMPTY			IsListEmpty
-
-#define IsListEmpty(ListHead) \
-    ((ListHead)-&gt;Flink == (ListHead))
-
-
-/*
- *  PLIST_ENTRY
- *  NextListEntry(
- *      PLIST_ENTRY Entry
- *      );
- */
-#define	NEXT_LIST_ENTRY			NextListEntry
-
-#define NextListEntry(Entry) \
-    (Entry)-&gt;Flink
-
-
-/*
- *  PLIST_ENTRY
- *  PrevListEntry(
- *      PLIST_ENTRY Entry
- *      );
- */
-#define	PREV_LIST_ENTRY			PrevListEntry
-
-#define PrevListEntry(Entry) \
-    (Entry)-&gt;Blink
-
-
-/*
- *  PLIST_ENTRY
- *  TopListEntry(
- *      PLIST_ENTRY ListHead
- *      );
- */
-#define	TOP_LIST_ENTRY			TopListEntry
-
-#define TopListEntry(ListHead) \
-    (ListHead)-&gt;Flink
-
-
-
-/*
- *  PLIST_ENTRY
- *  RemoveHeadList(
- *      PLIST_ENTRY ListHead
- *      );
- */
-
-#define	REMOVE_HEAD_LIST		RemoveHeadList
-
-#define RemoveHeadList(ListHead) \
-    (ListHead)-&gt;Flink;\
-    {RemoveEntryList((ListHead)-&gt;Flink)}
-
-
-/*
- *  PLIST_ENTRY
- *  RemoveTailList(
- *      PLIST_ENTRY ListHead
- *      );
- */
-#define	REMOVE_TAIL_LIST		RemoveTailList
-
-#define RemoveTailList(ListHead) \
-    (ListHead)-&gt;Blink;\
-    {RemoveEntryList((ListHead)-&gt;Blink)}
-
-
-/*
- *  void
- *  RemoveEntryList(
- *      PLIST_ENTRY Entry
- *      );
- */
-#define	REMOVE_ENTRY_LIST		RemoveEntryList
-
-#define RemoveEntryList(Entry) {\
-    PLIST_ENTRY _EX_Flink = (Entry)-&gt;Flink;\
-    PLIST_ENTRY _EX_Blink = (Entry)-&gt;Blink;\
-    _EX_Blink-&gt;Flink = _EX_Flink;\
-    _EX_Flink-&gt;Blink = _EX_Blink;\
-	}
-
-
-/*
- *  void
- *  AttachList(
- *      PLIST_ENTRY ListHead,
- *      PLIST_ENTRY ListEntry
- *      );
- */
-#define	ATTACH_LIST		AttachList
-
-#define AttachList(ListHead,ListEntry) {\
-    PLIST_ENTRY _EX_ListHead = (ListHead);\
-    PLIST_ENTRY _EX_Blink = (ListHead)-&gt;Blink;\
-    (ListEntry)-&gt;Blink-&gt;Flink = _EX_ListHead;\
-    _EX_Blink-&gt;Flink = (ListEntry);\
-    _EX_ListHead-&gt;Blink = (ListEntry)-&gt;Blink;\
-    (ListEntry)-&gt;Blink = _EX_Blink;\
-    }
-
-
-
-/*
- *  void
- *  InsertTailList(
- *      PLIST_ENTRY ListHead,
- *      PLIST_ENTRY Entry
- *      );
- */
-
-#define	INSERT_TAIL_LIST		InsertTailList
-
-#define InsertTailList(ListHead,Entry) {\
-    PLIST_ENTRY _EX_ListHead = (ListHead);\
-    PLIST_ENTRY _EX_Blink = (ListHead)-&gt;Blink;\
-    (Entry)-&gt;Flink = _EX_ListHead;\
-    (Entry)-&gt;Blink = _EX_Blink;\
-    _EX_Blink-&gt;Flink = (Entry);\
-    _EX_ListHead-&gt;Blink = (Entry);\
-    }
-
-
-/*
- *  void
- *  InsertHeadList(
- *      PLIST_ENTRY ListHead,
- *      PLIST_ENTRY Entry
- *      );
- */
-#define	INSERT_HEAD_LIST		InsertHeadList
-
-#define InsertHeadList(ListHead,Entry) {\
-    PLIST_ENTRY _EX_ListHead = (ListHead);\
-    PLIST_ENTRY _EX_Flink = (ListHead)-&gt;Flink;\
-    (Entry)-&gt;Flink = _EX_Flink;\
-    (Entry)-&gt;Blink = _EX_ListHead;\
-    _EX_Flink-&gt;Blink = (Entry);\
-    _EX_ListHead-&gt;Flink = (Entry);\
-    }
-
-
-/*
- *  void
- *  IterateListEntries(
- *      PLIST_ENTRY anchor,
- *      PLIST_ENTRY index,
- *		PLIST_ENTRY listp
- *      );
- */
-
-#define	ITERATE_LIST_ENTRIES	IterateListEntries
-
-#define IterateListEntries(anchor, index, listp) \
-	(anchor) = (LIST_ENTRY *)(listp); \
-	for((index) = (anchor)-&gt;Flink; (index) != (anchor); (index) = (index)-&gt;Flink)
-
-
-
-/*
- *  PSINGLE_LIST_ENTRY
- *  PopEntryList(
- *      PSINGLE_LIST_ENTRY ListHead
- *      );
- */
-
-#define	POP_ENTRY_LIST		PopEntryList
-
-#define PopEntryList(ListHead) \
-    (ListHead)-&gt;Next;\
-    {\
-        PSINGLE_LIST_ENTRY FirstEntry;\
-        FirstEntry = (ListHead)-&gt;Next;\
-        if (FirstEntry != NULL) {     \
-            (ListHead)-&gt;Next = FirstEntry-&gt;Next;\
-        }                             \
-    }
-
-
-
-/*
- *  void
- *  PushEntryList(
- *      PSINGLE_LIST_ENTRY ListHead,
- *		PSINGLE_LIST_ENTRY Entry
- *      );
- */
-
-#define	PUSH_ENTRY_LIST			PushEntryList
-
-#define PushEntryList(ListHead,Entry) \
-    (Entry)-&gt;Next = (ListHead)-&gt;Next; \
-    (ListHead)-&gt;Next = (Entry)
-
-#ifndef CONTAINING_RECORD
-#define CONTAINING_RECORD(address, type, field) ((type *)( \
-                                                  (char *)(address) - \
-                                                  (char *)(&amp;((type *)0)-&gt;field)))
-#endif /* CONTAINING_RECORD */
-
-#endif /* _LIST_H_ */
-
-/* EOF */
diff --git a/drivers/staging/hv/NetVscApi.h b/drivers/staging/hv/NetVscApi.h
index 34e8fd79205c..1ce2b74a34a7 100644
--- a/drivers/staging/hv/NetVscApi.h
+++ b/drivers/staging/hv/NetVscApi.h
@@ -26,7 +26,6 @@
 #define _NETVSC_API_H_
 
 #include "VmbusApi.h"
-#include "List.h"
 
 /* Defines */
 #define NETVSC_DEVICE_RING_BUFFER_SIZE	(64*PAGE_SIZE)
diff --git a/drivers/staging/hv/TODO b/drivers/staging/hv/TODO
index fc754abc3ad6..1e272a77078f 100644
--- a/drivers/staging/hv/TODO
+++ b/drivers/staging/hv/TODO
@@ -1,7 +1,6 @@
 TODO:
 	- fix checkpatch warnings/errors
 	- fix sparse issues
-	- remove List.h usage to use in-kernel list.h instead
 	- remove RingBuffer.c to us in-kernel ringbuffer functions instead.
 	- fix HANDLE usage to be "real" pointers
 	- audit the vmbus to verify it is working properly with the</pre><hr><pre>commit 1f5459bcb1d944d3c1b4112fa14cac2eda981db8
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Fri Sep 11 21:46:45 2009 -0400

    Staging: hv: remove use of internal list routines in RndisFilter
    
    The hv driver has it's own linked list routines.  This removes them
    from RndisFilter.c
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Hank Janssen &lt;hjanssen@microsoft.com&gt;
    Cc: Haiyang Zhang &lt;haiyangz@microsoft.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/hv/RndisFilter.c b/drivers/staging/hv/RndisFilter.c
index cfe2f02f319e..26d79975387c 100644
--- a/drivers/staging/hv/RndisFilter.c
+++ b/drivers/staging/hv/RndisFilter.c
@@ -47,13 +47,13 @@ struct rndis_device {
 	atomic_t NewRequestId;
 
 	spinlock_t request_lock;
-	LIST_ENTRY RequestList;
+	struct list_head RequestList;
 
 	unsigned char HwMacAddr[HW_MACADDR_LEN];
 };
 
 struct rndis_request {
-	LIST_ENTRY ListEntry;
+	struct list_head ListEntry;
 	struct osd_waitevent *WaitEvent;
 
 	/*
@@ -110,7 +110,7 @@ static struct rndis_device *GetRndisDevice(void)
 
 	spin_lock_init(&amp;device-&gt;request_lock);
 
-	INITIALIZE_LIST_HEAD(&amp;device-&gt;RequestList);
+	INIT_LIST_HEAD(&amp;device-&gt;RequestList);
 
 	device-&gt;State = RNDIS_DEV_UNINITIALIZED;
 
@@ -150,7 +150,7 @@ static struct rndis_request *GetRndisRequest(struct rndis_device *Device,
 
 	/* Add to the request list */
 	spin_lock_irqsave(&amp;Device-&gt;request_lock, flags);
-	INSERT_TAIL_LIST(&amp;Device-&gt;RequestList, &amp;request-&gt;ListEntry);
+	list_add_tail(&amp;request-&gt;ListEntry, &amp;Device-&gt;RequestList);
 	spin_unlock_irqrestore(&amp;Device-&gt;request_lock, flags);
 
 	return request;
@@ -162,7 +162,7 @@ static void PutRndisRequest(struct rndis_device *Device,
 	unsigned long flags;
 
 	spin_lock_irqsave(&amp;Device-&gt;request_lock, flags);
-	REMOVE_ENTRY_LIST(&amp;Request-&gt;ListEntry);
+	list_del(&amp;Request-&gt;ListEntry);
 	spin_unlock_irqrestore(&amp;Device-&gt;request_lock, flags);
 
 	kfree(Request-&gt;WaitEvent);
@@ -273,8 +273,6 @@ static int RndisFilterSendRequest(struct rndis_device *Device,
 static void RndisFilterReceiveResponse(struct rndis_device *Device,
 				       struct rndis_message *Response)
 {
-	LIST_ENTRY *anchor;
-	LIST_ENTRY *curr;
 	struct rndis_request *request = NULL;
 	bool found = false;
 	unsigned long flags;
@@ -282,10 +280,7 @@ static void RndisFilterReceiveResponse(struct rndis_device *Device,
 	DPRINT_ENTER(NETVSC);
 
 	spin_lock_irqsave(&amp;Device-&gt;request_lock, flags);
-	ITERATE_LIST_ENTRIES(anchor, curr, &amp;Device-&gt;RequestList) {
-		request = CONTAINING_RECORD(curr, struct rndis_request,
-					    ListEntry);
-
+	list_for_each_entry(request, &amp;Device-&gt;RequestList, ListEntry) {
 		/*
 		 * All request/response message contains RequestId as the 1st
 		 * field</pre>
    <div class="pagination">
        <a href='3_47.html'>&lt;&lt;Prev</a><a href='3.html'>1</a><a href='3_2.html'>2</a><a href='3_3.html'>3</a><a href='3_4.html'>4</a><a href='3_5.html'>5</a><a href='3_6.html'>6</a><a href='3_7.html'>7</a><a href='3_8.html'>8</a><a href='3_9.html'>9</a><a href='3_10.html'>10</a><a href='3_11.html'>11</a><a href='3_12.html'>12</a><a href='3_13.html'>13</a><a href='3_14.html'>14</a><a href='3_15.html'>15</a><a href='3_16.html'>16</a><a href='3_17.html'>17</a><a href='3_18.html'>18</a><a href='3_19.html'>19</a><a href='3_20.html'>20</a><a href='3_21.html'>21</a><a href='3_22.html'>22</a><a href='3_23.html'>23</a><a href='3_24.html'>24</a><a href='3_25.html'>25</a><a href='3_26.html'>26</a><a href='3_27.html'>27</a><a href='3_28.html'>28</a><a href='3_29.html'>29</a><a href='3_30.html'>30</a><a href='3_31.html'>31</a><a href='3_32.html'>32</a><a href='3_33.html'>33</a><a href='3_34.html'>34</a><a href='3_35.html'>35</a><a href='3_36.html'>36</a><a href='3_37.html'>37</a><a href='3_38.html'>38</a><a href='3_39.html'>39</a><a href='3_40.html'>40</a><a href='3_41.html'>41</a><a href='3_42.html'>42</a><a href='3_43.html'>43</a><a href='3_44.html'>44</a><a href='3_45.html'>45</a><a href='3_46.html'>46</a><a href='3_47.html'>47</a><span>[48]</span><a href='3_49.html'>49</a><a href='3_50.html'>50</a><a href='3_51.html'>51</a><a href='3_52.html'>52</a><a href='3_53.html'>53</a><a href='3_54.html'>54</a><a href='3_55.html'>55</a><a href='3_56.html'>56</a><a href='3_57.html'>57</a><a href='3_58.html'>58</a><a href='3_59.html'>59</a><a href='3_60.html'>60</a><a href='3_61.html'>61</a><a href='3_62.html'>62</a><a href='3_63.html'>63</a><a href='3_64.html'>64</a><a href='3_65.html'>65</a><a href='3_66.html'>66</a><a href='3_67.html'>67</a><a href='3_68.html'>68</a><a href='3_69.html'>69</a><a href='3_70.html'>70</a><a href='3_71.html'>71</a><a href='3_72.html'>72</a><a href='3_73.html'>73</a><a href='3_74.html'>74</a><a href='3_75.html'>75</a><a href='3_76.html'>76</a><a href='3_77.html'>77</a><a href='3_78.html'>78</a><a href='3_79.html'>79</a><a href='3_80.html'>80</a><a href='3_81.html'>81</a><a href='3_82.html'>82</a><a href='3_83.html'>83</a><a href='3_49.html'>Next&gt;&gt;</a>
    <div>
</body>

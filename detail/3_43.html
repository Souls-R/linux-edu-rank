<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of Virginia, Charlottesville</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of Virginia, Charlottesville</h1>
    <div class="pagination">
        <a href='3_42.html'>&lt;&lt;Prev</a><a href='3.html'>1</a><a href='3_2.html'>2</a><a href='3_3.html'>3</a><a href='3_4.html'>4</a><a href='3_5.html'>5</a><a href='3_6.html'>6</a><a href='3_7.html'>7</a><a href='3_8.html'>8</a><a href='3_9.html'>9</a><a href='3_10.html'>10</a><a href='3_11.html'>11</a><a href='3_12.html'>12</a><a href='3_13.html'>13</a><a href='3_14.html'>14</a><a href='3_15.html'>15</a><a href='3_16.html'>16</a><a href='3_17.html'>17</a><a href='3_18.html'>18</a><a href='3_19.html'>19</a><a href='3_20.html'>20</a><a href='3_21.html'>21</a><a href='3_22.html'>22</a><a href='3_23.html'>23</a><a href='3_24.html'>24</a><a href='3_25.html'>25</a><a href='3_26.html'>26</a><a href='3_27.html'>27</a><a href='3_28.html'>28</a><a href='3_29.html'>29</a><a href='3_30.html'>30</a><a href='3_31.html'>31</a><a href='3_32.html'>32</a><a href='3_33.html'>33</a><a href='3_34.html'>34</a><a href='3_35.html'>35</a><a href='3_36.html'>36</a><a href='3_37.html'>37</a><a href='3_38.html'>38</a><a href='3_39.html'>39</a><a href='3_40.html'>40</a><a href='3_41.html'>41</a><a href='3_42.html'>42</a><span>[43]</span><a href='3_44.html'>44</a><a href='3_45.html'>45</a><a href='3_46.html'>46</a><a href='3_47.html'>47</a><a href='3_48.html'>48</a><a href='3_49.html'>49</a><a href='3_50.html'>50</a><a href='3_51.html'>51</a><a href='3_52.html'>52</a><a href='3_53.html'>53</a><a href='3_54.html'>54</a><a href='3_55.html'>55</a><a href='3_56.html'>56</a><a href='3_57.html'>57</a><a href='3_58.html'>58</a><a href='3_59.html'>59</a><a href='3_60.html'>60</a><a href='3_61.html'>61</a><a href='3_62.html'>62</a><a href='3_63.html'>63</a><a href='3_64.html'>64</a><a href='3_65.html'>65</a><a href='3_66.html'>66</a><a href='3_67.html'>67</a><a href='3_68.html'>68</a><a href='3_69.html'>69</a><a href='3_70.html'>70</a><a href='3_71.html'>71</a><a href='3_72.html'>72</a><a href='3_73.html'>73</a><a href='3_74.html'>74</a><a href='3_75.html'>75</a><a href='3_76.html'>76</a><a href='3_77.html'>77</a><a href='3_78.html'>78</a><a href='3_79.html'>79</a><a href='3_80.html'>80</a><a href='3_81.html'>81</a><a href='3_82.html'>82</a><a href='3_83.html'>83</a><a href='3_44.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit 108afbf8aef6520f2f34b3add94b059b60c44139
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Jun 17 13:10:47 2010 -0400

    Staging: xgifb: Remove SHORT, UCHAR, and LONG typedef
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Arnaud Patard &lt;apatard@mandriva.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/xgifb/XGI_main.h b/drivers/staging/xgifb/XGI_main.h
index fcb1816e387a..472d124be346 100644
--- a/drivers/staging/xgifb/XGI_main.h
+++ b/drivers/staging/xgifb/XGI_main.h
@@ -888,7 +888,7 @@ unsigned char         XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ex
 
 
 /* Routines from init.c/init301.c */
-extern void     InitTo330Pointer(UCHAR,PVB_DEVICE_INFO pVBInfo);
+extern void     InitTo330Pointer(unsigned char, PVB_DEVICE_INFO pVBInfo);
 extern unsigned char  XGIInitNew(PXGI_HW_DEVICE_INFO HwDeviceExtension);
 extern unsigned char XGISetModeNew(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 			     unsigned short ModeNo);
diff --git a/drivers/staging/xgifb/vb_ext.c b/drivers/staging/xgifb/vb_ext.c
index aabab059e5c9..f1566380e149 100644
--- a/drivers/staging/xgifb/vb_ext.c
+++ b/drivers/staging/xgifb/vb_ext.c
@@ -9,8 +9,8 @@
 #include "vb_util.h"
 #include "vb_setmode.h"
 #include "vb_ext.h"
-extern   UCHAR XGI330_SoftSetting;
-extern   UCHAR XGI330_OutputSelect;
+extern   unsigned char XGI330_SoftSetting;
+extern   unsigned char XGI330_OutputSelect;
 extern   unsigned short XGI330_RGBSenseData2;
 extern   unsigned short XGI330_YCSenseData2;
 extern   unsigned short XGI330_VideoSenseData2;
@@ -139,7 +139,7 @@ void XGISetDPMS(PXGI_HW_DEVICE_INFO pXGIHWDE,
 		unsigned long VESA_POWER_STATE)
 {
     unsigned short ModeNo, ModeIdIndex;
-    UCHAR  temp ;
+    unsigned char temp;
     VB_DEVICE_INFO VBINF;
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
     pVBInfo-&gt;BaseAddr = (unsigned long)pXGIHWDE-&gt;pjIOAddress ;
@@ -209,18 +209,18 @@ void XGISetDPMS(PXGI_HW_DEVICE_INFO pXGIHWDE,
     }
 
     if ( VESA_POWER_STATE == 0x00000400 )
-      XGINew_SetReg1( pVBInfo-&gt;Part4Port , 0x31 , ( UCHAR )( XGINew_GetReg1( pVBInfo-&gt;Part4Port , 0x31 ) &amp; 0xFE ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;Part4Port, 0x31, (unsigned char)(XGINew_GetReg1(pVBInfo-&gt;Part4Port, 0x31) &amp; 0xFE));
     else
-      XGINew_SetReg1( pVBInfo-&gt;Part4Port , 0x31 , ( UCHAR )( XGINew_GetReg1( pVBInfo-&gt;Part4Port , 0x31 ) | 0x01 ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;Part4Port, 0x31, (unsigned char)(XGINew_GetReg1(pVBInfo-&gt;Part4Port, 0x31) | 0x01));
 
-    temp = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x1f ) ;
+    temp = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x1f);
     temp &amp;= 0x3f ;
     switch ( VESA_POWER_STATE )
     {
         case 0x00000000: /* on */
             if ( ( pXGIHWDE-&gt;ujVBChipID == VB_CHIP_301 ) || ( pXGIHWDE-&gt;ujVBChipID == VB_CHIP_302 ) )
             {
-                XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x1f , ( UCHAR )( temp | 0x00 ) ) ;
+		XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x1f, (unsigned char)(temp | 0x00));
                 XGI_EnableBridge( pXGIHWDE, pVBInfo ) ;
             }
             else
@@ -278,7 +278,7 @@ void XGISetDPMS(PXGI_HW_DEVICE_INFO pXGIHWDE,
                 XGI_DisplayOff( pXGIHWDE, pVBInfo );
             }
 
-            XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x1f , ( UCHAR )( temp | 0x40 ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x1f, (unsigned char)(temp | 0x40));
             break ;
         case 0x00000200: /* suspend */
             if ( pXGIHWDE-&gt;jChipType == XG21 )
@@ -291,12 +291,12 @@ void XGISetDPMS(PXGI_HW_DEVICE_INFO pXGIHWDE,
                 XGI_DisplayOff( pXGIHWDE, pVBInfo );
                 XGI_XG27BLSignalVDD( 0x20 , 0x00, pVBInfo ) ; /* LVDS signal off */
             }
-            XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x1f , ( UCHAR )( temp | 0x80 ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x1f, (unsigned char)(temp | 0x80));
             break ;
         case 0x00000400: /* off */
             if ( (pXGIHWDE-&gt;ujVBChipID == VB_CHIP_301 ) || ( pXGIHWDE-&gt;ujVBChipID == VB_CHIP_302 ) )
             {
-                XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x1f , ( UCHAR )( temp | 0xc0 ) ) ;
+		XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x1f, (unsigned char)(temp | 0xc0));
                 XGI_DisableBridge( pXGIHWDE, pVBInfo ) ;
             }
             else
@@ -837,7 +837,7 @@ void XGI_XG21Fun14Sub70( PVB_DEVICE_INFO pVBInfo , PX86_REGS pBiosArguments )
         ModeNo = pVBInfo-&gt;EModeIDTable[ ModeIdIndex ].Ext_ModeID;
         if ( pVBInfo-&gt;EModeIDTable[ ModeIdIndex ].Ext_ModeID == 0xFF )
         {
-            pBiosArguments-&gt;h.bh = (UCHAR) EModeCount;
+	    pBiosArguments-&gt;h.bh = (unsigned char) EModeCount;
             return;
         }
         if ( !XGI_XG21CheckLVDSMode( ModeNo , ModeIdIndex, pVBInfo) )
@@ -883,7 +883,7 @@ void XGI_XG21Fun14Sub71( PVB_DEVICE_INFO pVBInfo , PX86_REGS pBiosArguments )
         if (EModeCount == EModeIndex)
         {
             resindex = XGI_GetResInfo( ModeNo , ModeIdIndex, pVBInfo ) ;
-            pBiosArguments-&gt;h.bl = (UCHAR) ModeNo;
+	    pBiosArguments-&gt;h.bl = (unsigned char) ModeNo;
             pBiosArguments-&gt;x.cx = pVBInfo-&gt;ModeResInfo[ resindex ].HTotal ;			  /* xres-&gt;ax */
             pBiosArguments-&gt;x.dx = pVBInfo-&gt;ModeResInfo[ resindex ].VTotal ;			  /* yres-&gt;bx */
             pBiosArguments-&gt;x.ax = 0x0014;
@@ -966,7 +966,7 @@ void XGI_XG21Fun14Sub72( PVB_DEVICE_INFO pVBInfo , PX86_REGS pBiosArguments )
 */
 void XGI_XG21Fun14Sub73( PVB_DEVICE_INFO pVBInfo , PX86_REGS pBiosArguments )
 {
-    UCHAR Select;
+    unsigned char Select;
 
     unsigned short lvdstableindex;
 
diff --git a/drivers/staging/xgifb/vb_ext.h b/drivers/staging/xgifb/vb_ext.h
index 5cb1862d9542..768aebefc415 100644
--- a/drivers/staging/xgifb/vb_ext.h
+++ b/drivers/staging/xgifb/vb_ext.h
@@ -11,7 +11,8 @@ struct WORDREGS {
 };
 
 struct BYTEREGS {
-    UCHAR   al, ah, hi_al, hi_ah, bl, bh, hi_bl, hi_bh, cl, ch, hi_cl, hi_ch, dl, dh, hi_dl, hi_dh;
+     unsigned char al, ah, hi_al, hi_ah, bl, bh, hi_bl, hi_bh, cl, ch,
+	     hi_cl, hi_ch, dl, dh, hi_dl, hi_dh;
 };
 
 typedef union   _X86_REGS    {
@@ -25,7 +26,8 @@ extern void XGISetDPMS(PXGI_HW_DEVICE_INFO pXGIHWDE,
 		       unsigned long VESA_POWER_STATE);
 extern   void     XGI_GetSenseStatus( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo );
 extern   void     XGINew_SetModeScratch ( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo ) ;
-extern   void 	  ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo);
+extern void ReadVBIOSTablData(unsigned char ChipType,
+			      PVB_DEVICE_INFO pVBInfo);
 extern unsigned short XGINew_SenseLCD(PXGI_HW_DEVICE_INFO,
 				      PVB_DEVICE_INFO pVBInfo);
 
diff --git a/drivers/staging/xgifb/vb_init.c b/drivers/staging/xgifb/vb_init.c
index 3f0e34bd0d05..343be2527a0e 100644
--- a/drivers/staging/xgifb/vb_init.c
+++ b/drivers/staging/xgifb/vb_init.c
@@ -18,7 +18,7 @@
 
 
 
-UCHAR    XGINew_ChannelAB,XGINew_DataBusWidth;
+unsigned char XGINew_ChannelAB, XGINew_DataBusWidth;
 
 unsigned short XGINew_DRAMType[17][5] = {
 	{0x0C, 0x0A, 0x02, 0x40, 0x39}, {0x0D, 0x0A, 0x01, 0x40, 0x48},
@@ -79,8 +79,9 @@ void     XGINew_SetDRAMModeRegister(PVB_DEVICE_INFO );
 void     XGINew_SetDRAMModeRegister340( PXGI_HW_DEVICE_INFO HwDeviceExtension );
 void XGINew_SetDRAMDefaultRegister340(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 				      unsigned long, PVB_DEVICE_INFO);
-UCHAR    XGINew_GetXG20DRAMType( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo);
-unsigned char  XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension) ;
+unsigned char XGINew_GetXG20DRAMType(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+				     PVB_DEVICE_INFO pVBInfo);
+unsigned char XGIInitNew(PXGI_HW_DEVICE_INFO HwDeviceExtension);
 
 int      XGINew_DDRSizing340( PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO );
 void     XGINew_DisableRefresh( PXGI_HW_DEVICE_INFO ,PVB_DEVICE_INFO) ;
@@ -90,20 +91,20 @@ int      XGINew_DDRSizing( PVB_DEVICE_INFO );
 void     XGINew_EnableRefresh( PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO);
 int      XGINew_RAMType;                  /*int      ModeIDOffset,StandTable,CRT1Table,ScreenOffset,REFIndex;*/
 unsigned long	 UNIROM;			  /* UNIROM */
-unsigned char  ChkLFB( PVB_DEVICE_INFO );
+unsigned char  ChkLFB(PVB_DEVICE_INFO);
 void     XGINew_Delay15us(unsigned long);
 void     SetPowerConsume(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 			 unsigned long XGI_P3d4Port);
-void 	 ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo);
+void     ReadVBIOSTablData(unsigned char ChipType, PVB_DEVICE_INFO pVBInfo);
 void     XGINew_DDR1x_MRS_XG20(unsigned long P3c4, PVB_DEVICE_INFO pVBInfo);
 void     XGINew_SetDRAMModeRegister_XG20( PXGI_HW_DEVICE_INFO HwDeviceExtension );
 void     XGINew_SetDRAMModeRegister_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension );
 void 	 XGINew_ChkSenseStatus ( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo ) ;
 void     XGINew_SetModeScratch ( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo ) ;
 void     XGINew_GetXG21Sense(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo) ;
-UCHAR    GetXG21FPBits(PVB_DEVICE_INFO pVBInfo);
+unsigned char    GetXG21FPBits(PVB_DEVICE_INFO pVBInfo);
 void     XGINew_GetXG27Sense(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo) ;
-UCHAR    GetXG27FPBits(PVB_DEVICE_INFO pVBInfo);
+unsigned char    GetXG27FPBits(PVB_DEVICE_INFO pVBInfo);
 
 void DelayUS(unsigned long MicroSeconds)
 {
@@ -117,12 +118,12 @@ void DelayUS(unsigned long MicroSeconds)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-unsigned char XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension )
+unsigned char XGIInitNew(PXGI_HW_DEVICE_INFO HwDeviceExtension)
 {
 
     VB_DEVICE_INFO VBINF;
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
-    UCHAR   i , temp = 0 , temp1 ;
+    unsigned char   i, temp = 0, temp1 ;
      //       VBIOSVersion[ 5 ] ;
     volatile unsigned char *pVideoMemory;
 
@@ -363,8 +364,8 @@ printk("15");
     XGI_UnLockCRT2( HwDeviceExtension, pVBInfo) ;
     XGINew_SetRegANDOR( pVBInfo-&gt;Part0Port , 0x3F , 0xEF , 0x00 ) ;	/* alan, disable VideoCapture */
     XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x00 , 0x00 ) ;
-    temp1 = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x7B ) ;		/* chk if BCLK&gt;=100MHz */
-    temp = ( UCHAR )( ( temp1 &gt;&gt; 4 ) &amp; 0x0F ) ;
+    temp1 = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x7B);	/* chk if BCLK&gt;=100MHz */
+    temp = (unsigned char)((temp1 &gt;&gt; 4) &amp; 0x0F);
 
 
         XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x02 , ( *pVBInfo-&gt;pCRT2Data_1_2 ) ) ;
@@ -489,7 +490,7 @@ printk("22");
     /* SetDefExt2Regs begin */
 /*
     AGP = 1 ;
-    temp =( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x3A ) ;
+    temp =(unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x3A) ;
     temp &amp;= 0x30 ;
     if ( temp == 0x30 )
         AGP = 0 ;
@@ -508,7 +509,7 @@ printk("22");
 //    Temp = ( InPortLong( 0xcfc ) &amp; 0xFFFF ) ;
 //    if ( Temp == 0x1039 )
 //    {
-        XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x22 , ( UCHAR )( ( *pVBInfo-&gt;pSR22 ) &amp; 0xFE ) ) ;
+	XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x22, (unsigned char)((*pVBInfo-&gt;pSR22) &amp; 0xFE));
 //    }
 //    else
 //    {
@@ -545,9 +546,10 @@ return 1;
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGINew_GetXG20DRAMType( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo)
+unsigned char XGINew_GetXG20DRAMType(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+				     PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR data, temp ;
+    unsigned char data, temp;
 
     if ( HwDeviceExtension-&gt;jChipType &lt; XG20 )
     {
@@ -615,9 +617,9 @@ UCHAR XGINew_GetXG20DRAMType( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGINew_Get310DRAMType(PVB_DEVICE_INFO pVBInfo)
+unsigned char XGINew_Get310DRAMType(PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR data ;
+    unsigned char data ;
 
   /* index = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x1A ) ; */
   /* index &amp;= 07 ; */
@@ -1104,7 +1106,7 @@ void XGINew_DDR2_DefaultRegister(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 void XGINew_SetDRAMDefaultRegister340(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 				      unsigned long Port, PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR temp , temp1 , temp2 , temp3 ,
+    unsigned char temp, temp1, temp2, temp3 ,
           i , j , k ;
 
     unsigned long P3d4 = Port ,
@@ -1316,7 +1318,7 @@ void XGINew_DDR_MRS(PVB_DEVICE_INFO pVBInfo)
 void XGINew_VerifyMclk( PXGI_HW_DEVICE_INFO  HwDeviceExtension , PVB_DEVICE_INFO pVBInfo)
 {
     unsigned char *pVideoMemory = pVBInfo-&gt;FBAddr ;
-    UCHAR i , j ;
+    unsigned char i, j ;
     unsigned short Temp , SR21 ;
 
     pVideoMemory[ 0 ] = 0xaa ; 		/* alan */
@@ -1454,7 +1456,7 @@ void XGINew_SetDRAMSize_310( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_
 
 void XGINew_SetDRAMModeRegister340( PXGI_HW_DEVICE_INFO HwDeviceExtension )
 {
-    UCHAR data ;
+    unsigned char data ;
     VB_DEVICE_INFO VBINF;
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
@@ -1749,8 +1751,8 @@ void XGINew_CheckBusWidth_310(  PVB_DEVICE_INFO pVBInfo)
 /* Description : */
 /* --------------------------------------------------------------------- */
 int XGINew_SetRank(int index,
-		   UCHAR RankNo,
-		   UCHAR XGINew_ChannelAB,
+		   unsigned char RankNo,
+		   unsigned char XGINew_ChannelAB,
 		   unsigned short DRAMTYPE_TABLE[][5],
 		   PVB_DEVICE_INFO pVBInfo)
 {
@@ -1790,8 +1792,8 @@ int XGINew_SetRank(int index,
 /* Description : */
 /* --------------------------------------------------------------------- */
 int XGINew_SetDDRChannel(int index,
-			 UCHAR ChannelNo,
-			 UCHAR XGINew_ChannelAB,
+			 unsigned char ChannelNo,
+			 unsigned char XGINew_ChannelAB,
 			 unsigned short DRAMTYPE_TABLE[][5],
 			 PVB_DEVICE_INFO pVBInfo)
 {
@@ -2035,7 +2037,7 @@ int XGINew_CheckDDRRanks(int RankNo, int index,
 int XGINew_SDRSizing(PVB_DEVICE_INFO pVBInfo)
 {
     int    i ;
-    UCHAR  j ;
+    unsigned char  j ;
 
     for( i = 0 ; i &lt; 13 ; i++ )
     {
@@ -2043,7 +2045,8 @@ int XGINew_SDRSizing(PVB_DEVICE_INFO pVBInfo)
 
         for( j = 2 ; j &gt; 0 ; j-- )
         {
-            if ( !XGINew_SetRank( i , ( UCHAR )j , XGINew_ChannelAB , XGINew_SDRDRAM_TYPE , pVBInfo) )
+	    if (!XGINew_SetRank(i, (unsigned char)j, XGINew_ChannelAB,
+				 XGINew_SDRDRAM_TYPE, pVBInfo))
                 continue ;
             else
             {
@@ -2068,7 +2071,7 @@ unsigned short XGINew_SetDRAMSizeReg(int index,
 {
     unsigned short data = 0 , memsize = 0;
     int RankSize ;
-    UCHAR ChannelNo ;
+    unsigned char ChannelNo ;
 
     RankSize = DRAMTYPE_TABLE[ index ][ 3 ] * XGINew_DataBusWidth / 32 ;
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x13 ) ;
@@ -2119,7 +2122,7 @@ unsigned short XGINew_SetDRAMSize20Reg(int index,
 {
     unsigned short data = 0 , memsize = 0;
     int RankSize ;
-    UCHAR ChannelNo ;
+    unsigned char ChannelNo ;
 
     RankSize = DRAMTYPE_TABLE[ index ][ 3 ] * XGINew_DataBusWidth / 8 ;
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x13 ) ;
@@ -2202,9 +2205,9 @@ int XGINew_ReadWriteRest(unsigned short StopAddr, unsigned short StartAddr,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGINew_CheckFrequence( PVB_DEVICE_INFO pVBInfo )
+unsigned char XGINew_CheckFrequence(PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR data ;
+    unsigned char data ;
 
     data = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x97 ) ;
 
@@ -2227,7 +2230,7 @@ UCHAR XGINew_CheckFrequence( PVB_DEVICE_INFO pVBInfo )
 /* --------------------------------------------------------------------- */
 void XGINew_CheckChannel( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR data;
+    unsigned char data;
 
     switch( HwDeviceExtension-&gt;jChipType )
     {
@@ -2564,7 +2567,7 @@ int XGINew_DDRSizing340( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
 int XGINew_DDRSizing(PVB_DEVICE_INFO pVBInfo)
 {
     int    i ;
-    UCHAR  j ;
+    unsigned char  j ;
 
     for( i = 0 ; i &lt; 4 ; i++ )
     {
@@ -2573,7 +2576,8 @@ int XGINew_DDRSizing(PVB_DEVICE_INFO pVBInfo)
         for( j = 2 ; j &gt; 0 ; j-- )
         {
             XGINew_SetDDRChannel( i , j , XGINew_ChannelAB , XGINew_DDRDRAM_TYPE , pVBInfo ) ;
-            if ( !XGINew_SetRank( i , ( UCHAR )j , XGINew_ChannelAB , XGINew_DDRDRAM_TYPE, pVBInfo ) )
+	    if (!XGINew_SetRank(i, (unsigned char)j, XGINew_ChannelAB,
+				XGINew_DDRDRAM_TYPE, pVBInfo))
                 continue ;
             else
             {
@@ -2612,9 +2616,7 @@ void XGINew_SetMemoryClock( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_IN
       if ( ( pVBInfo-&gt;MCLKData[ XGINew_RAMType ].SR28 == 0x1C ) &amp;&amp; ( pVBInfo-&gt;MCLKData[ XGINew_RAMType ].SR29 == 0x01 )
         &amp;&amp; ( ( ( pVBInfo-&gt;ECLKData[ XGINew_RAMType ].SR2E == 0x1C ) &amp;&amp; ( pVBInfo-&gt;ECLKData[ XGINew_RAMType ].SR2F == 0x01 ) )
         || ( ( pVBInfo-&gt;ECLKData[ XGINew_RAMType ].SR2E == 0x22 ) &amp;&amp; ( pVBInfo-&gt;ECLKData[ XGINew_RAMType ].SR2F == 0x01 ) ) ) )
-      {
-      	XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x32 , ( ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x32 ) &amp; 0xFC ) | 0x02 ) ;
-      }
+	      XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x32, ((unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x32) &amp; 0xFC) | 0x02);
     }
 }
 
@@ -2625,7 +2627,7 @@ void XGINew_SetMemoryClock( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_IN
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-unsigned char ChkLFB( PVB_DEVICE_INFO pVBInfo )
+unsigned char ChkLFB(PVB_DEVICE_INFO pVBInfo)
 {
 	if (LFBDRAMTrap &amp; XGINew_GetReg1(pVBInfo-&gt;P3d4 , 0x78))
 		return 1;
@@ -2646,14 +2648,14 @@ void SetPowerConsume(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 		     unsigned long XGI_P3d4Port)
 {
     unsigned long   lTemp ;
-    UCHAR   bTemp;
+    unsigned char   bTemp;
 
     HwDeviceExtension-&gt;pQueryVGAConfigSpace( HwDeviceExtension , 0x08 , 0 , &amp;lTemp ) ; /* Get */
     if ((lTemp&amp;0xFF)==0)
     {
         /* set CR58 D[5]=0 D[3]=0 */
         XGINew_SetRegAND( XGI_P3d4Port , 0x58 , 0xD7 ) ;
-        bTemp = (UCHAR) XGINew_GetReg1( XGI_P3d4Port , 0xCB ) ;
+	bTemp = (unsigned char) XGINew_GetReg1(XGI_P3d4Port, 0xCB);
     	if (bTemp&amp;0x20)
     	{
             if (!(bTemp&amp;0x10))
@@ -2720,11 +2722,11 @@ void XGINew_InitVBIOSData(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo)
+void ReadVBIOSTablData(unsigned char ChipType, PVB_DEVICE_INFO pVBInfo)
 {
 	volatile unsigned char *pVideoMemory = (unsigned char *)pVBInfo-&gt;ROMAddr;
     unsigned long   i ;
-    UCHAR   j , k ;
+    unsigned char   j, k ;
     /* Volari customize data area end */
 
     if ( ChipType == XG21 )
@@ -2910,7 +2912,7 @@ void XGINew_SetDRAMModeRegister_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension )
 void XGINew_SetDRAMModeRegister_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension )
 {
 
-    UCHAR data ;
+    unsigned char data ;
     VB_DEVICE_INFO VBINF;
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
@@ -3114,7 +3116,7 @@ void XGINew_SetModeScratch ( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_
 /* -------------------------------------------------------- */
 void XGINew_GetXG21Sense(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR Temp;
+    unsigned char Temp;
     volatile unsigned char *pVideoMemory = (unsigned char *)pVBInfo-&gt;ROMAddr;
 
     pVBInfo-&gt;IF_DEF_LVDS = 0 ;
@@ -3156,7 +3158,7 @@ void XGINew_GetXG21Sense(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
 /* -------------------------------------------------------- */
 void XGINew_GetXG27Sense(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR Temp,bCR4A;
+	unsigned char Temp, bCR4A;
 
      pVBInfo-&gt;IF_DEF_LVDS = 0 ;
      bCR4A = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x4A ) ;
@@ -3178,9 +3180,9 @@ void XGINew_GetXG27Sense(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
 
 }
 
-UCHAR GetXG21FPBits(PVB_DEVICE_INFO pVBInfo)
+unsigned char GetXG21FPBits(PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR CR38,CR4A,temp;
+	unsigned char CR38, CR4A, temp;
 
     CR4A = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x4A ) ;
     XGINew_SetRegANDOR( pVBInfo-&gt;P3d4 , 0x4A , ~0x10 , 0x10 ) ; /* enable GPIOE read */
@@ -3198,9 +3200,9 @@ UCHAR GetXG21FPBits(PVB_DEVICE_INFO pVBInfo)
     return temp;
 }
 
-UCHAR GetXG27FPBits(PVB_DEVICE_INFO pVBInfo)
+unsigned char GetXG27FPBits(PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR CR4A,temp;
+	unsigned char CR4A, temp;
 
     CR4A = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x4A ) ;
     XGINew_SetRegANDOR( pVBInfo-&gt;P3d4 , 0x4A , ~0x03 , 0x03 ) ; /* enable GPIOA/B/C read */
diff --git a/drivers/staging/xgifb/vb_setmode.c b/drivers/staging/xgifb/vb_setmode.c
index f27259e80987..5a74c595d78a 100644
--- a/drivers/staging/xgifb/vb_setmode.c
+++ b/drivers/staging/xgifb/vb_setmode.c
@@ -42,7 +42,7 @@ unsigned char  XGI_GetLCDInfo(unsigned short ModeNo,
 unsigned char  XGISetModeNew(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 		       unsigned short ModeNo);
 unsigned char  XGI_BridgeIsOn(PVB_DEVICE_INFO pVBInfo);
-UCHAR    XGI_GetModePtr(unsigned short ModeNo,
+unsigned char    XGI_GetModePtr(unsigned short ModeNo,
 			unsigned short ModeIdIndex,
 			PVB_DEVICE_INFO pVBInfo);
 unsigned short XGI_GetOffset(unsigned short ModeNo,
@@ -131,7 +131,7 @@ void     XGI_GetVBType(PVB_DEVICE_INFO  pVBInfo);
 void     XGI_GetVBInfo(unsigned short ModeNo, unsigned short ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo);
 void     XGI_GetTVInfo(unsigned short ModeNo, unsigned short ModeIdIndex,PVB_DEVICE_INFO  pVBInfo);
 void     XGI_SetCRT2ECLK(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PVB_DEVICE_INFO  pVBInfo);
-void     InitTo330Pointer(UCHAR,PVB_DEVICE_INFO pVBInfo);
+void     InitTo330Pointer(unsigned char, PVB_DEVICE_INFO pVBInfo);
 void     XGI_GetLCDSync(unsigned short *HSyncWidth, unsigned short *VSyncWidth, PVB_DEVICE_INFO pVBInfo);
 void 	 XGI_DisableBridge(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
 void  	 XGI_EnableBridge(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
@@ -146,7 +146,8 @@ void     XGI_SetAntiFlicker(unsigned short ModeNo, unsigned short ModeIdIndex, P
 void     XGI_SetEdgeEnhance(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetPhaseIncr(PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetYFilter(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_GetTVPtrIndex2(unsigned short *tempbx,UCHAR* tempcl,UCHAR* tempch, PVB_DEVICE_INFO pVBInfo);
+void     XGI_GetTVPtrIndex2(unsigned short *tempbx, unsigned char* tempcl,
+			    unsigned char *tempch, PVB_DEVICE_INFO pVBInfo);
 unsigned short   XGI_GetTVPtrIndex(PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetCRT2ModeRegs(unsigned short ModeNo,PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo );
 void     XGI_CloseCRTC(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo);
@@ -155,28 +156,33 @@ void     XGI_GetRAMDAC2DATA(unsigned short ModeNo, unsigned short ModeIdIndex, u
 void     XGI_UnLockCRT2(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo);
 void     XGI_LockCRT2(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo);
 void     XGINew_EnableCRT2(PVB_DEVICE_INFO pVBInfo);
-void     XGINew_LCD_Wait_Time(UCHAR DelayTime, PVB_DEVICE_INFO pVBInfo);
+void     XGINew_LCD_Wait_Time(unsigned char DelayTime, PVB_DEVICE_INFO pVBInfo);
 void     XGI_LongWait(PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetCRT1Offset(unsigned short ModeNo , unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo );
-void     XGI_GetLCDVCLKPtr(UCHAR* di_0,UCHAR *di_1, PVB_DEVICE_INFO pVBInfo);
-UCHAR    XGI_GetVCLKPtr(unsigned short RefreshRateTableIndex, unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_GetVCLKLen(UCHAR tempal,UCHAR* di_0,UCHAR* di_1, PVB_DEVICE_INFO pVBInfo);
+void     XGI_GetLCDVCLKPtr(unsigned char *di_0, unsigned char *di_1,
+			   PVB_DEVICE_INFO pVBInfo);
+unsigned char    XGI_GetVCLKPtr(unsigned short RefreshRateTableIndex,
+				unsigned short ModeNo,
+				unsigned short ModeIdIndex,
+				PVB_DEVICE_INFO pVBInfo);
+void     XGI_GetVCLKLen(unsigned char tempal, unsigned char *di_0,
+			unsigned char *di_1, PVB_DEVICE_INFO pVBInfo);
 unsigned short   XGI_GetLCDCapPtr(PVB_DEVICE_INFO pVBInfo);
 unsigned short   XGI_GetLCDCapPtr1(PVB_DEVICE_INFO pVBInfo);
 XGI301C_Tap4TimingStruct *XGI_GetTap4Ptr(unsigned short tempcx, PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetXG21FPBits(PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetXG27FPBits(PVB_DEVICE_INFO pVBInfo);
-UCHAR    XGI_XG21GetPSCValue(PVB_DEVICE_INFO pVBInfo);
-UCHAR    XGI_XG27GetPSCValue(PVB_DEVICE_INFO pVBInfo);
+unsigned char    XGI_XG21GetPSCValue(PVB_DEVICE_INFO pVBInfo);
+unsigned char    XGI_XG27GetPSCValue(PVB_DEVICE_INFO pVBInfo);
 void     XGI_XG21BLSignalVDD(unsigned short tempbh, unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
 void     XGI_XG27BLSignalVDD(unsigned short tempbh, unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
 void     XGI_XG21SetPanelDelay(unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
-unsigned char  XGI_XG21CheckLVDSMode(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
+unsigned char  XGI_XG21CheckLVDSMode(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetXG21LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
 void     XGI_SetXG27LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
-UCHAR    XGI_SetDefaultVCLK( PVB_DEVICE_INFO pVBInfo );
+unsigned char  XGI_SetDefaultVCLK(PVB_DEVICE_INFO pVBInfo);
 
-extern   void 	  ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo);
+extern void ReadVBIOSTablData(unsigned char ChipType, PVB_DEVICE_INFO pVBInfo);
 
 /* unsigned short XGINew_flag_clearbuffer; 0: no clear frame buffer 1:clear frame buffer */
 
@@ -230,7 +236,7 @@ unsigned short XGINew_VGA_DAC[] = {
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void InitTo330Pointer( UCHAR ChipType ,PVB_DEVICE_INFO pVBInfo)
+void InitTo330Pointer(unsigned char ChipType, PVB_DEVICE_INFO pVBInfo)
 {
     pVBInfo-&gt;SModeIDTable = (XGI_StStruct *) XGI330_SModeIDTable ;
     pVBInfo-&gt;StandTable = (XGI_StandTableStruct *) XGI330_StandTable ;
@@ -385,10 +391,11 @@ void InitTo330Pointer( UCHAR ChipType ,PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-unsigned char XGISetModeNew(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo)
+unsigned char XGISetModeNew(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			    unsigned short ModeNo)
 {
     unsigned short ModeIdIndex ;
-        /* PUCHAR pVBInfo-&gt;FBAddr = HwDeviceExtension-&gt;pjVideoMemoryAddress ; */
+        /* unsigned char *pVBInfo-&gt;FBAddr = HwDeviceExtension-&gt;pjVideoMemoryAddress ; */
     VB_DEVICE_INFO VBINF;
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
@@ -668,14 +675,14 @@ void XGI_SetCRT1Group(PXGI_HW_DEVICE_INFO HwDeviceExtension,
     	{
     	    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x2B , 0x4E) ;
     	    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x2C , 0xE9) ;
-    	    b3CC =(UCHAR) XGINew_GetReg2(XGINew_P3cc) ;
+	    b3CC = (unsigned char) XGINew_GetReg2(XGINew_P3cc) ;
     	    XGINew_SetReg3(XGINew_P3cc ,  (b3CC |= 0x0C) ) ;
     	}
     	else if ( ( ModeNo == 0x04) | ( ModeNo == 0x05) | ( ModeNo == 0x0D) )
     	{
     	    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x2B , 0x1B) ;
     	    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x2C , 0xE3) ;
-    	    b3CC = (UCHAR)XGINew_GetReg2(XGINew_P3cc) ;
+	    b3CC = (unsigned char)XGINew_GetReg2(XGINew_P3cc) ;
     	    XGINew_SetReg3(XGINew_P3cc ,  (b3CC |= 0x0C) ) ;
     	}
     }
@@ -730,10 +737,10 @@ void XGI_SetCRT1Group(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGI_GetModePtr(unsigned short ModeNo, unsigned short ModeIdIndex,
+unsigned char XGI_GetModePtr(unsigned short ModeNo, unsigned short ModeIdIndex,
 		     PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR index ;
+    unsigned char index ;
 
     if ( ModeNo &lt;= 0x13 )
         index = pVBInfo-&gt;SModeIDTable[ ModeIdIndex ].St_StTableIndex ;
@@ -754,7 +761,7 @@ UCHAR XGI_GetModePtr(unsigned short ModeNo, unsigned short ModeIdIndex,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-/*UCHAR XGI_SetBIOSData(unsigned short ModeNo , unsigned short ModeIdIndex )
+/*unsigned char XGI_SetBIOSData(unsigned short ModeNo, unsigned short ModeIdIndex)
 {
     return( 0 ) ;
 }
@@ -766,7 +773,7 @@ UCHAR XGI_GetModePtr(unsigned short ModeNo, unsigned short ModeIdIndex,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-/*UCHAR XGI_ClearBankRegs(unsigned short ModeNo , unsigned short ModeIdIndex )
+/*unsigned char XGI_ClearBankRegs(unsigned short ModeNo, unsigned short ModeIdIndex)
 {
     return( 0 ) ;
 }
@@ -781,7 +788,7 @@ UCHAR XGI_GetModePtr(unsigned short ModeNo, unsigned short ModeIdIndex,
 void XGI_SetSeqRegs(unsigned short ModeNo, unsigned short StandTableIndex,
 		    unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR tempah ,
+    unsigned char tempah ,
           SRdata ;
 
     unsigned short i ,
@@ -828,7 +835,7 @@ void XGI_SetSeqRegs(unsigned short ModeNo, unsigned short StandTableIndex,
 /* --------------------------------------------------------------------- */
 void XGI_SetMiscRegs(unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo )
 {
-    UCHAR Miscdata ;
+    unsigned char Miscdata ;
 
     Miscdata = pVBInfo-&gt;StandTable[ StandTableIndex ].MISC ;	/* Get Misc from file */
 /*
@@ -851,13 +858,13 @@ void XGI_SetMiscRegs(unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRTCRegs(PXGI_HW_DEVICE_INFO HwDeviceExtension ,
+void XGI_SetCRTCRegs(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 		     unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR CRTCdata ;
+    unsigned char CRTCdata ;
     unsigned short i ;
 
-    CRTCdata = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x11 ) ;
+    CRTCdata = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x11);
     CRTCdata &amp;= 0x7f ;
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x11 , CRTCdata ) ;		/* Unlock CRTC */
 
@@ -890,7 +897,7 @@ void XGI_SetCRTCRegs(PXGI_HW_DEVICE_INFO HwDeviceExtension ,
 void XGI_SetATTRegs(unsigned short ModeNo, unsigned short StandTableIndex,
 		    unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR ARdata ;
+    unsigned char ARdata ;
     unsigned short i, modeflag;
 
     if ( ModeNo &lt;= 0x13 )
@@ -939,7 +946,7 @@ void XGI_SetATTRegs(unsigned short ModeNo, unsigned short StandTableIndex,
 /* --------------------------------------------------------------------- */
 void XGI_SetGRCRegs(unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo )
 {
-    UCHAR GRdata ;
+    unsigned char GRdata ;
     unsigned short i ;
 
     for( i = 0 ; i &lt;= 0x08 ; i++ )
@@ -950,7 +957,7 @@ void XGI_SetGRCRegs(unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo )
 
     if ( pVBInfo-&gt;ModeType &gt; ModeVGA )
     {
-        GRdata = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3ce , 0x05 ) ;
+	GRdata = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3ce, 0x05);
         GRdata &amp;= 0xBF ;						/* 256 color disable */
         XGINew_SetReg1( pVBInfo-&gt;P3ce , 0x05 , GRdata ) ;
     }
@@ -978,7 +985,7 @@ void XGI_ClearExt1Regs(PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGI_SetDefaultVCLK( PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_SetDefaultVCLK(PVB_DEVICE_INFO pVBInfo)
 {
 
     XGINew_SetRegANDOR( pVBInfo-&gt;P3c4 , 0x31 , ~0x30 , 0x20 ) ;
@@ -1005,7 +1012,7 @@ unsigned short XGI_GetRatePtrCRT2(PXGI_HW_DEVICE_INFO pXGIHWDE,
 				  unsigned short ModeIdIndex,
 				  PVB_DEVICE_INFO pVBInfo)
 {
-    SHORT  LCDRefreshIndex[] = { 0x00 , 0x00 , 0x03 , 0x01 } ,
+    short LCDRefreshIndex[] = { 0x00 , 0x00 , 0x03 , 0x01 } ,
            LCDARefreshIndex[] = { 0x00 , 0x00 , 0x03 , 0x01 , 0x01 , 0x01 , 0x01 } ;
 
     unsigned short RefreshRateTableIndex, i, modeflag, index, temp;
@@ -1140,8 +1147,8 @@ unsigned short XGI_GetRatePtrCRT2(PXGI_HW_DEVICE_INFO pXGIHWDE,
 /* Description : */
 /* --------------------------------------------------------------------- */
 unsigned char XGI_AjustCRT2Rate(unsigned short ModeNo, unsigned short ModeIdIndex,
-			  unsigned short RefreshRateTableIndex,
-			  unsigned short *i, PVB_DEVICE_INFO pVBInfo)
+				unsigned short RefreshRateTableIndex,
+				unsigned short *i, PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short tempax, tempbx, resinfo, modeflag, infoflag;
 
@@ -1337,15 +1344,13 @@ void XGI_SetCRT1CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
 		     PVB_DEVICE_INFO pVBInfo,
 		     PXGI_HW_DEVICE_INFO HwDeviceExtension)
 {
-    UCHAR  index ,
-           data ;
-
+    unsigned char index, data;
     unsigned short i;
 
     index = pVBInfo-&gt;RefIndex[ RefreshRateTableIndex ].Ext_CRT1CRTC ;	/* Get index */
     index = index&amp;IndexMask ;
 
-    data =( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x11 ) ;
+    data = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x11);
     data &amp;= 0x7F ;
     XGINew_SetReg1(pVBInfo-&gt;P3d4,0x11,data);				/* Unlock CRTC */
 
@@ -1375,14 +1380,14 @@ void XGI_SetCRT1CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
 /* --------------------------------------------------------------------- */
 void XGI_SetCRT1Timing_H( PVB_DEVICE_INFO pVBInfo, PXGI_HW_DEVICE_INFO HwDeviceExtension )
 {
-    UCHAR data , data1, pushax;
+    unsigned char data, data1, pushax;
     unsigned short i, j;
 
     /* XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x51 , 0 ) ; */
     /* XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x56 , 0 ) ; */
     /* XGINew_SetRegANDOR( pVBInfo-&gt;P3d4 ,0x11 , 0x7f , 0x00 ) ; */
 
-    data = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x11 ) ;		/* unlock cr0-7 */
+    data = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x11); /* unlock cr0-7 */
     data &amp;= 0x7F ;
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x11 , data ) ;
 
@@ -1401,7 +1406,7 @@ void XGI_SetCRT1Timing_H( PVB_DEVICE_INFO pVBInfo, PXGI_HW_DEVICE_INFO HwDeviceE
 	XGINew_SetReg1(pVBInfo-&gt;P3c4, (unsigned short)(i + 6), data);
     }
 
-    j = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x0e ) ;
+    j = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x0e);
     j &amp;= 0x1F ;
     data = pVBInfo-&gt;TimingH[ 0 ].data[ 7 ] ;
     data &amp;= 0xE0 ;
@@ -1410,17 +1415,17 @@ void XGI_SetCRT1Timing_H( PVB_DEVICE_INFO pVBInfo, PXGI_HW_DEVICE_INFO HwDeviceE
 
     if ( HwDeviceExtension-&gt;jChipType &gt;= XG20 )
     {
-    	data = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x04 ) ;
+	data = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x04);
     	data = data - 1 ;
     	XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x04 , data ) ;
-    	data = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x05 ) ;
+	data = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x05);
     	data1 = data ;
     	data1 &amp;= 0xE0 ;
     	data &amp;= 0x1F ;
     	if ( data == 0 )
     	{
     	    pushax = data ;
-    	    data = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x0c ) ;
+	    data = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x0c);
     	    data &amp;= 0xFB ;
     	    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x0c , data ) ;
     	    data = pushax ;
@@ -1428,7 +1433,7 @@ void XGI_SetCRT1Timing_H( PVB_DEVICE_INFO pVBInfo, PXGI_HW_DEVICE_INFO HwDeviceE
     	data = data - 1 ;
     	data |= data1 ;
     	XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x05 , data ) ;
-    	data = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x0e ) ;
+	data = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x0e);
     	data = data &gt;&gt; 5 ;
     	data = data + 3 ;
     	if ( data &gt; 7 )
@@ -1449,7 +1454,7 @@ void XGI_SetCRT1Timing_V(unsigned short ModeIdIndex,
 			 unsigned short ModeNo,
 			 PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR data ;
+    unsigned char data;
     unsigned short i, j;
 
     /* XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x51 , 0 ) ; */
@@ -1474,7 +1479,7 @@ void XGI_SetCRT1Timing_V(unsigned short ModeIdIndex,
 	XGINew_SetReg1(pVBInfo-&gt;P3d4, (unsigned short)(i + 0x11), data);
     }
 
-    j = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x0a ) ;
+    j = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x0a);
     j &amp;= 0xC0 ;
     data = pVBInfo-&gt;TimingV[ 0 ].data[ 6 ] ;
     data &amp;= 0x3F ;
@@ -1494,7 +1499,7 @@ void XGI_SetCRT1Timing_V(unsigned short ModeIdIndex,
     if ( i )
         data |= 0x80 ;
 
-    j = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x09 ) ;
+    j = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x09);
     j &amp;= 0x5F ;
     data |= j ;
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x09 , data ) ;
@@ -1511,7 +1516,7 @@ void XGI_SetXG21CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
 		     unsigned short RefreshRateTableIndex,
 		     PVB_DEVICE_INFO pVBInfo)
 {
-  UCHAR StandTableIndex, index, Tempax, Tempbx, Tempcx, Tempdx ;
+  unsigned char StandTableIndex, index, Tempax, Tempbx, Tempcx, Tempdx;
   unsigned short Temp1, Temp2, Temp3;
 
   if ( ModeNo &lt;= 0x13 )
@@ -1541,7 +1546,7 @@ void XGI_SetXG21CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
     Tempdx |= Tempcx ;							/* Tempdx: VRS[8:1] */
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x34 , Tempdx ) ;    		/* SR34[7:0]: VRS[8:1] */
 
-    Temp1 = Tempcx &lt;&lt; 1 ;						/* Temp1[8]: VRS[8] UCHAR -&gt; unsigned short */
+    Temp1 = Tempcx &lt;&lt; 1 ;						/* Temp1[8]: VRS[8] unsigned char -&gt; unsigned short */
     Temp1 |= Tempbx ;							/* Temp1[8:0]: VRS[8:0] */
     Tempax &amp;= 0x80 ;							/* Tempax[7]: CR7[7] */
     Temp2 = Tempax &lt;&lt; 2 ;						/* Temp2[9]: VRS[9] */
@@ -1555,11 +1560,11 @@ void XGI_SetXG21CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
     if ( Tempax &lt; Temp3 )						/* VRE[3:0]&lt;VRS[3:0] */
       Temp2 |= 0x10 ;							/* Temp2: VRE + 0x10 */
     Temp2 &amp;= 0xFF ;							/* Temp2[7:0]: VRE[7:0] */
-    Tempax = (UCHAR)Temp2 ;						/* Tempax[7:0]: VRE[7:0] */
+    Tempax = (unsigned char)Temp2;					/* Tempax[7:0]: VRE[7:0] */
     Tempax &lt;&lt;= 2 ;							/* Tempax &lt;&lt; 2: VRE[5:0] */
     Temp1 &amp;= 0x600 ;							/* Temp1[10:9]: VRS[10:9] */
     Temp1 &gt;&gt;= 9 ;							/* [10:9]-&gt;[1:0] */
-    Tempbx = (UCHAR)Temp1 ;						/* Tempbx[1:0]: VRS[10:9] */
+    Tempbx = (unsigned char)Temp1;					/* Tempbx[1:0]: VRS[10:9] */
     Tempax |= Tempbx ;							/* VRE[5:0]VRS[10:9] */
     Tempax &amp;= 0x7F ;
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x3F , Tempax ) ;   		/* SR3F D[7:2]-&gt;VRE D[1:0]-&gt;VRS */
@@ -1593,7 +1598,7 @@ void XGI_SetXG21CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
       Temp2 |= 0x40 ;                                                   /* Temp2 + 0x40 */
 
     Temp2 &amp;= 0xFF ;
-    Tempax = (UCHAR)Temp2 ;						/* Tempax: HRE[7:0] */
+    Tempax = (unsigned char)Temp2;					/* Tempax: HRE[7:0] */
     Tempax &lt;&lt;= 2 ;							/* Tempax[7:2]: HRE[5:0] */
     Tempdx &gt;&gt;= 6 ;							/* Tempdx[7:6]-&gt;[1:0] HRS[9:8] */
     Tempax |= Tempdx ;							/* HRE[5:0]HRS[9:8] */
@@ -1637,11 +1642,11 @@ void XGI_SetXG21CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
       Temp2 |= 0x20 ;							/* VRE + 0x20 */
 
     Temp2 &amp;= 0xFF ;
-    Tempax = (UCHAR)Temp2 ;						/* Tempax: VRE[7:0] */
+    Tempax = (unsigned char)Temp2;					/* Tempax: VRE[7:0] */
     Tempax &lt;&lt;= 2 ;							/* Tempax[7:0]; VRE[5:0]00 */
     Temp1 &amp;= 0x600 ;							/* Temp1[10:9]: VRS[10:9] */
     Temp1 &gt;&gt;= 9 ;  							/* Temp1[1:0]: VRS[10:9] */
-    Tempbx = (UCHAR)Temp1 ;
+    Tempbx = (unsigned char)Temp1;
     Tempax |= Tempbx ;							/* Tempax[7:0]: VRE[5:0]VRS[10:9] */
     Tempax &amp;= 0x7F ;
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x3F , Tempax ) ;   		/* SR3F D[7:2]-&gt;VRE D[1:0]-&gt;VRS */
@@ -1689,7 +1694,7 @@ void XGI_SetXG27CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
     Tempbx |= Tempax ;							/* Tempbx[9:0]: VRE[9:0] */
     if ( Tempax &lt;= (Tempcx &amp; 0x0F) )					/* VRE[3:0]&lt;=VRS[3:0] */
       Tempbx |= 0x10 ;							/* Tempbx: VRE + 0x10 */
-    Tempax = (UCHAR)Tempbx &amp; 0xFF;					/* Tempax[7:0]: VRE[7:0] */
+    Tempax = (unsigned char)Tempbx &amp; 0xFF;				/* Tempax[7:0]: VRE[7:0] */
     Tempax &lt;&lt;= 2 ;							/* Tempax &lt;&lt; 2: VRE[5:0] */
     Tempcx = (Tempcx&amp;0x600)&gt;&gt;8;                                         /* Tempcx VRS[10:9] */
     XGINew_SetRegANDOR( pVBInfo-&gt;P3c4 , 0x3F , ~0xFC, Tempax ) ;        /* SR3F D[7:2]-&gt;VRE D[5:0] */
@@ -1809,7 +1814,7 @@ void XGI_SetXG21LCD(PVB_DEVICE_INFO pVBInfo,
 
   if ( ModeNo &lt;= 0x13 )
   {
-    b3CC = (UCHAR) XGINew_GetReg2( XGI_P3cc ) ;
+    b3CC = (unsigned char) XGINew_GetReg2(XGI_P3cc);
     if ( b3CC &amp; 0x40 )
       XGINew_SetRegOR( pVBInfo-&gt;P3c4 , 0x30 , 0x20 ) ; /* Hsync polarity */
     if ( b3CC &amp; 0x80 )
@@ -1863,7 +1868,7 @@ void XGI_SetXG27LCD(PVB_DEVICE_INFO pVBInfo,
 
   if ( ModeNo &lt;= 0x13 )
   {
-    b3CC = (UCHAR) XGINew_GetReg2( XGI_P3cc ) ;
+    b3CC = (unsigned char) XGINew_GetReg2(XGI_P3cc);
     if ( b3CC &amp; 0x40 )
       XGINew_SetRegOR( pVBInfo-&gt;P3c4 , 0x30 , 0x20 ) ; /* Hsync polarity */
     if ( b3CC &amp; 0x80 )
@@ -1938,7 +1943,7 @@ void XGI_SetCRT1DE(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 {
 	unsigned short resindex, tempax, tempbx, tempcx, temp, modeflag;
 
-    UCHAR data ;
+    unsigned char data;
 
     resindex = XGI_GetResInfo( ModeNo , ModeIdIndex, pVBInfo ) ;
 
@@ -1981,8 +1986,8 @@ void XGI_SetCRT1DE(PXGI_HW_DEVICE_INFO HwDeviceExtension,
     tempax -= 1 ;
     tempbx -= 1 ;
     tempcx = tempax ;
-    temp = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x11 ) ;
-    data = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x11 ) ;
+    temp = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x11);
+    data = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x11);
     data &amp;= 0x7F ;
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x11 , data ) ;		/* Unlock CRTC */
     XGINew_SetReg1(pVBInfo-&gt;P3d4, 0x01, (unsigned short)(tempcx &amp; 0xff));
@@ -1998,7 +2003,7 @@ void XGI_SetCRT1DE(PXGI_HW_DEVICE_INFO HwDeviceExtension,
         tempax |= 0x40 ;
 
     XGINew_SetRegANDOR( pVBInfo-&gt;P3d4 , 0x07 , ~0x42 , tempax ) ;
-    data =( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x07 ) ;
+    data = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x07);
     data &amp;= 0xFF ;
     tempax = 0 ;
 
@@ -2105,7 +2110,7 @@ void XGI_SetCRT1Offset(unsigned short ModeNo,
     i |= temp ;
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x0E , i ) ;
 
-    temp =( UCHAR )temp2 ;
+    temp = (unsigned char)temp2;
     temp &amp;= 0xFF ;		/* al */
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x13 , temp ) ;
 
@@ -2142,7 +2147,7 @@ void XGI_SetCRT1VCLK(unsigned short ModeNo, unsigned short ModeIdIndex,
 		     unsigned short RefreshRateTableIndex,
 		     PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR index , data ;
+	unsigned char index, data;
     unsigned short vclkindex ;
 
     if ( pVBInfo-&gt;IF_DEF_LVDS == 1 )
@@ -2398,9 +2403,9 @@ void XGI_SetVCLKState(PXGI_HW_DEVICE_INFO HwDeviceExtension,
 {
     unsigned short data ,
            data2 = 0 ;
-    SHORT  VCLK ;
+    short VCLK ;
 
-    UCHAR  index ;
+    unsigned char index;
 
     if ( ModeNo &lt;= 0x13 )
         VCLK = 0 ;
@@ -2817,7 +2822,7 @@ void XGI_ModCRT1Regs(unsigned short ModeNo, unsigned short ModeIdIndex,
 		     PXGI_HW_DEVICE_INFO HwDeviceExtension,
 		     PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR index ;
+    unsigned char index;
     unsigned short tempbx , i ;
     XGI_LVDSCRT1HDataStruct  *LCDPtr = NULL ;
     XGI_LVDSCRT1VDataStruct  *LCDPtr1 =NULL ;
@@ -3184,7 +3189,7 @@ void XGI_SetLVDSRegs(unsigned short ModeNo, unsigned short ModeIdIndex,
 /* --------------------------------------------------------------------- */
 void XGI_SetCRT2ECLK(unsigned short ModeNo , unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO  pVBInfo )
 {
-    UCHAR di_0 , di_1 , tempal ;
+    unsigned char di_0, di_1, tempal;
     int i ;
 
     tempal = XGI_GetVCLKPtr( RefreshRateTableIndex , ModeNo , ModeIdIndex, pVBInfo ) ;
@@ -3788,7 +3793,8 @@ void XGI_GetTVInfo(unsigned short ModeNo , unsigned short ModeIdIndex ,PVB_DEVIC
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-unsigned char XGI_GetLCDInfo(unsigned short ModeNo , unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
+unsigned char XGI_GetLCDInfo(unsigned short ModeNo, unsigned short ModeIdIndex,
+			     PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short temp ,
            tempax ,
@@ -3997,7 +4003,9 @@ unsigned char XGI_GetLCDInfo(unsigned short ModeNo , unsigned short ModeIdIndex,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-unsigned char XGI_SearchModeID(unsigned short ModeNo , unsigned short *ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_SearchModeID(unsigned short ModeNo,
+			       unsigned short *ModeIdIndex,
+			       PVB_DEVICE_INFO pVBInfo)
 {
 
 
@@ -4052,7 +4060,10 @@ unsigned char XGI_SearchModeID(unsigned short ModeNo , unsigned short *ModeIdInd
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-unsigned char XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo, unsigned short ModeIdIndex,PVB_DEVICE_INFO pVBInfo)
+unsigned char XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+				     unsigned short ModeNo,
+				     unsigned short ModeIdIndex,
+				     PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short memorysize ,
            modeflag ,
@@ -4134,7 +4145,7 @@ unsigned char XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsi
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-/*void XGINew_IsLowResolution(unsigned short ModeNo , unsigned short ModeIdIndex, unsigned char XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo, unsigned short ModeIdIndex,PVB_DEVICE_INFO pVBInfo)
+/*void XGINew_IsLowResolution(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned char XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo, unsigned short ModeIdIndex,PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short data ;
     unsigned short ModeFlag ;
@@ -4296,40 +4307,41 @@ void XGI_WaitDisply( PVB_DEVICE_INFO pVBInfo )
 
 void XGI_SenseCRT1( PVB_DEVICE_INFO pVBInfo )
 {
-    UCHAR CRTCData[ 17 ] = { 0x5F , 0x4F , 0x50 , 0x82 , 0x55 , 0x81 ,
-                             0x0B , 0x3E , 0xE9 , 0x0B , 0xDF , 0xE7 ,
-                             0x04 , 0x00 , 0x00 , 0x05 , 0x00 } ;
+	unsigned char CRTCData[17] = {
+		0x5F , 0x4F , 0x50 , 0x82 , 0x55 , 0x81 ,
+		0x0B , 0x3E , 0xE9 , 0x0B , 0xDF , 0xE7 ,
+		0x04 , 0x00 , 0x00 , 0x05 , 0x00 };
 
-    UCHAR SR01 = 0 , SR1F = 0 , SR07 = 0 , SR06 = 0 ;
+	unsigned char SR01 = 0, SR1F = 0, SR07 = 0, SR06 = 0;
 
-    UCHAR CR17 , CR63 , SR31 ;
-    unsigned short temp ;
-    UCHAR DAC_TEST_PARMS[ 3 ] = { 0x0F , 0x0F , 0x0F } ;
+	unsigned char CR17, CR63, SR31;
+	unsigned short temp ;
+	unsigned char DAC_TEST_PARMS[3] = { 0x0F, 0x0F, 0x0F } ;
 
     int i ;
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x05 , 0x86 ) ;
 
     /* [2004/05/06] Vicent to fix XG42 single LCD sense to CRT+LCD */
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x57 , 0x4A ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x53 , ( UCHAR )( XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x53 ) | 0x02 ) ) ;
+    XGINew_SetReg1(pVBInfo-&gt;P3d4, 0x53, (unsigned char)(XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x53) | 0x02));
 
-    SR31 = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x31 ) ;
-    CR63 = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x63 ) ;
-    SR01 = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x01 ) ;
+    SR31 = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x31);
+    CR63 = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x63);
+    SR01 = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x01);
 
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x01 , ( UCHAR )( SR01 &amp; 0xDF ) ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x63 , ( UCHAR )( CR63 &amp; 0xBF ) ) ;
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x01, (unsigned char)(SR01 &amp; 0xDF));
+    XGINew_SetReg1(pVBInfo-&gt;P3d4, 0x63, (unsigned char)(CR63 &amp; 0xBF));
 
-    CR17 = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x17 ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x17 , ( UCHAR )( CR17 | 0x80 ) ) ;
+    CR17 = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x17);
+    XGINew_SetReg1(pVBInfo-&gt;P3d4, 0x17, (unsigned char)(CR17 | 0x80)) ;
 
-    SR1F = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x1F ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x1F , ( UCHAR )( SR1F | 0x04 ) ) ;
+    SR1F = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x1F);
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x1F, (unsigned char)(SR1F | 0x04));
 
-    SR07 = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x07 ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x07 , ( UCHAR )( SR07 &amp; 0xFB ) ) ;
-    SR06 = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x06 ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x06 , ( UCHAR )( SR06 &amp; 0xC3 ) ) ;
+    SR07 = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x07);
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x07, (unsigned char)(SR07 &amp; 0xFB));
+    SR06 = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x06);
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x06, (unsigned char)(SR06 &amp; 0xC3));
 
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x11 , 0x00 ) ;
 
@@ -4345,7 +4357,7 @@ void XGI_SenseCRT1( PVB_DEVICE_INFO pVBInfo )
     for( i = 13 ; i &lt; 16 ; i++ )
 	    XGINew_SetReg1(pVBInfo-&gt;P3c4, (unsigned short)(i - 3), CRTCData[i]);
 
-    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x0E, (UCHAR)(CRTCData[16] &amp; 0xE0));
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x0E, (unsigned char)(CRTCData[16] &amp; 0xE0));
 
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x31 , 0x00 ) ;
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x2B , 0x1B ) ;
@@ -4355,9 +4367,9 @@ void XGI_SenseCRT1( PVB_DEVICE_INFO pVBInfo )
 
     for( i = 0 ; i &lt; 256 ; i++ )
     {
-        XGINew_SetReg3( ( pVBInfo-&gt;P3c8 + 1 ) , ( UCHAR )DAC_TEST_PARMS[ 0 ] ) ;
-        XGINew_SetReg3( ( pVBInfo-&gt;P3c8 + 1 ) , ( UCHAR )DAC_TEST_PARMS[ 1 ] ) ;
-        XGINew_SetReg3( ( pVBInfo-&gt;P3c8 + 1 ) , ( UCHAR )DAC_TEST_PARMS[ 2 ] ) ;
+	XGINew_SetReg3((pVBInfo-&gt;P3c8 + 1), (unsigned char)DAC_TEST_PARMS[0]);
+	XGINew_SetReg3((pVBInfo-&gt;P3c8 + 1), (unsigned char)DAC_TEST_PARMS[1]);
+	XGINew_SetReg3((pVBInfo-&gt;P3c8 + 1), (unsigned char)DAC_TEST_PARMS[2]);
     }
 
     XGI_VBLongWait( pVBInfo ) ;
@@ -4393,8 +4405,9 @@ void XGI_SenseCRT1( PVB_DEVICE_INFO pVBInfo )
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x31 , SR31 ) ;
 
     /* [2004/05/11] Vicent */
-    XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x53 , ( UCHAR )( XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x53 ) &amp; 0xFD ) ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x1F , ( UCHAR ) SR1F ) ;
+    XGINew_SetReg1(pVBInfo-&gt;P3d4, 0x53,
+		   (unsigned char)(XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x53) &amp; 0xFD));
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x1F, (unsigned char)SR1F);
 }
 
 
@@ -4428,7 +4441,9 @@ void XGI_WaitDisplay( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-unsigned char XGI_SetCRT2Group301(unsigned short ModeNo , PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_SetCRT2Group301(unsigned short ModeNo,
+				  PXGI_HW_DEVICE_INFO HwDeviceExtension,
+				  PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short tempbx ,
            ModeIdIndex ,
@@ -4593,7 +4608,7 @@ void XGI_GetCRT2ResInfo(unsigned short ModeNo,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-unsigned char XGI_IsLCDDualLink( PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_IsLCDDualLink(PVB_DEVICE_INFO pVBInfo)
 {
 
     if ( ( ( ( pVBInfo-&gt;VBInfo &amp; SetCRT2ToLCD ) | SetCRT2ToLCDA ) ) &amp;&amp; ( pVBInfo-&gt;LCDInfo &amp; SetLCDDualLink ) ) /* shampoo0129 */
@@ -4837,9 +4852,7 @@ void XGI_GetCRT2Data(  unsigned short ModeNo , unsigned short ModeIdIndex , unsi
 /* --------------------------------------------------------------------- */
 void XGI_SetCRT2VCLK(unsigned short ModeNo , unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
 {
-    UCHAR di_0 ,
-          di_1 ,
-          tempal ;
+	unsigned char di_0, di_1, tempal;
 
     tempal = XGI_GetVCLKPtr( RefreshRateTableIndex , ModeNo , ModeIdIndex, pVBInfo ) ;
     XGI_GetVCLKLen( tempal, &amp;di_0 , &amp;di_1, pVBInfo ) ;
@@ -4872,7 +4885,8 @@ void XGI_SetCRT2VCLK(unsigned short ModeNo , unsigned short ModeIdIndex , unsign
 /* Output : al -&gt; VCLK Index */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetLCDVCLKPtr( UCHAR* di_0 , UCHAR *di_1, PVB_DEVICE_INFO pVBInfo )
+void XGI_GetLCDVCLKPtr(unsigned char *di_0, unsigned char *di_1,
+		       PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short index ;
 
@@ -4908,14 +4922,16 @@ void XGI_GetLCDVCLKPtr( UCHAR* di_0 , UCHAR *di_1, PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGI_GetVCLKPtr(unsigned short RefreshRateTableIndex, unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
+unsigned char XGI_GetVCLKPtr(unsigned short RefreshRateTableIndex,
+			     unsigned short ModeNo, unsigned short ModeIdIndex,
+			     PVB_DEVICE_INFO pVBInfo)
 {
 
     unsigned short index ,
            modeflag ;
     unsigned short tempbx ;
-    UCHAR tempal ;
-    UCHAR *CHTVVCLKPtr = NULL ;
+    unsigned char tempal;
+    unsigned char *CHTVVCLKPtr = NULL;
 
     if ( ModeNo &lt;= 0x13 )
         modeflag = pVBInfo-&gt;SModeIDTable[ ModeIdIndex ].St_ModeFlag ;      /* si+St_ResInfo */
@@ -5067,7 +5083,7 @@ UCHAR XGI_GetVCLKPtr(unsigned short RefreshRateTableIndex, unsigned short ModeNo
 
     }
 
-    tempal = ( UCHAR )XGINew_GetReg2( ( pVBInfo-&gt;P3ca + 0x02 ) ) ;
+    tempal = (unsigned char)XGINew_GetReg2((pVBInfo-&gt;P3ca + 0x02));
     tempal = tempal &gt;&gt; 2 ;
     tempal &amp;= 0x03 ;
 
@@ -5088,19 +5104,20 @@ UCHAR XGI_GetVCLKPtr(unsigned short RefreshRateTableIndex, unsigned short ModeNo
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetVCLKLen(UCHAR tempal,UCHAR* di_0,UCHAR* di_1, PVB_DEVICE_INFO pVBInfo)
+void XGI_GetVCLKLen(unsigned char tempal, unsigned char *di_0,
+		    unsigned char *di_1, PVB_DEVICE_INFO pVBInfo)
 {
     if ( pVBInfo-&gt;IF_DEF_CH7007 == 1 ) /* [Billy] 2007/05/16 */
     {
        /* VideoDebugPrint((0, "XGI_GetVCLKLen: pVBInfo-&gt;IF_DEF_CH7007==1\n")); */
-        *di_0 = ( UCHAR )XGI_CH7007VCLKData[ tempal ].SR2B ;
-        *di_1 = ( UCHAR )XGI_CH7007VCLKData[ tempal ].SR2C ;
+	*di_0 = (unsigned char)XGI_CH7007VCLKData[tempal].SR2B;
+	*di_1 = (unsigned char)XGI_CH7007VCLKData[tempal].SR2C;
     }
     else if ( pVBInfo-&gt;VBType &amp; ( VB_XGI301 | VB_XGI301B | VB_XGI302B | VB_XGI301LV | VB_XGI302LV | VB_XGI301C ) )
     {
         if ( ( !( pVBInfo-&gt;VBInfo &amp; SetCRT2ToLCDA ) ) &amp;&amp; ( pVBInfo-&gt;SetFlag &amp; ProgrammingCRT2 ) )
         {
-            *di_0 = ( UCHAR )XGI_VBVCLKData[ tempal ].SR2B ;
+	    *di_0 = (unsigned char)XGI_VBVCLKData[tempal].SR2B;
             *di_1 = XGI_VBVCLKData[ tempal ].SR2C ;
         }
     }
@@ -5118,11 +5135,14 @@ void XGI_GetVCLKLen(UCHAR tempal,UCHAR* di_0,UCHAR* di_1, PVB_DEVICE_INFO pVBInf
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT2Offset(unsigned short ModeNo ,
-				   unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRT2Offset(unsigned short ModeNo,
+		       unsigned short ModeIdIndex,
+		       unsigned short RefreshRateTableIndex,
+		       PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		       PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short offset ;
-    UCHAR temp ;
+    unsigned char temp;
 
     if ( pVBInfo-&gt;VBInfo &amp; SetInSlaveMode )
     {
@@ -5130,12 +5150,12 @@ void XGI_SetCRT2Offset(unsigned short ModeNo ,
     }
 
     offset = XGI_GetOffset(  ModeNo , ModeIdIndex , RefreshRateTableIndex , HwDeviceExtension, pVBInfo ) ;
-    temp = ( UCHAR )( offset &amp; 0xFF ) ;
+    temp = (unsigned char)(offset &amp; 0xFF);
     XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x07 , temp ) ;
-    temp =( UCHAR)( ( offset &amp; 0xFF00 ) &gt;&gt; 8 ) ;
-    XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x09 , temp ) ;
-    temp =( UCHAR )( ( ( offset &gt;&gt; 3 ) &amp; 0xFF ) + 1 ) ;
-    XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x03 , temp ) ;
+    temp = (unsigned char)((offset &amp; 0xFF00) &gt;&gt; 8);
+    XGINew_SetReg1(pVBInfo-&gt;Part1Port , 0x09 , temp);
+    temp = (unsigned char)(((offset &gt;&gt; 3) &amp; 0xFF) + 1) ;
+    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x03, temp);
 }
 
 
@@ -5884,7 +5904,7 @@ void XGI_SetGroup2(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned s
            modeflag ,
            resinfo ,
            crt2crtc ;
-    UCHAR *TimingPoint ;
+    unsigned char *TimingPoint ;
 
     unsigned long longtemp ,
           tempeax ,
@@ -6360,7 +6380,7 @@ void XGI_SetGroup2(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned s
 
     if ( pVBInfo-&gt;TVInfo &amp; SetPALMTV )
     {
-        tempax = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;Part2Port , 0x01 ) ;
+	tempax = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;Part2Port, 0x01);
         tempax-- ;
         XGINew_SetRegAND( pVBInfo-&gt;Part2Port , 0x01 , tempax ) ;
 
@@ -6745,7 +6765,7 @@ void XGI_SetTap4Regs( PVB_DEVICE_INFO pVBInfo)
 void XGI_SetGroup3(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short i;
-    UCHAR *tempdi;
+    unsigned char *tempdi;
     unsigned short  modeflag;
 
     if(ModeNo&lt;=0x13)
@@ -7781,9 +7801,9 @@ void *XGI_GetTVPtr(unsigned short BX, unsigned short ModeNo,
 /* --------------------------------------------------------------------- */
 unsigned char XGI_BacklightByDrv(PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR tempah ;
+    unsigned char tempah ;
 
-    tempah = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x3A ) ;
+    tempah = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x3A) ;
     if (tempah &amp; BacklightControlBit)
 	    return 1;
     else
@@ -7889,10 +7909,10 @@ void XGI_SetPanelPower(unsigned short tempah, unsigned short tempbl, PVB_DEVICE_
         XGINew_SetRegANDOR( pVBInfo-&gt;P3c4 , 0x11 , tempbl , tempah ) ;
 }
 
-UCHAR XG21GPIODataTransfer(UCHAR ujDate)
+unsigned char XG21GPIODataTransfer(unsigned char ujDate)
 {
-    UCHAR  ujRet = 0;
-    UCHAR  i = 0;
+    unsigned char  ujRet = 0;
+    unsigned char  i = 0;
 
     for (i=0; i&lt;8; i++)
 	{
@@ -7910,9 +7930,9 @@ UCHAR XG21GPIODataTransfer(UCHAR ujDate)
 /*      bl[1] : LVDS backlight                                                */
 /*      bl[0] : LVDS VDD                                                      */
 /*----------------------------------------------------------------------------*/
-UCHAR XGI_XG21GetPSCValue(PVB_DEVICE_INFO pVBInfo)
+unsigned char XGI_XG21GetPSCValue(PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR CR4A,temp;
+    unsigned char CR4A, temp;
 
     CR4A = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x4A ) ;
     XGINew_SetRegAND( pVBInfo-&gt;P3d4 , 0x4A , ~0x23 ) ; /* enable GPIO write */
@@ -7931,9 +7951,9 @@ UCHAR XGI_XG21GetPSCValue(PVB_DEVICE_INFO pVBInfo)
 /*      bl[1] : LVDS backlight                                                */
 /*      bl[0] : LVDS VDD                                                      */
 /*----------------------------------------------------------------------------*/
-UCHAR XGI_XG27GetPSCValue(PVB_DEVICE_INFO pVBInfo)
+unsigned char XGI_XG27GetPSCValue(PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR CR4A,CRB4,temp;
+    unsigned char CR4A, CRB4, temp;
 
     CR4A = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x4A ) ;
     XGINew_SetRegAND( pVBInfo-&gt;P3d4 , 0x4A , ~0x0C ) ; /* enable GPIO write */
@@ -7958,7 +7978,7 @@ UCHAR XGI_XG27GetPSCValue(PVB_DEVICE_INFO pVBInfo)
 /*----------------------------------------------------------------------------*/
 void XGI_XG21BLSignalVDD(unsigned short tempbh, unsigned short tempbl, PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR CR4A,temp;
+    unsigned char CR4A, temp;
 
     CR4A = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x4A ) ;
     tempbh &amp;= 0x23;
@@ -7983,7 +8003,7 @@ void XGI_XG21BLSignalVDD(unsigned short tempbh, unsigned short tempbl, PVB_DEVIC
 
 void XGI_XG27BLSignalVDD(unsigned short tempbh, unsigned short tempbl, PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR CR4A,temp;
+    unsigned char CR4A, temp;
     unsigned short tempbh0, tempbl0;
 
     tempbh0 = tempbh;
@@ -8118,7 +8138,7 @@ unsigned char XGI_XG21CheckLVDSMode(unsigned short ModeNo,
 
 void XGI_SetXG21FPBits(PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR temp;
+    unsigned char temp;
 
     temp = XGINew_GetReg1( pVBInfo-&gt;P3d4  , 0x37 ) ;  /* D[0] 1: 18bit */
     temp = ( temp &amp; 1 ) &lt;&lt; 6;
@@ -8129,7 +8149,7 @@ void XGI_SetXG21FPBits(PVB_DEVICE_INFO pVBInfo)
 
 void XGI_SetXG27FPBits(PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR temp;
+    unsigned char temp;
 
     temp = XGINew_GetReg1( pVBInfo-&gt;P3d4  , 0x37 ) ;  /* D[1:0] 01: 18bit, 00: dual 12, 10: single 24 */
     temp = ( temp &amp; 3 ) &lt;&lt; 6;
@@ -8141,7 +8161,7 @@ void XGI_SetXG27FPBits(PVB_DEVICE_INFO pVBInfo)
 void XGI_SetXG21LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex,
 			 PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR temp,Miscdata;
+    unsigned char temp, Miscdata;
     unsigned short xres ,
            yres ,
            modeflag ,
@@ -8153,13 +8173,13 @@ void XGI_SetXG21LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex,
 
     lvdstableindex = XGI_GetLVDSOEMTableIndex( pVBInfo );
 
-    temp = (UCHAR) ( ( pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDS_Capability &amp; (LCDPolarity &lt;&lt; 8 ) ) &gt;&gt; 8 );
+    temp = (unsigned char) ((pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDS_Capability &amp; (LCDPolarity &lt;&lt; 8)) &gt;&gt; 8);
     temp &amp;= LCDPolarity;
-    Miscdata =(UCHAR) XGINew_GetReg2(pVBInfo-&gt;P3cc) ;
+    Miscdata = (unsigned char) XGINew_GetReg2(pVBInfo-&gt;P3cc) ;
 
     XGINew_SetReg3( pVBInfo-&gt;P3c2 , (Miscdata &amp; 0x3F) | temp ) ;
 
-    temp = (UCHAR) ( pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDS_Capability &amp; LCDPolarity ) ;
+    temp = (unsigned char) (pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDS_Capability &amp; LCDPolarity) ;
     XGINew_SetRegANDOR( pVBInfo-&gt;P3c4 , 0x35 , ~0x80 , temp&amp;0x80 ) ;      /* SR35[7] FP VSync polarity */
     XGINew_SetRegANDOR( pVBInfo-&gt;P3c4 , 0x30 , ~0x20 , (temp&amp;0x40)&gt;&gt;1 ) ;   /* SR30[5] FP HSync polarity */
 
@@ -8215,7 +8235,7 @@ void XGI_SetXG21LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex,
 
     LVDSVBE = LVDSVBS + LVDSVT - pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDSVDE ;
 
-    temp = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x11 ) ;
+    temp = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x11) ;
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x11 , temp &amp; 0x7f ) ;		/* Unlock CRTC */
 
     if (!( modeflag &amp; Charx8Dot ))
@@ -8325,7 +8345,7 @@ void XGI_SetXG21LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex,
 void XGI_SetXG27LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex,
 			 PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR temp,Miscdata;
+    unsigned char temp, Miscdata;
     unsigned short xres ,
            yres ,
            modeflag ,
@@ -8336,13 +8356,13 @@ void XGI_SetXG27LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex,
     unsigned short value;
 
     lvdstableindex = XGI_GetLVDSOEMTableIndex( pVBInfo );
-    temp = (UCHAR) ( ( pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDS_Capability &amp; (LCDPolarity &lt;&lt; 8 ) ) &gt;&gt; 8 );
+    temp = (unsigned char) ((pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDS_Capability &amp; (LCDPolarity &lt;&lt; 8)) &gt;&gt; 8);
     temp &amp;= LCDPolarity;
-    Miscdata =(UCHAR) XGINew_GetReg2(pVBInfo-&gt;P3cc) ;
+    Miscdata = (unsigned char) XGINew_GetReg2(pVBInfo-&gt;P3cc);
 
     XGINew_SetReg3( pVBInfo-&gt;P3c2 , (Miscdata &amp; 0x3F) | temp ) ;
 
-    temp = (UCHAR) ( pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDS_Capability &amp; LCDPolarity ) ;
+    temp = (unsigned char) (pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDS_Capability &amp; LCDPolarity) ;
     XGINew_SetRegANDOR( pVBInfo-&gt;P3c4 , 0x35 , ~0x80 , temp&amp;0x80 ) ;      /* SR35[7] FP VSync polarity */
     XGINew_SetRegANDOR( pVBInfo-&gt;P3c4 , 0x30 , ~0x20 , (temp&amp;0x40)&gt;&gt;1 ) ;   /* SR30[5] FP HSync polarity */
 
@@ -8398,7 +8418,7 @@ void XGI_SetXG27LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex,
 
     LVDSVBE = LVDSVBS + LVDSVT - pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDSVDE ;
 
-    temp = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x11 ) ;
+    temp = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3d4, 0x11) ;
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x11 , temp &amp; 0x7f ) ;		/* Unlock CRTC */
 
     if (!( modeflag &amp; Charx8Dot ))
@@ -8627,7 +8647,7 @@ unsigned char XGI_EnableChISLCD(PVB_DEVICE_INFO pVBInfo)
 /* --------------------------------------------------------------------- */
 unsigned short XGI_GetLCDCapPtr(PVB_DEVICE_INFO pVBInfo)
 {
-    UCHAR tempal ,
+    unsigned char tempal ,
           tempah ,
           tempbl ,
           i ;
@@ -8800,7 +8820,7 @@ void XGI_EnableBridge( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO p
         {
             if ( ( pVBInfo-&gt;SetFlag &amp; EnableChB ) || ( pVBInfo-&gt;VBInfo &amp; ( SetCRT2ToLCD | SetCRT2ToTV | SetCRT2ToRAMDAC ) ) )
             {
-                tempah = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x32 ) ;
+		tempah = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;P3c4, 0x32);
                 tempah &amp;= 0xDF;
                 if ( pVBInfo-&gt;VBInfo &amp; SetInSlaveMode )
                 {
@@ -8810,8 +8830,7 @@ void XGI_EnableBridge( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO p
                 XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x32 , tempah ) ;
                 XGINew_SetRegOR( pVBInfo-&gt;P3c4 , 0x1E , 0x20 ) ;
 
-
-                tempah = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;Part1Port , 0x2E ) ;
+		tempah = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;Part1Port, 0x2E);
 
                 if ( !( tempah &amp; 0x80 ) )
                     XGINew_SetRegOR( pVBInfo-&gt;Part1Port , 0x2E , 0x80 ) ;   	/* BVBDOENABLE = 1 */
@@ -8892,7 +8911,7 @@ void XGI_EnableBridge( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO p
 
 
 
-        tempah = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;Part1Port , 0x2E ) ;
+	tempah = (unsigned char)XGINew_GetReg1(pVBInfo-&gt;Part1Port, 0x2E);
         if ( !( tempah &amp; 0x80 ) )
             XGINew_SetRegOR( pVBInfo-&gt;Part1Port , 0x2E , 0x80 ) ;	/* BVBDOENABLE = 1 */
 
@@ -9185,7 +9204,7 @@ void XGI_SetDelayComp( PVB_DEVICE_INFO pVBInfo )
 {
     unsigned short index ;
 
-    UCHAR  tempah ,
+    unsigned char  tempah ,
            tempbl ,
            tempbh ;
 
@@ -9270,7 +9289,7 @@ void XGI_SetLCDCap( PVB_DEVICE_INFO pVBInfo )
         if ( pVBInfo-&gt;VBType &amp; ( VB_XGI301LV | VB_XGI302LV | VB_XGI301C ) )
         {        				/* 301LV/302LV only */
             /* Set 301LV Capability */
-		XGINew_SetReg1(pVBInfo-&gt;Part4Port, 0x24, (UCHAR)(tempcx &amp; 0x1F));
+		XGINew_SetReg1(pVBInfo-&gt;Part4Port, 0x24, (unsigned char)(tempcx &amp; 0x1F));
 	}
         /* VB Driving */
 	XGINew_SetRegANDOR(pVBInfo-&gt;Part4Port, 0x0D,
@@ -9391,7 +9410,7 @@ void XGI_SetAntiFlicker(unsigned short ModeNo, unsigned short ModeIdIndex,
     unsigned short tempbx ,
            index ;
 
-    UCHAR tempah ;
+    unsigned char tempah ;
 
     if (pVBInfo-&gt;TVInfo &amp; ( SetYPbPrMode525p | SetYPbPrMode750p ) )
         return ;
@@ -9427,7 +9446,7 @@ void XGI_SetEdgeEnhance(unsigned short ModeNo , unsigned short ModeIdIndex , PVB
     unsigned short tempbx ,
            index ;
 
-    UCHAR tempah ;
+    unsigned char tempah ;
 
 
     tempbx = XGI_GetTVPtrIndex(pVBInfo ) ;
@@ -9460,7 +9479,7 @@ void XGI_SetPhaseIncr( PVB_DEVICE_INFO pVBInfo )
 {
     unsigned short tempbx ;
 
-    UCHAR tempcl ,
+    unsigned char tempcl ,
           tempch ;
 
     unsigned long tempData ;
@@ -9491,7 +9510,7 @@ void XGI_SetYFilter(unsigned short ModeNo, unsigned short ModeIdIndex,
     unsigned short tempbx ,
            index ;
 
-    UCHAR tempcl ,
+    unsigned char tempcl ,
           tempch ,
           tempal ,
           *filterPtr ;
@@ -9590,7 +9609,8 @@ void XGI_SetYFilter(unsigned short ModeNo, unsigned short ModeIdIndex,
 /* 1 : 301B/302B/301LV/302LV */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetTVPtrIndex2(unsigned short *tempbx,UCHAR* tempcl,UCHAR* tempch, PVB_DEVICE_INFO pVBInfo)
+void XGI_GetTVPtrIndex2(unsigned short *tempbx, unsigned char *tempcl,
+			unsigned char *tempch, PVB_DEVICE_INFO pVBInfo)
 {
     *tempbx = 0 ;
     *tempcl = 0 ;
@@ -9637,9 +9657,9 @@ void XGI_SetCRT2ModeRegs(unsigned short ModeNo,
 			 PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short tempbl ;
-    SHORT  tempcl ;
+    short  tempcl ;
 
-    UCHAR  tempah ;
+    unsigned char  tempah ;
 
     /* XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x03 , 0x00 ) ; // fix write part1 index 0 BTDRAM bit Bug */
     tempah=0;
@@ -9966,7 +9986,7 @@ void XGI_GetRAMDAC2DATA(unsigned short ModeNo , unsigned short ModeIdIndex , uns
 unsigned short XGI_GetColorDepth(unsigned short ModeNo , unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short ColorDepth[ 6 ] = { 1 , 2 , 4 , 4 , 6 , 8 } ;
-    SHORT  index ;
+    short index ;
     unsigned short modeflag ;
 
     if ( ModeNo &lt;= 0x13 )
@@ -10036,7 +10056,7 @@ void XGINew_EnableCRT2( PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_LCD_Wait_Time(UCHAR DelayTime, PVB_DEVICE_INFO pVBInfo)
+void XGINew_LCD_Wait_Time(unsigned char DelayTime, PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short i ,
            j ;
@@ -10073,7 +10093,7 @@ void XGINew_LCD_Wait_Time(UCHAR DelayTime, PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-unsigned char XGI_BridgeIsOn( PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_BridgeIsOn(PVB_DEVICE_INFO pVBInfo)
 {
     unsigned short flag ;
 
@@ -10218,7 +10238,7 @@ unsigned short XGI_GetVCLK2Ptr(unsigned short ModeNo , unsigned short ModeIdInde
 
     unsigned short CRT2Index , VCLKIndex ;
     unsigned short modeflag , resinfo ;
-    UCHAR *CHTVVCLKPtr = NULL ;
+    unsigned char *CHTVVCLKPtr = NULL ;
 
     if ( ModeNo &lt;= 0x13 )
     {
@@ -10333,7 +10353,7 @@ unsigned short XGI_GetVCLK2Ptr(unsigned short ModeNo , unsigned short ModeIdInde
             }
             else
             {	/* for CRT2 */
-                VCLKIndex = ( UCHAR )XGINew_GetReg2( ( pVBInfo-&gt;P3ca + 0x02 ) ) ;	/* Port 3cch */
+		VCLKIndex = (unsigned char)XGINew_GetReg2((pVBInfo-&gt;P3ca + 0x02));	/* Port 3cch */
 		VCLKIndex = ( ( VCLKIndex &gt;&gt; 2 ) &amp; 0x03 ) ;
                 if ( ModeNo &gt; 0x13 )
                 {
diff --git a/drivers/staging/xgifb/vb_setmode.h b/drivers/staging/xgifb/vb_setmode.h
index 67a56b9d4c14..1c37f809dadb 100644
--- a/drivers/staging/xgifb/vb_setmode.h
+++ b/drivers/staging/xgifb/vb_setmode.h
@@ -1,7 +1,7 @@
 #ifndef  _VBSETMODE_
 #define  _VBSETMODE_
 
-extern   void     InitTo330Pointer(UCHAR,PVB_DEVICE_INFO);
+extern   void     InitTo330Pointer(unsigned char, PVB_DEVICE_INFO);
 extern   void     XGI_UnLockCRT2(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
 extern   void     XGI_LockCRT2(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
 extern   void     XGI_LongWait( PVB_DEVICE_INFO );
diff --git a/drivers/staging/xgifb/vb_struct.h b/drivers/staging/xgifb/vb_struct.h
index c0498d87327b..1d401c04de8e 100644
--- a/drivers/staging/xgifb/vb_struct.h
+++ b/drivers/staging/xgifb/vb_struct.h
@@ -12,7 +12,7 @@
 
 typedef struct _XGI_PanelDelayTblStruct
 {
- UCHAR timer[2];
+ unsigned char timer[2];
 } XGI_PanelDelayTblStruct;
 
 typedef struct _XGI_LCDDataStruct
@@ -28,11 +28,11 @@ typedef struct _XGI_LCDDataStruct
 
 typedef struct _XGI_LVDSCRT1HDataStruct
 {
- UCHAR Reg[8];
+ unsigned char Reg[8];
 } XGI_LVDSCRT1HDataStruct;
 typedef struct _XGI_LVDSCRT1VDataStruct
 {
- UCHAR Reg[7];
+ unsigned char Reg[7];
 } XGI_LVDSCRT1VDataStruct;
 
 
@@ -45,12 +45,12 @@ typedef struct _XGI_TVDataStruct
  unsigned short TVHDE;
  unsigned short TVVDE;
  unsigned short RVBHRS;
- UCHAR FlickerMode;
+ unsigned char FlickerMode;
  unsigned short HALFRVBHRS;
- UCHAR RY1COE;
- UCHAR RY2COE;
- UCHAR RY3COE;
- UCHAR RY4COE;
+ unsigned char RY1COE;
+ unsigned char RY2COE;
+ unsigned char RY3COE;
+ unsigned char RY4COE;
 } XGI_TVDataStruct;
 
 typedef struct _XGI_LVDSDataStruct
@@ -69,7 +69,7 @@ typedef struct _XGI_LVDSDesStruct
 
 typedef struct _XGI_LVDSCRT1DataStruct
 {
- UCHAR CR[15];
+ unsigned char CR[15];
 } XGI_LVDSCRT1DataStruct;
 
 /*add for LCDA*/
@@ -77,53 +77,53 @@ typedef struct _XGI_LVDSCRT1DataStruct
 
 typedef struct _XGI_StStruct
 {
- UCHAR St_ModeID;
+ unsigned char St_ModeID;
  unsigned short St_ModeFlag;
- UCHAR St_StTableIndex;
- UCHAR St_CRT2CRTC;
- UCHAR St_CRT2CRTC2;
- UCHAR St_ResInfo;
- UCHAR VB_StTVFlickerIndex;
- UCHAR VB_StTVEdgeIndex;
- UCHAR VB_StTVYFilterIndex;
+ unsigned char St_StTableIndex;
+ unsigned char St_CRT2CRTC;
+ unsigned char St_CRT2CRTC2;
+ unsigned char St_ResInfo;
+ unsigned char VB_StTVFlickerIndex;
+ unsigned char VB_StTVEdgeIndex;
+ unsigned char VB_StTVYFilterIndex;
 } XGI_StStruct;
 
 typedef struct _XGI_StandTableStruct
 {
- UCHAR CRT_COLS;
- UCHAR ROWS;
- UCHAR CHAR_HEIGHT;
+ unsigned char CRT_COLS;
+ unsigned char ROWS;
+ unsigned char CHAR_HEIGHT;
  unsigned short CRT_LEN;
- UCHAR SR[4];
- UCHAR MISC;
- UCHAR CRTC[0x19];
- UCHAR ATTR[0x14];
- UCHAR GRC[9];
+ unsigned char SR[4];
+ unsigned char MISC;
+ unsigned char CRTC[0x19];
+ unsigned char ATTR[0x14];
+ unsigned char GRC[9];
 } XGI_StandTableStruct;
 
 typedef struct _XGI_ExtStruct
 {
- UCHAR Ext_ModeID;
+ unsigned char Ext_ModeID;
  unsigned short Ext_ModeFlag;
  unsigned short Ext_ModeInfo;
  unsigned short Ext_Point;
  unsigned short Ext_VESAID;
- UCHAR Ext_VESAMEMSize;
- UCHAR Ext_RESINFO;
- UCHAR VB_ExtTVFlickerIndex;
- UCHAR VB_ExtTVEdgeIndex;
- UCHAR VB_ExtTVYFilterIndex;
- UCHAR REFindex;
+ unsigned char Ext_VESAMEMSize;
+ unsigned char Ext_RESINFO;
+ unsigned char VB_ExtTVFlickerIndex;
+ unsigned char VB_ExtTVEdgeIndex;
+ unsigned char VB_ExtTVYFilterIndex;
+ unsigned char REFindex;
 } XGI_ExtStruct;
 
 typedef struct _XGI_Ext2Struct
 {
  unsigned short Ext_InfoFlag;
- UCHAR Ext_CRT1CRTC;
- UCHAR Ext_CRTVCLK;
- UCHAR Ext_CRT2CRTC;
- UCHAR Ext_CRT2CRTC2;
- UCHAR  ModeID;
+ unsigned char Ext_CRT1CRTC;
+ unsigned char Ext_CRTVCLK;
+ unsigned char Ext_CRT2CRTC;
+ unsigned char Ext_CRT2CRTC2;
+ unsigned char  ModeID;
  unsigned short XRes;
  unsigned short YRes;
  /* unsigned short ROM_OFFSET; */
@@ -132,25 +132,25 @@ typedef struct _XGI_Ext2Struct
 
 typedef struct _XGI_MCLKDataStruct
 {
- UCHAR SR28,SR29,SR2A;
+ unsigned char SR28, SR29, SR2A;
  unsigned short CLOCK;
 } XGI_MCLKDataStruct;
 
 typedef struct _XGI_ECLKDataStruct
 {
- UCHAR SR2E,SR2F,SR30;
+ unsigned char SR2E, SR2F, SR30;
  unsigned short CLOCK;
 } XGI_ECLKDataStruct;
 
 typedef struct _XGI_VCLKDataStruct
 {
- UCHAR SR2B,SR2C;
+ unsigned char SR2B, SR2C;
  unsigned short CLOCK;
 } XGI_VCLKDataStruct;
 
 typedef struct _XGI_VBVCLKDataStruct
 {
- UCHAR Part4_A,Part4_B;
+ unsigned char Part4_A, Part4_B;
  unsigned short CLOCK;
 } XGI_VBVCLKDataStruct;
 
@@ -164,13 +164,13 @@ typedef struct _XGI_ModeResInfoStruct
 {
  unsigned short HTotal;
  unsigned short VTotal;
- UCHAR  XChar;
- UCHAR  YChar;
+ unsigned char  XChar;
+ unsigned char  YChar;
 } XGI_ModeResInfoStruct;
 
 typedef struct _XGI_LCDNBDesStruct
 {
-  UCHAR NB[12];
+  unsigned char NB[12];
 } XGI_LCDNBDesStruct;
  /*add for new UNIVGABIOS*/
 typedef struct _XGI_LCDDesStruct
@@ -183,7 +183,7 @@ typedef struct _XGI_LCDDesStruct
 
 typedef struct _XGI_LCDDataTablStruct
 {
- UCHAR  PANELID;
+ unsigned char  PANELID;
  unsigned short MASK;
  unsigned short CAP;
  unsigned short DATAPTR;
@@ -243,13 +243,13 @@ typedef struct _XGI330_TVDataStruct
  unsigned short TVHDE;
  unsigned short TVVDE;
  unsigned short RVBHRS;
- UCHAR FlickerMode;
+ unsigned char FlickerMode;
  unsigned short HALFRVBHRS;
 } XGI330_TVDataStruct;
 
 typedef struct _XGI330_LCDDataTablStruct
 {
- UCHAR  PANELID;
+ unsigned char  PANELID;
  unsigned short MASK;
  unsigned short CAP;
  unsigned short DATAPTR;
@@ -273,61 +273,61 @@ typedef struct _XGI330_CHTVDataStruct
 
 typedef struct _XGI_TimingHStruct
 {
-  UCHAR data[8];
+  unsigned char data[8];
 } XGI_TimingHStruct;
 
 typedef struct _XGI_TimingVStruct
 {
-  UCHAR data[7];
+  unsigned char data[7];
 } XGI_TimingVStruct;
 
 typedef struct _XGI_CH7007TV_TimingHStruct
 {
-  UCHAR data[10];
+  unsigned char data[10];
 } XGI_CH7007TV_TimingHStruct;
 
 typedef struct _XGI_CH7007TV_TimingVStruct
 {
-  UCHAR data[10];
+  unsigned char data[10];
 } XGI_CH7007TV_TimingVStruct;
 
 typedef struct _XGI_XG21CRT1Struct
 {
- UCHAR ModeID,CR02,CR03,CR15,CR16;
+ unsigned char ModeID, CR02, CR03, CR15, CR16;
 } XGI_XG21CRT1Struct;
 
 typedef struct _XGI330_CHTVRegDataStruct
 {
- UCHAR Reg[16];
+ unsigned char Reg[16];
 } XGI330_CHTVRegDataStruct;
 
 typedef struct _XGI330_LCDCapStruct
 {
- 		UCHAR      LCD_ID;
+		unsigned char	   LCD_ID;
 		unsigned short	   LCD_Capability;
-                UCHAR      LCD_SetFlag;
-                UCHAR      LCD_DelayCompensation;
-                UCHAR      LCD_HSyncWidth;
-                UCHAR      LCD_VSyncWidth;
-                UCHAR      LCD_VCLK;
-                UCHAR      LCDA_VCLKData1;
-                UCHAR      LCDA_VCLKData2;
-                UCHAR      LCUCHAR_VCLKData1;
-                UCHAR      LCUCHAR_VCLKData2;
-                UCHAR      PSC_S1;
-                UCHAR      PSC_S2;
-                UCHAR      PSC_S3;
-                UCHAR      PSC_S4;
-                UCHAR      PSC_S5;
-                UCHAR      PWD_2B;
-                UCHAR      PWD_2C;
-                UCHAR      PWD_2D;
-                UCHAR      PWD_2E;
-                UCHAR      PWD_2F;
-                UCHAR      Spectrum_31;
-                UCHAR      Spectrum_32;
-                UCHAR      Spectrum_33;
-                UCHAR      Spectrum_34;
+		unsigned char	   LCD_SetFlag;
+		unsigned char	   LCD_DelayCompensation;
+		unsigned char	   LCD_HSyncWidth;
+		unsigned char	   LCD_VSyncWidth;
+		unsigned char	   LCD_VCLK;
+		unsigned char	   LCDA_VCLKData1;
+		unsigned char	   LCDA_VCLKData2;
+		unsigned char	   LCUCHAR_VCLKData1;
+		unsigned char	   LCUCHAR_VCLKData2;
+		unsigned char	   PSC_S1;
+		unsigned char	   PSC_S2;
+		unsigned char	   PSC_S3;
+		unsigned char	   PSC_S4;
+		unsigned char	   PSC_S5;
+		unsigned char	   PWD_2B;
+		unsigned char	   PWD_2C;
+		unsigned char	   PWD_2D;
+		unsigned char	   PWD_2E;
+		unsigned char	   PWD_2F;
+		unsigned char	   Spectrum_31;
+		unsigned char	   Spectrum_32;
+		unsigned char	   Spectrum_33;
+		unsigned char	   Spectrum_34;
 } XGI330_LCDCapStruct;
 
 typedef struct _XGI21_LVDSCapStruct
@@ -341,50 +341,50 @@ typedef struct _XGI21_LVDSCapStruct
 		unsigned short	   LVDSVFP;
 		unsigned short	   LVDSHSYNC;
 		unsigned short	   LVDSVSYNC;
-                UCHAR      VCLKData1;
-                UCHAR      VCLKData2;
-                UCHAR      PSC_S1;
-                UCHAR      PSC_S2;
-                UCHAR      PSC_S3;
-                UCHAR      PSC_S4;
-                UCHAR      PSC_S5;
+		unsigned char	   VCLKData1;
+		unsigned char	   VCLKData2;
+		unsigned char	   PSC_S1;
+		unsigned char	   PSC_S2;
+		unsigned char	   PSC_S3;
+		unsigned char	   PSC_S4;
+		unsigned char	   PSC_S5;
 } XGI21_LVDSCapStruct;
 
 typedef struct _XGI_CRT1TableStruct
 {
-  UCHAR CR[16];
+  unsigned char CR[16];
 } XGI_CRT1TableStruct;
 
 
 typedef struct _XGI330_VCLKDataStruct
 {
-    UCHAR SR2B,SR2C;
+    unsigned char SR2B, SR2C;
     unsigned short CLOCK;
 } XGI330_VCLKDataStruct;
 
 typedef struct _XGI301C_Tap4TimingStruct
 {
     unsigned short DE;
-    UCHAR  Reg[64];   /* C0-FF */
+    unsigned char  Reg[64];   /* C0-FF */
 } XGI301C_Tap4TimingStruct;
 
 typedef struct _XGI_New_StandTableStruct
 {
-	UCHAR  CRT_COLS;
-	UCHAR  ROWS;
-	UCHAR  CHAR_HEIGHT;
+	unsigned char  CRT_COLS;
+	unsigned char  ROWS;
+	unsigned char  CHAR_HEIGHT;
 	unsigned short CRT_LEN;
-	UCHAR  SR[4];
-	UCHAR  MISC;
-	UCHAR  CRTC[0x19];
-	UCHAR  ATTR[0x14];
-	UCHAR  GRC[9];
+	unsigned char  SR[4];
+	unsigned char  MISC;
+	unsigned char  CRTC[0x19];
+	unsigned char  ATTR[0x14];
+	unsigned char  GRC[9];
 } XGI_New_StandTableStruct;
 
-typedef UCHAR DRAM8Type[8];
-typedef UCHAR DRAM4Type[4];
-typedef UCHAR DRAM32Type[32];
-typedef UCHAR DRAM2Type[2];
+typedef unsigned char DRAM8Type[8];
+typedef unsigned char DRAM4Type[4];
+typedef unsigned char DRAM32Type[32];
+typedef unsigned char DRAM2Type[2];
 
 typedef struct _VB_DEVICE_INFO  VB_DEVICE_INFO;
 typedef VB_DEVICE_INFO *	PVB_DEVICE_INFO;
@@ -427,8 +427,8 @@ struct _VB_DEVICE_INFO
 
     DRAM8Type  *SR15; /* pointer : point to array */
     DRAM8Type  *CR40;
-    UCHAR  *pSoftSetting;
-    UCHAR  *pOutputSelect;
+    unsigned char  *pSoftSetting;
+    unsigned char  *pOutputSelect;
 
     unsigned short *pRGBSenseData;
     unsigned short *pRGBSenseData2; /*301b*/
@@ -437,62 +437,62 @@ struct _VB_DEVICE_INFO
     unsigned short *pYCSenseData;
     unsigned short *pYCSenseData2;
 
-    UCHAR  *pSR07;
-    UCHAR  *CR49;
-    UCHAR  *pSR1F;
-    UCHAR  *AGPReg;
-    UCHAR  *SR16;
-    UCHAR  *pSR21;
-    UCHAR  *pSR22;
-    UCHAR  *pSR23;
-    UCHAR  *pSR24;
-    UCHAR  *SR25;
-    UCHAR  *pSR31;
-    UCHAR  *pSR32;
-    UCHAR  *pSR33;
-    UCHAR  *pSR36;      /* alan 12/07/2006 */
-    UCHAR  *pCRCF;
-    UCHAR  *pCRD0;      /* alan 12/07/2006 */
-    UCHAR  *pCRDE;      /* alan 12/07/2006 */
-    UCHAR  *pCR8F;      /* alan 12/07/2006 */
-    UCHAR  *pSR40;      /* alan 12/07/2006 */
-    UCHAR  *pSR41;      /* alan 12/07/2006 */
-    UCHAR  *pDVOSetting;
-    UCHAR  *pCR2E;
-    UCHAR  *pCR2F;
-    UCHAR  *pCR46;
-    UCHAR  *pCR47;
-    UCHAR  *pCRT2Data_1_2;
-    UCHAR  *pCRT2Data_4_D;
-    UCHAR  *pCRT2Data_4_E;
-    UCHAR  *pCRT2Data_4_10;
+    unsigned char  *pSR07;
+    unsigned char  *CR49;
+    unsigned char  *pSR1F;
+    unsigned char  *AGPReg;
+    unsigned char  *SR16;
+    unsigned char  *pSR21;
+    unsigned char  *pSR22;
+    unsigned char  *pSR23;
+    unsigned char  *pSR24;
+    unsigned char  *SR25;
+    unsigned char  *pSR31;
+    unsigned char  *pSR32;
+    unsigned char  *pSR33;
+    unsigned char  *pSR36;      /* alan 12/07/2006 */
+    unsigned char  *pCRCF;
+    unsigned char  *pCRD0;      /* alan 12/07/2006 */
+    unsigned char  *pCRDE;      /* alan 12/07/2006 */
+    unsigned char  *pCR8F;      /* alan 12/07/2006 */
+    unsigned char  *pSR40;      /* alan 12/07/2006 */
+    unsigned char  *pSR41;      /* alan 12/07/2006 */
+    unsigned char  *pDVOSetting;
+    unsigned char  *pCR2E;
+    unsigned char  *pCR2F;
+    unsigned char  *pCR46;
+    unsigned char  *pCR47;
+    unsigned char  *pCRT2Data_1_2;
+    unsigned char  *pCRT2Data_4_D;
+    unsigned char  *pCRT2Data_4_E;
+    unsigned char  *pCRT2Data_4_10;
     XGI_MCLKDataStruct  *MCLKData;
     XGI_ECLKDataStruct  *ECLKData;
 
-    UCHAR   *XGI_TVDelayList;
-    UCHAR   *XGI_TVDelayList2;
-    UCHAR   *CHTVVCLKUNTSC;
-    UCHAR   *CHTVVCLKONTSC;
-    UCHAR   *CHTVVCLKUPAL;
-    UCHAR   *CHTVVCLKOPAL;
-    UCHAR   *NTSCTiming;
-    UCHAR   *PALTiming;
-    UCHAR   *HiTVExtTiming;
-    UCHAR   *HiTVSt1Timing;
-    UCHAR   *HiTVSt2Timing;
-    UCHAR   *HiTVTextTiming;
-    UCHAR   *YPbPr750pTiming;
-    UCHAR   *YPbPr525pTiming;
-    UCHAR   *YPbPr525iTiming;
-    UCHAR   *HiTVGroup3Data;
-    UCHAR   *HiTVGroup3Simu;
-    UCHAR   *HiTVGroup3Text;
-    UCHAR   *Ren525pGroup3;
-    UCHAR   *Ren750pGroup3;
-    UCHAR   *ScreenOffset;
-    UCHAR   *pXGINew_DRAMTypeDefinition;
-    UCHAR   *pXGINew_I2CDefinition ;
-    UCHAR   *pXGINew_CR97 ;
+    unsigned char   *XGI_TVDelayList;
+    unsigned char   *XGI_TVDelayList2;
+    unsigned char   *CHTVVCLKUNTSC;
+    unsigned char   *CHTVVCLKONTSC;
+    unsigned char   *CHTVVCLKUPAL;
+    unsigned char   *CHTVVCLKOPAL;
+    unsigned char   *NTSCTiming;
+    unsigned char   *PALTiming;
+    unsigned char   *HiTVExtTiming;
+    unsigned char   *HiTVSt1Timing;
+    unsigned char   *HiTVSt2Timing;
+    unsigned char   *HiTVTextTiming;
+    unsigned char   *YPbPr750pTiming;
+    unsigned char   *YPbPr525pTiming;
+    unsigned char   *YPbPr525iTiming;
+    unsigned char   *HiTVGroup3Data;
+    unsigned char   *HiTVGroup3Simu;
+    unsigned char   *HiTVGroup3Text;
+    unsigned char   *Ren525pGroup3;
+    unsigned char   *Ren750pGroup3;
+    unsigned char   *ScreenOffset;
+    unsigned char   *pXGINew_DRAMTypeDefinition;
+    unsigned char   *pXGINew_I2CDefinition ;
+    unsigned char   *pXGINew_CR97 ;
 
     XGI330_LCDCapStruct  *LCDCapList;
     XGI21_LVDSCapStruct  *XG21_LVDSCapList;
@@ -525,8 +525,8 @@ typedef struct
     unsigned short    Vertical_SYNC;
     unsigned short    Vertical_BP;
     double    DCLK;
-    UCHAR     FrameRate;
-    UCHAR     Interlace;
+    unsigned char     FrameRate;
+    unsigned char     Interlace;
     unsigned short    Margin;
 } TimingInfo;
 
diff --git a/drivers/staging/xgifb/vb_table.h b/drivers/staging/xgifb/vb_table.h
index 5e06afe368b0..5f394d065764 100644
--- a/drivers/staging/xgifb/vb_table.h
+++ b/drivers/staging/xgifb/vb_table.h
@@ -63,14 +63,14 @@ XGI_ECLKDataStruct XGI340_ECLKData[]=
 
 
 
-UCHAR XGI340_SR13[4][8]={
+unsigned char XGI340_SR13[4][8] = {
 {0x35,0x45,0xb1,0x00,0x00,0x00,0x00,0x00},/* SR13 */
 {0x41,0x51,0x5c,0x00,0x00,0x00,0x00,0x00},/* SR14 */
 {0x31,0x42,0x42,0x00,0x00,0x00,0x00,0x00},/* SR18 */
 {0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00}/* SR1B */
 };
 
-UCHAR XGI340_cr41[24][8]=
+unsigned char XGI340_cr41[24][8] =
 {{0x20,0x50,0x60,0x00,0x00,0x00,0x00,0x00},/* 0 CR41 */
 {0xc4,0x40,0x84,0x00,0x00,0x00,0x00,0x00},/* 1 CR8A */
 {0xc4,0x40,0x84,0x00,0x00,0x00,0x00,0x00},/* 2 CR8B */
@@ -98,7 +98,7 @@ UCHAR XGI340_cr41[24][8]=
 };
 
 
-UCHAR XGI27_cr41[24][8]=
+unsigned char XGI27_cr41[24][8] =
 {
 {0x20,0x40,0x60,0x00,0x00,0x00,0x00,0x00},/* 0 CR41 */
 {0xC4,0x40,0x84,0x00,0x00,0x00,0x00,0x00},/* 1 CR8A */
@@ -126,7 +126,7 @@ UCHAR XGI27_cr41[24][8]=
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}/* 23 CRC5 */
 };
 
-UCHAR XGI340_CR6B[8][4]={
+unsigned char XGI340_CR6B[8][4] = {
 {0xaa,0xaa,0xaa,0xaa},
 {0xaa,0xaa,0xaa,0xaa},
 {0xaa,0xaa,0xaa,0xaa},
@@ -137,7 +137,7 @@ UCHAR XGI340_CR6B[8][4]={
 {0x00,0x00,0x00,0x00}
 };
 
-UCHAR XGI340_CR6E[8][4]={
+unsigned char XGI340_CR6E[8][4] = {
 {0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00},
@@ -148,7 +148,7 @@ UCHAR XGI340_CR6E[8][4]={
 {0x00,0x00,0x00,0x00}
 };
 
-UCHAR XGI340_CR6F[8][32]={
+unsigned char XGI340_CR6F[8][32] = {
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
@@ -159,7 +159,7 @@ UCHAR XGI340_CR6F[8][32]={
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}
 };
 
-UCHAR XGI340_CR89[8][2]={
+unsigned char XGI340_CR89[8][2] = {
 {0x00,0x00},
 {0x00,0x00},
 {0x00,0x00},
@@ -170,11 +170,12 @@ UCHAR XGI340_CR89[8][2]={
 {0x00,0x00}
 };
 			 /* CR47,CR48,CR49,CR4A,CR4B,CR4C,CR70,CR71,CR74,CR75,CR76,CR77 */
-UCHAR XGI340_AGPReg[12]={0x28,0x23,0x00,0x20,0x00,0x20,0x00,0x05,0xd0,0x10,0x10,0x00};
+unsigned char XGI340_AGPReg[12] = {0x28, 0x23, 0x00, 0x20, 0x00, 0x20, 0x00,
+				   0x05, 0xd0, 0x10, 0x10, 0x00};
 
-UCHAR XGI340_SR16[4]={0x03,0x83,0x03,0x83};
+unsigned char XGI340_SR16[4] = {0x03, 0x83, 0x03, 0x83};
 
-UCHAR XGI330_SR15_1[8][8]={
+unsigned char XGI330_SR15_1[8][8] = {
 {0x0,0x0,0x00,0x00,0x20,0x20,0x00,0x00},
 {0x5,0x15,0x15,0x15,0x15,0x15,0x00,0x00},
 {0xba,0xba,0xba,0xba,0xBA,0xBA,0x00,0x00},
@@ -185,7 +186,7 @@ UCHAR XGI330_SR15_1[8][8]={
 {0x0,0xa5,0xfb,0xf6,0xF6,0xF6,0x00,0x00}
 };
 
-UCHAR XGI330_cr40_1[15][8]={
+unsigned char XGI330_cr40_1[15][8] = {
 {0x66,0x40,0x40,0x28,0x24,0x24,0x00,0x00},
 {0x66,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},
@@ -203,12 +204,12 @@ UCHAR XGI330_cr40_1[15][8]={
 {0x00,0xA2,0x00,0x00,0xA2,0xA2,0x00,0x00},
 };
 
-UCHAR XGI330_sr25[]={0x00,0x0};
-UCHAR XGI330_sr31=0xc0;
-UCHAR XGI330_sr32=0x11;
-UCHAR XGI330_SR33=0x00;
-UCHAR XG40_CRCF=0x13;
-UCHAR XG40_DRAMTypeDefinition=0xFF ;
+unsigned char XGI330_sr25[] = {0x00, 0x0};
+unsigned char XGI330_sr31 = 0xc0;
+unsigned char XGI330_sr32 = 0x11;
+unsigned char XGI330_SR33 = 0x00;
+unsigned char XG40_CRCF = 0x13;
+unsigned char XG40_DRAMTypeDefinition = 0xFF ;
 
 XGI_StStruct XGI330_SModeIDTable[]=
 {
@@ -964,10 +965,10 @@ XGI330_CHTVRegDataStruct XGI_CHTVRegOPAL[]={
                 {{      0xE4,0x7F,0xB7,0x1E,0xAF,0x29,0x37,0x5A,0x05,0x00,0x80,0x25,0x8C,0xB2,0x2A,0x00 }}/* 06 (1024x768) ;;1/12/02 */
 	     };
 
-UCHAR XGI_CH7017LV1024x768[]={0x60,0x02,0x00,0x07,0x40,0xED,0xA3,
-                   			0xC8,0xC7,0xAC,0xE0,0x02};
-UCHAR XGI_CH7017LV1400x1050[]={0x60,0x03,0x11,0x00,0x40,0xE3,0xAD,
-                   			0xDB,0xF6,0xAC,0xE0,0x02};
+unsigned char XGI_CH7017LV1024x768[] = {0x60, 0x02, 0x00, 0x07, 0x40, 0xED, 0xA3,
+					0xC8, 0xC7, 0xAC, 0xE0, 0x02};
+unsigned char XGI_CH7017LV1400x1050[] = {0x60, 0x03, 0x11, 0x00, 0x40, 0xE3, 0xAD,
+					 0xDB, 0xF6, 0xAC, 0xE0, 0x02};
 
 
 /*add for new UNIVGABIOS*/
@@ -1754,7 +1755,7 @@ XGI330_TVDataStruct  XGI_StYPbPr750pData[]=
  {    1,   1,1650, 750,1280, 480,   0,   0, 760},
 };
 
-UCHAR XGI330_NTSCTiming[] = {
+unsigned char XGI330_NTSCTiming[] = {
   0x17,0x1d,0x03,0x09,0x05,0x06,0x0c,0x0c,
   0x94,0x49,0x01,0x0a,0x06,0x0d,0x04,0x0a,
   0x06,0x14,0x0d,0x04,0x0a,0x00,0x85,0x1b,
@@ -1764,7 +1765,7 @@ UCHAR XGI330_NTSCTiming[] = {
   0x60,0x80,0x14,0x90,0x8c,0x60,0x14,0x50,
   0x00,0x40,0x44,0x00,0xdb,0x02,0x3b,0x00};
 
-UCHAR XGI330_PALTiming[] = {
+unsigned char XGI330_PALTiming[] = {
   0x21,0x5A,0x35,0x6e,0x04,0x38,0x3d,0x70,
   0x94,0x49,0x01,0x12,0x06,0x3e,0x35,0x6d,
   0x06,0x14,0x3e,0x35,0x6d,0x00,0x45,0x2b,
@@ -1774,7 +1775,7 @@ UCHAR XGI330_PALTiming[] = {
   0x60,0x80,0x14,0x90,0x8c,0x60,0x14,0x63,
   0x00,0x40,0x3e,0x00,0xe1,0x02,0x28,0x00};
 
-UCHAR XGI330_HiTVExtTiming[] =
+unsigned char XGI330_HiTVExtTiming[] =
 {
       0x2D,0x60,0x2C,0x5F,0x08,0x31,0x3A,0x64,
       0x28,0x02,0x01,0x3D,0x06,0x3E,0x35,0x6D,
@@ -1788,7 +1789,7 @@ UCHAR XGI330_HiTVExtTiming[] =
 
 };
 
-UCHAR XGI330_HiTVSt1Timing[] =
+unsigned char XGI330_HiTVSt1Timing[] =
 {
       0x32,0x65,0x2C,0x5F,0x08,0x31,0x3A,0x65,
       0x28,0x02,0x01,0x3D,0x06,0x3E,0x35,0x6D,
@@ -1801,7 +1802,7 @@ UCHAR XGI330_HiTVSt1Timing[] =
       0x0E,0x00,0xfc,0xff,0x2d,0x00
 };
 
-UCHAR XGI330_HiTVSt2Timing[] =
+unsigned char XGI330_HiTVSt2Timing[] =
 {
       0x32,0x65,0x2C,0x5F,0x08,0x31,0x3A,0x64,
       0x28,0x02,0x01,0x3D,0x06,0x3E,0x35,0x6D,
@@ -1814,7 +1815,7 @@ UCHAR XGI330_HiTVSt2Timing[] =
       0x27,0x00,0xFC,0xff,0x6a,0x00
 };
 
-UCHAR XGI330_HiTVTextTiming[] =
+unsigned char XGI330_HiTVTextTiming[] =
 {
       0x32,0x65,0x2C,0x5F,0x08,0x31,0x3A,0x65,
       0x28,0x02,0x01,0x3D,0x06,0x3E,0x35,0x6D,
@@ -1827,7 +1828,7 @@ UCHAR XGI330_HiTVTextTiming[] =
       0x11,0x00,0xFC,0xFF,0x32,0x00
 };
 
-UCHAR XGI330_YPbPr750pTiming[] =
+unsigned char XGI330_YPbPr750pTiming[] =
 {
       0x30,0x1d,0xe8,0x09,0x09,0xed,0x0c,0x0c,
       0x98,0x0a,0x01,0x0c,0x06,0x0d,0x04,0x0a,
@@ -1840,7 +1841,7 @@ UCHAR XGI330_YPbPr750pTiming[] =
       0x11,0x00,0xfc,0xff,0x32,0x00
 };
 
-UCHAR XGI330_YPbPr525pTiming[] =
+unsigned char XGI330_YPbPr525pTiming[] =
 {
       0x3E,0x11,0x06,0x09,0x0b,0x0c,0x0c,0x0c,
       0x98,0x0a,0x01,0x0d,0x06,0x0d,0x04,0x0a,
@@ -1853,7 +1854,7 @@ UCHAR XGI330_YPbPr525pTiming[] =
       0x11,0x00,0xFC,0xFF,0x32,0x00
 };
 
-UCHAR XGI330_YPbPr525iTiming[] =
+unsigned char XGI330_YPbPr525iTiming[] =
 {
       0x1B,0x21,0x03,0x09,0x05,0x06,0x0C,0x0C,
       0x94,0x49,0x01,0x0A,0x06,0x0D,0x04,0x0A,
@@ -1867,7 +1868,7 @@ UCHAR XGI330_YPbPr525iTiming[] =
 
 };
 
-UCHAR XGI330_HiTVGroup3Data[] =
+unsigned char XGI330_HiTVGroup3Data[] =
 {
       0x00,0x1A,0x22,0x63,0x62,0x22,0x08,0x5F,
       0x05,0x21,0xB2,0xB2,0x55,0x77,0x2A,0xA6,
@@ -1879,7 +1880,7 @@ UCHAR XGI330_HiTVGroup3Data[] =
       0x18,0x05,0x18,0x05,0x4C,0xA8,0x01
 };
 
-UCHAR XGI330_HiTVGroup3Simu[] =
+unsigned char XGI330_HiTVGroup3Simu[] =
 {
       0x00,0x1A,0x22,0x63,0x62,0x22,0x08,0x95,
       0xDB,0x20,0xB8,0xB8,0x55,0x47,0x2A,0xA6,
@@ -1891,7 +1892,7 @@ UCHAR XGI330_HiTVGroup3Simu[] =
       0x18,0x05,0x18,0x05,0x4C,0xA8,0x01
 };
 
-UCHAR XGI330_HiTVGroup3Text[] =
+unsigned char XGI330_HiTVGroup3Text[] =
 {
       0x00,0x1A,0x22,0x63,0x62,0x22,0x08,0xA7,
       0xF5,0x20,0xCE,0xCE,0x55,0x47,0x2A,0xA6,
@@ -1903,7 +1904,7 @@ UCHAR XGI330_HiTVGroup3Text[] =
       0x18,0x05,0x18,0x05,0x4C,0xA8,0x01
 };
 
-UCHAR XGI330_Ren525pGroup3[] =
+unsigned char XGI330_Ren525pGroup3[] =
 {
   0x00,0x14,0x15,0x25,0x55,0x15,0x0b,0x13,
   0xB1,0x41,0x62,0x62,0xFF,0xF4,0x45,0xa6,
@@ -1915,7 +1916,7 @@ UCHAR XGI330_Ren525pGroup3[] =
   0x1a,0x1F,0x25,0x2a,0x4C,0xAA,0x01
 };
 
-UCHAR XGI330_Ren750pGroup3[] =
+unsigned char XGI330_Ren750pGroup3[] =
 {
   0x00,0x14,0x15,0x25,0x55,0x15,0x0b,0x7a,
   0x54,0x41,0xE7,0xE7,0xFF,0xF4,0x45,0xa6,
@@ -3392,7 +3393,9 @@ XGI_VBVCLKDataStruct XGI330_VBVCLKData[]=
  { 0x70,0x44,108}, /* 0x49 chiawen for 1400x1050*/
 };
 
-UCHAR XGI330_ScreenOffset[]={ 0x14,0x19,0x20,0x28,0x32,0x40,0x50,0x64,0x78,0x80,0x2d,0x35,0x57,0x48 };
+unsigned char XGI330_ScreenOffset[] = { 0x14, 0x19, 0x20, 0x28, 0x32, 0x40,
+					0x50, 0x64, 0x78, 0x80, 0x2d, 0x35,
+					0x57, 0x48};
 
 XGI_StResInfoStruct XGI330_StResInfo[]=
 {
@@ -3430,10 +3433,10 @@ XGI_ModeResInfoStruct XGI330_ModeResInfo[]=
  { 1152, 864, 8,16}
 };
 
-UCHAR XGI330_OutputSelect =0x40;
-UCHAR XGI330_SoftSetting = 0x30;
-UCHAR XGI330_SR07=0x18;
-UCHAR XGI330New_SR15[8][8]={
+unsigned char XGI330_OutputSelect = 0x40;
+unsigned char XGI330_SoftSetting = 0x30;
+unsigned char XGI330_SR07 = 0x18;
+unsigned char XGI330New_SR15[8][8] = {
 {0x0,0x4,0x60,0x60},
 {0xf,0xf,0xf,0xf},
 {0xba,0xba,0xba,0xba},
@@ -3444,7 +3447,7 @@ UCHAR XGI330New_SR15[8][8]={
 {0x0,0xa5,0xfb,0xf6}
 };
 
-UCHAR XGI330New_CR40[5][8]={
+unsigned char XGI330New_CR40[5][8] = {
 {0x77,0x77,0x44,0x44},
 {0x77,0x77,0x44,0x44},
 {0x0,0x0,0x0,0x0},
@@ -3452,63 +3455,63 @@ UCHAR XGI330New_CR40[5][8]={
 {0x0,0x0,0xf0,0xf8}
 };
 
-UCHAR XGI330_CR49[]={0xaa,0x88};
-UCHAR XGI330_SR1F=0x0;
-UCHAR XGI330_SR21=0xa3;
-UCHAR XGI330_650_SR21=0xa7;
-UCHAR XGI330_SR22=0xfb;
-UCHAR XGI330_SR23=0xf6;
-UCHAR XGI330_SR24=0xd;
-
-UCHAR XGI660_SR21=0xa3;/* 2003.0312 */
-UCHAR XGI660_SR22=0xf3;/* 2003.0312 */
-
-UCHAR XGI330_LVDS_SR32=0x00;   /* ynlai for 650 LVDS */
-UCHAR XGI330_LVDS_SR33=0x00;	/* chiawen for 650 LVDS */
-UCHAR XGI330_650_SR31=0x40;
-UCHAR XGI330_650_SR33=0x04;
-UCHAR XGI330_CRT2Data_1_2 = 0x0;
-UCHAR XGI330_CRT2Data_4_D = 0x0;
-UCHAR XGI330_CRT2Data_4_E = 0x0;
-UCHAR XGI330_CRT2Data_4_10 = 0x80;
+unsigned char XGI330_CR49[] = {0xaa, 0x88};
+unsigned char XGI330_SR1F = 0x0;
+unsigned char XGI330_SR21 = 0xa3;
+unsigned char XGI330_650_SR21 = 0xa7;
+unsigned char XGI330_SR22 = 0xfb;
+unsigned char XGI330_SR23 = 0xf6;
+unsigned char XGI330_SR24 = 0xd;
+
+unsigned char XGI660_SR21 = 0xa3;/* 2003.0312 */
+unsigned char XGI660_SR22 = 0xf3;/* 2003.0312 */
+
+unsigned char XGI330_LVDS_SR32 = 0x00;   /* ynlai for 650 LVDS */
+unsigned char XGI330_LVDS_SR33 = 0x00;	/* chiawen for 650 LVDS */
+unsigned char XGI330_650_SR31 = 0x40;
+unsigned char XGI330_650_SR33 = 0x04;
+unsigned char XGI330_CRT2Data_1_2 = 0x0;
+unsigned char XGI330_CRT2Data_4_D = 0x0;
+unsigned char XGI330_CRT2Data_4_E = 0x0;
+unsigned char XGI330_CRT2Data_4_10 = 0x80;
 unsigned short XGI330_RGBSenseData = 0xd1;
 unsigned short XGI330_VideoSenseData = 0xb9;
 unsigned short XGI330_YCSenseData = 0xb3;
 unsigned short XGI330_RGBSenseData2 = 0x0190;     /*301b*/
 unsigned short XGI330_VideoSenseData2 = 0x0110;
 unsigned short XGI330_YCSenseData2 = 0x016B;
-UCHAR XGI330_NTSCPhase[] = {0x21,0xed,0x8a,0x8};
-UCHAR XGI330_PALPhase[] = {0x2a,0x5,0xd3,0x0};
-UCHAR XGI330_NTSCPhase2[] = {0x21,0xF0,0x7B,0xD6};/*301b*/
-UCHAR XGI330_PALPhase2[] = {0x2a,0x09,0x86,0xe9};
-UCHAR XGI330_PALMPhase[] = {0x21,0xE4,0x2E,0x9B};   /*palmn*/
-UCHAR XGI330_PALNPhase[] = {0x21,0xF4,0x3E,0xBA};
-UCHAR XG40_I2CDefinition = 0x00 ;
-UCHAR XG20_CR97 = 0x10 ;
-
-UCHAR XG21_DVOSetting = 0x00 ;
-UCHAR XG21_CR2E = 0x00 ;
-UCHAR XG21_CR2F = 0x00 ;
-UCHAR XG21_CR46 = 0x00 ;
-UCHAR XG21_CR47 = 0x00 ;
-
-UCHAR XG27_CR97 = 0xC1 ;
-UCHAR XG27_SR36 = 0x30 ;
-UCHAR XG27_CR8F = 0x0C ;
-UCHAR XG27_CRD0[] = {0,0,0,0,0,0,0,0x82,0x00,0x66,0x01,0x00} ;
-UCHAR XG27_CRDE[] = {0,0} ;
-UCHAR XG27_SR40 = 0x04 ;
-UCHAR XG27_SR41 = 0x00 ;
-
-UCHAR XGI330_CHTVVCLKUNTSC[]={0x00 };
-
-UCHAR XGI330_CHTVVCLKONTSC[]={0x00 };
-
-UCHAR XGI330_CHTVVCLKUPAL[]={0x00 };
-
-UCHAR XGI330_CHTVVCLKOPAL[]={0x00 };
-
-UCHAR XGI7007_CHTVVCLKUNTSC[]={CH7007TVVCLK30_2,
+unsigned char XGI330_NTSCPhase[] = {0x21, 0xed, 0x8a, 0x8};
+unsigned char XGI330_PALPhase[] = {0x2a, 0x5, 0xd3, 0x0};
+unsigned char XGI330_NTSCPhase2[] = {0x21, 0xF0, 0x7B, 0xD6};/*301b*/
+unsigned char XGI330_PALPhase2[] = {0x2a, 0x09, 0x86, 0xe9};
+unsigned char XGI330_PALMPhase[] = {0x21, 0xE4, 0x2E, 0x9B};   /*palmn*/
+unsigned char XGI330_PALNPhase[] = {0x21, 0xF4, 0x3E, 0xBA};
+unsigned char XG40_I2CDefinition = 0x00 ;
+unsigned char XG20_CR97 = 0x10 ;
+
+unsigned char XG21_DVOSetting = 0x00 ;
+unsigned char XG21_CR2E = 0x00 ;
+unsigned char XG21_CR2F = 0x00 ;
+unsigned char XG21_CR46 = 0x00 ;
+unsigned char XG21_CR47 = 0x00 ;
+
+unsigned char XG27_CR97 = 0xC1 ;
+unsigned char XG27_SR36 = 0x30 ;
+unsigned char XG27_CR8F = 0x0C ;
+unsigned char XG27_CRD0[] = {0, 0, 0, 0, 0, 0, 0, 0x82, 0x00, 0x66, 0x01, 0x00};
+unsigned char XG27_CRDE[] = {0, 0};
+unsigned char XG27_SR40 = 0x04 ;
+unsigned char XG27_SR41 = 0x00 ;
+
+unsigned char XGI330_CHTVVCLKUNTSC[] = {0x00};
+
+unsigned char XGI330_CHTVVCLKONTSC[] = {0x00};
+
+unsigned char XGI330_CHTVVCLKUPAL[] = {0x00};
+
+unsigned char XGI330_CHTVVCLKOPAL[] = {0x00};
+
+unsigned char XGI7007_CHTVVCLKUNTSC[] = {CH7007TVVCLK30_2,
                                CH7007TVVCLK30_2,
                                CH7007TVVCLK30_2,
                                CH7007TVVCLK30_2,
@@ -3516,7 +3519,7 @@ UCHAR XGI7007_CHTVVCLKUNTSC[]={CH7007TVVCLK30_2,
                                CH7007TVVCLK47_8
                               };
 
-UCHAR XGI7007_CHTVVCLKONTSC[]={CH7007TVVCLK26_4,
+unsigned char XGI7007_CHTVVCLKONTSC[] = {CH7007TVVCLK26_4,
                                CH7007TVVCLK26_4,
                                CH7007TVVCLK26_4,
                                CH7007TVVCLK26_4,
@@ -3524,7 +3527,7 @@ UCHAR XGI7007_CHTVVCLKONTSC[]={CH7007TVVCLK26_4,
                                CH7007TVVCLK43_6
                               };
 
-UCHAR XGI7007_CHTVVCLKUPAL[]={CH7007TVVCLK31_5,
+unsigned char XGI7007_CHTVVCLKUPAL[] = {CH7007TVVCLK31_5,
                               CH7007TVVCLK31_5,
                               CH7007TVVCLK31_5,
                               CH7007TVVCLK31_5,
@@ -3532,7 +3535,7 @@ UCHAR XGI7007_CHTVVCLKUPAL[]={CH7007TVVCLK31_5,
                               CH7007TVVCLK39
                              };
 
-UCHAR XGI7007_CHTVVCLKOPAL[]={CH7007TVVCLK31_5,
+unsigned char XGI7007_CHTVVCLKOPAL[] = {CH7007TVVCLK31_5,
                               CH7007TVVCLK31_5,
                               CH7007TVVCLK31_5,
                               CH7007TVVCLK31_5,
@@ -3957,7 +3960,7 @@ XGI330_VCLKDataStruct XGI_VBVCLKData[]=
                 {      0xFF,0x00,0                }      /* End mark */
 };
 
-UCHAR XGI660_TVDelayList[]=
+unsigned char XGI660_TVDelayList[] =
 {
           0x44,            /* ; 0 ExtNTSCDelay */
           0x44,            /* ; 1 StNTSCDelay */
@@ -3973,7 +3976,7 @@ UCHAR XGI660_TVDelayList[]=
           0x44             /* ; B StYPbPrDealy(750p) */
 };
 
-UCHAR XGI660_TVDelayList2[]=
+unsigned char XGI660_TVDelayList2[] =
 {
           0x44,           /* ; 0 ExtNTSCDelay */
           0x44,           /* ; 1 StNTSCDelay */
@@ -3989,7 +3992,7 @@ UCHAR XGI660_TVDelayList2[]=
           0x44            /* ; B StYPbPrDealy(750p) */
 };
 
-UCHAR XGI301TVDelayList[]=
+unsigned char XGI301TVDelayList[] =
 {
 	0x22,            /* ; 0 ExtNTSCDelay */
 	0x22,            /* ; 1 StNTSCDelay */
@@ -4005,7 +4008,7 @@ UCHAR XGI301TVDelayList[]=
 	0x22            /* B StYPbPrDealy(750p) */
 };
 
-UCHAR XGI301TVDelayList2[]=
+unsigned char XGI301TVDelayList2[] =
 {
 	0x22,           /* ; 0 ExtNTSCDelay */
 	0x22,           /* ; 1 StNTSCDelay */
@@ -4022,7 +4025,7 @@ UCHAR XGI301TVDelayList2[]=
 };
 
 
-UCHAR TVAntiFlickList[]=
+unsigned char TVAntiFlickList[] =
 {/* NTSCAntiFlicker */
                       0x04,           /* ; 0 Adaptive */
                       0x00,           /* ; 1 new anti-flicker ? */
@@ -4035,7 +4038,7 @@ UCHAR TVAntiFlickList[]=
 };
 
 
-UCHAR TVEdgeList[]=
+unsigned char TVEdgeList[] =
 {
       0x00,            /* ; 0 NTSC No Edge enhance */
       0x04,            /* ; 1 NTSC Adaptive Edge enhance */
@@ -4062,7 +4065,7 @@ unsigned long TVPhaseList[]=
        0xE00A831E  /* ; D PAL-M 1024x768 */
 };
 
-UCHAR NTSCYFilter1[]=
+unsigned char NTSCYFilter1[] =
 {
 		      0x00,0xF4,0x10,0x38     ,/* 0 : 320x text mode */
                       0x00,0xF4,0x10,0x38     ,/* 1 : 360x text mode */
@@ -4073,7 +4076,7 @@ UCHAR NTSCYFilter1[]=
                       0xEB,0x15,0x25,0xF6     /* 6 : 800x gra. mode */
 };
 
-UCHAR PALYFilter1[]=
+unsigned char PALYFilter1[] =
 {
 		      0x00,0xF4,0x10,0x38, /* 0 : 320x text mode */
                       0x00,0xF4,0x10,0x38     ,/* 1 : 360x text mode */
@@ -4084,7 +4087,7 @@ UCHAR PALYFilter1[]=
                       0xFC,0xFB,0x14,0x2A     /* 6 : 800x gra. mode */
 };
 
-UCHAR PALMYFilter1[]=
+unsigned char PALMYFilter1[] =
 {
 		      0x00,0xF4,0x10,0x38, /* 0 : 320x text mode */
                       0x00,0xF4,0x10,0x38, /* 1 : 360x text mode */
@@ -4096,7 +4099,7 @@ UCHAR PALMYFilter1[]=
                       0xFF,0xFF,0xFF,0xFF  /* End of Table */
 };
 
-UCHAR PALNYFilter1[]=
+unsigned char PALNYFilter1[] =
 {
 		      0x00,0xF4,0x10,0x38, /* 0 : 320x text mode */
                       0x00,0xF4,0x10,0x38, /* 1 : 360x text mode */
@@ -4108,7 +4111,7 @@ UCHAR PALNYFilter1[]=
                       0xFF,0xFF,0xFF,0xFF  /* End of Table */
 };
 
-UCHAR NTSCYFilter2[]=
+unsigned char NTSCYFilter2[] =
 {
 		      0xFF,0x03,0x02,0xF6,0xFC,0x27,0x46, /* 0 : 320x text mode */
                       0x01,0x02,0xFE,0xF7,0x03,0x27,0x3C, /* 1 : 360x text mode */
@@ -4120,7 +4123,7 @@ UCHAR NTSCYFilter2[]=
                       0xFF,0xFF,0xFC,0x00,0x0F,0x22,0x28  /* 7 : 1024xgra. mode */
 };
 
-UCHAR PALYFilter2[]=
+unsigned char PALYFilter2[] =
 {
 		      0xFF,0x03,0x02,0xF6,0xFC,0x27,0x46, /* 0 : 320x text mode */
                       0x01,0x02,0xFE,0xF7,0x03,0x27,0x3C, /* 1 : 360x text mode */
@@ -4132,7 +4135,7 @@ UCHAR PALYFilter2[]=
                       0xFF,0xFF,0xFC,0x00,0x0F,0x22,0x28  /* 7 : 1024xgra. mode */
 };
 
-UCHAR PALMYFilter2[]=
+unsigned char PALMYFilter2[] =
 {
 		      0xFF,0x03,0x02,0xF6,0xFC,0x27,0x46, /* 0 : 320x text mode */
                       0x01,0x02,0xFE,0xF7,0x03,0x27,0x3C, /* 1 : 360x text mode */
@@ -4144,7 +4147,7 @@ UCHAR PALMYFilter2[]=
                       0xFF,0xFF,0xFC,0x00,0x0F,0x22,0x28  /* 7 : 1024xgra. mode */
 };
 
-UCHAR PALNYFilter2[]=
+unsigned char PALNYFilter2[] =
 {
 		      0xFF,0x03,0x02,0xF6,0xFC,0x27,0x46, /* 0 : 320x text mode */
                       0x01,0x02,0xFE,0xF7,0x03,0x27,0x3C, /* 1 : 360x text mode */
@@ -4156,7 +4159,7 @@ UCHAR PALNYFilter2[]=
                       0xFF,0xFF,0xFC,0x00,0x0F,0x22,0x28  /* 7 : 1024xgra. mode */
 };
 
-UCHAR XGI_NTSC1024AdjTime[]=
+unsigned char XGI_NTSC1024AdjTime[] =
 {
       0xa7,0x07,0xf2,0x6e,0x17,0x8b,0x73,0x53,
       0x13,0x40,0x34,0xF4,0x63,0xBB,0xCC,0x7A,
diff --git a/drivers/staging/xgifb/vb_util.c b/drivers/staging/xgifb/vb_util.c
index 5e32afda28c2..2c40368ceee2 100644
--- a/drivers/staging/xgifb/vb_util.c
+++ b/drivers/staging/xgifb/vb_util.c
@@ -10,8 +10,8 @@ void XGINew_SetReg1(unsigned long,unsigned short,unsigned short);
 void XGINew_SetReg2(unsigned long,unsigned short,unsigned short);
 void XGINew_SetReg3(unsigned long,unsigned short);
 void XGINew_SetReg4(unsigned long,unsigned long);
-UCHAR XGINew_GetReg1(unsigned long,unsigned short);
-UCHAR XGINew_GetReg2(unsigned long);
+unsigned char XGINew_GetReg1(unsigned long, unsigned short);
+unsigned char XGINew_GetReg2(unsigned long);
 unsigned long XGINew_GetReg3(unsigned long);
 void XGINew_ClearDAC(unsigned char *);
 void XGINew_SetRegANDOR(unsigned long Port,unsigned short Index,
@@ -43,7 +43,7 @@ void XGINew_SetReg1( unsigned long port , unsigned short index , unsigned short
 /* --------------------------------------------------------------------- */
 /*void XGINew_SetReg2( unsigned long port , unsigned short index , unsigned short data )
 {
-    InPortByte( ( PUCHAR )port + 0x3da - 0x3c0 ) ;
+    InPortByte((P unsigned char )port + 0x3da - 0x3c0) ;
     OutPortByte( XGINew_P3c0 , index ) ;
     OutPortByte( XGINew_P3c0 , data ) ;
     OutPortByte( XGINew_P3c0 , 0x20 ) ;
@@ -80,9 +80,9 @@ void XGINew_SetReg4( unsigned long port , unsigned long data )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGINew_GetReg1( unsigned long port , unsigned short index )
+unsigned char XGINew_GetReg1(unsigned long port, unsigned short index)
 {
-    UCHAR data ;
+    unsigned char data ;
 
     outb(index, port);
     data = inb(port + 1) ;
@@ -96,9 +96,9 @@ UCHAR XGINew_GetReg1( unsigned long port , unsigned short index )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGINew_GetReg2( unsigned long port )
+unsigned char XGINew_GetReg2(unsigned long port)
 {
-    UCHAR data ;
+    unsigned char data ;
 
     data = inb(port) ;
 
@@ -197,7 +197,7 @@ void NewDelaySeconds( int seconds )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void Newdebugcode( UCHAR code )
+void Newdebugcode(unsigned char code)
 {
 //    OutPortByte ( 0x80 , code ) ;
     /* OutPortByte ( 0x300 , code ) ; */
diff --git a/drivers/staging/xgifb/vb_util.h b/drivers/staging/xgifb/vb_util.h
index aaaf361477ab..156f6445c88d 100644
--- a/drivers/staging/xgifb/vb_util.h
+++ b/drivers/staging/xgifb/vb_util.h
@@ -1,11 +1,11 @@
 #ifndef _VBUTIL_
 #define _VBUTIL_
 extern   void     NewDelaySeconds( int );
-extern   void     Newdebugcode( UCHAR );
+extern   void     Newdebugcode(unsigned char);
 extern   void     XGINew_SetReg1(unsigned long, unsigned short, unsigned short);
 extern   void     XGINew_SetReg3(unsigned long, unsigned short);
-extern   UCHAR    XGINew_GetReg1(unsigned long, unsigned short);
-extern   UCHAR    XGINew_GetReg2(unsigned long);
+extern    unsigned char     XGINew_GetReg1(unsigned long, unsigned short);
+extern    unsigned char     XGINew_GetReg2(unsigned long);
 extern   void     XGINew_SetReg4(unsigned long, unsigned long);
 extern   unsigned long    XGINew_GetReg3(unsigned long);
 extern   void     XGINew_SetRegOR(unsigned long Port,unsigned short Index,unsigned short DataOR);
diff --git a/drivers/staging/xgifb/vgatypes.h b/drivers/staging/xgifb/vgatypes.h
index a85f21a7aebc..a518d27c0d11 100644
--- a/drivers/staging/xgifb/vgatypes.h
+++ b/drivers/staging/xgifb/vgatypes.h
@@ -4,25 +4,6 @@
 
 #include &lt;linux/ioctl.h&gt;
 
-#ifndef CHAR
-typedef char CHAR;
-#endif
-
-#ifndef SHORT
-typedef short SHORT;
-#endif
-
-#ifndef LONG
-typedef long  LONG;
-#endif
-
-#ifndef UCHAR
-typedef unsigned char UCHAR;
-#endif
-
-typedef unsigned long XGIIOADDRESS;
-
-
 #ifndef VBIOS_VER_MAX_LENGTH
 #define VBIOS_VER_MAX_LENGTH    4
 #endif
@@ -74,8 +55,8 @@ typedef enum _XGI_LCD_TYPE {
 #ifndef PXGI_DSReg
 typedef struct _XGI_DSReg
 {
-  UCHAR  jIdx;
-  UCHAR  jVal;
+  unsigned char  jIdx;
+  unsigned char  jVal;
 } XGI_DSReg, *PXGI_DSReg;
 #endif
 
@@ -109,13 +90,13 @@ struct _XGI_HW_DEVICE_INFO
     unsigned long  ul2ndVideoMemorySize;
 
     unsigned char *pj2ndIOAddress;
-    UCHAR  jChipType;            /* Used to Identify Graphics Chip */
+    unsigned char  jChipType;            /* Used to Identify Graphics Chip */
                                  /* defined in the data structure type  */
                                  /* "XGI_CHIP_TYPE" */
 
-    UCHAR  jChipRevision;        /* Used to Identify Graphics Chip Revision */
+    unsigned char  jChipRevision;        /* Used to Identify Graphics Chip Revision */
 
-    UCHAR  ujVBChipID;           /* the ID of video bridge */
+    unsigned char  ujVBChipID;           /* the ID of video bridge */
                                  /* defined in the data structure type */
                                  /* "XGI_VB_CHIP_TYPE" */
 
@@ -152,7 +133,7 @@ struct _XGI_HW_DEVICE_INFO
 
     PXGI_QUERYSPACE  pQueryNorthBridgeSpace;
 
-    UCHAR  szVBIOSVer[VBIOS_VER_MAX_LENGTH];
+    unsigned char szVBIOSVer[VBIOS_VER_MAX_LENGTH];
 
 };
 #endif</pre><hr><pre>commit 82d6eb5b2ecd4ccdd44a23115fc499ecefc77706
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Jun 17 13:10:46 2010 -0400

    Staging: xgifb: Remove USHORT, ULONG, BOOLEAN, and VOID typedefs
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Arnaud Patard &lt;apatard@mandriva.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/xgifb/XGI_main.h b/drivers/staging/xgifb/XGI_main.h
index 7c643a6a0632..fcb1816e387a 100644
--- a/drivers/staging/xgifb/XGI_main.h
+++ b/drivers/staging/xgifb/XGI_main.h
@@ -499,13 +499,13 @@ u8  XGIfb_mode_no  = 0;
 u8  XGIfb_rate_idx = 0;
 
 /* TW: CR36 evaluation */
-const USHORT XGI300paneltype[] =
+const unsigned short XGI300paneltype[] =
     { LCD_UNKNOWN,   LCD_800x600,  LCD_1024x768,  LCD_1280x1024,
       LCD_1280x960,  LCD_640x480,  LCD_1024x600,  LCD_1152x768,
        LCD_1024x768, LCD_1024x768,  LCD_1024x768,
       LCD_1024x768,  LCD_1024x768, LCD_1024x768,  LCD_1024x768 };
 
-const USHORT XGI310paneltype[] =
+const unsigned short XGI310paneltype[] =
     { LCD_UNKNOWN,   LCD_800x600,  LCD_1024x768,  LCD_1280x1024,
       LCD_640x480,   LCD_1024x600, LCD_1152x864,  LCD_1280x960,
       LCD_1152x768,  LCD_1400x1050,LCD_1280x768,  LCD_1600x1200,
@@ -821,7 +821,9 @@ extern int      XGIfb_mode_rate_to_ddata(VB_DEVICE_INFO *XGI_Pr, PXGI_HW_DEVICE_
 			 unsigned int *hsync_len, unsigned int *vsync_len,
 			 unsigned int *sync, unsigned int *vmode);
 */
-			extern   BOOLEAN  XGI_SearchModeID( USHORT ModeNo,USHORT  *ModeIdIndex, PVB_DEVICE_INFO );
+extern unsigned char XGI_SearchModeID(unsigned short ModeNo,
+				unsigned short *ModeIdIndex,
+				PVB_DEVICE_INFO);
 static int      XGIfb_get_fix(struct fb_fix_screeninfo *fix, int con,
 			      struct fb_info *info);
 
@@ -841,10 +843,10 @@ static int      XGIfb_do_set_var(struct fb_var_screeninfo *var, int isactive,
 static void     XGIfb_pre_setmode(void);
 static void     XGIfb_post_setmode(void);
 
-static BOOLEAN  XGIfb_CheckVBRetrace(void);
-static BOOLEAN  XGIfbcheckvretracecrt2(void);
-static BOOLEAN  XGIfbcheckvretracecrt1(void);
-static BOOLEAN  XGIfb_bridgeisslave(void);
+static unsigned char  XGIfb_CheckVBRetrace(void);
+static unsigned char  XGIfbcheckvretracecrt2(void);
+static unsigned char  XGIfbcheckvretracecrt1(void);
+static unsigned char  XGIfb_bridgeisslave(void);
 
 struct XGI_memreq {
 	unsigned long offset;
@@ -879,7 +881,7 @@ static XGI_OH   *XGIfb_poh_free(unsigned long base);
 static void     XGIfb_free_node(XGI_OH *poh);
 
 /* Internal routines to access PCI configuration space */
-BOOLEAN         XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
+unsigned char         XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 	          	unsigned long offset, unsigned long set, unsigned long *value);
 //BOOLEAN         XGIfb_query_north_bridge_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 //	         	unsigned long offset, unsigned long set, unsigned long *value);
@@ -887,18 +889,26 @@ BOOLEAN         XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 
 /* Routines from init.c/init301.c */
 extern void     InitTo330Pointer(UCHAR,PVB_DEVICE_INFO pVBInfo);
-extern BOOLEAN  XGIInitNew(PXGI_HW_DEVICE_INFO HwDeviceExtension);
-extern BOOLEAN  XGISetModeNew(PXGI_HW_DEVICE_INFO HwDeviceExtension, USHORT ModeNo);
+extern unsigned char  XGIInitNew(PXGI_HW_DEVICE_INFO HwDeviceExtension);
+extern unsigned char XGISetModeNew(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			     unsigned short ModeNo);
 //extern void     XGI_SetEnableDstn(VB_DEVICE_INFO *XGI_Pr);
 extern void     XGI_LongWait(VB_DEVICE_INFO *XGI_Pr);
-extern USHORT   XGI_GetRatePtrCRT2( PXGI_HW_DEVICE_INFO pXGIHWDE, USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo );
+extern unsigned short XGI_GetRatePtrCRT2(PXGI_HW_DEVICE_INFO pXGIHWDE,
+					 unsigned short ModeNo,
+					 unsigned short ModeIdIndex,
+					 PVB_DEVICE_INFO pVBInfo);
 /* TW: Chrontel TV functions */
-extern USHORT 	XGI_GetCH700x(VB_DEVICE_INFO *XGI_Pr, USHORT tempbx);
-extern void 	XGI_SetCH700x(VB_DEVICE_INFO *XGI_Pr, USHORT tempbx);
-extern USHORT 	XGI_GetCH701x(VB_DEVICE_INFO *XGI_Pr, USHORT tempbx);
-extern void 	XGI_SetCH701x(VB_DEVICE_INFO *XGI_Pr, USHORT tempbx);
-extern void     XGI_SetCH70xxANDOR(VB_DEVICE_INFO *XGI_Pr, USHORT tempax,USHORT tempbh);
-extern void     XGI_DDC2Delay(VB_DEVICE_INFO *XGI_Pr, USHORT delaytime);
+extern unsigned short XGI_GetCH700x(VB_DEVICE_INFO *XGI_Pr,
+				    unsigned short tempbx);
+extern void XGI_SetCH700x(VB_DEVICE_INFO *XGI_Pr, unsigned short tempbx);
+extern unsigned short XGI_GetCH701x(VB_DEVICE_INFO *XGI_Pr,
+				    unsigned short tempbx);
+extern void XGI_SetCH701x(VB_DEVICE_INFO *XGI_Pr, unsigned short tempbx);
+extern void XGI_SetCH70xxANDOR(VB_DEVICE_INFO *XGI_Pr,
+			       unsigned short tempax,
+			       unsigned short tempbh);
+extern void XGI_DDC2Delay(VB_DEVICE_INFO *XGI_Pr, unsigned short delaytime);
 
 /* TW: Sensing routines */
 void            XGI_Sense30x(void);
diff --git a/drivers/staging/xgifb/XGI_main_26.c b/drivers/staging/xgifb/XGI_main_26.c
index e3f837337fba..faea2e740e4b 100644
--- a/drivers/staging/xgifb/XGI_main_26.c
+++ b/drivers/staging/xgifb/XGI_main_26.c
@@ -165,11 +165,11 @@ int
 XGIfb_mode_rate_to_dclock(VB_DEVICE_INFO *XGI_Pr, PXGI_HW_DEVICE_INFO HwDeviceExtension,
 			  unsigned char modeno, unsigned char rateindex)
 {
-    USHORT ModeNo = modeno;
-    USHORT ModeIdIndex = 0, ClockIndex = 0;
-    USHORT RefreshRateTableIndex = 0;
+    unsigned short ModeNo = modeno;
+    unsigned short ModeIdIndex = 0, ClockIndex = 0;
+    unsigned short RefreshRateTableIndex = 0;
 
-    /*ULONG  temp = 0;*/
+    /*unsigned long  temp = 0;*/
     int    Clock;
     XGI_Pr-&gt;ROMAddr  = HwDeviceExtension-&gt;pjVirtualRomBase;
     InitTo330Pointer( HwDeviceExtension-&gt;jChipType, XGI_Pr ) ;
@@ -204,9 +204,9 @@ XGIfb_mode_rate_to_ddata(VB_DEVICE_INFO *XGI_Pr, PXGI_HW_DEVICE_INFO HwDeviceExt
 			 u32 *hsync_len, u32 *vsync_len,
 			 u32 *sync, u32 *vmode)
 {
-    USHORT ModeNo = modeno;
-    USHORT ModeIdIndex = 0, index = 0;
-    USHORT RefreshRateTableIndex = 0;
+    unsigned short ModeNo = modeno;
+    unsigned short ModeIdIndex = 0, index = 0;
+    unsigned short RefreshRateTableIndex = 0;
 
     unsigned short VRE, VBE, VRS, VBS, VDE, VT;
     unsigned short HRE, HBE, HRS, HBS, HDE, HT;
@@ -377,7 +377,7 @@ XGIfb_mode_rate_to_ddata(VB_DEVICE_INFO *XGI_Pr, PXGI_HW_DEVICE_INFO HwDeviceExt
 
 
 
-void XGIRegInit(VB_DEVICE_INFO *XGI_Pr, ULONG BaseAddr)
+void XGIRegInit(VB_DEVICE_INFO *XGI_Pr, unsigned long BaseAddr)
 {
    XGI_Pr-&gt;RelIO = BaseAddr;
    XGI_Pr-&gt;P3c4 = BaseAddr + 0x14;
@@ -415,7 +415,7 @@ u32 XGIfb_get_reg3(u16 port)
 
 /* ------------ Interface for init &amp; mode switching code ------------- */
 
-BOOLEAN
+unsigned char
 XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 	unsigned long offset, unsigned long set, unsigned long *value)
 {
@@ -450,7 +450,7 @@ XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 	return 1;
 }
 
-/*BOOLEAN XGIfb_query_north_bridge_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
+/*unsigned char XGIfb_query_north_bridge_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 	unsigned long offset, unsigned long set, unsigned long *value)
 {
 	static struct pci_dev *pdev = NULL;
@@ -937,7 +937,7 @@ static void XGIfb_search_tvstd(const char *name)
 	}
 }
 
-static BOOLEAN XGIfb_bridgeisslave(void)
+static unsigned char XGIfb_bridgeisslave(void)
 {
    unsigned char usScratchP1_00;
 
@@ -951,7 +951,7 @@ static BOOLEAN XGIfb_bridgeisslave(void)
 	   return 0;
 }
 
-static BOOLEAN XGIfbcheckvretracecrt1(void)
+static unsigned char XGIfbcheckvretracecrt1(void)
 {
    unsigned char temp;
 
@@ -970,7 +970,7 @@ static BOOLEAN XGIfbcheckvretracecrt1(void)
 	   return 0;
 }
 
-static BOOLEAN XGIfbcheckvretracecrt2(void)
+static unsigned char XGIfbcheckvretracecrt2(void)
 {
    unsigned char temp;
    if (xgi_video_info.hasVB == HASVB_NONE)
@@ -982,7 +982,7 @@ static BOOLEAN XGIfbcheckvretracecrt2(void)
 	   return 1;
 }
 
-static BOOLEAN XGIfb_CheckVBRetrace(void)
+static unsigned char XGIfb_CheckVBRetrace(void)
 {
    if(xgi_video_info.disp_state &amp; DISPTYPE_DISP2) {
       if(XGIfb_bridgeisslave()) {
@@ -2588,7 +2588,7 @@ static void XGIfb_pre_setmode(void)
 static void XGIfb_post_setmode(void)
 {
 	u8 reg;
-	BOOLEAN doit = 1;
+	unsigned char doit = 1;
 /*	outXGIIDXREG(XGISR,IND_XGI_PASSWORD,XGI_PASSWORD);
 	outXGIIDXREG(XGICR,0x13,0x00);
 	setXGIIDXREG(XGISR,0x0E,0xF0,0x01);
@@ -2826,7 +2826,7 @@ XGIINITSTATIC int __init XGIfb_setup(char *options)
 
 static unsigned char VBIOS_BUF[65535];
 
-unsigned char* attempt_map_rom(struct pci_dev *dev,void *copy_address)
+unsigned char *attempt_map_rom(struct pci_dev *dev, void *copy_address)
 {
     u32 rom_size      = 0;
     u32 rom_address   = 0;
@@ -2909,7 +2909,7 @@ int __devinit xgifb_probe(struct pci_dev *pdev, const struct pci_device_id *ent)
 	  if (pci_enable_device(pdev))
 	          return -EIO;
 
-    XGIRegInit(&amp;XGI_Pr, (ULONG)XGIhw_ext.pjIOAddress);
+    XGIRegInit(&amp;XGI_Pr, (unsigned long)XGIhw_ext.pjIOAddress);
 
     outXGIIDXREG(XGISR, IND_XGI_PASSWORD, XGI_PASSWORD);
     inXGIIDXREG(XGISR, IND_XGI_PASSWORD, reg1);
diff --git a/drivers/staging/xgifb/vb_ext.c b/drivers/staging/xgifb/vb_ext.c
index 4358d96bad7e..aabab059e5c9 100644
--- a/drivers/staging/xgifb/vb_ext.c
+++ b/drivers/staging/xgifb/vb_ext.c
@@ -11,25 +11,30 @@
 #include "vb_ext.h"
 extern   UCHAR XGI330_SoftSetting;
 extern   UCHAR XGI330_OutputSelect;
-extern   USHORT XGI330_RGBSenseData2;
-extern   USHORT XGI330_YCSenseData2;
-extern   USHORT XGI330_VideoSenseData2;
+extern   unsigned short XGI330_RGBSenseData2;
+extern   unsigned short XGI330_YCSenseData2;
+extern   unsigned short XGI330_VideoSenseData2;
 void     XGI_GetSenseStatus( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo );
-BOOLEAN  XGINew_GetPanelID(PVB_DEVICE_INFO pVBInfo);
-USHORT   XGINew_SenseLCD(PXGI_HW_DEVICE_INFO,PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGINew_GetLCDDDCInfo(PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo);
-void XGISetDPMS( PXGI_HW_DEVICE_INFO pXGIHWDE , ULONG VESA_POWER_STATE ) ;
-BOOLEAN  XGINew_BridgeIsEnable(PXGI_HW_DEVICE_INFO,PVB_DEVICE_INFO pVBInfo );
-BOOLEAN  XGINew_Sense(USHORT tempbx,USHORT tempcx, PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGINew_SenseHiTV( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo ) ;
+unsigned char  XGINew_GetPanelID(PVB_DEVICE_INFO pVBInfo);
+unsigned short XGINew_SenseLCD(PXGI_HW_DEVICE_INFO,
+			       PVB_DEVICE_INFO pVBInfo);
+unsigned char XGINew_GetLCDDDCInfo(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			     PVB_DEVICE_INFO pVBInfo);
+void XGISetDPMS(PXGI_HW_DEVICE_INFO pXGIHWDE,
+		unsigned long VESA_POWER_STATE);
+unsigned char XGINew_BridgeIsEnable(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo);
+unsigned char XGINew_Sense(unsigned short tempbx, unsigned short tempcx,
+		     PVB_DEVICE_INFO pVBInfo);
+unsigned char XGINew_SenseHiTV(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			       PVB_DEVICE_INFO pVBInfo);
 
 /**************************************************************
 	Dynamic Sense
 *************************************************************/
 
 void XGI_WaitDisplay(void);
-BOOLEAN XGI_Is301C(PVB_DEVICE_INFO);
-BOOLEAN XGI_Is301LV(PVB_DEVICE_INFO);
+unsigned char XGI_Is301C(PVB_DEVICE_INFO);
+unsigned char XGI_Is301LV(PVB_DEVICE_INFO);
 
 
 
@@ -39,9 +44,9 @@ BOOLEAN XGI_Is301LV(PVB_DEVICE_INFO);
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGINew_Is301B( PVB_DEVICE_INFO pVBInfo )
+unsigned char XGINew_Is301B(PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT flag ;
+    unsigned short flag ;
 
     flag = XGINew_GetReg1( pVBInfo-&gt;Part4Port , 0x01 ) ;
 
@@ -57,7 +62,7 @@ BOOLEAN XGINew_Is301B( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_Is301C( PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_Is301C(PVB_DEVICE_INFO pVBInfo)
 {
     if ( ( XGINew_GetReg1( pVBInfo-&gt;Part4Port , 0x01 ) &amp; 0xF0 ) == 0xC0 )
         return( 1 ) ;
@@ -78,7 +83,7 @@ BOOLEAN XGI_Is301C( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_Is301LV( PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_Is301LV(PVB_DEVICE_INFO pVBInfo)
 {
     if ( XGINew_GetReg1( pVBInfo-&gt;Part4Port , 0x01 ) &gt;= 0xD0 )
     {
@@ -97,9 +102,11 @@ BOOLEAN XGI_Is301LV( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGINew_Sense(  USHORT tempbx , USHORT tempcx, PVB_DEVICE_INFO pVBInfo )
+unsigned char XGINew_Sense(unsigned short tempbx,
+		     unsigned short tempcx,
+		     PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT temp , i , tempch ;
+    unsigned short temp, i, tempch;
 
     temp = tempbx &amp; 0xFF ;
     XGINew_SetReg1( pVBInfo-&gt;Part4Port , 0x11 , temp ) ;
@@ -128,13 +135,14 @@ BOOLEAN XGINew_Sense(  USHORT tempbx , USHORT tempcx, PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-VOID XGISetDPMS( PXGI_HW_DEVICE_INFO pXGIHWDE , ULONG VESA_POWER_STATE )
+void XGISetDPMS(PXGI_HW_DEVICE_INFO pXGIHWDE,
+		unsigned long VESA_POWER_STATE)
 {
-    USHORT ModeNo, ModeIdIndex ;
+    unsigned short ModeNo, ModeIdIndex;
     UCHAR  temp ;
     VB_DEVICE_INFO VBINF;
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
-    pVBInfo-&gt;BaseAddr = (ULONG)pXGIHWDE-&gt;pjIOAddress ;
+    pVBInfo-&gt;BaseAddr = (unsigned long)pXGIHWDE-&gt;pjIOAddress ;
     pVBInfo-&gt;ROMAddr  = pXGIHWDE-&gt;pjVirtualRomBase ;
 
 
@@ -353,10 +361,10 @@ VOID XGISetDPMS( PXGI_HW_DEVICE_INFO pXGIHWDE , ULONG VESA_POWER_STATE )
 /* --------------------------------------------------------------------- */
 void XGI_GetSenseStatus( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempax = 0 , tempbx , tempcx , temp ,
+    unsigned short tempax = 0 , tempbx , tempcx , temp ,
            P2reg0 = 0 , SenseModeNo = 0 , OutputSelect = *pVBInfo-&gt;pOutputSelect ,
            ModeIdIndex , i ;
-    pVBInfo-&gt;BaseAddr = (ULONG)HwDeviceExtension-&gt;pjIOAddress ;
+    pVBInfo-&gt;BaseAddr = (unsigned long)HwDeviceExtension-&gt;pjIOAddress ;
 
     if ( pVBInfo-&gt;IF_DEF_LVDS == 1 )
     {
@@ -550,10 +558,11 @@ void XGI_GetSenseStatus( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT XGINew_SenseLCD( PXGI_HW_DEVICE_INFO HwDeviceExtension ,PVB_DEVICE_INFO pVBInfo)
+unsigned short XGINew_SenseLCD(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			       PVB_DEVICE_INFO pVBInfo)
 {
-    /* USHORT SoftSetting ; */
-    USHORT temp ;
+    /* unsigned short SoftSetting ; */
+    unsigned short temp ;
 
     if ( ( HwDeviceExtension-&gt;jChipType &gt;= XG20 ) || ( HwDeviceExtension-&gt;jChipType &gt;= XG40 ) )
         temp = 0 ;
@@ -573,9 +582,9 @@ USHORT XGINew_SenseLCD( PXGI_HW_DEVICE_INFO HwDeviceExtension ,PVB_DEVICE_INFO p
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGINew_GetLCDDDCInfo( PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo)
+unsigned char XGINew_GetLCDDDCInfo( PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT temp ;
+    unsigned short temp ;
 
     /* add lcd sense */
     if ( HwDeviceExtension-&gt;ulCRT2LCDType == LCD_UNKNOWN )
@@ -584,7 +593,7 @@ BOOLEAN XGINew_GetLCDDDCInfo( PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_I
     }
     else
     {
-        temp = ( USHORT )HwDeviceExtension-&gt;ulCRT2LCDType ;
+	    temp = (unsigned short)HwDeviceExtension-&gt;ulCRT2LCDType ;
         switch( HwDeviceExtension-&gt;ulCRT2LCDType )
         {
             case LCD_INVALID:
@@ -626,26 +635,27 @@ BOOLEAN XGINew_GetLCDDDCInfo( PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_I
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGINew_GetPanelID(PVB_DEVICE_INFO pVBInfo )
+unsigned char XGINew_GetPanelID(PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT PanelTypeTable[ 16 ] = { SyncNN | PanelRGB18Bit | Panel800x600  | _PanelType00 ,
-                                    SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType01 ,
-                                    SyncNN | PanelRGB18Bit | Panel800x600  | _PanelType02 ,
-                                    SyncNN | PanelRGB18Bit | Panel640x480  | _PanelType03 ,
-                                    SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType04 ,
-                                    SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType05 ,
-                                    SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType06 ,
-                                    SyncNN | PanelRGB24Bit | Panel1024x768 | _PanelType07 ,
-                                    SyncNN | PanelRGB18Bit | Panel800x600  | _PanelType08 ,
-                                    SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType09 ,
-                                    SyncNN | PanelRGB18Bit | Panel800x600  | _PanelType0A ,
-                                    SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType0B ,
-                                    SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType0C ,
-                                    SyncNN | PanelRGB24Bit | Panel1024x768 | _PanelType0D ,
-                                    SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType0E ,
-                                    SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType0F } ;
-    USHORT tempax , tempbx , temp ;
-    /* USHORT return_flag ; */
+	unsigned short PanelTypeTable[16] = {
+		SyncNN | PanelRGB18Bit | Panel800x600  | _PanelType00,
+		SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType01,
+		SyncNN | PanelRGB18Bit | Panel800x600  | _PanelType02,
+		SyncNN | PanelRGB18Bit | Panel640x480  | _PanelType03,
+		SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType04,
+		SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType05,
+		SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType06,
+		SyncNN | PanelRGB24Bit | Panel1024x768 | _PanelType07,
+		SyncNN | PanelRGB18Bit | Panel800x600  | _PanelType08,
+		SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType09,
+		SyncNN | PanelRGB18Bit | Panel800x600  | _PanelType0A,
+		SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType0B,
+		SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType0C,
+		SyncNN | PanelRGB24Bit | Panel1024x768 | _PanelType0D,
+		SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType0E,
+		SyncNN | PanelRGB18Bit | Panel1024x768 | _PanelType0F };
+	unsigned short tempax , tempbx, temp;
+    /* unsigned short return_flag ; */
 
     tempax = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x1A ) ;
     tempbx = tempax &amp; 0x1E ;
@@ -698,9 +708,9 @@ BOOLEAN XGINew_GetPanelID(PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGINew_BridgeIsEnable( PXGI_HW_DEVICE_INFO HwDeviceExtension ,PVB_DEVICE_INFO pVBInfo)
+unsigned char XGINew_BridgeIsEnable( PXGI_HW_DEVICE_INFO HwDeviceExtension ,PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT flag ;
+    unsigned short flag ;
 
     if ( XGI_BridgeIsOn( pVBInfo ) == 0 )
     {
@@ -725,9 +735,9 @@ BOOLEAN XGINew_BridgeIsEnable( PXGI_HW_DEVICE_INFO HwDeviceExtension ,PVB_DEVICE
 /* Output : */
 /* Description : */
 /* ------------------------------------------------------ */
-BOOLEAN XGINew_SenseHiTV( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo )
+unsigned char XGINew_SenseHiTV( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT tempbx , tempcx , temp , i , tempch;
+    unsigned short tempbx , tempcx , temp , i , tempch;
 
     tempbx = *pVBInfo-&gt;pYCSenseData2 ;
 
@@ -809,11 +819,11 @@ BOOLEAN XGINew_SenseHiTV( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INF
 void XGI_XG21Fun14Sub70( PVB_DEVICE_INFO pVBInfo , PX86_REGS pBiosArguments )
 {
 
-    USHORT ModeIdIndex;
-    USHORT ModeNo;
+    unsigned short ModeIdIndex;
+    unsigned short ModeNo;
 
-    USHORT EModeCount;
-    USHORT lvdstableindex;
+    unsigned short EModeCount;
+    unsigned short lvdstableindex;
 
     lvdstableindex = XGI_GetLVDSOEMTableIndex( pVBInfo );
     pBiosArguments-&gt;h.bl = 0x81;
@@ -852,10 +862,10 @@ void XGI_XG21Fun14Sub70( PVB_DEVICE_INFO pVBInfo , PX86_REGS pBiosArguments )
 void XGI_XG21Fun14Sub71( PVB_DEVICE_INFO pVBInfo , PX86_REGS pBiosArguments )
 {
 
-    USHORT EModeCount;
-    USHORT ModeIdIndex,resindex;
-    USHORT ModeNo;
-    USHORT EModeIndex = pBiosArguments-&gt;h.bh;
+    unsigned short EModeCount;
+    unsigned short ModeIdIndex, resindex;
+    unsigned short ModeNo;
+    unsigned short EModeIndex = pBiosArguments-&gt;h.bh;
 
     EModeCount = 0;
     for( ModeIdIndex = 0 ; ;  ModeIdIndex ++ )
@@ -897,8 +907,8 @@ void XGI_XG21Fun14Sub71( PVB_DEVICE_INFO pVBInfo , PX86_REGS pBiosArguments )
 */
 void XGI_XG21Fun14Sub72( PVB_DEVICE_INFO pVBInfo , PX86_REGS pBiosArguments )
 {
-    USHORT ModeIdIndex,resindex;
-    USHORT ModeNo;
+    unsigned short ModeIdIndex, resindex;
+    unsigned short ModeNo;
 
 
     ModeNo = pBiosArguments-&gt;h.bl ;
@@ -958,7 +968,7 @@ void XGI_XG21Fun14Sub73( PVB_DEVICE_INFO pVBInfo , PX86_REGS pBiosArguments )
 {
     UCHAR Select;
 
-    USHORT lvdstableindex;
+    unsigned short lvdstableindex;
 
     lvdstableindex = XGI_GetLVDSOEMTableIndex( pVBInfo );
     Select = pBiosArguments-&gt;h.bl;
diff --git a/drivers/staging/xgifb/vb_ext.h b/drivers/staging/xgifb/vb_ext.h
index 3a52a6a93bd5..5cb1862d9542 100644
--- a/drivers/staging/xgifb/vb_ext.h
+++ b/drivers/staging/xgifb/vb_ext.h
@@ -2,11 +2,12 @@
 #define  _VBEXT_
 
 struct DWORDREGS {
-    ULONG    Eax, Ebx, Ecx, Edx, Esi, Edi, Ebp;
+    unsigned long    Eax, Ebx, Ecx, Edx, Esi, Edi, Ebp;
 };
 
 struct WORDREGS {
-    USHORT    ax, hi_ax, bx, hi_bx, cx, hi_cx, dx, hi_dx, si, hi_si, di ,hi_di, bp, hi_bp;
+    unsigned short ax, hi_ax, bx, hi_bx, cx, hi_cx, dx, hi_dx, si,
+	    hi_si, di, hi_di, bp, hi_bp;
 };
 
 struct BYTEREGS {
@@ -20,10 +21,12 @@ typedef union   _X86_REGS    {
 } X86_REGS, *PX86_REGS;
 
 extern   void     XGI_XG21Fun14( PXGI_HW_DEVICE_INFO pXGIHWDE, PX86_REGS pBiosArguments);
-extern   void     XGISetDPMS( PXGI_HW_DEVICE_INFO pXGIHWDE , ULONG VESA_POWER_STATE ) ;
+extern void XGISetDPMS(PXGI_HW_DEVICE_INFO pXGIHWDE,
+		       unsigned long VESA_POWER_STATE);
 extern   void     XGI_GetSenseStatus( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo );
 extern   void     XGINew_SetModeScratch ( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo ) ;
 extern   void 	  ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo);
-extern   USHORT   XGINew_SenseLCD(PXGI_HW_DEVICE_INFO,PVB_DEVICE_INFO pVBInfo);
+extern unsigned short XGINew_SenseLCD(PXGI_HW_DEVICE_INFO,
+				      PVB_DEVICE_INFO pVBInfo);
 
 #endif
diff --git a/drivers/staging/xgifb/vb_init.c b/drivers/staging/xgifb/vb_init.c
index 2abdd24ef52b..3f0e34bd0d05 100644
--- a/drivers/staging/xgifb/vb_init.c
+++ b/drivers/staging/xgifb/vb_init.c
@@ -20,71 +20,67 @@
 
 UCHAR    XGINew_ChannelAB,XGINew_DataBusWidth;
 
-USHORT XGINew_DRAMType[17][5]={{0x0C,0x0A,0x02,0x40,0x39},{0x0D,0x0A,0x01,0x40,0x48},
-                     {0x0C,0x09,0x02,0x20,0x35},{0x0D,0x09,0x01,0x20,0x44},
-                     {0x0C,0x08,0x02,0x10,0x31},{0x0D,0x08,0x01,0x10,0x40},
-                     {0x0C,0x0A,0x01,0x20,0x34},{0x0C,0x09,0x01,0x08,0x32},
-                     {0x0B,0x08,0x02,0x08,0x21},{0x0C,0x08,0x01,0x08,0x30},
-                     {0x0A,0x08,0x02,0x04,0x11},{0x0B,0x0A,0x01,0x10,0x28},
-                     {0x09,0x08,0x02,0x02,0x01},{0x0B,0x09,0x01,0x08,0x24},
-                     {0x0B,0x08,0x01,0x04,0x20},{0x0A,0x08,0x01,0x02,0x10},
-                     {0x09,0x08,0x01,0x01,0x00}};
-
-USHORT XGINew_SDRDRAM_TYPE[13][5]=
-{
-{ 2,12, 9,64,0x35},
-{ 1,13, 9,64,0x44},
-{ 2,12, 8,32,0x31},
-{ 2,11, 9,32,0x25},
-{ 1,12, 9,32,0x34},
-{ 1,13, 8,32,0x40},
-{ 2,11, 8,16,0x21},
-{ 1,12, 8,16,0x30},
-{ 1,11, 9,16,0x24},
-{ 1,11, 8, 8,0x20},
-{ 2, 9, 8, 4,0x01},
-{ 1,10, 8, 4,0x10},
-{ 1, 9, 8, 2,0x00}
-};
-
-USHORT XGINew_DDRDRAM_TYPE[4][5]=
-{
-{ 2,12, 9,64,0x35},
-{ 2,12, 8,32,0x31},
-{ 2,11, 8,16,0x21},
-{ 2, 9, 8, 4,0x01}
-};
-USHORT XGINew_DDRDRAM_TYPE340[4][5]=
-{
-{ 2,13, 9,64,0x45},
-{ 2,12, 9,32,0x35},
-{ 2,12, 8,16,0x31},
-{ 2,11, 8, 8,0x21}
-};
-USHORT XGINew_DDRDRAM_TYPE20[12][5]=
-{
-{ 2,14,11,128,0x5D},
-{ 2,14,10,64,0x59},
-{ 2,13,11,64,0x4D},
-{ 2,14, 9,32,0x55},
-{ 2,13,10,32,0x49},
-{ 2,12,11,32,0x3D},
-{ 2,14, 8,16,0x51},
-{ 2,13, 9,16,0x45},
-{ 2,12,10,16,0x39},
-{ 2,13, 8, 8,0x41},
-{ 2,12, 9, 8,0x35},
-{ 2,12, 8, 4,0x31}
-};
+unsigned short XGINew_DRAMType[17][5] = {
+	{0x0C, 0x0A, 0x02, 0x40, 0x39}, {0x0D, 0x0A, 0x01, 0x40, 0x48},
+	{0x0C, 0x09, 0x02, 0x20, 0x35}, {0x0D, 0x09, 0x01, 0x20, 0x44},
+	{0x0C, 0x08, 0x02, 0x10, 0x31}, {0x0D, 0x08, 0x01, 0x10, 0x40},
+	{0x0C, 0x0A, 0x01, 0x20, 0x34}, {0x0C, 0x09, 0x01, 0x08, 0x32},
+	{0x0B, 0x08, 0x02, 0x08, 0x21}, {0x0C, 0x08, 0x01, 0x08, 0x30},
+	{0x0A, 0x08, 0x02, 0x04, 0x11}, {0x0B, 0x0A, 0x01, 0x10, 0x28},
+	{0x09, 0x08, 0x02, 0x02, 0x01}, {0x0B, 0x09, 0x01, 0x08, 0x24},
+	{0x0B, 0x08, 0x01, 0x04, 0x20}, {0x0A, 0x08, 0x01, 0x02, 0x10},
+	{0x09, 0x08, 0x01, 0x01, 0x00} };
+
+unsigned short XGINew_SDRDRAM_TYPE[13][5] = {
+	{ 2, 12, 9, 64, 0x35},
+	{ 1, 13, 9, 64, 0x44},
+	{ 2, 12, 8, 32, 0x31},
+	{ 2, 11, 9, 32, 0x25},
+	{ 1, 12, 9, 32, 0x34},
+	{ 1, 13, 8, 32, 0x40},
+	{ 2, 11, 8, 16, 0x21},
+	{ 1, 12, 8, 16, 0x30},
+	{ 1, 11, 9, 16, 0x24},
+	{ 1, 11, 8,  8, 0x20},
+	{ 2,  9, 8,  4, 0x01},
+	{ 1, 10, 8,  4, 0x10},
+	{ 1,  9, 8,  2, 0x00} };
+
+unsigned short XGINew_DDRDRAM_TYPE[4][5] = {
+	{ 2, 12, 9, 64, 0x35},
+	{ 2, 12, 8, 32, 0x31},
+	{ 2, 11, 8, 16, 0x21},
+	{ 2,  9, 8,  4, 0x01} };
+
+unsigned short XGINew_DDRDRAM_TYPE340[4][5] = {
+	{ 2, 13, 9, 64, 0x45},
+	{ 2, 12, 9, 32, 0x35},
+	{ 2, 12, 8, 16, 0x31},
+	{ 2, 11, 8,  8, 0x21} };
+
+unsigned short XGINew_DDRDRAM_TYPE20[12][5] = {
+	{ 2, 14, 11, 128, 0x5D},
+	{ 2, 14, 10, 64, 0x59},
+	{ 2, 13, 11, 64, 0x4D},
+	{ 2, 14,  9, 32, 0x55},
+	{ 2, 13, 10, 32, 0x49},
+	{ 2, 12, 11, 32, 0x3D},
+	{ 2, 14,  8, 16, 0x51},
+	{ 2, 13,  9, 16, 0x45},
+	{ 2, 12, 10, 16, 0x39},
+	{ 2, 13,  8,  8, 0x41},
+	{ 2, 12,  9,  8, 0x35},
+	{ 2, 12,  8,  4, 0x31} };
 
 void     XGINew_SetDRAMSize_340(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO);
 void     XGINew_SetDRAMSize_310(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO);
 void     XGINew_SetMemoryClock(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
 void     XGINew_SetDRAMModeRegister(PVB_DEVICE_INFO );
 void     XGINew_SetDRAMModeRegister340( PXGI_HW_DEVICE_INFO HwDeviceExtension );
-void 	 XGINew_SetDRAMDefaultRegister340(PXGI_HW_DEVICE_INFO HwDeviceExtension, ULONG, PVB_DEVICE_INFO );
+void XGINew_SetDRAMDefaultRegister340(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+				      unsigned long, PVB_DEVICE_INFO);
 UCHAR    XGINew_GetXG20DRAMType( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension) ;
+unsigned char  XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension) ;
 
 int      XGINew_DDRSizing340( PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO );
 void     XGINew_DisableRefresh( PXGI_HW_DEVICE_INFO ,PVB_DEVICE_INFO) ;
@@ -93,12 +89,13 @@ int      XGINew_SDRSizing(PVB_DEVICE_INFO);
 int      XGINew_DDRSizing( PVB_DEVICE_INFO );
 void     XGINew_EnableRefresh( PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO);
 int      XGINew_RAMType;                  /*int      ModeIDOffset,StandTable,CRT1Table,ScreenOffset,REFIndex;*/
-ULONG	 UNIROM;			  /* UNIROM */
-BOOLEAN  ChkLFB( PVB_DEVICE_INFO );
-void     XGINew_Delay15us(ULONG);
-void     SetPowerConsume (PXGI_HW_DEVICE_INFO HwDeviceExtension,ULONG XGI_P3d4Port);
+unsigned long	 UNIROM;			  /* UNIROM */
+unsigned char  ChkLFB( PVB_DEVICE_INFO );
+void     XGINew_Delay15us(unsigned long);
+void     SetPowerConsume(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			 unsigned long XGI_P3d4Port);
 void 	 ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo);
-void 	 XGINew_DDR1x_MRS_XG20( ULONG P3c4 , PVB_DEVICE_INFO pVBInfo);
+void     XGINew_DDR1x_MRS_XG20(unsigned long P3c4, PVB_DEVICE_INFO pVBInfo);
 void     XGINew_SetDRAMModeRegister_XG20( PXGI_HW_DEVICE_INFO HwDeviceExtension );
 void     XGINew_SetDRAMModeRegister_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension );
 void 	 XGINew_ChkSenseStatus ( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo ) ;
@@ -108,7 +105,7 @@ UCHAR    GetXG21FPBits(PVB_DEVICE_INFO pVBInfo);
 void     XGINew_GetXG27Sense(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo) ;
 UCHAR    GetXG27FPBits(PVB_DEVICE_INFO pVBInfo);
 
-void DelayUS(ULONG MicroSeconds)
+void DelayUS(unsigned long MicroSeconds)
 {
 	udelay(MicroSeconds);
 }
@@ -120,7 +117,7 @@ void DelayUS(ULONG MicroSeconds)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension )
+unsigned char XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension )
 {
 
     VB_DEVICE_INFO VBINF;
@@ -129,17 +126,17 @@ BOOLEAN XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension )
      //       VBIOSVersion[ 5 ] ;
     volatile unsigned char *pVideoMemory;
 
-    /* ULONG j, k ; */
+    /* unsigned long j, k ; */
 
     PXGI_DSReg pSR ;
 
-    ULONG Temp ;
+    unsigned long Temp ;
 
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
 
     pVBInfo-&gt;FBAddr = HwDeviceExtension-&gt;pjVideoMemoryAddress ;
 
-    pVBInfo-&gt;BaseAddr = (ULONG)HwDeviceExtension-&gt;pjIOAddress ;
+    pVBInfo-&gt;BaseAddr = (unsigned long)HwDeviceExtension-&gt;pjIOAddress ;
 
     pVideoMemory = (unsigned char *)pVBInfo-&gt;ROMAddr;
 
@@ -642,7 +639,7 @@ UCHAR XGINew_Get310DRAMType(PVB_DEVICE_INFO pVBInfo)
 /* Description : */
 /* --------------------------------------------------------------------- */
 /*
-void XGINew_Delay15us(ULONG ulMicrsoSec)
+void XGINew_Delay15us(unsigned long ulMicrsoSec)
 {
 }
 */
@@ -656,7 +653,7 @@ void XGINew_Delay15us(ULONG ulMicrsoSec)
 /* --------------------------------------------------------------------- */
 void XGINew_SDR_MRS(  PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT data ;
+    unsigned short data ;
 
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x16 ) ;
     data &amp;= 0x3F ;          /* SR16 D7=0,D6=0 */
@@ -674,7 +671,7 @@ void XGINew_SDR_MRS(  PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_DDR1x_MRS_340( ULONG P3c4 , PVB_DEVICE_INFO pVBInfo)
+void XGINew_DDR1x_MRS_340(unsigned long P3c4 , PVB_DEVICE_INFO pVBInfo)
 {
     XGINew_SetReg1( P3c4 , 0x18 , 0x01 ) ;
     XGINew_SetReg1( P3c4 , 0x19 , 0x20 ) ;
@@ -712,7 +709,7 @@ void XGINew_DDR1x_MRS_340( ULONG P3c4 , PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_DDR2x_MRS_340( ULONG P3c4 , PVB_DEVICE_INFO pVBInfo)
+void XGINew_DDR2x_MRS_340(unsigned long P3c4 , PVB_DEVICE_INFO pVBInfo)
 {
     XGINew_SetReg1( P3c4 , 0x18 , 0x00 ) ;
     XGINew_SetReg1( P3c4 , 0x19 , 0x20 ) ;
@@ -741,9 +738,10 @@ void XGINew_DDR2x_MRS_340( ULONG P3c4 , PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_DDRII_Bootup_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULONG P3c4 , PVB_DEVICE_INFO pVBInfo)
+void XGINew_DDRII_Bootup_XG27(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			      unsigned long P3c4, PVB_DEVICE_INFO pVBInfo)
 {
-    ULONG P3d4 = P3c4 + 0x10 ;
+    unsigned long P3d4 = P3c4 + 0x10 ;
     XGINew_RAMType = ( int )XGINew_GetXG20DRAMType( HwDeviceExtension , pVBInfo ) ;
     XGINew_SetMemoryClock( HwDeviceExtension , pVBInfo ) ;
 
@@ -819,9 +817,10 @@ void XGINew_DDRII_Bootup_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULONG P3
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_DDR2_MRS_XG20( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULONG P3c4 , PVB_DEVICE_INFO pVBInfo)
+void XGINew_DDR2_MRS_XG20(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			  unsigned long P3c4, PVB_DEVICE_INFO pVBInfo)
 {
-    ULONG P3d4 = P3c4 + 0x10 ;
+    unsigned long P3d4 = P3c4 + 0x10 ;
 
     XGINew_RAMType = ( int )XGINew_GetXG20DRAMType( HwDeviceExtension , pVBInfo ) ;
     XGINew_SetMemoryClock( HwDeviceExtension , pVBInfo ) ;
@@ -871,9 +870,10 @@ void XGINew_DDR2_MRS_XG20( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULONG P3c4 ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_DDR2_MRS_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULONG P3c4 , PVB_DEVICE_INFO pVBInfo)
+void XGINew_DDR2_MRS_XG27(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			  unsigned long P3c4, PVB_DEVICE_INFO pVBInfo)
 {
-    ULONG P3d4 = P3c4 + 0x10 ;
+    unsigned long P3d4 = P3c4 + 0x10 ;
 
      XGINew_RAMType = ( int )XGINew_GetXG20DRAMType( HwDeviceExtension , pVBInfo ) ;
      XGINew_SetMemoryClock( HwDeviceExtension , pVBInfo ) ;
@@ -949,9 +949,10 @@ void XGINew_DDR2_MRS_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULONG P3c4 ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_DDR1x_DefaultRegister( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULONG Port , PVB_DEVICE_INFO pVBInfo)
+void XGINew_DDR1x_DefaultRegister(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+				  unsigned long Port, PVB_DEVICE_INFO pVBInfo)
 {
-    ULONG P3d4 = Port ,
+    unsigned long P3d4 = Port ,
            P3c4 = Port - 0x10 ;
 
     if ( HwDeviceExtension-&gt;jChipType &gt;= XG20 )
@@ -1009,9 +1010,10 @@ void XGINew_DDR1x_DefaultRegister( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULON
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_DDR2x_DefaultRegister( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULONG Port ,PVB_DEVICE_INFO pVBInfo)
+void XGINew_DDR2x_DefaultRegister(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+				  unsigned long Port, PVB_DEVICE_INFO pVBInfo)
 {
-    ULONG P3d4 = Port ,
+    unsigned long P3d4 = Port ,
            P3c4 = Port - 0x10 ;
 
     XGINew_SetMemoryClock( HwDeviceExtension , pVBInfo ) ;
@@ -1060,9 +1062,10 @@ void XGINew_DDR2x_DefaultRegister( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULON
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_DDR2_DefaultRegister( PXGI_HW_DEVICE_INFO HwDeviceExtension, ULONG Port , PVB_DEVICE_INFO pVBInfo)
+void XGINew_DDR2_DefaultRegister(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+				 unsigned long Port, PVB_DEVICE_INFO pVBInfo)
 {
-    ULONG P3d4 = Port ,
+    unsigned long P3d4 = Port ,
            P3c4 = Port - 0x10 ;
 
     /* keep following setting sequence, each setting in the same reg insert idle */
@@ -1098,12 +1101,13 @@ void XGINew_DDR2_DefaultRegister( PXGI_HW_DEVICE_INFO HwDeviceExtension, ULONG P
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_SetDRAMDefaultRegister340( PXGI_HW_DEVICE_INFO HwDeviceExtension ,  ULONG Port , PVB_DEVICE_INFO pVBInfo)
+void XGINew_SetDRAMDefaultRegister340(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+				      unsigned long Port, PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR temp , temp1 , temp2 , temp3 ,
           i , j , k ;
 
-    ULONG P3d4 = Port ,
+    unsigned long P3d4 = Port ,
            P3c4 = Port - 0x10 ;
 
     XGINew_SetReg1( P3d4 , 0x6D , pVBInfo-&gt;CR40[ 8 ][ XGINew_RAMType ] ) ;
@@ -1243,7 +1247,7 @@ void XGINew_SetDRAMDefaultRegister340( PXGI_HW_DEVICE_INFO HwDeviceExtension ,
 /* --------------------------------------------------------------------- */
 void XGINew_DDR_MRS(PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data ;
+    unsigned short data ;
 
     volatile unsigned char *pVideoMemory = (unsigned char *)pVBInfo-&gt;ROMAddr;
 
@@ -1313,7 +1317,7 @@ void XGINew_VerifyMclk( PXGI_HW_DEVICE_INFO  HwDeviceExtension , PVB_DEVICE_INFO
 {
     unsigned char *pVideoMemory = pVBInfo-&gt;FBAddr ;
     UCHAR i , j ;
-    USHORT Temp , SR21 ;
+    unsigned short Temp , SR21 ;
 
     pVideoMemory[ 0 ] = 0xaa ; 		/* alan */
     pVideoMemory[ 16 ] = 0x55 ; 	/* note: PCI read cache is off */
@@ -1357,7 +1361,7 @@ void XGINew_VerifyMclk( PXGI_HW_DEVICE_INFO  HwDeviceExtension , PVB_DEVICE_INFO
 /* --------------------------------------------------------------------- */
 void XGINew_SetDRAMSize_340( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT  data ;
+    unsigned short  data ;
 
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
     pVBInfo-&gt;FBAddr = HwDeviceExtension-&gt;pjVideoMemoryAddress ;
@@ -1366,7 +1370,7 @@ void XGINew_SetDRAMSize_340( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_
 
 
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x21 ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x21 , ( USHORT )( data &amp; 0xDF ) ) ;	/* disable read cache */
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x21, (unsigned short)(data &amp; 0xDF));	/* disable read cache */
     XGI_DisplayOff( HwDeviceExtension, pVBInfo );
 
     /*data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x1 ) ;*/
@@ -1374,8 +1378,7 @@ void XGINew_SetDRAMSize_340( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_
     /*XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x01 , data ) ;*/			/* Turn OFF Display */
     XGINew_DDRSizing340( HwDeviceExtension, pVBInfo ) ;
     data=XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x21 ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x21 , ( USHORT )( data | 0x20 ) ) ;	/* enable read cache */
-
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x21, (unsigned short)(data | 0x20)); /* enable read cache */
 }
 
 
@@ -1387,7 +1390,7 @@ void XGINew_SetDRAMSize_340( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_
 /* --------------------------------------------------------------------- */
 void XGINew_SetDRAMSize_310( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data ;
+    unsigned short data ;
     pVBInfo-&gt;ROMAddr  = HwDeviceExtension-&gt;pjVirtualRomBase ,
     pVBInfo-&gt;FBAddr = HwDeviceExtension-&gt;pjVideoMemoryAddress ;
 #ifdef XGI301
@@ -1403,7 +1406,7 @@ void XGINew_SetDRAMSize_310( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_
     XGISetModeNew( HwDeviceExtension , 0x2e ) ;
 
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x21 ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x21 , ( USHORT )( data &amp; 0xDF ) ) ;	/* disable read cache */
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x21, (unsigned short)(data &amp; 0xDF));	/* disable read cache */
 
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x1 ) ;
     data |= 0x20 ;
@@ -1412,7 +1415,7 @@ void XGINew_SetDRAMSize_310( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x16 ) ;
 
 
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x16 , ( USHORT )( data | 0x0F ) ) ;		/* assume lowest speed DRAM */
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x16, (unsigned short)(data | 0x0F));	/* assume lowest speed DRAM */
 
     XGINew_SetDRAMModeRegister( pVBInfo ) ;
     XGINew_DisableRefresh( HwDeviceExtension, pVBInfo ) ;
@@ -1433,11 +1436,11 @@ void XGINew_SetDRAMSize_310( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_
 
 
 
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x16 , pVBInfo-&gt;SR15[ 1 ][ XGINew_RAMType ] ) ;	/* restore SR16 */
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x16, pVBInfo-&gt;SR15[1][XGINew_RAMType]); /* restore SR16 */
 
     XGINew_EnableRefresh(  HwDeviceExtension, pVBInfo ) ;
     data=XGINew_GetReg1( pVBInfo-&gt;P3c4 ,0x21 ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x21 , ( USHORT )( data | 0x20 ) ) ;	/* enable read cache */
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x21, (unsigned short)(data | 0x20));	/* enable read cache */
 }
 
 
@@ -1456,7 +1459,7 @@ void XGINew_SetDRAMModeRegister340( PXGI_HW_DEVICE_INFO HwDeviceExtension )
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
     pVBInfo-&gt;FBAddr = HwDeviceExtension-&gt;pjVideoMemoryAddress ;
-    pVBInfo-&gt;BaseAddr = (ULONG)HwDeviceExtension-&gt;pjIOAddress ;
+    pVBInfo-&gt;BaseAddr = (unsigned long)HwDeviceExtension-&gt;pjIOAddress ;
     pVBInfo-&gt;ISXPDOS = 0 ;
 
     pVBInfo-&gt;P3c4 = pVBInfo-&gt;BaseAddr + 0x14 ;
@@ -1525,7 +1528,7 @@ void XGINew_SetDRAMModeRegister( PVB_DEVICE_INFO pVBInfo)
 /* --------------------------------------------------------------------- */
 void XGINew_DisableRefresh( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT  data ;
+    unsigned short  data ;
 
 
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x1B ) ;
@@ -1556,9 +1559,11 @@ void XGINew_EnableRefresh( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_IN
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_DisableChannelInterleaving( int index , USHORT XGINew_DDRDRAM_TYPE[][ 5 ] , PVB_DEVICE_INFO pVBInfo)
+void XGINew_DisableChannelInterleaving(int index,
+				       unsigned short XGINew_DDRDRAM_TYPE[][5],
+				       PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data ;
+    unsigned short data ;
 
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x15 ) ;
     data &amp;= 0x1F ;
@@ -1590,9 +1595,11 @@ void XGINew_DisableChannelInterleaving( int index , USHORT XGINew_DDRDRAM_TYPE[]
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_SetDRAMSizingType( int index , USHORT DRAMTYPE_TABLE[][ 5 ] ,PVB_DEVICE_INFO pVBInfo)
+void XGINew_SetDRAMSizingType(int index,
+			      unsigned short DRAMTYPE_TABLE[][5],
+			      PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data ;
+    unsigned short data;
 
     data = DRAMTYPE_TABLE[ index ][ 4 ] ;
     XGINew_SetRegANDOR( pVBInfo-&gt;P3c4 , 0x13 , 0x80 , data ) ;
@@ -1609,7 +1616,7 @@ void XGINew_SetDRAMSizingType( int index , USHORT DRAMTYPE_TABLE[][ 5 ] ,PVB_DEV
 /* --------------------------------------------------------------------- */
 void XGINew_CheckBusWidth_310(  PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data ;
+    unsigned short data ;
     volatile unsigned long *pVideoMemory ;
 
     pVideoMemory = (unsigned long *) pVBInfo-&gt;FBAddr;
@@ -1638,7 +1645,7 @@ void XGINew_CheckBusWidth_310(  PVB_DEVICE_INFO pVBInfo)
             XGINew_DataBusWidth = 64 ;
             XGINew_ChannelAB = 0 ;
             data=XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x14 ) ;
-            XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x14 , ( USHORT )( data &amp; 0xFD ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x14, (unsigned short)(data &amp; 0xFD));
         }
 
         if ( ( pVideoMemory[ 1 ] != 0x456789ABL ) || ( pVideoMemory[ 0 ] != 0x01234567L ) )
@@ -1647,7 +1654,8 @@ void XGINew_CheckBusWidth_310(  PVB_DEVICE_INFO pVBInfo)
             XGINew_DataBusWidth = 64 ;
             XGINew_ChannelAB = 1 ;
             data=XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x14 ) ;
-            XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x14 , ( USHORT )( ( data &amp; 0xFD ) | 0x01 ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x14,
+			   (unsigned short)((data &amp; 0xFD) | 0x01));
         }
 
         return ;
@@ -1740,9 +1748,13 @@ void XGINew_CheckBusWidth_310(  PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-int XGINew_SetRank( int index , UCHAR RankNo , UCHAR XGINew_ChannelAB , USHORT DRAMTYPE_TABLE[][ 5 ] , PVB_DEVICE_INFO pVBInfo)
+int XGINew_SetRank(int index,
+		   UCHAR RankNo,
+		   UCHAR XGINew_ChannelAB,
+		   unsigned short DRAMTYPE_TABLE[][5],
+		   PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data ;
+    unsigned short data;
     int RankSize ;
 
     if ( ( RankNo == 2 ) &amp;&amp; ( DRAMTYPE_TABLE[ index ][ 0 ] == 2 ) )
@@ -1777,9 +1789,13 @@ int XGINew_SetRank( int index , UCHAR RankNo , UCHAR XGINew_ChannelAB , USHORT D
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-int XGINew_SetDDRChannel( int index , UCHAR ChannelNo , UCHAR XGINew_ChannelAB , USHORT DRAMTYPE_TABLE[][ 5 ] , PVB_DEVICE_INFO pVBInfo)
+int XGINew_SetDDRChannel(int index,
+			 UCHAR ChannelNo,
+			 UCHAR XGINew_ChannelAB,
+			 unsigned short DRAMTYPE_TABLE[][5],
+			 PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT  data ;
+    unsigned short data;
     int RankSize ;
 
     RankSize = DRAMTYPE_TABLE[index][3]/2 * XGINew_DataBusWidth/32;
@@ -1813,10 +1829,12 @@ int XGINew_SetDDRChannel( int index , UCHAR ChannelNo , UCHAR XGINew_ChannelAB ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-int XGINew_CheckColumn( int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INFO pVBInfo)
+int XGINew_CheckColumn(int index,
+		       unsigned short DRAMTYPE_TABLE[][5],
+		       PVB_DEVICE_INFO pVBInfo)
 {
     int i ;
-    ULONG Increment , Position ;
+    unsigned long Increment , Position ;
 
     /* Increment = 1 &lt;&lt; ( DRAMTYPE_TABLE[ index ][ 2 ] + XGINew_DataBusWidth / 64 + 1 ) ; */
     Increment = 1 &lt;&lt; ( 10 + XGINew_DataBusWidth / 64 ) ;
@@ -1845,10 +1863,12 @@ int XGINew_CheckColumn( int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INF
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-int XGINew_CheckBanks( int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INFO pVBInfo)
+int XGINew_CheckBanks(int index,
+		      unsigned short DRAMTYPE_TABLE[][5],
+		      PVB_DEVICE_INFO pVBInfo)
 {
     int i ;
-    ULONG Increment , Position ;
+    unsigned long Increment , Position ;
 
     Increment = 1 &lt;&lt; ( DRAMTYPE_TABLE[ index ][ 2 ] + XGINew_DataBusWidth / 64 + 2 ) ;
 
@@ -1876,10 +1896,12 @@ int XGINew_CheckBanks( int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INFO
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-int XGINew_CheckRank( int RankNo , int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INFO pVBInfo)
+int XGINew_CheckRank(int RankNo, int index,
+		     unsigned short DRAMTYPE_TABLE[][5],
+		     PVB_DEVICE_INFO pVBInfo)
 {
     int i ;
-    ULONG Increment , Position ;
+    unsigned long Increment , Position ;
 
     Increment = 1 &lt;&lt; ( DRAMTYPE_TABLE[ index ][ 2 ] + DRAMTYPE_TABLE[ index ][ 1 ] +
                   DRAMTYPE_TABLE[ index ][ 0 ] + XGINew_DataBusWidth / 64 + RankNo ) ;
@@ -1910,10 +1932,12 @@ int XGINew_CheckRank( int RankNo , int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-int XGINew_CheckDDRRank( int RankNo , int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INFO pVBInfo)
+int XGINew_CheckDDRRank(int RankNo, int index,
+			unsigned short DRAMTYPE_TABLE[][5],
+			PVB_DEVICE_INFO pVBInfo)
 {
-    ULONG Increment , Position ;
-    USHORT data ;
+    unsigned long Increment , Position ;
+    unsigned short data ;
 
     Increment = 1 &lt;&lt; ( DRAMTYPE_TABLE[ index ][ 2 ] + DRAMTYPE_TABLE[ index ][ 1 ] +
                        DRAMTYPE_TABLE[ index ][ 0 ] + XGINew_DataBusWidth / 64 + RankNo ) ;
@@ -1952,7 +1976,9 @@ int XGINew_CheckDDRRank( int RankNo , int index , USHORT DRAMTYPE_TABLE[][ 5 ],
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-int XGINew_CheckRanks( int RankNo , int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INFO pVBInfo)
+int XGINew_CheckRanks(int RankNo, int index,
+		      unsigned short DRAMTYPE_TABLE[][5],
+		      PVB_DEVICE_INFO pVBInfo)
 {
     int r ;
 
@@ -1978,7 +2004,9 @@ int XGINew_CheckRanks( int RankNo , int index , USHORT DRAMTYPE_TABLE[][ 5 ], PV
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-int XGINew_CheckDDRRanks( int RankNo , int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INFO pVBInfo)
+int XGINew_CheckDDRRanks(int RankNo, int index,
+			 unsigned short DRAMTYPE_TABLE[][5],
+			 PVB_DEVICE_INFO pVBInfo)
 {
     int r ;
 
@@ -2034,9 +2062,11 @@ int XGINew_SDRSizing(PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT XGINew_SetDRAMSizeReg( int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INFO pVBInfo)
+unsigned short XGINew_SetDRAMSizeReg(int index,
+				     unsigned short DRAMTYPE_TABLE[][5],
+				     PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data = 0 , memsize = 0 ;
+    unsigned short data = 0 , memsize = 0;
     int RankSize ;
     UCHAR ChannelNo ;
 
@@ -2083,9 +2113,11 @@ USHORT XGINew_SetDRAMSizeReg( int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVI
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT XGINew_SetDRAMSize20Reg( int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INFO pVBInfo)
+unsigned short XGINew_SetDRAMSize20Reg(int index,
+				       unsigned short DRAMTYPE_TABLE[][5],
+				       PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data = 0 , memsize = 0 ;
+    unsigned short data = 0 , memsize = 0;
     int RankSize ;
     UCHAR ChannelNo ;
 
@@ -2133,10 +2165,11 @@ USHORT XGINew_SetDRAMSize20Reg( int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DE
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-int XGINew_ReadWriteRest( USHORT StopAddr , USHORT StartAddr, PVB_DEVICE_INFO pVBInfo)
+int XGINew_ReadWriteRest(unsigned short StopAddr, unsigned short StartAddr,
+			 PVB_DEVICE_INFO pVBInfo)
 {
     int i ;
-    ULONG Position = 0 ;
+    unsigned long Position = 0 ;
 
     *((unsigned long *)(pVBInfo-&gt;FBAddr + Position)) = Position;
 
@@ -2476,7 +2509,7 @@ void XGINew_CheckChannel( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
 int XGINew_DDRSizing340( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
 {
     int i ;
-    USHORT memsize , addr ;
+    unsigned short memsize , addr ;
 
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x15 , 0x00 ) ;	/* noninterleaving */
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x1C , 0x00 ) ;	/* nontiling */
@@ -2493,7 +2526,7 @@ int XGINew_DDRSizing340( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
             continue ;
 
         addr = memsize + ( XGINew_ChannelAB - 2 ) + 20 ;
-        if ( ( HwDeviceExtension-&gt;ulVideoMemorySize - 1 ) &lt; ( ULONG )( 1 &lt;&lt; addr ) )
+	if ((HwDeviceExtension-&gt;ulVideoMemorySize - 1) &lt; (unsigned long)(1 &lt;&lt; addr))
             continue ;
 
         if ( XGINew_ReadWriteRest( addr , 5, pVBInfo ) == 1 )
@@ -2511,7 +2544,7 @@ int XGINew_DDRSizing340( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
             continue ;
 
         addr = memsize + ( XGINew_ChannelAB - 2 ) + 20 ;
-        if ( ( HwDeviceExtension-&gt;ulVideoMemorySize - 1 ) &lt; ( ULONG )( 1 &lt;&lt; addr ) )
+	if ((HwDeviceExtension-&gt;ulVideoMemorySize - 1) &lt; (unsigned long)(1 &lt;&lt; addr))
             continue ;
 
         if ( XGINew_ReadWriteRest( addr , 9, pVBInfo ) == 1 )
@@ -2592,7 +2625,7 @@ void XGINew_SetMemoryClock( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_IN
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN ChkLFB( PVB_DEVICE_INFO pVBInfo )
+unsigned char ChkLFB( PVB_DEVICE_INFO pVBInfo )
 {
 	if (LFBDRAMTrap &amp; XGINew_GetReg1(pVBInfo-&gt;P3d4 , 0x78))
 		return 1;
@@ -2609,9 +2642,10 @@ BOOLEAN ChkLFB( PVB_DEVICE_INFO pVBInfo )
 /* in second chip, assume CR A1 D[6]="1" in this case */
 /* output : none */
 /* --------------------------------------------------------------------- */
-void SetPowerConsume ( PXGI_HW_DEVICE_INFO HwDeviceExtension , ULONG XGI_P3d4Port )
+void SetPowerConsume(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		     unsigned long XGI_P3d4Port)
 {
-    ULONG   lTemp ;
+    unsigned long   lTemp ;
     UCHAR   bTemp;
 
     HwDeviceExtension-&gt;pQueryVGAConfigSpace( HwDeviceExtension , 0x08 , 0 , &amp;lTemp ) ; /* Get */
@@ -2640,10 +2674,10 @@ void SetPowerConsume ( PXGI_HW_DEVICE_INFO HwDeviceExtension , ULONG XGI_P3d4Por
 void XGINew_InitVBIOSData(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
 {
 
-	/* ULONG ROMAddr = (ULONG)HwDeviceExtension-&gt;pjVirtualRomBase; */
+	/* unsigned long ROMAddr = (unsigned long)HwDeviceExtension-&gt;pjVirtualRomBase; */
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
     pVBInfo-&gt;FBAddr = HwDeviceExtension-&gt;pjVideoMemoryAddress ;
-    pVBInfo-&gt;BaseAddr = (ULONG)HwDeviceExtension-&gt;pjIOAddress ;
+    pVBInfo-&gt;BaseAddr = (unsigned long)HwDeviceExtension-&gt;pjIOAddress ;
     pVBInfo-&gt;ISXPDOS = 0 ;
 
     pVBInfo-&gt;P3c4 = pVBInfo-&gt;BaseAddr + 0x14 ;
@@ -2689,7 +2723,7 @@ void XGINew_InitVBIOSData(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
 void ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo)
 {
 	volatile unsigned char *pVideoMemory = (unsigned char *)pVBInfo-&gt;ROMAddr;
-    ULONG   i ;
+    unsigned long   i ;
     UCHAR   j , k ;
     /* Volari customize data area end */
 
@@ -2756,7 +2790,7 @@ void ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_DDR1x_MRS_XG20( ULONG P3c4 , PVB_DEVICE_INFO pVBInfo)
+void XGINew_DDR1x_MRS_XG20(unsigned long P3c4, PVB_DEVICE_INFO pVBInfo)
 {
 
     XGINew_SetReg1( P3c4 , 0x18 , 0x01 ) ;
@@ -2798,7 +2832,7 @@ void XGINew_SetDRAMModeRegister_XG20( PXGI_HW_DEVICE_INFO HwDeviceExtension )
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
     pVBInfo-&gt;FBAddr = HwDeviceExtension-&gt;pjVideoMemoryAddress ;
-    pVBInfo-&gt;BaseAddr = (ULONG)HwDeviceExtension-&gt;pjIOAddress ;
+    pVBInfo-&gt;BaseAddr = (unsigned long)HwDeviceExtension-&gt;pjIOAddress ;
     pVBInfo-&gt;ISXPDOS = 0 ;
 
     pVBInfo-&gt;P3c4 = pVBInfo-&gt;BaseAddr + 0x14 ;
@@ -2837,7 +2871,7 @@ void XGINew_SetDRAMModeRegister_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension )
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
     pVBInfo-&gt;FBAddr = HwDeviceExtension-&gt;pjVideoMemoryAddress ;
-    pVBInfo-&gt;BaseAddr = (ULONG)HwDeviceExtension-&gt;pjIOAddress ;
+    pVBInfo-&gt;BaseAddr = (unsigned long)HwDeviceExtension-&gt;pjIOAddress ;
     pVBInfo-&gt;ISXPDOS = 0 ;
 
     pVBInfo-&gt;P3c4 = pVBInfo-&gt;BaseAddr + 0x14 ;
@@ -2922,7 +2956,7 @@ void XGINew_SetDRAMModeRegister_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension )
 /* -------------------------------------------------------- */
 void XGINew_ChkSenseStatus ( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbx=0 , temp , tempcx , CR3CData;
+    unsigned short tempbx = 0, temp, tempcx, CR3CData;
 
     temp = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x32 ) ;
 
@@ -2983,7 +3017,7 @@ void XGINew_ChkSenseStatus ( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_
 /* -------------------------------------------------------- */
 void XGINew_SetModeScratch ( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT temp , tempcl = 0 , tempch = 0 , CR31Data , CR38Data;
+    unsigned short temp , tempcl = 0 , tempch = 0 , CR31Data , CR38Data;
 
     temp = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x3d ) ;
     temp |= XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x3e ) &lt;&lt; 8 ;
diff --git a/drivers/staging/xgifb/vb_init.h b/drivers/staging/xgifb/vb_init.h
index 1f39d9c74cdd..ab6939f58586 100644
--- a/drivers/staging/xgifb/vb_init.h
+++ b/drivers/staging/xgifb/vb_init.h
@@ -1,6 +1,6 @@
 #ifndef  _VBINIT_
 #define  _VBINIT_
-extern   BOOLEAN    XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension ) ;
+extern   unsigned char    XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension ) ;
 extern XGI21_LVDSCapStruct  XGI21_LCDCapList[13];
 
 #endif
diff --git a/drivers/staging/xgifb/vb_setmode.c b/drivers/staging/xgifb/vb_setmode.c
index 4a2fa32e7d94..f27259e80987 100644
--- a/drivers/staging/xgifb/vb_setmode.c
+++ b/drivers/staging/xgifb/vb_setmode.c
@@ -20,44 +20,71 @@
 
 
 
-BOOLEAN  XGI_IsLCDDualLink(PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGI_SetCRT2Group301(USHORT ModeNo, PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGI_BacklightByDrv(PVB_DEVICE_INFO pVBInfo);
-
-BOOLEAN  XGI_IsLCDON(PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGI_DisableChISLCD(PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGI_EnableChISLCD(PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGI_AjustCRT2Rate(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,USHORT *i, PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGI_SearchModeID( USHORT ModeNo,USHORT  *ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGI_GetLCDInfo(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGISetModeNew( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo ) ;
-BOOLEAN  XGI_BridgeIsOn(PVB_DEVICE_INFO pVBInfo);
-UCHAR    XGI_GetModePtr( USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo);
-USHORT   XGI_GetOffset(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo);
-USHORT   XGI_GetRatePtrCRT2( PXGI_HW_DEVICE_INFO pXGIHWDE, USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo );
-USHORT   XGI_GetResInfo(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
-USHORT   XGI_GetColorDepth(USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo);
-USHORT   XGI_GetVGAHT2(PVB_DEVICE_INFO pVBInfo);
-USHORT   XGI_GetVCLK2Ptr(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo);
+unsigned char  XGI_IsLCDDualLink(PVB_DEVICE_INFO pVBInfo);
+unsigned char  XGI_SetCRT2Group301(unsigned short ModeNo,
+			     PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			     PVB_DEVICE_INFO pVBInfo);
+unsigned char  XGI_BacklightByDrv(PVB_DEVICE_INFO pVBInfo);
+
+unsigned char  XGI_IsLCDON(PVB_DEVICE_INFO pVBInfo);
+unsigned char  XGI_DisableChISLCD(PVB_DEVICE_INFO pVBInfo);
+unsigned char  XGI_EnableChISLCD(PVB_DEVICE_INFO pVBInfo);
+unsigned char  XGI_AjustCRT2Rate(unsigned short ModeNo,
+			   unsigned short ModeIdIndex,
+			   unsigned short RefreshRateTableIndex,
+			   unsigned short *i, PVB_DEVICE_INFO pVBInfo);
+unsigned char  XGI_SearchModeID(unsigned short ModeNo,
+			  unsigned short *ModeIdIndex,
+			  PVB_DEVICE_INFO pVBInfo);
+unsigned char  XGI_GetLCDInfo(unsigned short ModeNo,
+			unsigned short ModeIdIndex,
+			PVB_DEVICE_INFO pVBInfo);
+unsigned char  XGISetModeNew(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		       unsigned short ModeNo);
+unsigned char  XGI_BridgeIsOn(PVB_DEVICE_INFO pVBInfo);
+UCHAR    XGI_GetModePtr(unsigned short ModeNo,
+			unsigned short ModeIdIndex,
+			PVB_DEVICE_INFO pVBInfo);
+unsigned short XGI_GetOffset(unsigned short ModeNo,
+			     unsigned short ModeIdIndex,
+			     unsigned short RefreshRateTableIndex,
+			     PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			     PVB_DEVICE_INFO pVBInfo);
+unsigned short XGI_GetRatePtrCRT2(PXGI_HW_DEVICE_INFO pXGIHWDE,
+				  unsigned short ModeNo,
+				  unsigned short ModeIdIndex,
+				  PVB_DEVICE_INFO pVBInfo);
+unsigned short XGI_GetResInfo(unsigned short ModeNo,
+			      unsigned short ModeIdIndex,
+			      PVB_DEVICE_INFO pVBInfo);
+unsigned short XGI_GetColorDepth(unsigned short ModeNo,
+				 unsigned short ModeIdIndex,
+				 PVB_DEVICE_INFO pVBInfo);
+unsigned short XGI_GetVGAHT2(PVB_DEVICE_INFO pVBInfo);
+unsigned short XGI_GetVCLK2Ptr(unsigned short ModeNo,
+			       unsigned short ModeIdIndex,
+			       unsigned short RefreshRateTableIndex,
+			       PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			       PVB_DEVICE_INFO pVBInfo);
 void     XGI_VBLongWait(PVB_DEVICE_INFO pVBInfo);
-void     XGI_SaveCRT2Info(USHORT ModeNo, PVB_DEVICE_INFO pVBInfo);
-void     XGI_GetCRT2Data(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_GetCRT2ResInfo(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_PreSetGroup1(USHORT ModeNo,USHORT ModeIdIndex, PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetGroup1(USHORT ModeNo,USHORT ModeIdIndex, PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetLockRegs(USHORT ModeNo,USHORT ModeIdIndex, PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetLCDRegs(USHORT ModeNo,USHORT ModeIdIndex, PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetGroup2(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetGroup3(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetGroup4(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetGroup5(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
-void*    XGI_GetLcdPtr(USHORT BX,  USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
-void*    XGI_GetTVPtr(USHORT BX, USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SaveCRT2Info(unsigned short ModeNo, PVB_DEVICE_INFO pVBInfo);
+void     XGI_GetCRT2Data(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_GetCRT2ResInfo(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_PreSetGroup1(unsigned short ModeNo, unsigned short ModeIdIndex, PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetGroup1(unsigned short ModeNo, unsigned short ModeIdIndex, PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetLockRegs(unsigned short ModeNo, unsigned short ModeIdIndex, PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetLCDRegs(unsigned short ModeNo, unsigned short ModeIdIndex, PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetGroup2(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetGroup3(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetGroup4(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetGroup5(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
+void     *XGI_GetLcdPtr(unsigned short BX,  unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     *XGI_GetTVPtr(unsigned short BX, unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
 void 	 XGI_FirePWDEnable(PVB_DEVICE_INFO pVBInfo);
 void 	 XGI_EnableGatingCRT(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
 void 	 XGI_DisableGatingCRT(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
-void 	 XGI_SetPanelDelay(USHORT tempbl, PVB_DEVICE_INFO pVBInfo);
-void 	 XGI_SetPanelPower(USHORT tempah,USHORT tempbl, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetPanelDelay(unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetPanelPower(unsigned short tempah, unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
 void 	 XGI_EnablePWD( PVB_DEVICE_INFO pVBInfo);
 void 	 XGI_DisablePWD( PVB_DEVICE_INFO pVBInfo);
 void     XGI_AutoThreshold( PVB_DEVICE_INFO pVBInfo);
@@ -65,136 +92,136 @@ void     XGI_SetTap4Regs( PVB_DEVICE_INFO pVBInfo);
 
 void     XGI_DisplayOn(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo);
 void     XGI_DisplayOff( PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo );
-void     XGI_SetCRT1Group(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetXG21CRTC(USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetXG21LCD(PVB_DEVICE_INFO pVBInfo,USHORT RefreshRateTableIndex,USHORT ModeNo);
-void     XGI_SetXG27CRTC(USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetXG27LCD(PVB_DEVICE_INFO pVBInfo,USHORT RefreshRateTableIndex,USHORT ModeNo);
-void	 XGI_UpdateXG21CRTC(USHORT ModeNo, PVB_DEVICE_INFO pVBInfo, USHORT RefreshRateTableIndex);
+void     XGI_SetCRT1Group(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo, unsigned short ModeIdIndex,PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetXG21CRTC(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetXG21LCD(PVB_DEVICE_INFO pVBInfo, unsigned short RefreshRateTableIndex, unsigned short ModeNo);
+void     XGI_SetXG27CRTC(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetXG27LCD(PVB_DEVICE_INFO pVBInfo, unsigned short RefreshRateTableIndex, unsigned short ModeNo);
+void	 XGI_UpdateXG21CRTC(unsigned short ModeNo, PVB_DEVICE_INFO pVBInfo, unsigned short RefreshRateTableIndex);
 void     XGI_WaitDisply(PVB_DEVICE_INFO pVBInfo);
 void     XGI_SenseCRT1(PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetSeqRegs(USHORT ModeNo,USHORT StandTableIndex,USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetMiscRegs(USHORT StandTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetCRTCRegs(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT StandTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetATTRegs(USHORT ModeNo,USHORT StandTableIndex,USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo );
-void     XGI_SetGRCRegs(USHORT StandTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetSeqRegs(unsigned short ModeNo, unsigned short StandTableIndex, unsigned short ModeIdIndex,PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetMiscRegs(unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetCRTCRegs(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetATTRegs(unsigned short ModeNo, unsigned short StandTableIndex, unsigned short ModeIdIndex,PVB_DEVICE_INFO pVBInfo );
+void     XGI_SetGRCRegs(unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo);
 void     XGI_ClearExt1Regs(PVB_DEVICE_INFO pVBInfo);
 
-void     XGI_SetSync(USHORT RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetCRT1CRTC(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo,PXGI_HW_DEVICE_INFO HwDeviceExtension);
+void     XGI_SetSync(unsigned short RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetCRT1CRTC(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo,PXGI_HW_DEVICE_INFO HwDeviceExtension);
 void     XGI_SetCRT1Timing_H(PVB_DEVICE_INFO pVBInfo,PXGI_HW_DEVICE_INFO HwDeviceExtension);
-void     XGI_SetCRT1Timing_V(USHORT ModeIdIndex,USHORT ModeNo,PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetCRT1DE(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetCRT1VCLK(USHORT ModeNo,USHORT ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetCRT1FIFO(USHORT ModeNo,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetCRT1ModeRegs(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetVCLKState(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT ModeNo,USHORT RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo);
-
-void     XGI_LoadDAC(USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo);
-void     XGI_WriteDAC(USHORT dl, USHORT ah, USHORT al, USHORT dh, PVB_DEVICE_INFO pVBInfo);
-/*void     XGI_ClearBuffer(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT ModeNo,PVB_DEVICE_INFO pVBInfo);*/
-void     XGI_SetLCDAGroup(USHORT ModeNo,USHORT ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo);
-void     XGI_GetLVDSResInfo( USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO  pVBInfo);
-void     XGI_GetLVDSData(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PVB_DEVICE_INFO  pVBInfo);
-void     XGI_ModCRT1Regs(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo);
-void     XGI_SetLVDSRegs(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PVB_DEVICE_INFO  pVBInfo);
+void     XGI_SetCRT1Timing_V(unsigned short ModeIdIndex, unsigned short ModeNo,PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetCRT1DE(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetCRT1VCLK(unsigned short ModeNo, unsigned short ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetCRT1FIFO(unsigned short ModeNo,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetCRT1ModeRegs(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetVCLKState(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo, unsigned short RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo);
+
+void     XGI_LoadDAC(unsigned short ModeNo, unsigned short ModeIdIndex,PVB_DEVICE_INFO pVBInfo);
+void     XGI_WriteDAC(unsigned short dl, unsigned short ah, unsigned short al, unsigned short dh, PVB_DEVICE_INFO pVBInfo);
+/*void     XGI_ClearBuffer(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo,PVB_DEVICE_INFO pVBInfo);*/
+void     XGI_SetLCDAGroup(unsigned short ModeNo, unsigned short ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo);
+void     XGI_GetLVDSResInfo(unsigned short ModeNo, unsigned short ModeIdIndex,PVB_DEVICE_INFO  pVBInfo);
+void     XGI_GetLVDSData(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PVB_DEVICE_INFO  pVBInfo);
+void     XGI_ModCRT1Regs(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo);
+void     XGI_SetLVDSRegs(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PVB_DEVICE_INFO  pVBInfo);
 void     XGI_UpdateModeInfo(PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo);
 void     XGI_GetVGAType(PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo);
 void     XGI_GetVBType(PVB_DEVICE_INFO  pVBInfo);
-void     XGI_GetVBInfo(USHORT ModeNo,USHORT ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo);
-void     XGI_GetTVInfo(USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO  pVBInfo);
-void     XGI_SetCRT2ECLK( USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PVB_DEVICE_INFO  pVBInfo);
+void     XGI_GetVBInfo(unsigned short ModeNo, unsigned short ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo);
+void     XGI_GetTVInfo(unsigned short ModeNo, unsigned short ModeIdIndex,PVB_DEVICE_INFO  pVBInfo);
+void     XGI_SetCRT2ECLK(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PVB_DEVICE_INFO  pVBInfo);
 void     InitTo330Pointer(UCHAR,PVB_DEVICE_INFO pVBInfo);
-void     XGI_GetLCDSync(USHORT* HSyncWidth, USHORT* VSyncWidth, PVB_DEVICE_INFO pVBInfo);
+void     XGI_GetLCDSync(unsigned short *HSyncWidth, unsigned short *VSyncWidth, PVB_DEVICE_INFO pVBInfo);
 void 	 XGI_DisableBridge(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
 void  	 XGI_EnableBridge(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetCRT2VCLK(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_OEM310Setting(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetCRT2VCLK(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_OEM310Setting(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetDelayComp(PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetLCDCap(PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetLCDCap_A(USHORT tempcx,PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetLCDCap_B(USHORT tempcx,PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetLCDCap_A(unsigned short tempcx,PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetLCDCap_B(unsigned short tempcx,PVB_DEVICE_INFO pVBInfo);
 void     SetSpectrum(PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetAntiFlicker(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetEdgeEnhance(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetAntiFlicker(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetEdgeEnhance(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetPhaseIncr(PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetYFilter(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
-void     XGI_GetTVPtrIndex2(USHORT* tempbx,UCHAR* tempcl,UCHAR* tempch, PVB_DEVICE_INFO pVBInfo);
-USHORT   XGI_GetTVPtrIndex(  PVB_DEVICE_INFO pVBInfo );
-void     XGI_SetCRT2ModeRegs(USHORT ModeNo,PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo );
+void     XGI_SetYFilter(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_GetTVPtrIndex2(unsigned short *tempbx,UCHAR* tempcl,UCHAR* tempch, PVB_DEVICE_INFO pVBInfo);
+unsigned short   XGI_GetTVPtrIndex(PVB_DEVICE_INFO pVBInfo);
+void     XGI_SetCRT2ModeRegs(unsigned short ModeNo,PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo );
 void     XGI_CloseCRTC(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo);
 void     XGI_OpenCRTC(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo);
-void     XGI_GetRAMDAC2DATA(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
+void     XGI_GetRAMDAC2DATA(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo);
 void     XGI_UnLockCRT2(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo);
 void     XGI_LockCRT2(PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO pVBInfo);
 void     XGINew_EnableCRT2(PVB_DEVICE_INFO pVBInfo);
 void     XGINew_LCD_Wait_Time(UCHAR DelayTime, PVB_DEVICE_INFO pVBInfo);
 void     XGI_LongWait(PVB_DEVICE_INFO pVBInfo);
-void     XGI_SetCRT1Offset( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo );
+void     XGI_SetCRT1Offset(unsigned short ModeNo , unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo );
 void     XGI_GetLCDVCLKPtr(UCHAR* di_0,UCHAR *di_1, PVB_DEVICE_INFO pVBInfo);
-UCHAR    XGI_GetVCLKPtr(USHORT RefreshRateTableIndex,USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
+UCHAR    XGI_GetVCLKPtr(unsigned short RefreshRateTableIndex, unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
 void     XGI_GetVCLKLen(UCHAR tempal,UCHAR* di_0,UCHAR* di_1, PVB_DEVICE_INFO pVBInfo);
-USHORT   XGI_GetLCDCapPtr(PVB_DEVICE_INFO pVBInfo);
-USHORT   XGI_GetLCDCapPtr1(PVB_DEVICE_INFO pVBInfo);
-XGI301C_Tap4TimingStruct* XGI_GetTap4Ptr(USHORT tempcx, PVB_DEVICE_INFO pVBInfo);
+unsigned short   XGI_GetLCDCapPtr(PVB_DEVICE_INFO pVBInfo);
+unsigned short   XGI_GetLCDCapPtr1(PVB_DEVICE_INFO pVBInfo);
+XGI301C_Tap4TimingStruct *XGI_GetTap4Ptr(unsigned short tempcx, PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetXG21FPBits(PVB_DEVICE_INFO pVBInfo);
 void     XGI_SetXG27FPBits(PVB_DEVICE_INFO pVBInfo);
 UCHAR    XGI_XG21GetPSCValue(PVB_DEVICE_INFO pVBInfo);
 UCHAR    XGI_XG27GetPSCValue(PVB_DEVICE_INFO pVBInfo);
-void     XGI_XG21BLSignalVDD(USHORT tempbh,USHORT tempbl, PVB_DEVICE_INFO pVBInfo);
-void     XGI_XG27BLSignalVDD(USHORT tempbh,USHORT tempbl, PVB_DEVICE_INFO pVBInfo);
-void     XGI_XG21SetPanelDelay(USHORT tempbl, PVB_DEVICE_INFO pVBInfo);
-BOOLEAN  XGI_XG21CheckLVDSMode(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
-void     XGI_SetXG21LVDSPara(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
-void     XGI_SetXG27LVDSPara(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
+void     XGI_XG21BLSignalVDD(unsigned short tempbh, unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
+void     XGI_XG27BLSignalVDD(unsigned short tempbh, unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
+void     XGI_XG21SetPanelDelay(unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
+unsigned char  XGI_XG21CheckLVDSMode(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
+void     XGI_SetXG21LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
+void     XGI_SetXG27LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
 UCHAR    XGI_SetDefaultVCLK( PVB_DEVICE_INFO pVBInfo );
 
 extern   void 	  ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo);
 
-/* USHORT XGINew_flag_clearbuffer; 0: no clear frame buffer 1:clear frame buffer */
-
-
-
-
-
-USHORT XGINew_MDA_DAC[]={0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
-               0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,
-               0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,
-               0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,
-               0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
-               0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,
-               0x15,0x15,0x15,0x15,0x15,0x15,0x15,0x15,
-               0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F,0x3F};
-
-USHORT XGINew_CGA_DAC[]={0x00,0x10,0x04,0x14,0x01,0x11,0x09,0x15,
-               0x00,0x10,0x04,0x14,0x01,0x11,0x09,0x15,
-               0x2A,0x3A,0x2E,0x3E,0x2B,0x3B,0x2F,0x3F,
-               0x2A,0x3A,0x2E,0x3E,0x2B,0x3B,0x2F,0x3F,
-               0x00,0x10,0x04,0x14,0x01,0x11,0x09,0x15,
-               0x00,0x10,0x04,0x14,0x01,0x11,0x09,0x15,
-               0x2A,0x3A,0x2E,0x3E,0x2B,0x3B,0x2F,0x3F,
-               0x2A,0x3A,0x2E,0x3E,0x2B,0x3B,0x2F,0x3F};
-
-USHORT XGINew_EGA_DAC[]={0x00,0x10,0x04,0x14,0x01,0x11,0x05,0x15,
-               0x20,0x30,0x24,0x34,0x21,0x31,0x25,0x35,
-               0x08,0x18,0x0C,0x1C,0x09,0x19,0x0D,0x1D,
-               0x28,0x38,0x2C,0x3C,0x29,0x39,0x2D,0x3D,
-               0x02,0x12,0x06,0x16,0x03,0x13,0x07,0x17,
-               0x22,0x32,0x26,0x36,0x23,0x33,0x27,0x37,
-               0x0A,0x1A,0x0E,0x1E,0x0B,0x1B,0x0F,0x1F,
-               0x2A,0x3A,0x2E,0x3E,0x2B,0x3B,0x2F,0x3F};
-
-USHORT XGINew_VGA_DAC[]={0x00,0x10,0x04,0x14,0x01,0x11,0x09,0x15,
-               0x2A,0x3A,0x2E,0x3E,0x2B,0x3B,0x2F,0x3F,
-               0x00,0x05,0x08,0x0B,0x0E,0x11,0x14,0x18,
-               0x1C,0x20,0x24,0x28,0x2D,0x32,0x38,0x3F,
-
-               0x00,0x10,0x1F,0x2F,0x3F,0x1F,0x27,0x2F,
-               0x37,0x3F,0x2D,0x31,0x36,0x3A,0x3F,0x00,
-               0x07,0x0E,0x15,0x1C,0x0E,0x11,0x15,0x18,
-               0x1C,0x14,0x16,0x18,0x1A,0x1C,0x00,0x04,
-               0x08,0x0C,0x10,0x08,0x0A,0x0C,0x0E,0x10,
-               0x0B,0x0C,0x0D,0x0F,0x10};
+/* unsigned short XGINew_flag_clearbuffer; 0: no clear frame buffer 1:clear frame buffer */
+
+
+unsigned short XGINew_MDA_DAC[] = {
+	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
+	0x15, 0x15, 0x15, 0x15, 0x15, 0x15, 0x15, 0x15,
+	0x15, 0x15, 0x15, 0x15, 0x15, 0x15, 0x15, 0x15,
+	0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F,
+	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
+	0x15, 0x15, 0x15, 0x15, 0x15, 0x15, 0x15, 0x15,
+	0x15, 0x15, 0x15, 0x15, 0x15, 0x15, 0x15, 0x15,
+	0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F};
+
+unsigned short XGINew_CGA_DAC[] = {
+	0x00, 0x10, 0x04, 0x14, 0x01, 0x11, 0x09, 0x15,
+	0x00, 0x10, 0x04, 0x14, 0x01, 0x11, 0x09, 0x15,
+	0x2A, 0x3A, 0x2E, 0x3E, 0x2B, 0x3B, 0x2F, 0x3F,
+	0x2A, 0x3A, 0x2E, 0x3E, 0x2B, 0x3B, 0x2F, 0x3F,
+	0x00, 0x10, 0x04, 0x14, 0x01, 0x11, 0x09, 0x15,
+	0x00, 0x10, 0x04, 0x14, 0x01, 0x11, 0x09, 0x15,
+	0x2A, 0x3A, 0x2E, 0x3E, 0x2B, 0x3B, 0x2F, 0x3F,
+	0x2A, 0x3A, 0x2E, 0x3E, 0x2B, 0x3B, 0x2F, 0x3F};
+
+unsigned short XGINew_EGA_DAC[] = {
+	0x00, 0x10, 0x04, 0x14, 0x01, 0x11, 0x05, 0x15,
+	0x20, 0x30, 0x24, 0x34, 0x21, 0x31, 0x25, 0x35,
+	0x08, 0x18, 0x0C, 0x1C, 0x09, 0x19, 0x0D, 0x1D,
+	0x28, 0x38, 0x2C, 0x3C, 0x29, 0x39, 0x2D, 0x3D,
+	0x02, 0x12, 0x06, 0x16, 0x03, 0x13, 0x07, 0x17,
+	0x22, 0x32, 0x26, 0x36, 0x23, 0x33, 0x27, 0x37,
+	0x0A, 0x1A, 0x0E, 0x1E, 0x0B, 0x1B, 0x0F, 0x1F,
+	0x2A, 0x3A, 0x2E, 0x3E, 0x2B, 0x3B, 0x2F, 0x3F};
+
+unsigned short XGINew_VGA_DAC[] = {
+	0x00, 0x10, 0x04, 0x14, 0x01, 0x11, 0x09, 0x15,
+	0x2A, 0x3A, 0x2E, 0x3E, 0x2B, 0x3B, 0x2F, 0x3F,
+	0x00, 0x05, 0x08, 0x0B, 0x0E, 0x11, 0x14, 0x18,
+	0x1C, 0x20, 0x24, 0x28, 0x2D, 0x32, 0x38, 0x3F,
+	0x00, 0x10, 0x1F, 0x2F, 0x3F, 0x1F, 0x27, 0x2F,
+	0x37, 0x3F, 0x2D, 0x31, 0x36, 0x3A, 0x3F, 0x00,
+	0x07, 0x0E, 0x15, 0x1C, 0x0E, 0x11, 0x15, 0x18,
+	0x1C, 0x14, 0x16, 0x18, 0x1A, 0x1C, 0x00, 0x04,
+	0x08, 0x0C, 0x10, 0x08, 0x0A, 0x0C, 0x0E, 0x10,
+	0x0B, 0x0C, 0x0D, 0x0F, 0x10};
 
 
 /* --------------------------------------------------------------------- */
@@ -358,14 +385,14 @@ void InitTo330Pointer( UCHAR ChipType ,PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGISetModeNew( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo )
+unsigned char XGISetModeNew(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo)
 {
-    USHORT ModeIdIndex ;
+    unsigned short ModeIdIndex ;
         /* PUCHAR pVBInfo-&gt;FBAddr = HwDeviceExtension-&gt;pjVideoMemoryAddress ; */
     VB_DEVICE_INFO VBINF;
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
-    pVBInfo-&gt;BaseAddr = (ULONG)HwDeviceExtension-&gt;pjIOAddress ;
+    pVBInfo-&gt;BaseAddr = (unsigned long)HwDeviceExtension-&gt;pjIOAddress ;
     pVBInfo-&gt;IF_DEF_LVDS = 0 ;
     pVBInfo-&gt;IF_DEF_CH7005 = 0 ;
     pVBInfo-&gt;IF_DEF_LCDA = 1 ;
@@ -581,14 +608,16 @@ BOOLEAN XGISetModeNew( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT1Group( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRT1Group(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		      unsigned short ModeNo,
+		      unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT StandTableIndex ,
+    unsigned short StandTableIndex ,
            RefreshRateTableIndex ,
            b3CC ,
            temp ;
 
-    USHORT XGINew_P3cc =  pVBInfo-&gt;P3cc;
+    unsigned short XGINew_P3cc =  pVBInfo-&gt;P3cc;
 
     /* XGINew_CRT1Mode = ModeNo ; // SaveModeID */
     StandTableIndex = XGI_GetModePtr( ModeNo , ModeIdIndex, pVBInfo ) ;
@@ -701,7 +730,8 @@ void XGI_SetCRT1Group( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo , U
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGI_GetModePtr( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+UCHAR XGI_GetModePtr(unsigned short ModeNo, unsigned short ModeIdIndex,
+		     PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR index ;
 
@@ -724,7 +754,7 @@ UCHAR XGI_GetModePtr( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInf
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-/*UCHAR XGI_SetBIOSData( USHORT ModeNo , USHORT ModeIdIndex )
+/*UCHAR XGI_SetBIOSData(unsigned short ModeNo , unsigned short ModeIdIndex )
 {
     return( 0 ) ;
 }
@@ -736,7 +766,7 @@ UCHAR XGI_GetModePtr( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInf
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-/*UCHAR XGI_ClearBankRegs( USHORT ModeNo , USHORT ModeIdIndex )
+/*UCHAR XGI_ClearBankRegs(unsigned short ModeNo , unsigned short ModeIdIndex )
 {
     return( 0 ) ;
 }
@@ -748,12 +778,13 @@ UCHAR XGI_GetModePtr( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInf
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetSeqRegs(  USHORT ModeNo , USHORT StandTableIndex , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetSeqRegs(unsigned short ModeNo, unsigned short StandTableIndex,
+		    unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR tempah ,
           SRdata ;
 
-    USHORT i ,
+    unsigned short i ,
            modeflag ;
 
     if ( ModeNo &lt;= 0x13 )
@@ -795,7 +826,7 @@ void XGI_SetSeqRegs(  USHORT ModeNo , USHORT StandTableIndex , USHORT ModeIdInde
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetMiscRegs( USHORT StandTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetMiscRegs(unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo )
 {
     UCHAR Miscdata ;
 
@@ -820,10 +851,11 @@ void XGI_SetMiscRegs( USHORT StandTableIndex, PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRTCRegs( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT StandTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRTCRegs(PXGI_HW_DEVICE_INFO HwDeviceExtension ,
+		     unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR CRTCdata ;
-    USHORT i ;
+    unsigned short i ;
 
     CRTCdata = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x11 ) ;
     CRTCdata &amp;= 0x7f ;
@@ -855,11 +887,11 @@ void XGI_SetCRTCRegs( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT StandTableI
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetATTRegs( USHORT ModeNo , USHORT StandTableIndex , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetATTRegs(unsigned short ModeNo, unsigned short StandTableIndex,
+		    unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR ARdata ;
-    USHORT i ,
-           modeflag ;
+    unsigned short i, modeflag;
 
     if ( ModeNo &lt;= 0x13 )
         modeflag = pVBInfo-&gt;SModeIDTable[ ModeIdIndex ].St_ModeFlag ;
@@ -905,10 +937,10 @@ void XGI_SetATTRegs( USHORT ModeNo , USHORT StandTableIndex , USHORT ModeIdIndex
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetGRCRegs( USHORT StandTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetGRCRegs(unsigned short StandTableIndex, PVB_DEVICE_INFO pVBInfo )
 {
     UCHAR GRdata ;
-    USHORT i ;
+    unsigned short i ;
 
     for( i = 0 ; i &lt;= 0x08 ; i++ )
     {
@@ -933,7 +965,7 @@ void XGI_SetGRCRegs( USHORT StandTableIndex, PVB_DEVICE_INFO pVBInfo )
 /* --------------------------------------------------------------------- */
 void XGI_ClearExt1Regs(PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT i ;
+    unsigned short i ;
 
     for( i = 0x0A ; i &lt;= 0x0E ; i++ )
         XGINew_SetReg1( pVBInfo-&gt;P3c4 , i , 0x00 ) ;	/* Clear SR0A-SR0E */
@@ -968,13 +1000,15 @@ UCHAR XGI_SetDefaultVCLK( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT XGI_GetRatePtrCRT2( PXGI_HW_DEVICE_INFO pXGIHWDE, USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+unsigned short XGI_GetRatePtrCRT2(PXGI_HW_DEVICE_INFO pXGIHWDE,
+				  unsigned short ModeNo,
+				  unsigned short ModeIdIndex,
+				  PVB_DEVICE_INFO pVBInfo)
 {
     SHORT  LCDRefreshIndex[] = { 0x00 , 0x00 , 0x03 , 0x01 } ,
            LCDARefreshIndex[] = { 0x00 , 0x00 , 0x03 , 0x01 , 0x01 , 0x01 , 0x01 } ;
 
-    USHORT RefreshRateTableIndex , i ,
-         modeflag , index , temp ;
+    unsigned short RefreshRateTableIndex, i, modeflag, index, temp;
 
     if ( ModeNo &lt;= 0x13 )
     {
@@ -1105,13 +1139,11 @@ USHORT XGI_GetRatePtrCRT2( PXGI_HW_DEVICE_INFO pXGIHWDE, USHORT ModeNo , USHORT
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_AjustCRT2Rate( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex , USHORT *i, PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_AjustCRT2Rate(unsigned short ModeNo, unsigned short ModeIdIndex,
+			  unsigned short RefreshRateTableIndex,
+			  unsigned short *i, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempax ,
-           tempbx ,
-           resinfo ,
-           modeflag ,
-           infoflag ;
+    unsigned short tempax, tempbx, resinfo, modeflag, infoflag;
 
     if ( ModeNo &lt;= 0x13 )
     {
@@ -1281,9 +1313,9 @@ BOOLEAN XGI_AjustCRT2Rate( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRa
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetSync(USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetSync(unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT sync ,
+    unsigned short sync ,
            temp ;
 
     sync = pVBInfo-&gt;RefIndex[ RefreshRateTableIndex ].Ext_InfoFlag &gt;&gt; 8 ;	/* di+0x00 */
@@ -1300,12 +1332,15 @@ void XGI_SetSync(USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT1CRTC( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo, PXGI_HW_DEVICE_INFO HwDeviceExtension )
+void XGI_SetCRT1CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
+		     unsigned short RefreshRateTableIndex,
+		     PVB_DEVICE_INFO pVBInfo,
+		     PXGI_HW_DEVICE_INFO HwDeviceExtension)
 {
     UCHAR  index ,
            data ;
 
-    USHORT i ;
+    unsigned short i;
 
     index = pVBInfo-&gt;RefIndex[ RefreshRateTableIndex ].Ext_CRT1CRTC ;	/* Get index */
     index = index&amp;IndexMask ;
@@ -1341,7 +1376,7 @@ void XGI_SetCRT1CRTC( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
 void XGI_SetCRT1Timing_H( PVB_DEVICE_INFO pVBInfo, PXGI_HW_DEVICE_INFO HwDeviceExtension )
 {
     UCHAR data , data1, pushax;
-    USHORT i , j ;
+    unsigned short i, j;
 
     /* XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x51 , 0 ) ; */
     /* XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x56 , 0 ) ; */
@@ -1357,13 +1392,13 @@ void XGI_SetCRT1Timing_H( PVB_DEVICE_INFO pVBInfo, PXGI_HW_DEVICE_INFO HwDeviceE
     for( i = 0x01 ; i &lt;= 0x04 ; i++ )
     {
         data = pVBInfo-&gt;TimingH[ 0 ].data[ i ] ;
-        XGINew_SetReg1( pVBInfo-&gt;P3d4 , ( USHORT )( i + 1 ) , data ) ;
+	XGINew_SetReg1( pVBInfo-&gt;P3d4, (unsigned short)(i + 1), data);
     }
 
     for( i = 0x05 ; i &lt;= 0x06 ; i++ )
     {
         data = pVBInfo-&gt;TimingH[ 0 ].data[ i ];
-        XGINew_SetReg1( pVBInfo-&gt;P3c4 ,( USHORT )( i + 6 ) , data ) ;
+	XGINew_SetReg1(pVBInfo-&gt;P3c4, (unsigned short)(i + 6), data);
     }
 
     j = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x0e ) ;
@@ -1410,10 +1445,12 @@ void XGI_SetCRT1Timing_H( PVB_DEVICE_INFO pVBInfo, PXGI_HW_DEVICE_INFO HwDeviceE
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT1Timing_V( USHORT ModeIdIndex , USHORT ModeNo,PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRT1Timing_V(unsigned short ModeIdIndex,
+			 unsigned short ModeNo,
+			 PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR data ;
-    USHORT i , j ;
+    unsigned short i, j;
 
     /* XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x51 , 0 ) ; */
     /* XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x56 , 0 ) ; */
@@ -1422,19 +1459,19 @@ void XGI_SetCRT1Timing_V( USHORT ModeIdIndex , USHORT ModeNo,PVB_DEVICE_INFO pVB
     for( i = 0x00 ; i &lt;= 0x01 ; i++ )
     {
         data = pVBInfo-&gt;TimingV[ 0 ].data[ i ] ;
-        XGINew_SetReg1( pVBInfo-&gt;P3d4 , ( USHORT )( i + 6 ) , data ) ;
+	XGINew_SetReg1(pVBInfo-&gt;P3d4, (unsigned short)(i + 6), data);
     }
 
     for( i = 0x02 ; i &lt;= 0x03 ; i++ )
     {
         data = pVBInfo-&gt;TimingV[ 0 ].data[ i ] ;
-        XGINew_SetReg1( pVBInfo-&gt;P3d4 , ( USHORT )( i + 0x0e ) , data ) ;
+	XGINew_SetReg1(pVBInfo-&gt;P3d4, (unsigned short)(i + 0x0e), data);
     }
 
     for( i = 0x04 ; i &lt;= 0x05 ; i++ )
     {
         data = pVBInfo-&gt;TimingV[ 0 ].data[ i ] ;
-        XGINew_SetReg1( pVBInfo-&gt;P3d4 , ( USHORT )( i + 0x11 ) , data ) ;
+	XGINew_SetReg1(pVBInfo-&gt;P3d4, (unsigned short)(i + 0x11), data);
     }
 
     j = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x0a ) ;
@@ -1470,10 +1507,12 @@ void XGI_SetCRT1Timing_V( USHORT ModeIdIndex , USHORT ModeNo,PVB_DEVICE_INFO pVB
 /* Output : Fill CRT Hsync/Vsync to SR2E/SR2F/SR30/SR33/SR34/SR3F */
 /* Description : Set LCD timing */
 /* --------------------------------------------------------------------- */
-void XGI_SetXG21CRTC(USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo)
+void XGI_SetXG21CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
+		     unsigned short RefreshRateTableIndex,
+		     PVB_DEVICE_INFO pVBInfo)
 {
   UCHAR StandTableIndex, index, Tempax, Tempbx, Tempcx, Tempdx ;
-  USHORT Temp1, Temp2, Temp3 ;
+  unsigned short Temp1, Temp2, Temp3;
 
   if ( ModeNo &lt;= 0x13 )
   {
@@ -1502,7 +1541,7 @@ void XGI_SetXG21CRTC(USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableI
     Tempdx |= Tempcx ;							/* Tempdx: VRS[8:1] */
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x34 , Tempdx ) ;    		/* SR34[7:0]: VRS[8:1] */
 
-    Temp1 = Tempcx &lt;&lt; 1 ;						/* Temp1[8]: VRS[8] UCHAR -&gt; USHORT */
+    Temp1 = Tempcx &lt;&lt; 1 ;						/* Temp1[8]: VRS[8] UCHAR -&gt; unsigned short */
     Temp1 |= Tempbx ;							/* Temp1[8:0]: VRS[8:0] */
     Tempax &amp;= 0x80 ;							/* Tempax[7]: CR7[7] */
     Temp2 = Tempax &lt;&lt; 2 ;						/* Temp2[9]: VRS[9] */
@@ -1609,9 +1648,11 @@ void XGI_SetXG21CRTC(USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableI
   }
 }
 
-void XGI_SetXG27CRTC(USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo)
+void XGI_SetXG27CRTC(unsigned short ModeNo, unsigned short ModeIdIndex,
+		     unsigned short RefreshRateTableIndex,
+		     PVB_DEVICE_INFO pVBInfo)
 {
-  USHORT StandTableIndex, index, Tempax, Tempbx, Tempcx, Tempdx ;
+	unsigned short StandTableIndex, index, Tempax, Tempbx, Tempcx, Tempdx;
 
   if ( ModeNo &lt;= 0x13 )
   {
@@ -1732,10 +1773,12 @@ void XGI_SetXG27CRTC(USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableI
 /* Output : FCLK duty cycle, FCLK delay compensation */
 /* Description : All values set zero */
 /* --------------------------------------------------------------------- */
-void XGI_SetXG21LCD(PVB_DEVICE_INFO pVBInfo,USHORT RefreshRateTableIndex,USHORT ModeNo)
+void XGI_SetXG21LCD(PVB_DEVICE_INFO pVBInfo,
+		    unsigned short RefreshRateTableIndex,
+		    unsigned short ModeNo)
 {
-  USHORT Data , Temp , b3CC ;
-  USHORT XGI_P3cc ;
+	unsigned short Data, Temp, b3CC;
+	unsigned short XGI_P3cc;
 
   XGI_P3cc = pVBInfo-&gt;P3cc ;
 
@@ -1782,10 +1825,12 @@ void XGI_SetXG21LCD(PVB_DEVICE_INFO pVBInfo,USHORT RefreshRateTableIndex,USHORT
   }
 }
 
-void XGI_SetXG27LCD(PVB_DEVICE_INFO pVBInfo,USHORT RefreshRateTableIndex,USHORT ModeNo)
+void XGI_SetXG27LCD(PVB_DEVICE_INFO pVBInfo,
+		    unsigned short RefreshRateTableIndex,
+		    unsigned short ModeNo)
 {
-  USHORT Data , Temp , b3CC ;
-  USHORT XGI_P3cc ;
+  unsigned short Data , Temp , b3CC ;
+  unsigned short XGI_P3cc ;
 
   XGI_P3cc = pVBInfo-&gt;P3cc ;
 
@@ -1840,7 +1885,9 @@ void XGI_SetXG27LCD(PVB_DEVICE_INFO pVBInfo,USHORT RefreshRateTableIndex,USHORT
 /* Output : CRT1 CRTC */
 /* Description : Modify CRT1 Hsync/Vsync to fix LCD mode timing */
 /* --------------------------------------------------------------------- */
-void XGI_UpdateXG21CRTC( USHORT ModeNo , PVB_DEVICE_INFO pVBInfo , USHORT RefreshRateTableIndex )
+void XGI_UpdateXG21CRTC(unsigned short ModeNo,
+			PVB_DEVICE_INFO pVBInfo,
+			unsigned short RefreshRateTableIndex)
 {
   int i , index = -1;
 
@@ -1883,14 +1930,13 @@ void XGI_UpdateXG21CRTC( USHORT ModeNo , PVB_DEVICE_INFO pVBInfo , USHORT Refres
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT1DE( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo,USHORT ModeIdIndex , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRT1DE(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		   unsigned short ModeNo,
+		   unsigned short ModeIdIndex,
+		   unsigned short RefreshRateTableIndex,
+		   PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT resindex ,
-           tempax ,
-           tempbx ,
-           tempcx ,
-           temp ,
-           modeflag ;
+	unsigned short resindex, tempax, tempbx, tempcx, temp, modeflag;
 
     UCHAR data ;
 
@@ -1939,9 +1985,9 @@ void XGI_SetCRT1DE( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo,USHORT
     data = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x11 ) ;
     data &amp;= 0x7F ;
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x11 , data ) ;		/* Unlock CRTC */
-    XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x01 , ( USHORT )( tempcx &amp; 0xff ) ) ;
-    XGINew_SetRegANDOR( pVBInfo-&gt;P3d4 , 0x0b , ~0x0c , ( USHORT )( ( tempcx &amp; 0x0ff00 ) &gt;&gt; 10 ) ) ;
-    XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x12 , ( USHORT )( tempbx &amp; 0xff ) ) ;
+    XGINew_SetReg1(pVBInfo-&gt;P3d4, 0x01, (unsigned short)(tempcx &amp; 0xff));
+    XGINew_SetRegANDOR(pVBInfo-&gt;P3d4, 0x0b, ~0x0c, (unsigned short)((tempcx &amp; 0x0ff00) &gt;&gt; 10));
+    XGINew_SetReg1(pVBInfo-&gt;P3d4, 0x12, (unsigned short)(tempbx &amp; 0xff));
     tempax = 0 ;
     tempbx = tempbx &gt;&gt; 8 ;
 
@@ -1970,9 +2016,11 @@ void XGI_SetCRT1DE( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo,USHORT
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT 	XGI_GetResInfo(USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+unsigned short XGI_GetResInfo(unsigned short ModeNo,
+			      unsigned short ModeIdIndex,
+			      PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT resindex ;
+	unsigned short resindex;
 
     if ( ModeNo &lt;= 0x13 )
     {
@@ -1992,9 +2040,13 @@ USHORT 	XGI_GetResInfo(USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBIn
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT1Offset(  USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRT1Offset(unsigned short ModeNo,
+		       unsigned short ModeIdIndex,
+		       unsigned short RefreshRateTableIndex,
+		       PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		       PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT temp ,
+    unsigned short temp ,
            ah ,
            al ,
            temp2 ,
@@ -2085,11 +2137,13 @@ void XGI_SetCRT1Offset(  USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRate
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT1VCLK( USHORT ModeNo , USHORT ModeIdIndex ,
-                        PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRT1VCLK(unsigned short ModeNo, unsigned short ModeIdIndex,
+		     PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		     unsigned short RefreshRateTableIndex,
+		     PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR index , data ;
-    USHORT vclkindex ;
+    unsigned short vclkindex ;
 
     if ( pVBInfo-&gt;IF_DEF_LVDS == 1 )
     {
@@ -2146,9 +2200,11 @@ void XGI_SetCRT1VCLK( USHORT ModeNo , USHORT ModeIdIndex ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT1FIFO( USHORT ModeNo , PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRT1FIFO(unsigned short ModeNo,
+		     PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		     PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data ;
+    unsigned short data ;
 
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x3D ) ;
     data &amp;= 0xfe ;
@@ -2195,10 +2251,12 @@ void XGI_SetCRT1FIFO( USHORT ModeNo , PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT1ModeRegs( PXGI_HW_DEVICE_INFO HwDeviceExtension ,
-                            USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRT1ModeRegs(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			 unsigned short ModeNo, unsigned short ModeIdIndex,
+			 unsigned short RefreshRateTableIndex,
+			 PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data ,
+    unsigned short data ,
            data2 ,
            data3 ,
            infoflag = 0 ,
@@ -2333,9 +2391,12 @@ void XGI_SetCRT1ModeRegs( PXGI_HW_DEVICE_INFO HwDeviceExtension ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetVCLKState(  PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo , USHORT RefreshRateTableIndex,PVB_DEVICE_INFO pVBInfo )
+void XGI_SetVCLKState(PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		      unsigned short ModeNo,
+		      unsigned short RefreshRateTableIndex,
+		      PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data ,
+    unsigned short data ,
            data2 = 0 ;
     SHORT  VCLK ;
 
@@ -2397,9 +2458,9 @@ void XGI_SetVCLKState(  PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-/*void XGI_VesaLowResolution( USHORT ModeNo , USHORT ModeIdIndex ,PVB_DEVICE_INFO pVBInfo)
+/*void XGI_VesaLowResolution(unsigned short ModeNo , unsigned short ModeIdIndex ,PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT modeflag;
+    unsigned short modeflag;
 
     if ( ModeNo &gt; 0x13 )
         modeflag = pVBInfo-&gt;EModeIDTable[ ModeIdIndex ].Ext_ModeFlag ;
@@ -2440,9 +2501,11 @@ void XGI_SetVCLKState(  PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_LoadDAC( USHORT ModeNo , USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo )
+void XGI_LoadDAC(unsigned short ModeNo,
+		 unsigned short ModeIdIndex,
+		 PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data , data2 , time ,
+    unsigned short data , data2 , time ,
            i  , j , k , m , n , o ,
            si , di , bx , dl , al , ah , dh ,
            *table = NULL ;
@@ -2549,9 +2612,11 @@ void XGI_LoadDAC( USHORT ModeNo , USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_WriteDAC( USHORT dl , USHORT ah , USHORT al , USHORT dh,PVB_DEVICE_INFO pVBInfo )
+void XGI_WriteDAC(unsigned short dl, unsigned short ah,
+		  unsigned short al, unsigned short dh,
+		  PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT temp , bh , bl ;
+    unsigned short temp , bh , bl ;
 
     bh = ah ;
     bl = al ;
@@ -2574,9 +2639,9 @@ void XGI_WriteDAC( USHORT dl , USHORT ah , USHORT al , USHORT dh,PVB_DEVICE_INFO
             bh = temp ;
         }
     }
-    XGINew_SetReg3( pVBInfo-&gt;P3c9 , ( USHORT )dh ) ;
-    XGINew_SetReg3( pVBInfo-&gt;P3c9 , ( USHORT )bh ) ;
-    XGINew_SetReg3( pVBInfo-&gt;P3c9 , ( USHORT )bl ) ;
+    XGINew_SetReg3(pVBInfo-&gt;P3c9, (unsigned short)dh);
+    XGINew_SetReg3(pVBInfo-&gt;P3c9, (unsigned short)bh);
+    XGINew_SetReg3(pVBInfo-&gt;P3c9, (unsigned short)bl);
 }
 
 /* --------------------------------------------------------------------- */
@@ -2585,10 +2650,13 @@ void XGI_WriteDAC( USHORT dl , USHORT ah , USHORT al , USHORT dh,PVB_DEVICE_INFO
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetLCDAGroup( USHORT ModeNo , USHORT ModeIdIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO  pVBInfo )
+void XGI_SetLCDAGroup(unsigned short ModeNo,
+		      unsigned short ModeIdIndex,
+		      PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		      PVB_DEVICE_INFO  pVBInfo)
 {
-    USHORT RefreshRateTableIndex ;
-    /* USHORT temp ; */
+    unsigned short RefreshRateTableIndex ;
+    /* unsigned short temp ; */
 
     /* pVBInfo-&gt;SelectCRT2Rate = 0 ; */
 
@@ -2608,9 +2676,11 @@ void XGI_SetLCDAGroup( USHORT ModeNo , USHORT ModeIdIndex , PXGI_HW_DEVICE_INFO
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetLVDSResInfo( USHORT ModeNo , USHORT ModeIdIndex,PVB_DEVICE_INFO  pVBInfo )
+void XGI_GetLVDSResInfo(unsigned short ModeNo,
+			unsigned short ModeIdIndex,
+			PVB_DEVICE_INFO  pVBInfo)
 {
-    USHORT resindex , xres , yres , modeflag ;
+    unsigned short resindex , xres , yres , modeflag ;
 
     if ( ModeNo &lt;= 0x13 )
     {
@@ -2676,9 +2746,12 @@ void XGI_GetLVDSResInfo( USHORT ModeNo , USHORT ModeIdIndex,PVB_DEVICE_INFO  pVB
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetLVDSData(  USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO  pVBInfo )
+void XGI_GetLVDSData(unsigned short ModeNo,
+		     unsigned short ModeIdIndex,
+		     unsigned short RefreshRateTableIndex,
+		     PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbx ;
+    unsigned short tempbx ;
     XGI330_LVDSDataStruct *LCDPtr = NULL ;
     XGI330_CHTVDataStruct  *TVPtr = NULL ;
 
@@ -2739,11 +2812,13 @@ void XGI_GetLVDSData(  USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTa
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_ModCRT1Regs( USHORT ModeNo , USHORT ModeIdIndex ,
-                        USHORT RefreshRateTableIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo )
+void XGI_ModCRT1Regs(unsigned short ModeNo, unsigned short ModeIdIndex,
+		     unsigned short RefreshRateTableIndex,
+		     PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		     PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR index ;
-    USHORT tempbx , i ;
+    unsigned short tempbx , i ;
     XGI_LVDSCRT1HDataStruct  *LCDPtr = NULL ;
     XGI_LVDSCRT1VDataStruct  *LCDPtr1 =NULL ;
     /* XGI330_CHTVDataStruct *TVPtr = NULL ; */
@@ -2839,9 +2914,11 @@ void XGI_ModCRT1Regs( USHORT ModeNo , USHORT ModeIdIndex ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO  pVBInfo )
+void XGI_SetLVDSRegs(unsigned short ModeNo, unsigned short ModeIdIndex,
+		     unsigned short RefreshRateTableIndex,
+		     PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbx , tempax , tempcx , tempdx , push1 , push2 , modeflag ;
+    unsigned short tempbx , tempax , tempcx , tempdx , push1 , push2 , modeflag ;
     unsigned long temp , temp1 , temp2 , temp3 , push3 ;
     XGI330_LCDDataDesStruct  *LCDPtr = NULL ;
     XGI330_LCDDataDesStruct2  *LCDPtr1 = NULL ;
@@ -2929,8 +3006,8 @@ void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
             tempcx = tempcx &gt;&gt; 3 ;
             tempbx = tempbx &gt;&gt; 3 ;
 
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x16 , ( USHORT )( tempbx &amp; 0xff ) ) ;
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x17 , ( USHORT )( tempcx &amp; 0xff ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x16, (unsigned short)(tempbx &amp; 0xff));
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x17, (unsigned short)(tempcx &amp; 0xff));
 
             tempax = pVBInfo-&gt;HT ;
 
@@ -2958,7 +3035,7 @@ void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
             tempax |= tempcx ;
 
             XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x15 , tempax ) ;
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x14 , ( USHORT )( tempbx &amp; 0xff ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x14, (unsigned short)(tempbx &amp; 0xff));
 
             tempax = pVBInfo-&gt;VT ;
             if ( pVBInfo-&gt;LCDInfo &amp; EnableScalingLCD )
@@ -2972,13 +3049,13 @@ void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
             if ( tempcx &gt;= tempax )
                 tempcx -= tempax ;
 
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x1b , ( USHORT )( tempbx &amp; 0xff ) ) ;
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x1c , ( USHORT )( tempcx &amp; 0xff ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x1b, (unsigned short)(tempbx &amp; 0xff));
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x1c, (unsigned short)(tempcx &amp; 0xff));
 
             tempbx = ( tempbx &gt;&gt; 8 ) &amp; 0x07 ;
             tempcx = ( tempcx &gt;&gt; 8 ) &amp; 0x07 ;
 
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x1d , ( USHORT )( ( tempcx &lt;&lt; 3 ) | tempbx ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x1d, (unsigned short)((tempcx &lt;&lt; 3) | tempbx));
 
             tempax = pVBInfo-&gt;VT ;
             if ( pVBInfo-&gt;LCDInfo &amp; EnableScalingLCD )
@@ -2996,8 +3073,8 @@ void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
             if ( tempcx &gt;= tempax )
                 tempcx -= tempax ;
 
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x18 , ( USHORT )( tempbx &amp; 0xff ) ) ;
-            XGINew_SetRegANDOR( pVBInfo-&gt;Part1Port , 0x19 , ~0x0f , ( USHORT )( tempcx &amp; 0x0f ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x18, (unsigned short)(tempbx &amp; 0xff));
+	    XGINew_SetRegANDOR(pVBInfo-&gt;Part1Port, 0x19, ~0x0f, (unsigned short)(tempcx &amp; 0x0f));
 
             tempax = ( ( tempbx &gt;&gt; 8 ) &amp; 0x07 ) &lt;&lt; 3 ;
 
@@ -3018,7 +3095,7 @@ void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
             temp = tempax ;            /* 0430 ylshieh */
             temp1 = ( temp &lt;&lt; 18 ) / tempbx ;
 
-            tempdx = ( USHORT )( ( temp &lt;&lt; 18 ) % tempbx ) ;
+	    tempdx = (unsigned short)((temp &lt;&lt; 18) % tempbx);
 
             if ( tempdx != 0 )
             temp1 += 1 ;
@@ -3026,10 +3103,10 @@ void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
             temp2 = temp1 ;
             push3 = temp2 ;
 
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x37 , ( USHORT )( temp2 &amp; 0xff ) ) ;
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x36 , ( USHORT )( ( temp2 &gt;&gt; 8 ) &amp; 0xff ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x37, (unsigned short)(temp2 &amp; 0xff));
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x36, (unsigned short)((temp2 &gt;&gt; 8) &amp; 0xff));
 
-            tempbx = ( USHORT )( temp2 &gt;&gt; 16 ) ;
+	    tempbx = (unsigned short)(temp2 &gt;&gt; 16);
             tempax = tempbx &amp; 0x03 ;
 
             tempbx = pVBInfo-&gt;VGAVDE ;
@@ -3041,10 +3118,10 @@ void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
             if ( pVBInfo-&gt;VBType &amp; VB_XGI301C )
             {
                 temp2 = push3 ;
-      	        XGINew_SetReg1( pVBInfo-&gt;Part4Port , 0x3c , ( USHORT )( temp2 &amp; 0xff ) ) ;
-      	        XGINew_SetReg1( pVBInfo-&gt;Part4Port , 0x3b , ( USHORT )( ( temp2 &gt;&gt; 8 ) &amp; 0xff ) ) ;
-      	        tempbx = ( USHORT )( temp2 &gt;&gt; 16 ) ;
-      	        XGINew_SetRegANDOR( pVBInfo-&gt;Part4Port , 0x3a , ~0xc0 , ( USHORT )( ( tempbx &amp; 0xff ) &lt;&lt; 6 ) ) ;
+		XGINew_SetReg1(pVBInfo-&gt;Part4Port, 0x3c, (unsigned short)(temp2 &amp; 0xff));
+		XGINew_SetReg1(pVBInfo-&gt;Part4Port, 0x3b, (unsigned short)((temp2 &gt;&gt; 8) &amp; 0xff));
+		tempbx = (unsigned short)(temp2 &gt;&gt; 16);
+		XGINew_SetRegANDOR(pVBInfo-&gt;Part4Port, 0x3a, ~0xc0, (unsigned short)((tempbx &amp; 0xff) &lt;&lt; 6));
 
                 tempcx = pVBInfo-&gt;VGAVDE ;
                 if ( tempcx == pVBInfo-&gt;VDE )
@@ -3058,7 +3135,7 @@ void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
 
             temp1 = tempcx &lt;&lt; 16 ;
 
-            tempax = ( USHORT )( temp1 / tempbx ) ;
+	    tempax = (unsigned short)(temp1 / tempbx);
 
             if ( ( tempbx &amp; 0xffff ) == ( tempcx &amp; 0xffff ) )
                 tempax = 65535 ;
@@ -3072,28 +3149,28 @@ void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
 
             temp3 = ( temp3 &amp; 0xffff0000 ) + ( temp1 &amp; 0xffff ) ;
 
-            tempax = ( USHORT )( temp3 &amp; 0xff ) ;
+	    tempax = (unsigned short)(temp3 &amp; 0xff);
             XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x1f , tempax ) ;
 
             temp1 = pVBInfo-&gt;VGAVDE &lt;&lt; 18 ;
             temp1 = temp1 / push3 ;
-            tempbx = ( USHORT )( temp1 &amp; 0xffff ) ;
+	    tempbx = (unsigned short)(temp1 &amp; 0xffff);
 
             if ( pVBInfo-&gt;LCDResInfo == Panel1024x768 )
                 tempbx -= 1 ;
 
             tempax = ( ( tempbx &gt;&gt; 8 ) &amp; 0xff ) &lt;&lt; 3 ;
-            tempax |= ( USHORT )( ( temp3 &gt;&gt; 8 ) &amp; 0x07 ) ;
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x20 , ( USHORT )( tempax &amp; 0xff ) ) ;
-            XGINew_SetReg1( pVBInfo-&gt;Part1Port , 0x21 , ( USHORT )( tempbx &amp; 0xff ) ) ;
+	    tempax |= (unsigned short)((temp3 &gt;&gt; 8) &amp; 0x07);
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x20, (unsigned short)(tempax &amp; 0xff));
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port, 0x21, (unsigned short)(tempbx &amp; 0xff));
 
             temp3 = temp3 &gt;&gt; 16 ;
 
             if ( modeflag &amp; HalfDCLK )
                 temp3 = temp3 &gt;&gt; 1 ;
 
-            XGINew_SetReg1(pVBInfo-&gt;Part1Port , 0x22 , ( USHORT )( ( temp3 &gt;&gt; 8 ) &amp; 0xff ) ) ;
-            XGINew_SetReg1(pVBInfo-&gt;Part1Port , 0x23 , ( USHORT )( temp3 &amp; 0xff ) ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port , 0x22, (unsigned short)((temp3 &gt;&gt; 8) &amp; 0xff));
+	    XGINew_SetReg1(pVBInfo-&gt;Part1Port , 0x23, (unsigned short)(temp3 &amp; 0xff));
         }
     }
 }
@@ -3105,7 +3182,7 @@ void XGI_SetLVDSRegs( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT2ECLK( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO  pVBInfo )
+void XGI_SetCRT2ECLK(unsigned short ModeNo , unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO  pVBInfo )
 {
     UCHAR di_0 , di_1 , tempal ;
     int i ;
@@ -3116,7 +3193,7 @@ void XGI_SetCRT2ECLK( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
 
     for( i = 0 ; i &lt; 4 ; i++ )
     {
-        XGINew_SetRegANDOR( pVBInfo-&gt;P3d4 , 0x31 , ~0x30 , ( USHORT )( 0x10 * i ) ) ;
+	XGINew_SetRegANDOR(pVBInfo-&gt;P3d4, 0x31, ~0x30, (unsigned short)(0x10 * i));
         if ( pVBInfo-&gt;IF_DEF_CH7007 == 1 )
         {
             XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x2b , di_0 ) ;
@@ -3144,7 +3221,7 @@ void XGI_SetCRT2ECLK( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
 /* --------------------------------------------------------------------- */
 void XGI_UpdateModeInfo( PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO  pVBInfo )
 {
-    USHORT tempcl ,
+    unsigned short tempcl ,
            tempch ,
            temp ,
            tempbl ,
@@ -3274,7 +3351,7 @@ void XGI_GetVGAType( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO  pVB
 /* --------------------------------------------------------------------- */
 void XGI_GetVBType(PVB_DEVICE_INFO  pVBInfo)
 {
-    USHORT flag , tempbx , tempah ;
+    unsigned short flag , tempbx , tempah ;
 
     if ( pVBInfo-&gt;IF_DEF_CH7007 == 1 )
     {
@@ -3335,9 +3412,9 @@ void XGI_GetVBType(PVB_DEVICE_INFO  pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetVBInfo( USHORT ModeNo , USHORT ModeIdIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO  pVBInfo )
+void XGI_GetVBInfo(unsigned short ModeNo , unsigned short ModeIdIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO  pVBInfo )
 {
-    USHORT tempax ,
+    unsigned short tempax ,
            push ,
            tempbx ,
            temp ,
@@ -3576,9 +3653,9 @@ void XGI_GetVBInfo( USHORT ModeNo , USHORT ModeIdIndex , PXGI_HW_DEVICE_INFO HwD
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetTVInfo( USHORT ModeNo , USHORT ModeIdIndex ,PVB_DEVICE_INFO  pVBInfo )
+void XGI_GetTVInfo(unsigned short ModeNo , unsigned short ModeIdIndex ,PVB_DEVICE_INFO  pVBInfo )
 {
-    USHORT temp ,
+    unsigned short temp ,
            tempbx = 0 ,
            resinfo = 0 ,
            modeflag ,
@@ -3711,9 +3788,9 @@ void XGI_GetTVInfo( USHORT ModeNo , USHORT ModeIdIndex ,PVB_DEVICE_INFO  pVBInfo
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_GetLCDInfo( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
+unsigned char XGI_GetLCDInfo(unsigned short ModeNo , unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT temp ,
+    unsigned short temp ,
            tempax ,
            tempbx ,
            modeflag ,
@@ -3920,7 +3997,7 @@ BOOLEAN XGI_GetLCDInfo( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBI
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_SearchModeID( USHORT ModeNo , USHORT *ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_SearchModeID(unsigned short ModeNo , unsigned short *ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
 {
 
 
@@ -3975,9 +4052,9 @@ BOOLEAN XGI_SearchModeID( USHORT ModeNo , USHORT *ModeIdIndex, PVB_DEVICE_INFO p
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo)
+unsigned char XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo, unsigned short ModeIdIndex,PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT memorysize ,
+    unsigned short memorysize ,
            modeflag ,
            temp ,
            temp1 ,
@@ -4057,10 +4134,10 @@ BOOLEAN XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT Mode
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-/*void XGINew_IsLowResolution( USHORT ModeNo , USHORT ModeIdIndex, BOOLEAN XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO pVBInfo)
+/*void XGINew_IsLowResolution(unsigned short ModeNo , unsigned short ModeIdIndex, unsigned char XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short ModeNo, unsigned short ModeIdIndex,PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT data ;
-    USHORT ModeFlag ;
+    unsigned short data ;
+    unsigned short ModeFlag ;
 
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x0F ) ;
     data &amp;= 0x7F ;
@@ -4226,7 +4303,7 @@ void XGI_SenseCRT1( PVB_DEVICE_INFO pVBInfo )
     UCHAR SR01 = 0 , SR1F = 0 , SR07 = 0 , SR06 = 0 ;
 
     UCHAR CR17 , CR63 , SR31 ;
-    USHORT temp ;
+    unsigned short temp ;
     UCHAR DAC_TEST_PARMS[ 3 ] = { 0x0F , 0x0F , 0x0F } ;
 
     int i ;
@@ -4257,18 +4334,18 @@ void XGI_SenseCRT1( PVB_DEVICE_INFO pVBInfo )
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x11 , 0x00 ) ;
 
     for( i = 0 ; i &lt; 8 ; i++ )
-        XGINew_SetReg1( pVBInfo-&gt;P3d4 , ( USHORT )i , CRTCData[ i ] ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;P3d4, (unsigned short)i, CRTCData[i]);
 
     for( i = 8 ; i &lt; 11 ; i++ )
-        XGINew_SetReg1( pVBInfo-&gt;P3d4 , ( USHORT )( i + 8 ) , CRTCData[ i ] ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;P3d4, (unsigned short)(i + 8), CRTCData[i]);
 
     for( i = 11 ; i &lt; 13 ; i++ )
-        XGINew_SetReg1( pVBInfo-&gt;P3d4 , ( USHORT )( i + 4 ) , CRTCData[ i ] ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;P3d4, (unsigned short)(i + 4), CRTCData[i]);
 
     for( i = 13 ; i &lt; 16 ; i++ )
-        XGINew_SetReg1( pVBInfo-&gt;P3c4 , ( USHORT )( i - 3 ) , CRTCData[ i ] ) ;
+	    XGINew_SetReg1(pVBInfo-&gt;P3c4, (unsigned short)(i - 3), CRTCData[i]);
 
-    XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x0E , ( UCHAR )( CRTCData[ 16 ] &amp; 0xE0 ) ) ;
+    XGINew_SetReg1(pVBInfo-&gt;P3c4, 0x0E, (UCHAR)(CRTCData[16] &amp; 0xE0));
 
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x31 , 0x00 ) ;
     XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x2B , 0x1B ) ;
@@ -4351,9 +4428,9 @@ void XGI_WaitDisplay( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_SetCRT2Group301( USHORT ModeNo , PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_SetCRT2Group301(unsigned short ModeNo , PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT tempbx ,
+    unsigned short tempbx ,
            ModeIdIndex ,
            RefreshRateTableIndex ;
 
@@ -4399,9 +4476,9 @@ void XGI_AutoThreshold(  PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SaveCRT2Info( USHORT ModeNo , PVB_DEVICE_INFO pVBInfo)
+void XGI_SaveCRT2Info(unsigned short ModeNo , PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT temp1 ,
+    unsigned short temp1 ,
            temp2 ;
 
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x34 , ModeNo ) ;  /* reserve CR34 for CRT1 Mode No */
@@ -4417,9 +4494,11 @@ void XGI_SaveCRT2Info( USHORT ModeNo , PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetCRT2ResInfo( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_GetCRT2ResInfo(unsigned short ModeNo,
+			unsigned short ModeIdIndex,
+			PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT xres ,
+    unsigned short xres ,
            yres ,
            modeflag ,
            resindex ;
@@ -4514,7 +4593,7 @@ void XGI_GetCRT2ResInfo( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVB
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_IsLCDDualLink( PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_IsLCDDualLink( PVB_DEVICE_INFO pVBInfo )
 {
 
     if ( ( ( ( pVBInfo-&gt;VBInfo &amp; SetCRT2ToLCD ) | SetCRT2ToLCDA ) ) &amp;&amp; ( pVBInfo-&gt;LCDInfo &amp; SetLCDDualLink ) ) /* shampoo0129 */
@@ -4530,9 +4609,9 @@ BOOLEAN XGI_IsLCDDualLink( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetCRT2Data(  USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_GetCRT2Data(  unsigned short ModeNo , unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT tempax = 0,
+    unsigned short tempax = 0,
            tempbx ,
            modeflag ,
            resinfo ;
@@ -4756,7 +4835,7 @@ void XGI_GetCRT2Data(  USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTa
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT2VCLK( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRT2VCLK(unsigned short ModeNo , unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
 {
     UCHAR di_0 ,
           di_1 ,
@@ -4795,7 +4874,7 @@ void XGI_SetCRT2VCLK( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTab
 /* --------------------------------------------------------------------- */
 void XGI_GetLCDVCLKPtr( UCHAR* di_0 , UCHAR *di_1, PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT index ;
+    unsigned short index ;
 
     if ( pVBInfo-&gt;VBInfo &amp; ( SetCRT2ToLCD | SetCRT2ToLCDA ) )
     {
@@ -4829,12 +4908,12 @@ void XGI_GetLCDVCLKPtr( UCHAR* di_0 , UCHAR *di_1, PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGI_GetVCLKPtr(USHORT RefreshRateTableIndex,USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
+UCHAR XGI_GetVCLKPtr(unsigned short RefreshRateTableIndex, unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
 
-    USHORT index ,
+    unsigned short index ,
            modeflag ;
-    USHORT tempbx ;
+    unsigned short tempbx ;
     UCHAR tempal ;
     UCHAR *CHTVVCLKPtr = NULL ;
 
@@ -5039,10 +5118,10 @@ void XGI_GetVCLKLen(UCHAR tempal,UCHAR* di_0,UCHAR* di_1, PVB_DEVICE_INFO pVBInf
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT2Offset( USHORT ModeNo ,
-				   USHORT ModeIdIndex , USHORT RefreshRateTableIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetCRT2Offset(unsigned short ModeNo ,
+				   unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT offset ;
+    unsigned short offset ;
     UCHAR temp ;
 
     if ( pVBInfo-&gt;VBInfo &amp; SetInSlaveMode )
@@ -5066,9 +5145,9 @@ void XGI_SetCRT2Offset( USHORT ModeNo ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT XGI_GetOffset(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo)
+unsigned short XGI_GetOffset(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension,PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT temp ,
+    unsigned short temp ,
            colordepth ,
            modeinfo ,
            index ,
@@ -5128,10 +5207,12 @@ void XGI_SetCRT2FIFO( PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_PreSetGroup1(USHORT ModeNo , USHORT ModeIdIndex ,PXGI_HW_DEVICE_INFO HwDeviceExtension,
-                       USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_PreSetGroup1(unsigned short ModeNo, unsigned short ModeIdIndex,
+		      PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		      unsigned short RefreshRateTableIndex,
+		      PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempcx = 0 ,
+    unsigned short tempcx = 0 ,
            CRT1Index = 0 ,
            resinfo = 0 ;
 
@@ -5162,10 +5243,12 @@ void XGI_PreSetGroup1(USHORT ModeNo , USHORT ModeIdIndex ,PXGI_HW_DEVICE_INFO Hw
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetGroup1( USHORT ModeNo , USHORT ModeIdIndex ,
-                            PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetGroup1(unsigned short ModeNo, unsigned short ModeIdIndex,
+		   PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		   unsigned short RefreshRateTableIndex,
+		   PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT temp = 0 ,
+    unsigned short temp = 0 ,
            tempax = 0 ,
            tempbx = 0 ,
            tempcx = 0 ,
@@ -5338,10 +5421,12 @@ void XGI_SetGroup1( USHORT ModeNo , USHORT ModeIdIndex ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void  XGI_SetLockRegs( USHORT ModeNo , USHORT ModeIdIndex ,
-                                PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void  XGI_SetLockRegs(unsigned short ModeNo, unsigned short ModeIdIndex,
+		      PXGI_HW_DEVICE_INFO HwDeviceExtension,
+		      unsigned short RefreshRateTableIndex,
+		      PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT push1 ,
+    unsigned short push1 ,
            push2 ,
            tempax ,
            tempbx = 0 ,
@@ -5785,10 +5870,10 @@ void  XGI_SetLockRegs( USHORT ModeNo , USHORT ModeIdIndex ,
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetGroup2( USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIndex,
+void XGI_SetGroup2(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,
                     PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT i ,
+    unsigned short i ,
            j ,
            tempax ,
            tempbx ,
@@ -5801,7 +5886,7 @@ void XGI_SetGroup2( USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIn
            crt2crtc ;
     UCHAR *TimingPoint ;
 
-    ULONG longtemp ,
+    unsigned long longtemp ,
           tempeax ,
           tempebx ,
           temp2 ,
@@ -5910,7 +5995,7 @@ void XGI_SetGroup2( USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIn
         tempax = ( tempax &amp; 0x00FF ) | ( ( tempax &amp; 0x00FF ) &lt;&lt; 8 ) ;
         push1 = tempax ;
         temp = ( tempax &amp; 0xFF00 ) &gt;&gt; 8 ;
-        temp += ( USHORT )TimingPoint[ 0 ] ;
+	temp += (unsigned short)TimingPoint[0];
 
         if ( pVBInfo-&gt;VBType &amp; ( VB_XGI301B | VB_XGI302B | VB_XGI301LV | VB_XGI302LV | VB_XGI301C ) )
         {
@@ -6187,7 +6272,7 @@ void XGI_SetGroup2( USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIn
             tempeax += 1 ;
         }
 
-        tempax = ( USHORT )tempeax ;
+	tempax = (unsigned short)tempeax;
 
 	/* 301b */
         if ( pVBInfo-&gt;VBType &amp; ( VB_XGI301B | VB_XGI302B | VB_XGI301LV | VB_XGI302LV | VB_XGI301C ) )
@@ -6197,8 +6282,8 @@ void XGI_SetGroup2( USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIn
         /* end 301b */
 
         tempbx = push1 ;
-        tempbx =( USHORT )( ( ( tempeax &amp; 0x0000FF00 ) &amp; 0x1F00 ) | ( tempbx &amp; 0x00FF ) ) ;
-        tempax =( USHORT )( ( ( tempeax &amp; 0x000000FF ) &lt;&lt; 8 ) | ( tempax &amp; 0x00FF ) ) ;
+	tempbx = (unsigned short)(((tempeax &amp; 0x0000FF00) &amp; 0x1F00) | (tempbx &amp; 0x00FF));
+	tempax = (unsigned short)(((tempeax &amp; 0x000000FF) &lt;&lt; 8) | (tempax &amp; 0x00FF));
         temp = ( tempax &amp; 0xFF00 ) &gt;&gt; 8 ;
     }
     else
@@ -6251,7 +6336,7 @@ void XGI_SetGroup2( USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIn
 
     XGINew_SetReg1( pVBInfo-&gt;Part2Port , 0x4d , temp ) ;
     temp=XGINew_GetReg1( pVBInfo-&gt;Part2Port , 0x43 ) ;		/* 301b change */
-    XGINew_SetReg1( pVBInfo-&gt;Part2Port , 0x43 , ( USHORT )( temp - 3 ) ) ;
+    XGINew_SetReg1( pVBInfo-&gt;Part2Port , 0x43, (unsigned short)( temp - 3 ) ) ;
 
     if ( !( pVBInfo-&gt;TVInfo &amp; ( SetYPbPrMode525p | SetYPbPrMode750p ) ) )
     {
@@ -6304,9 +6389,9 @@ void XGI_SetGroup2( USHORT ModeNo, USHORT ModeIdIndex, USHORT RefreshRateTableIn
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void  XGI_SetLCDRegs(USHORT ModeNo,USHORT ModeIdIndex, PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo)
+void  XGI_SetLCDRegs(unsigned short ModeNo, unsigned short ModeIdIndex, PXGI_HW_DEVICE_INFO HwDeviceExtension, unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT push1 ,
+    unsigned short push1 ,
            push2 ,
            pushbx ,
            tempax ,
@@ -6558,9 +6643,10 @@ void  XGI_SetLCDRegs(USHORT ModeNo,USHORT ModeIdIndex, PXGI_HW_DEVICE_INFO HwDev
 /* Output : di -&gt; Tap4 Reg. Setting Pointer */
 /* Description : */
 /* --------------------------------------------------------------------- */
-XGI301C_Tap4TimingStruct* XGI_GetTap4Ptr(USHORT tempcx, PVB_DEVICE_INFO pVBInfo)
+XGI301C_Tap4TimingStruct *XGI_GetTap4Ptr(unsigned short tempcx,
+					 PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempax ,
+    unsigned short tempax ,
            tempbx ,
            i ;
 
@@ -6620,7 +6706,7 @@ XGI301C_Tap4TimingStruct* XGI_GetTap4Ptr(USHORT tempcx, PVB_DEVICE_INFO pVBInfo)
 /* --------------------------------------------------------------------- */
 void XGI_SetTap4Regs( PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT i ,
+    unsigned short i ,
            j ;
 
     XGI301C_Tap4TimingStruct *Tap4TimingPtr ;
@@ -6656,11 +6742,11 @@ void XGI_SetTap4Regs( PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetGroup3(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
+void XGI_SetGroup3(unsigned short ModeNo, unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT i;
+    unsigned short i;
     UCHAR *tempdi;
-    USHORT  modeflag;
+    unsigned short  modeflag;
 
     if(ModeNo&lt;=0x13)
     {
@@ -6743,16 +6829,16 @@ void XGI_SetGroup3(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetGroup4(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
+void XGI_SetGroup4(unsigned short ModeNo, unsigned short ModeIdIndex, unsigned short RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempax ,
+    unsigned short tempax ,
            tempcx ,
            tempbx ,
            modeflag ,
            temp ,
            temp2 ;
 
-    ULONG tempebx ,
+    unsigned long tempebx ,
           tempeax ,
           templong ;
 
@@ -6874,12 +6960,12 @@ void XGI_SetGroup4(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex
     }
 
 
-    temp = ( USHORT )( tempebx &amp; 0x000000FF ) ;
+    temp = (unsigned short)(tempebx &amp; 0x000000FF);
     XGINew_SetReg1( pVBInfo-&gt;Part4Port , 0x1B , temp ) ;
 
-    temp = ( USHORT )( ( tempebx &amp; 0x0000FF00 ) &gt;&gt; 8 ) ;
+    temp = (unsigned short)((tempebx &amp; 0x0000FF00) &gt;&gt; 8);
     XGINew_SetReg1( pVBInfo-&gt;Part4Port , 0x1A , temp ) ;
-    tempbx = ( USHORT )( tempebx &gt;&gt; 16 ) ;
+    tempbx = (unsigned short)(tempebx &gt;&gt; 16);
     temp = tempbx &amp; 0x00FF ;
     temp = temp &lt;&lt; 4 ;
     temp |= ( ( tempcx &amp; 0xFF00 ) &gt;&gt; 8 ) ;
@@ -6994,9 +7080,9 @@ void XGI_SetGroup4(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetGroup5( USHORT ModeNo , USHORT ModeIdIndex , PVB_DEVICE_INFO pVBInfo)
+void XGI_SetGroup5(unsigned short ModeNo , unsigned short ModeIdIndex , PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT Pindex ,
+    unsigned short Pindex ,
            Pdata ;
 
     Pindex = pVBInfo-&gt;Part5Port ;
@@ -7019,9 +7105,13 @@ void XGI_SetGroup5( USHORT ModeNo , USHORT ModeIdIndex , PVB_DEVICE_INFO pVBInfo
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void* XGI_GetLcdPtr( USHORT BX , USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void *XGI_GetLcdPtr(unsigned short BX,
+		    unsigned short ModeNo,
+		    unsigned short ModeIdIndex,
+		    unsigned short RefreshRateTableIndex,
+		    PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT i ,
+    unsigned short i ,
            tempdx ,
            tempcx ,
            tempbx ,
@@ -7521,9 +7611,12 @@ void* XGI_GetLcdPtr( USHORT BX , USHORT ModeNo , USHORT ModeIdIndex , USHORT Ref
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void* XGI_GetTVPtr (USHORT BX,USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void *XGI_GetTVPtr(unsigned short BX, unsigned short ModeNo,
+		   unsigned short ModeIdIndex,
+		   unsigned short RefreshRateTableIndex,
+		   PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT i , tempdx , tempbx , tempal , modeflag , table ;
+    unsigned short i , tempdx , tempbx , tempal , modeflag , table ;
     XGI330_TVDataTablStruct *tempdi = 0 ;
 
     tempbx = BX ;
@@ -7686,7 +7779,7 @@ void* XGI_GetTVPtr (USHORT BX,USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRat
 /* Output : 1 -&gt; Skip backlight control */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_BacklightByDrv( PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_BacklightByDrv(PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR tempah ;
 
@@ -7758,9 +7851,9 @@ void XGI_DisableGatingCRT(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
 /* : bl : 3 ; T3 : the duration between CPL off and signal off */
 /* : bl : 4 ; T4 : the duration signal off and Vdd off */
 /* --------------------------------------------------------------------- */
-void XGI_SetPanelDelay(USHORT tempbl, PVB_DEVICE_INFO pVBInfo)
+void XGI_SetPanelDelay(unsigned short tempbl, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT index ;
+    unsigned short index ;
 
     index = XGI_GetLCDCapPtr(pVBInfo) ;
 
@@ -7788,7 +7881,7 @@ void XGI_SetPanelDelay(USHORT tempbl, PVB_DEVICE_INFO pVBInfo)
 /* = 1011b = 0Bh ; Backlight off, Power on */
 /* = 1111b = 0Fh ; Backlight off, Power off */
 /* --------------------------------------------------------------------- */
-void XGI_SetPanelPower(USHORT tempah,USHORT tempbl, PVB_DEVICE_INFO pVBInfo)
+void XGI_SetPanelPower(unsigned short tempah, unsigned short tempbl, PVB_DEVICE_INFO pVBInfo)
 {
     if ( pVBInfo-&gt;VBType &amp; ( VB_XGI301LV | VB_XGI302LV | VB_XGI301C ) )
         XGINew_SetRegANDOR( pVBInfo-&gt;Part4Port , 0x26 , tempbl , tempah ) ;
@@ -7863,7 +7956,7 @@ UCHAR XGI_XG27GetPSCValue(PVB_DEVICE_INFO pVBInfo)
 /*          000010b : clear bit 1, to set bit1                                */
 /*          000001b : clear bit 0, to set bit0                                */
 /*----------------------------------------------------------------------------*/
-void XGI_XG21BLSignalVDD(USHORT tempbh,USHORT tempbl, PVB_DEVICE_INFO pVBInfo)
+void XGI_XG21BLSignalVDD(unsigned short tempbh, unsigned short tempbl, PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR CR4A,temp;
 
@@ -7888,10 +7981,10 @@ void XGI_XG21BLSignalVDD(USHORT tempbh,USHORT tempbl, PVB_DEVICE_INFO pVBInfo)
     XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x48 , temp ) ;
 }
 
-void XGI_XG27BLSignalVDD(USHORT tempbh,USHORT tempbl, PVB_DEVICE_INFO pVBInfo)
+void XGI_XG27BLSignalVDD(unsigned short tempbh, unsigned short tempbl, PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR CR4A,temp;
-    USHORT tempbh0,tempbl0;
+    unsigned short tempbh0, tempbl0;
 
     tempbh0 = tempbh;
     tempbl0 = tempbl;
@@ -7919,9 +8012,9 @@ void XGI_XG27BLSignalVDD(USHORT tempbh,USHORT tempbl, PVB_DEVICE_INFO pVBInfo)
 }
 
 /* --------------------------------------------------------------------- */
-USHORT XGI_GetLVDSOEMTableIndex(PVB_DEVICE_INFO pVBInfo)
+unsigned short XGI_GetLVDSOEMTableIndex(PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT index ;
+    unsigned short index ;
 
     index = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x36 ) ;
     if (index&lt;sizeof(XGI21_LCDCapList)/sizeof(XGI21_LVDSCapStruct))
@@ -7941,9 +8034,9 @@ USHORT XGI_GetLVDSOEMTableIndex(PVB_DEVICE_INFO pVBInfo)
 /* : bl : 3 ; T3 : the duration between CPL off and signal off */
 /* : bl : 4 ; T4 : the duration signal off and Vdd off */
 /* --------------------------------------------------------------------- */
-void XGI_XG21SetPanelDelay(USHORT tempbl, PVB_DEVICE_INFO pVBInfo)
+void XGI_XG21SetPanelDelay(unsigned short tempbl, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT index ;
+    unsigned short index ;
 
     index = XGI_GetLVDSOEMTableIndex( pVBInfo );
     if ( tempbl == 1 )
@@ -7959,9 +8052,11 @@ void XGI_XG21SetPanelDelay(USHORT tempbl, PVB_DEVICE_INFO pVBInfo)
         XGINew_LCD_Wait_Time( pVBInfo-&gt;XG21_LVDSCapList[ index ].PSC_S4, pVBInfo ) ;
 }
 
-BOOLEAN XGI_XG21CheckLVDSMode(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_XG21CheckLVDSMode(unsigned short ModeNo,
+				    unsigned short ModeIdIndex,
+				    PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT xres ,
+    unsigned short xres ,
            yres ,
            colordepth ,
            modeflag ,
@@ -8043,17 +8138,18 @@ void XGI_SetXG27FPBits(PVB_DEVICE_INFO pVBInfo)
 
 }
 
-void XGI_SetXG21LVDSPara(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetXG21LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex,
+			 PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR temp,Miscdata;
-    USHORT xres ,
+    unsigned short xres ,
            yres ,
            modeflag ,
            resindex ,
            lvdstableindex ;
-    USHORT LVDSHT,LVDSHBS,LVDSHRS,LVDSHRE,LVDSHBE;
-    USHORT LVDSVT,LVDSVBS,LVDSVRS,LVDSVRE,LVDSVBE;
-    USHORT value;
+    unsigned short LVDSHT,LVDSHBS,LVDSHRS,LVDSHRE,LVDSHBE;
+    unsigned short LVDSVT,LVDSVBS,LVDSVRS,LVDSVRE,LVDSVBE;
+    unsigned short value;
 
     lvdstableindex = XGI_GetLVDSOEMTableIndex( pVBInfo );
 
@@ -8226,17 +8322,18 @@ void XGI_SetXG21LVDSPara(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBIn
 }
 
 /* no shadow case */
-void XGI_SetXG27LVDSPara(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetXG27LVDSPara(unsigned short ModeNo, unsigned short ModeIdIndex,
+			 PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR temp,Miscdata;
-    USHORT xres ,
+    unsigned short xres ,
            yres ,
            modeflag ,
            resindex ,
            lvdstableindex ;
-    USHORT LVDSHT,LVDSHBS,LVDSHRS,LVDSHRE,LVDSHBE;
-    USHORT LVDSVT,LVDSVBS,LVDSVRS,LVDSVRE,LVDSVBE;
-    USHORT value;
+    unsigned short LVDSHT,LVDSHBS,LVDSHRS,LVDSHRE,LVDSHBE;
+    unsigned short LVDSVT,LVDSVBS,LVDSVRS,LVDSVRE,LVDSVBE;
+    unsigned short value;
 
     lvdstableindex = XGI_GetLVDSOEMTableIndex( pVBInfo );
     temp = (UCHAR) ( ( pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDS_Capability &amp; (LCDPolarity &lt;&lt; 8 ) ) &gt;&gt; 8 );
@@ -8413,9 +8510,9 @@ void XGI_SetXG27LVDSPara(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBIn
 /* 1: Disable PSC */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_IsLCDON(PVB_DEVICE_INFO pVBInfo)
+unsigned char XGI_IsLCDON(PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempax ;
+    unsigned short tempax ;
 
     tempax = pVBInfo-&gt;VBInfo ;
     if ( tempax &amp; SetCRT2ToDualEdge )
@@ -8435,7 +8532,7 @@ BOOLEAN XGI_IsLCDON(PVB_DEVICE_INFO pVBInfo)
 /* --------------------------------------------------------------------- */
 void XGI_EnablePWD(  PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT index ,
+    unsigned short index ,
            temp ;
 
     index = XGI_GetLCDCapPtr(pVBInfo) ;
@@ -8467,13 +8564,13 @@ void XGI_DisablePWD( PVB_DEVICE_INFO pVBInfo )
 /* Output : 0 -&gt; Not LCD Mode */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_DisableChISLCD(PVB_DEVICE_INFO pVBInfo)
+unsigned char XGI_DisableChISLCD(PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbx ,
+    unsigned short tempbx ,
            tempah ;
 
     tempbx = pVBInfo-&gt;SetFlag &amp; ( DisableChA | DisableChB ) ;
-    tempah = ~( ( USHORT )XGINew_GetReg1( pVBInfo-&gt;Part1Port  , 0x2E ) ) ;
+    tempah = ~((unsigned short) XGINew_GetReg1(pVBInfo-&gt;Part1Port, 0x2E));
 
     if ( tempbx &amp; ( EnableChA | DisableChA ) )
     {
@@ -8497,14 +8594,14 @@ BOOLEAN XGI_DisableChISLCD(PVB_DEVICE_INFO pVBInfo)
 /* Output : 0 -&gt; Not LCD mode */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_EnableChISLCD(PVB_DEVICE_INFO pVBInfo)
+unsigned char XGI_EnableChISLCD(PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbx ,
+    unsigned short tempbx ,
            tempah ;
 
 
     tempbx = pVBInfo-&gt;SetFlag &amp; ( EnableChA | EnableChB ) ;
-    tempah = ~( ( USHORT )XGINew_GetReg1( pVBInfo-&gt;Part1Port , 0x2E ) ) ;
+    tempah = ~( (unsigned short)XGINew_GetReg1( pVBInfo-&gt;Part1Port , 0x2E ) ) ;
 
     if ( tempbx &amp; ( EnableChA | DisableChA ) )
     {
@@ -8528,7 +8625,7 @@ BOOLEAN XGI_EnableChISLCD(PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT XGI_GetLCDCapPtr(  PVB_DEVICE_INFO pVBInfo )
+unsigned short XGI_GetLCDCapPtr(PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR tempal ,
           tempah ,
@@ -8567,9 +8664,9 @@ USHORT XGI_GetLCDCapPtr(  PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT XGI_GetLCDCapPtr1( PVB_DEVICE_INFO pVBInfo )
+unsigned short XGI_GetLCDCapPtr1(PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempah ,
+    unsigned short tempah ,
            tempal ,
            tempbl ,
            i ;
@@ -8612,9 +8709,10 @@ USHORT XGI_GetLCDCapPtr1( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetLCDSync( USHORT* HSyncWidth , USHORT* VSyncWidth, PVB_DEVICE_INFO pVBInfo )
+void XGI_GetLCDSync(unsigned short *HSyncWidth , unsigned short *VSyncWidth,
+		    PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT Index ;
+    unsigned short Index ;
 
     Index = XGI_GetLCDCapPtr(pVBInfo) ;
     *HSyncWidth = pVBInfo-&gt;LCDCapList[ Index ].LCD_HSyncWidth ;
@@ -8633,7 +8731,7 @@ void XGI_GetLCDSync( USHORT* HSyncWidth , USHORT* VSyncWidth, PVB_DEVICE_INFO pV
 /* --------------------------------------------------------------------- */
 void XGI_EnableBridge( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbl ,
+    unsigned short tempbl ,
            tempah ;
 
     if ( pVBInfo-&gt;SetFlag == Win9xDOSMode )
@@ -8847,7 +8945,7 @@ void XGI_EnableBridge( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_INFO p
 /* --------------------------------------------------------------------- */
 void XGI_DisableBridge(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempax ,
+    unsigned short tempax ,
            tempbx ,
            tempah = 0 ,
            tempbl = 0 ;
@@ -9026,9 +9124,9 @@ void XGI_DisableBridge(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pV
 /* A : Ext750p */
 /* B : St750p */
 /* --------------------------------------------------------------------- */
-USHORT XGI_GetTVPtrIndex(  PVB_DEVICE_INFO pVBInfo )
+unsigned short XGI_GetTVPtrIndex(PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbx = 0 ;
+    unsigned short tempbx = 0 ;
 
     if ( pVBInfo-&gt;TVInfo &amp; SetPALTV )
         tempbx = 2 ;
@@ -9053,7 +9151,7 @@ USHORT XGI_GetTVPtrIndex(  PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : Customized Param. for 301 */
 /* --------------------------------------------------------------------- */
-void XGI_OEM310Setting( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
+void XGI_OEM310Setting(unsigned short ModeNo , unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
     if ( pVBInfo-&gt;SetFlag &amp; Win9xDOSMode )
         return ;
@@ -9085,7 +9183,7 @@ void XGI_OEM310Setting( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBI
 /* --------------------------------------------------------------------- */
 void XGI_SetDelayComp( PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT index ;
+    unsigned short index ;
 
     UCHAR  tempah ,
            tempbl ,
@@ -9163,7 +9261,7 @@ void XGI_SetDelayComp( PVB_DEVICE_INFO pVBInfo )
 /* --------------------------------------------------------------------- */
 void XGI_SetLCDCap( PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT tempcx ;
+    unsigned short tempcx ;
 
     tempcx = pVBInfo-&gt;LCDCapList[ XGI_GetLCDCapPtr(pVBInfo) ].LCD_Capability ;
 
@@ -9172,10 +9270,12 @@ void XGI_SetLCDCap( PVB_DEVICE_INFO pVBInfo )
         if ( pVBInfo-&gt;VBType &amp; ( VB_XGI301LV | VB_XGI302LV | VB_XGI301C ) )
         {        				/* 301LV/302LV only */
             /* Set 301LV Capability */
-            XGINew_SetReg1( pVBInfo-&gt;Part4Port , 0x24 , ( UCHAR )( tempcx &amp; 0x1F ) ) ;
+		XGINew_SetReg1(pVBInfo-&gt;Part4Port, 0x24, (UCHAR)(tempcx &amp; 0x1F));
 	}
         /* VB Driving */
-        XGINew_SetRegANDOR( pVBInfo-&gt;Part4Port , 0x0D , ~( ( EnableVBCLKDRVLOW | EnablePLLSPLOW ) &gt;&gt; 8 ) , ( USHORT )( ( tempcx &amp; ( EnableVBCLKDRVLOW | EnablePLLSPLOW ) ) &gt;&gt; 8 ) ) ;
+	XGINew_SetRegANDOR(pVBInfo-&gt;Part4Port, 0x0D,
+			   ~((EnableVBCLKDRVLOW | EnablePLLSPLOW) &gt;&gt; 8),
+			   (unsigned short)((tempcx &amp; (EnableVBCLKDRVLOW | EnablePLLSPLOW)) &gt;&gt; 8));
     }
 
     if ( pVBInfo-&gt;VBType &amp; ( VB_XGI301B | VB_XGI302B | VB_XGI301LV | VB_XGI302LV | VB_XGI301C ) )
@@ -9202,32 +9302,34 @@ void XGI_SetLCDCap( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetLCDCap_A(USHORT tempcx,PVB_DEVICE_INFO pVBInfo)
+void XGI_SetLCDCap_A(unsigned short tempcx, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT temp ;
+    unsigned short temp ;
 
     temp = XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x37 ) ;
 
     if ( temp &amp; LCDRGB18Bit )
     {
-        XGINew_SetRegANDOR( pVBInfo-&gt;Part1Port , 0x19 , 0x0F , ( USHORT )( 0x20 | ( tempcx &amp; 0x00C0 ) ) ) ; /* Enable Dither */
+	XGINew_SetRegANDOR(pVBInfo-&gt;Part1Port, 0x19, 0x0F,
+			   (unsigned short)(0x20 | (tempcx &amp; 0x00C0))); /* Enable Dither */
         XGINew_SetRegANDOR( pVBInfo-&gt;Part1Port , 0x1A , 0x7F , 0x80 ) ;
     }
     else
     {
-        XGINew_SetRegANDOR( pVBInfo-&gt;Part1Port , 0x19 , 0x0F , ( USHORT )( 0x30 | ( tempcx &amp; 0x00C0 ) ) ) ;
+	XGINew_SetRegANDOR(pVBInfo-&gt;Part1Port, 0x19, 0x0F,
+			   (unsigned short)(0x30 | (tempcx &amp; 0x00C0)));
         XGINew_SetRegANDOR( pVBInfo-&gt;Part1Port , 0x1A , 0x7F , 0x00 ) ;
     }
 
 /*
     if ( tempcx &amp; EnableLCD24bpp )	// 24bits
     {
-        XGINew_SetRegANDOR(pVBInfo-&gt;Part1Port,0x19, 0x0F,(USHORT)(0x30|(tempcx&amp;0x00C0)) );
+	XGINew_SetRegANDOR(pVBInfo-&gt;Part1Port,0x19, 0x0F,(unsigned short)(0x30|(tempcx&amp;0x00C0)) );
         XGINew_SetRegANDOR(pVBInfo-&gt;Part1Port,0x1A,0x7F,0x00);
     }
     else
     {
-        XGINew_SetRegANDOR(pVBInfo-&gt;Part1Port,0x19, 0x0F,(USHORT)(0x20|(tempcx&amp;0x00C0)) );//Enable Dither
+	XGINew_SetRegANDOR(pVBInfo-&gt;Part1Port,0x19, 0x0F,(unsigned short)(0x20|(tempcx&amp;0x00C0)) ); // Enable Dither
         XGINew_SetRegANDOR(pVBInfo-&gt;Part1Port,0x1A,0x7F,0x80);
     }
 */
@@ -9240,12 +9342,14 @@ void XGI_SetLCDCap_A(USHORT tempcx,PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetLCDCap_B(USHORT tempcx,PVB_DEVICE_INFO pVBInfo)
+void XGI_SetLCDCap_B(unsigned short tempcx, PVB_DEVICE_INFO pVBInfo)
 {
     if ( tempcx &amp; EnableLCD24bpp )	/* 24bits */
-        XGINew_SetRegANDOR( pVBInfo-&gt;Part2Port , 0x1A , 0xE0 , ( USHORT )( ( ( tempcx &amp; 0x00ff ) &gt;&gt; 6 ) | 0x0c ) ) ;
+	    XGINew_SetRegANDOR(pVBInfo-&gt;Part2Port, 0x1A, 0xE0,
+			       (unsigned short)(((tempcx &amp; 0x00ff) &gt;&gt; 6) | 0x0c));
     else
-        XGINew_SetRegANDOR( pVBInfo-&gt;Part2Port , 0x1A , 0xE0 , ( USHORT )( ( ( tempcx &amp; 0x00ff ) &gt;&gt; 6 ) | 0x18 ) ) ; /* Enable Dither */
+	    XGINew_SetRegANDOR(pVBInfo-&gt;Part2Port, 0x1A, 0xE0,
+			       (unsigned short)(((tempcx &amp; 0x00ff) &gt;&gt; 6) | 0x18)); /* Enable Dither */
 }
 
 
@@ -9257,7 +9361,7 @@ void XGI_SetLCDCap_B(USHORT tempcx,PVB_DEVICE_INFO pVBInfo)
 /* --------------------------------------------------------------------- */
 void SetSpectrum( PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT index ;
+    unsigned short index ;
 
     index = XGI_GetLCDCapPtr(pVBInfo) ;
 
@@ -9281,9 +9385,10 @@ void SetSpectrum( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : Set TV Customized Param. */
 /* --------------------------------------------------------------------- */
-void XGI_SetAntiFlicker( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_SetAntiFlicker(unsigned short ModeNo, unsigned short ModeIdIndex,
+			PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbx ,
+    unsigned short tempbx ,
            index ;
 
     UCHAR tempah ;
@@ -9317,9 +9422,9 @@ void XGI_SetAntiFlicker( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVB
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetEdgeEnhance( USHORT ModeNo , USHORT ModeIdIndex , PVB_DEVICE_INFO pVBInfo)
+void XGI_SetEdgeEnhance(unsigned short ModeNo , unsigned short ModeIdIndex , PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbx ,
+    unsigned short tempbx ,
            index ;
 
     UCHAR tempah ;
@@ -9353,20 +9458,24 @@ void XGI_SetEdgeEnhance( USHORT ModeNo , USHORT ModeIdIndex , PVB_DEVICE_INFO pV
 /* --------------------------------------------------------------------- */
 void XGI_SetPhaseIncr( PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT tempbx ;
+    unsigned short tempbx ;
 
     UCHAR tempcl ,
           tempch ;
 
-    ULONG tempData ;
+    unsigned long tempData ;
 
     XGI_GetTVPtrIndex2( &amp;tempbx , &amp;tempcl , &amp;tempch, pVBInfo ) ; /* bx, cl, ch */
     tempData = TVPhaseList[ tempbx ] ;
 
-    XGINew_SetReg1( pVBInfo-&gt;Part2Port , 0x31 , ( USHORT )( tempData &amp; 0x000000FF ) ) ;
-    XGINew_SetReg1( pVBInfo-&gt;Part2Port , 0x32 , ( USHORT )( ( tempData &amp; 0x0000FF00 ) &gt;&gt; 8 ) ) ;
-    XGINew_SetReg1( pVBInfo-&gt;Part2Port , 0x33 , ( USHORT )( ( tempData &amp; 0x00FF0000 ) &gt;&gt; 16 ) ) ;
-    XGINew_SetReg1( pVBInfo-&gt;Part2Port , 0x34 , ( USHORT )( ( tempData &amp; 0xFF000000 ) &gt;&gt; 24 ) ) ;
+    XGINew_SetReg1(pVBInfo-&gt;Part2Port, 0x31,
+		   (unsigned short)(tempData &amp; 0x000000FF));
+    XGINew_SetReg1(pVBInfo-&gt;Part2Port, 0x32,
+		   (unsigned short)((tempData &amp; 0x0000FF00) &gt;&gt; 8));
+    XGINew_SetReg1(pVBInfo-&gt;Part2Port, 0x33,
+		   (unsigned short)((tempData &amp; 0x00FF0000) &gt;&gt; 16));
+    XGINew_SetReg1(pVBInfo-&gt;Part2Port, 0x34,
+		   (unsigned short)((tempData &amp; 0xFF000000) &gt;&gt; 24));
 }
 
 
@@ -9376,9 +9485,10 @@ void XGI_SetPhaseIncr( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_SetYFilter( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
+void XGI_SetYFilter(unsigned short ModeNo, unsigned short ModeIdIndex,
+		    PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbx ,
+    unsigned short tempbx ,
            index ;
 
     UCHAR tempcl ,
@@ -9480,7 +9590,7 @@ void XGI_SetYFilter( USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo
 /* 1 : 301B/302B/301LV/302LV */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetTVPtrIndex2(USHORT* tempbx,UCHAR* tempcl,UCHAR* tempch, PVB_DEVICE_INFO pVBInfo)
+void XGI_GetTVPtrIndex2(unsigned short *tempbx,UCHAR* tempcl,UCHAR* tempch, PVB_DEVICE_INFO pVBInfo)
 {
     *tempbx = 0 ;
     *tempcl = 0 ;
@@ -9522,9 +9632,11 @@ void XGI_GetTVPtrIndex2(USHORT* tempbx,UCHAR* tempcl,UCHAR* tempch, PVB_DEVICE_I
 /* Output : */
 /* Description : Origin code for crt2group */
 /* --------------------------------------------------------------------- */
-void XGI_SetCRT2ModeRegs(USHORT ModeNo,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
+void XGI_SetCRT2ModeRegs(unsigned short ModeNo,
+			 PXGI_HW_DEVICE_INFO HwDeviceExtension,
+			 PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbl ;
+    unsigned short tempbl ;
     SHORT  tempcl ;
 
     UCHAR  tempah ;
@@ -9753,7 +9865,7 @@ void XGI_SetCRT2ModeRegs(USHORT ModeNo,PXGI_HW_DEVICE_INFO HwDeviceExtension, PV
 /* --------------------------------------------------------------------- */
 void XGI_CloseCRTC( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT tempbx ;
+    unsigned short tempbx ;
 
     tempbx = 0 ;
 
@@ -9772,7 +9884,7 @@ void XGI_CloseCRTC( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBIn
 /* --------------------------------------------------------------------- */
 void XGI_OpenCRTC( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT tempbx ;
+    unsigned short tempbx ;
 
     tempbx = 0 ;
 
@@ -9786,9 +9898,9 @@ void XGI_OpenCRTC( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInf
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGI_GetRAMDAC2DATA(USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
+void XGI_GetRAMDAC2DATA(unsigned short ModeNo , unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex, PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT tempax ,
+    unsigned short tempax ,
            tempbx ,
            temp1 ,
            temp2 ,
@@ -9813,15 +9925,15 @@ void XGI_GetRAMDAC2DATA(USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateT
         modeflag = pVBInfo-&gt;EModeIDTable[ ModeIdIndex ].Ext_ModeFlag ;
         CRT1Index = pVBInfo-&gt;RefIndex[ RefreshRateTableIndex ].Ext_CRT1CRTC ;
         CRT1Index &amp;= IndexMask ;
-        temp1 = ( USHORT )pVBInfo-&gt;XGINEWUB_CRT1Table[ CRT1Index ].CR[ 0 ] ;
-        temp2 = ( USHORT )pVBInfo-&gt;XGINEWUB_CRT1Table[ CRT1Index ].CR[ 5 ] ;
+	temp1 = (unsigned short)pVBInfo-&gt;XGINEWUB_CRT1Table[CRT1Index].CR[0];
+	temp2 = (unsigned short)pVBInfo-&gt;XGINEWUB_CRT1Table[CRT1Index].CR[5];
 	tempax = ( temp1 &amp; 0xFF ) | ( ( temp2 &amp; 0x03 ) &lt;&lt; 8 ) ;
-        tempbx = ( USHORT )pVBInfo-&gt;XGINEWUB_CRT1Table[ CRT1Index ].CR[ 8 ] ;
-        tempcx = ( USHORT )pVBInfo-&gt;XGINEWUB_CRT1Table[ CRT1Index ].CR[ 14 ] &lt;&lt; 8 ;
+	tempbx = (unsigned short)pVBInfo-&gt;XGINEWUB_CRT1Table[CRT1Index].CR[8];
+	tempcx = (unsigned short)pVBInfo-&gt;XGINEWUB_CRT1Table[CRT1Index].CR[14] &lt;&lt; 8;
 	tempcx &amp;= 0x0100 ;
 	tempcx = tempcx &lt;&lt; 2 ;
 	tempbx |= tempcx;
-        temp1 = ( USHORT )pVBInfo-&gt;XGINEWUB_CRT1Table[ CRT1Index ].CR[ 9 ] ;
+	temp1 = (unsigned short)pVBInfo-&gt;XGINEWUB_CRT1Table[CRT1Index].CR[9];
     }
 
     if ( temp1 &amp; 0x01 )
@@ -9851,11 +9963,11 @@ void XGI_GetRAMDAC2DATA(USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateT
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT XGI_GetColorDepth(USHORT ModeNo , USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
+unsigned short XGI_GetColorDepth(unsigned short ModeNo , unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT ColorDepth[ 6 ] = { 1 , 2 , 4 , 4 , 6 , 8 } ;
+    unsigned short ColorDepth[ 6 ] = { 1 , 2 , 4 , 4 , 6 , 8 } ;
     SHORT  index ;
-    USHORT modeflag ;
+    unsigned short modeflag ;
 
     if ( ModeNo &lt;= 0x13 )
     {
@@ -9926,10 +10038,10 @@ void XGINew_EnableCRT2( PVB_DEVICE_INFO pVBInfo)
 /* --------------------------------------------------------------------- */
 void XGINew_LCD_Wait_Time(UCHAR DelayTime, PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT i ,
+    unsigned short i ,
            j ;
 
-    ULONG temp ,
+    unsigned long temp ,
           flag ;
 
     flag = 0 ;
@@ -9961,9 +10073,9 @@ void XGINew_LCD_Wait_Time(UCHAR DelayTime, PVB_DEVICE_INFO pVBInfo)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-BOOLEAN XGI_BridgeIsOn( PVB_DEVICE_INFO pVBInfo )
+unsigned char XGI_BridgeIsOn( PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT flag ;
+    unsigned short flag ;
 
     if ( pVBInfo-&gt;IF_DEF_LVDS == 1 )
     {
@@ -9989,7 +10101,7 @@ BOOLEAN XGI_BridgeIsOn( PVB_DEVICE_INFO pVBInfo )
 /* --------------------------------------------------------------------- */
 void XGI_LongWait(PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT i ;
+    unsigned short i ;
 
     i = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x1F ) ;
 
@@ -10018,7 +10130,7 @@ void XGI_LongWait(PVB_DEVICE_INFO pVBInfo)
 /* --------------------------------------------------------------------- */
 void XGI_VBLongWait( PVB_DEVICE_INFO pVBInfo )
 {
-    USHORT tempal ,
+    unsigned short tempal ,
            temp ,
            i ,
            j ;
@@ -10075,16 +10187,16 @@ return ;
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT XGI_GetVGAHT2( PVB_DEVICE_INFO pVBInfo )
+unsigned short XGI_GetVGAHT2( PVB_DEVICE_INFO pVBInfo )
 {
-    ULONG tempax ,
+    unsigned long tempax ,
           tempbx ;
 
     tempbx = ( ( pVBInfo-&gt;VGAVT - pVBInfo-&gt;VGAVDE ) * pVBInfo-&gt;RVBHCMAX ) &amp; 0xFFFF ;
     tempax = ( pVBInfo-&gt;VT - pVBInfo-&gt;VDE ) * pVBInfo-&gt;RVBHCFACT ;
     tempax = ( tempax * pVBInfo-&gt;HT ) /tempbx ;
 
-    return( ( USHORT )tempax ) ;
+    return( (unsigned short)tempax ) ;
 }
 
 
@@ -10094,18 +10206,18 @@ USHORT XGI_GetVGAHT2( PVB_DEVICE_INFO pVBInfo )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-USHORT XGI_GetVCLK2Ptr( USHORT ModeNo , USHORT ModeIdIndex , USHORT RefreshRateTableIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension ,PVB_DEVICE_INFO pVBInfo)
+unsigned short XGI_GetVCLK2Ptr(unsigned short ModeNo , unsigned short ModeIdIndex , unsigned short RefreshRateTableIndex , PXGI_HW_DEVICE_INFO HwDeviceExtension ,PVB_DEVICE_INFO pVBInfo)
 {
-    USHORT tempbx ;
+    unsigned short tempbx ;
 
-    USHORT LCDXlat1VCLK[ 4 ] = { VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 } ;
-    USHORT LCDXlat2VCLK[ 4 ] = { VCLK108_2 + 5 , VCLK108_2 + 5 , VCLK108_2 + 5 , VCLK108_2 + 5 } ;
-    USHORT LVDSXlat1VCLK[ 4 ] = { VCLK40 , VCLK40 , VCLK40 , VCLK40 } ;
-    USHORT LVDSXlat2VCLK[ 4 ] = { VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 } ;
-    USHORT LVDSXlat3VCLK[ 4 ] = { VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 } ;
+    unsigned short LCDXlat1VCLK[ 4 ] = { VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 } ;
+    unsigned short LCDXlat2VCLK[ 4 ] = { VCLK108_2 + 5 , VCLK108_2 + 5 , VCLK108_2 + 5 , VCLK108_2 + 5 } ;
+    unsigned short LVDSXlat1VCLK[ 4 ] = { VCLK40 , VCLK40 , VCLK40 , VCLK40 } ;
+    unsigned short LVDSXlat2VCLK[ 4 ] = { VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 } ;
+    unsigned short LVDSXlat3VCLK[ 4 ] = { VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 , VCLK65 + 2 } ;
 
-    USHORT CRT2Index , VCLKIndex ;
-    USHORT modeflag , resinfo ;
+    unsigned short CRT2Index , VCLKIndex ;
+    unsigned short modeflag , resinfo ;
     UCHAR *CHTVVCLKPtr = NULL ;
 
     if ( ModeNo &lt;= 0x13 )
diff --git a/drivers/staging/xgifb/vb_setmode.h b/drivers/staging/xgifb/vb_setmode.h
index 09753d706665..67a56b9d4c14 100644
--- a/drivers/staging/xgifb/vb_setmode.h
+++ b/drivers/staging/xgifb/vb_setmode.h
@@ -5,7 +5,7 @@ extern   void     InitTo330Pointer(UCHAR,PVB_DEVICE_INFO);
 extern   void     XGI_UnLockCRT2(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
 extern   void     XGI_LockCRT2(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
 extern   void     XGI_LongWait( PVB_DEVICE_INFO );
-extern   void     XGI_SetCRT2ModeRegs(USHORT ModeNo,PXGI_HW_DEVICE_INFO,  PVB_DEVICE_INFO  );
+extern   void     XGI_SetCRT2ModeRegs(unsigned short ModeNo,PXGI_HW_DEVICE_INFO,  PVB_DEVICE_INFO  );
 extern   void     XGI_DisableBridge(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
 extern   void  	  XGI_EnableBridge(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
 extern   void     XGI_DisplayOff( PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO );
@@ -13,28 +13,28 @@ extern   void     XGI_DisplayOn( PXGI_HW_DEVICE_INFO, PVB_DEVICE_INFO );
 extern   void     XGI_GetVBType(PVB_DEVICE_INFO);
 extern   void     XGI_SenseCRT1(PVB_DEVICE_INFO );
 extern   void     XGI_GetVGAType(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
-extern   void     XGI_GetVBInfo(USHORT ModeNo,USHORT ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
-extern   void     XGI_GetTVInfo(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO );
-extern   void     XGI_SetCRT1Offset(USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
-extern   void     XGI_SetLCDAGroup(USHORT ModeNo,USHORT ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
+extern   void     XGI_GetVBInfo(unsigned short ModeNo,unsigned short ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
+extern   void     XGI_GetTVInfo(unsigned short ModeNo,unsigned short ModeIdIndex, PVB_DEVICE_INFO );
+extern   void     XGI_SetCRT1Offset(unsigned short ModeNo,unsigned short ModeIdIndex,unsigned short RefreshRateTableIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
+extern   void     XGI_SetLCDAGroup(unsigned short ModeNo,unsigned short ModeIdIndex,PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO );
 extern   void     XGI_WaitDisply( PVB_DEVICE_INFO );
-extern   USHORT   XGI_GetResInfo(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
+extern   unsigned short   XGI_GetResInfo(unsigned short ModeNo,unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo);
 
-extern   BOOLEAN  XGISetModeNew( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo ) ;
+extern   unsigned char  XGISetModeNew( PXGI_HW_DEVICE_INFO HwDeviceExtension , unsigned short ModeNo ) ;
 
-extern   BOOLEAN  XGI_SearchModeID( USHORT ModeNo,USHORT  *ModeIdIndex, PVB_DEVICE_INFO );
-extern   BOOLEAN  XGI_GetLCDInfo(USHORT ModeNo,USHORT ModeIdIndex,PVB_DEVICE_INFO );
-extern   BOOLEAN  XGI_BridgeIsOn( PVB_DEVICE_INFO );
-extern   BOOLEAN  XGI_SetCRT2Group301(USHORT ModeNo, PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO);
-extern   USHORT   XGI_GetRatePtrCRT2( PXGI_HW_DEVICE_INFO pXGIHWDE, USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO );
+extern   unsigned char  XGI_SearchModeID( unsigned short ModeNo,unsigned short  *ModeIdIndex, PVB_DEVICE_INFO );
+extern   unsigned char  XGI_GetLCDInfo(unsigned short ModeNo,unsigned short ModeIdIndex,PVB_DEVICE_INFO );
+extern   unsigned char  XGI_BridgeIsOn( PVB_DEVICE_INFO );
+extern   unsigned char  XGI_SetCRT2Group301(unsigned short ModeNo, PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO);
+extern   unsigned short   XGI_GetRatePtrCRT2( PXGI_HW_DEVICE_INFO pXGIHWDE, unsigned short ModeNo,unsigned short ModeIdIndex, PVB_DEVICE_INFO );
 
 extern   void     XGI_SetXG21FPBits(PVB_DEVICE_INFO pVBInfo);
 extern   void     XGI_SetXG27FPBits(PVB_DEVICE_INFO pVBInfo);
-extern   void     XGI_XG21BLSignalVDD(USHORT tempbh,USHORT tempbl, PVB_DEVICE_INFO pVBInfo);
-extern   void     XGI_XG27BLSignalVDD(USHORT tempbh,USHORT tempbl, PVB_DEVICE_INFO pVBInfo);
-extern   void     XGI_XG21SetPanelDelay(USHORT tempbl, PVB_DEVICE_INFO pVBInfo);
-extern   BOOLEAN  XGI_XG21CheckLVDSMode(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
-extern   void     XGI_SetXG21LVDSPara(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
-extern   USHORT XGI_GetLVDSOEMTableIndex(PVB_DEVICE_INFO pVBInfo);
+extern   void     XGI_XG21BLSignalVDD(unsigned short tempbh,unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
+extern   void     XGI_XG27BLSignalVDD(unsigned short tempbh,unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
+extern   void     XGI_XG21SetPanelDelay(unsigned short tempbl, PVB_DEVICE_INFO pVBInfo);
+extern   unsigned char  XGI_XG21CheckLVDSMode(unsigned short ModeNo,unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
+extern   void     XGI_SetXG21LVDSPara(unsigned short ModeNo,unsigned short ModeIdIndex, PVB_DEVICE_INFO pVBInfo );
+extern   unsigned short XGI_GetLVDSOEMTableIndex(PVB_DEVICE_INFO pVBInfo);
 
 #endif
diff --git a/drivers/staging/xgifb/vb_struct.h b/drivers/staging/xgifb/vb_struct.h
index 1ee619f65978..c0498d87327b 100644
--- a/drivers/staging/xgifb/vb_struct.h
+++ b/drivers/staging/xgifb/vb_struct.h
@@ -17,12 +17,12 @@ typedef struct _XGI_PanelDelayTblStruct
 
 typedef struct _XGI_LCDDataStruct
 {
- USHORT RVBHCMAX;
- USHORT RVBHCFACT;
- USHORT VGAHT;
- USHORT VGAVT;
- USHORT LCDHT;
- USHORT LCDVT;
+ unsigned short RVBHCMAX;
+ unsigned short RVBHCFACT;
+ unsigned short VGAHT;
+ unsigned short VGAVT;
+ unsigned short LCDHT;
+ unsigned short LCDVT;
 } XGI_LCDDataStruct;
 
 
@@ -38,15 +38,15 @@ typedef struct _XGI_LVDSCRT1VDataStruct
 
 typedef struct _XGI_TVDataStruct
 {
- USHORT RVBHCMAX;
- USHORT RVBHCFACT;
- USHORT VGAHT;
- USHORT VGAVT;
- USHORT TVHDE;
- USHORT TVVDE;
- USHORT RVBHRS;
+ unsigned short RVBHCMAX;
+ unsigned short RVBHCFACT;
+ unsigned short VGAHT;
+ unsigned short VGAVT;
+ unsigned short TVHDE;
+ unsigned short TVVDE;
+ unsigned short RVBHRS;
  UCHAR FlickerMode;
- USHORT HALFRVBHRS;
+ unsigned short HALFRVBHRS;
  UCHAR RY1COE;
  UCHAR RY2COE;
  UCHAR RY3COE;
@@ -55,16 +55,16 @@ typedef struct _XGI_TVDataStruct
 
 typedef struct _XGI_LVDSDataStruct
 {
- USHORT VGAHT;
- USHORT VGAVT;
- USHORT LCDHT;
- USHORT LCDVT;
+ unsigned short VGAHT;
+ unsigned short VGAVT;
+ unsigned short LCDHT;
+ unsigned short LCDVT;
 } XGI_LVDSDataStruct;
 
 typedef struct _XGI_LVDSDesStruct
 {
- USHORT LCDHDES;
- USHORT LCDVDES;
+ unsigned short LCDHDES;
+ unsigned short LCDVDES;
 } XGI_LVDSDesStruct;
 
 typedef struct _XGI_LVDSCRT1DataStruct
@@ -78,7 +78,7 @@ typedef struct _XGI_LVDSCRT1DataStruct
 typedef struct _XGI_StStruct
 {
  UCHAR St_ModeID;
- USHORT St_ModeFlag;
+ unsigned short St_ModeFlag;
  UCHAR St_StTableIndex;
  UCHAR St_CRT2CRTC;
  UCHAR St_CRT2CRTC2;
@@ -93,7 +93,7 @@ typedef struct _XGI_StandTableStruct
  UCHAR CRT_COLS;
  UCHAR ROWS;
  UCHAR CHAR_HEIGHT;
- USHORT CRT_LEN;
+ unsigned short CRT_LEN;
  UCHAR SR[4];
  UCHAR MISC;
  UCHAR CRTC[0x19];
@@ -104,10 +104,10 @@ typedef struct _XGI_StandTableStruct
 typedef struct _XGI_ExtStruct
 {
  UCHAR Ext_ModeID;
- USHORT Ext_ModeFlag;
- USHORT Ext_ModeInfo;
- USHORT Ext_Point;
- USHORT Ext_VESAID;
+ unsigned short Ext_ModeFlag;
+ unsigned short Ext_ModeInfo;
+ unsigned short Ext_Point;
+ unsigned short Ext_VESAID;
  UCHAR Ext_VESAMEMSize;
  UCHAR Ext_RESINFO;
  UCHAR VB_ExtTVFlickerIndex;
@@ -118,52 +118,52 @@ typedef struct _XGI_ExtStruct
 
 typedef struct _XGI_Ext2Struct
 {
- USHORT Ext_InfoFlag;
+ unsigned short Ext_InfoFlag;
  UCHAR Ext_CRT1CRTC;
  UCHAR Ext_CRTVCLK;
  UCHAR Ext_CRT2CRTC;
  UCHAR Ext_CRT2CRTC2;
  UCHAR  ModeID;
- USHORT XRes;
- USHORT YRes;
- /* USHORT ROM_OFFSET; */
+ unsigned short XRes;
+ unsigned short YRes;
+ /* unsigned short ROM_OFFSET; */
 } XGI_Ext2Struct;
 
 
 typedef struct _XGI_MCLKDataStruct
 {
  UCHAR SR28,SR29,SR2A;
- USHORT CLOCK;
+ unsigned short CLOCK;
 } XGI_MCLKDataStruct;
 
 typedef struct _XGI_ECLKDataStruct
 {
  UCHAR SR2E,SR2F,SR30;
- USHORT CLOCK;
+ unsigned short CLOCK;
 } XGI_ECLKDataStruct;
 
 typedef struct _XGI_VCLKDataStruct
 {
  UCHAR SR2B,SR2C;
- USHORT CLOCK;
+ unsigned short CLOCK;
 } XGI_VCLKDataStruct;
 
 typedef struct _XGI_VBVCLKDataStruct
 {
  UCHAR Part4_A,Part4_B;
- USHORT CLOCK;
+ unsigned short CLOCK;
 } XGI_VBVCLKDataStruct;
 
 typedef struct _XGI_StResInfoStruct
 {
- USHORT HTotal;
- USHORT VTotal;
+ unsigned short HTotal;
+ unsigned short VTotal;
 } XGI_StResInfoStruct;
 
 typedef struct _XGI_ModeResInfoStruct
 {
- USHORT HTotal;
- USHORT VTotal;
+ unsigned short HTotal;
+ unsigned short VTotal;
  UCHAR  XChar;
  UCHAR  YChar;
 } XGI_ModeResInfoStruct;
@@ -175,100 +175,100 @@ typedef struct _XGI_LCDNBDesStruct
  /*add for new UNIVGABIOS*/
 typedef struct _XGI_LCDDesStruct
 {
- USHORT LCDHDES;
- USHORT LCDHRS;
- USHORT LCDVDES;
- USHORT LCDVRS;
+ unsigned short LCDHDES;
+ unsigned short LCDHRS;
+ unsigned short LCDVDES;
+ unsigned short LCDVRS;
 } XGI_LCDDesStruct;
 
 typedef struct _XGI_LCDDataTablStruct
 {
  UCHAR  PANELID;
- USHORT MASK;
- USHORT CAP;
- USHORT DATAPTR;
+ unsigned short MASK;
+ unsigned short CAP;
+ unsigned short DATAPTR;
 } XGI_LCDDataTablStruct;
 
 typedef struct _XGI_TVTablDataStruct
 {
- USHORT MASK;
- USHORT CAP;
- USHORT DATAPTR;
+ unsigned short MASK;
+ unsigned short CAP;
+ unsigned short DATAPTR;
 } XGI_TVDataTablStruct;
 
 typedef struct _XGI330_LCDDesDataStruct
 {
- USHORT LCDHDES;
- USHORT LCDHRS;
- USHORT LCDVDES;
- USHORT LCDVRS;
+ unsigned short LCDHDES;
+ unsigned short LCDHRS;
+ unsigned short LCDVDES;
+ unsigned short LCDVRS;
 } XGI330_LCDDataDesStruct;
 
 
 typedef struct _XGI330_LVDSDataStruct
 {
- USHORT VGAHT;
- USHORT VGAVT;
- USHORT LCDHT;
- USHORT LCDVT;
+ unsigned short VGAHT;
+ unsigned short VGAVT;
+ unsigned short LCDHT;
+ unsigned short LCDVT;
 } XGI330_LVDSDataStruct;
 
 typedef struct _XGI330_LCDDesDataStruct2
 {
- USHORT LCDHDES;
- USHORT LCDHRS;
- USHORT LCDVDES;
- USHORT LCDVRS;
- USHORT LCDHSync;
- USHORT LCDVSync;
+ unsigned short LCDHDES;
+ unsigned short LCDHRS;
+ unsigned short LCDVDES;
+ unsigned short LCDVRS;
+ unsigned short LCDHSync;
+ unsigned short LCDVSync;
 } XGI330_LCDDataDesStruct2;
 
 typedef struct _XGI330_LCDDataStruct
 {
- USHORT RVBHCMAX;
- USHORT RVBHCFACT;
- USHORT VGAHT;
- USHORT VGAVT;
- USHORT LCDHT;
- USHORT LCDVT;
+ unsigned short RVBHCMAX;
+ unsigned short RVBHCFACT;
+ unsigned short VGAHT;
+ unsigned short VGAVT;
+ unsigned short LCDHT;
+ unsigned short LCDVT;
 } XGI330_LCDDataStruct;
 
 
 typedef struct _XGI330_TVDataStruct
 {
- USHORT RVBHCMAX;
- USHORT RVBHCFACT;
- USHORT VGAHT;
- USHORT VGAVT;
- USHORT TVHDE;
- USHORT TVVDE;
- USHORT RVBHRS;
+ unsigned short RVBHCMAX;
+ unsigned short RVBHCFACT;
+ unsigned short VGAHT;
+ unsigned short VGAVT;
+ unsigned short TVHDE;
+ unsigned short TVVDE;
+ unsigned short RVBHRS;
  UCHAR FlickerMode;
- USHORT HALFRVBHRS;
+ unsigned short HALFRVBHRS;
 } XGI330_TVDataStruct;
 
 typedef struct _XGI330_LCDDataTablStruct
 {
  UCHAR  PANELID;
- USHORT MASK;
- USHORT CAP;
- USHORT DATAPTR;
+ unsigned short MASK;
+ unsigned short CAP;
+ unsigned short DATAPTR;
 } XGI330_LCDDataTablStruct;
 
 typedef struct _XGI330_TVDataTablStruct
 {
- USHORT MASK;
- USHORT CAP;
- USHORT DATAPTR;
+ unsigned short MASK;
+ unsigned short CAP;
+ unsigned short DATAPTR;
 } XGI330_TVDataTablStruct;
 
 
 typedef struct _XGI330_CHTVDataStruct
 {
- USHORT VGAHT;
- USHORT VGAVT;
- USHORT LCDHT;
- USHORT LCDVT;
+ unsigned short VGAHT;
+ unsigned short VGAVT;
+ unsigned short LCDHT;
+ unsigned short LCDVT;
 } XGI330_CHTVDataStruct;
 
 typedef struct _XGI_TimingHStruct
@@ -304,7 +304,7 @@ typedef struct _XGI330_CHTVRegDataStruct
 typedef struct _XGI330_LCDCapStruct
 {
  		UCHAR      LCD_ID;
-                USHORT     LCD_Capability;
+		unsigned short	   LCD_Capability;
                 UCHAR      LCD_SetFlag;
                 UCHAR      LCD_DelayCompensation;
                 UCHAR      LCD_HSyncWidth;
@@ -332,15 +332,15 @@ typedef struct _XGI330_LCDCapStruct
 
 typedef struct _XGI21_LVDSCapStruct
 {
-                USHORT     LVDS_Capability;
-                USHORT     LVDSHT;
-                USHORT     LVDSVT;
-                USHORT     LVDSHDE;
-                USHORT     LVDSVDE;
-                USHORT     LVDSHFP;
-                USHORT     LVDSVFP;
-                USHORT     LVDSHSYNC;
-                USHORT     LVDSVSYNC;
+		unsigned short	   LVDS_Capability;
+		unsigned short	   LVDSHT;
+		unsigned short	   LVDSVT;
+		unsigned short	   LVDSHDE;
+		unsigned short	   LVDSVDE;
+		unsigned short	   LVDSHFP;
+		unsigned short	   LVDSVFP;
+		unsigned short	   LVDSHSYNC;
+		unsigned short	   LVDSVSYNC;
                 UCHAR      VCLKData1;
                 UCHAR      VCLKData2;
                 UCHAR      PSC_S1;
@@ -359,12 +359,12 @@ typedef struct _XGI_CRT1TableStruct
 typedef struct _XGI330_VCLKDataStruct
 {
     UCHAR SR2B,SR2C;
-    USHORT CLOCK;
+    unsigned short CLOCK;
 } XGI330_VCLKDataStruct;
 
 typedef struct _XGI301C_Tap4TimingStruct
 {
-    USHORT DE;
+    unsigned short DE;
     UCHAR  Reg[64];   /* C0-FF */
 } XGI301C_Tap4TimingStruct;
 
@@ -373,7 +373,7 @@ typedef struct _XGI_New_StandTableStruct
 	UCHAR  CRT_COLS;
 	UCHAR  ROWS;
 	UCHAR  CHAR_HEIGHT;
-	USHORT CRT_LEN;
+	unsigned short CRT_LEN;
 	UCHAR  SR[4];
 	UCHAR  MISC;
 	UCHAR  CRTC[0x19];
@@ -391,34 +391,34 @@ typedef VB_DEVICE_INFO *	PVB_DEVICE_INFO;
 
 struct _VB_DEVICE_INFO
 {
-    BOOLEAN  ISXPDOS;
-    ULONG   P3c4,P3d4,P3c0,P3ce,P3c2,P3cc;
-    ULONG   P3ca,P3c6,P3c7,P3c8,P3c9,P3da;
-    ULONG   Part0Port,Part1Port,Part2Port;
-    ULONG   Part3Port,Part4Port,Part5Port;
-    USHORT   RVBHCFACT,RVBHCMAX,RVBHRS;
-    USHORT   VGAVT,VGAHT,VGAVDE,VGAHDE;
-    USHORT   VT,HT,VDE,HDE;
-    USHORT   LCDHRS,LCDVRS,LCDHDES,LCDVDES;
-
-    USHORT   ModeType;
-    USHORT   IF_DEF_LVDS,IF_DEF_TRUMPION,IF_DEF_DSTN;/* ,IF_DEF_FSTN; add for dstn */
-    USHORT   IF_DEF_CRT2Monitor,IF_DEF_VideoCapture;
-    USHORT   IF_DEF_LCDA,IF_DEF_CH7017,IF_DEF_YPbPr,IF_DEF_ScaleLCD,IF_DEF_OEMUtil,IF_DEF_PWD;
-    USHORT   IF_DEF_ExpLink;
-    USHORT   IF_DEF_CH7005,IF_DEF_HiVision;
-    USHORT   IF_DEF_CH7007; /* Billy 2007/05/03 */
-    USHORT   LCDResInfo,LCDTypeInfo, VBType;/*301b*/
-    USHORT   VBInfo,TVInfo,LCDInfo, Set_VGAType;
-    USHORT   VBExtInfo;/*301lv*/
-    USHORT   SetFlag;
-    USHORT   NewFlickerMode;
-    USHORT   SelectCRT2Rate;
+    unsigned char  ISXPDOS;
+    unsigned long   P3c4,P3d4,P3c0,P3ce,P3c2,P3cc;
+    unsigned long   P3ca,P3c6,P3c7,P3c8,P3c9,P3da;
+    unsigned long   Part0Port,Part1Port,Part2Port;
+    unsigned long   Part3Port,Part4Port,Part5Port;
+    unsigned short   RVBHCFACT,RVBHCMAX,RVBHRS;
+    unsigned short   VGAVT,VGAHT,VGAVDE,VGAHDE;
+    unsigned short   VT,HT,VDE,HDE;
+    unsigned short   LCDHRS,LCDVRS,LCDHDES,LCDVDES;
+
+    unsigned short   ModeType;
+    unsigned short   IF_DEF_LVDS,IF_DEF_TRUMPION,IF_DEF_DSTN;/* ,IF_DEF_FSTN; add for dstn */
+    unsigned short   IF_DEF_CRT2Monitor,IF_DEF_VideoCapture;
+    unsigned short   IF_DEF_LCDA,IF_DEF_CH7017,IF_DEF_YPbPr,IF_DEF_ScaleLCD,IF_DEF_OEMUtil,IF_DEF_PWD;
+    unsigned short   IF_DEF_ExpLink;
+    unsigned short   IF_DEF_CH7005,IF_DEF_HiVision;
+    unsigned short   IF_DEF_CH7007; /* Billy 2007/05/03 */
+    unsigned short   LCDResInfo,LCDTypeInfo, VBType;/*301b*/
+    unsigned short   VBInfo,TVInfo,LCDInfo, Set_VGAType;
+    unsigned short   VBExtInfo;/*301lv*/
+    unsigned short   SetFlag;
+    unsigned short   NewFlickerMode;
+    unsigned short   SelectCRT2Rate;
 
     unsigned char *ROMAddr;
     unsigned char *FBAddr;
-    ULONG BaseAddr;
-    ULONG RelIO;
+    unsigned long BaseAddr;
+    unsigned long RelIO;
 
     DRAM4Type  *CR6B;
     DRAM4Type  *CR6E;
@@ -430,12 +430,12 @@ struct _VB_DEVICE_INFO
     UCHAR  *pSoftSetting;
     UCHAR  *pOutputSelect;
 
-    USHORT *pRGBSenseData;
-    USHORT *pRGBSenseData2; /*301b*/
-    USHORT *pVideoSenseData;
-    USHORT *pVideoSenseData2;
-    USHORT *pYCSenseData;
-    USHORT *pYCSenseData2;
+    unsigned short *pRGBSenseData;
+    unsigned short *pRGBSenseData2; /*301b*/
+    unsigned short *pVideoSenseData;
+    unsigned short *pVideoSenseData2;
+    unsigned short *pYCSenseData;
+    unsigned short *pYCSenseData2;
 
     UCHAR  *pSR07;
     UCHAR  *CR49;
@@ -516,18 +516,18 @@ struct _VB_DEVICE_INFO
 
 typedef struct
 {
-    USHORT    Horizontal_ACTIVE;
-    USHORT    Horizontal_FP;
-    USHORT    Horizontal_SYNC;
-    USHORT    Horizontal_BP;
-    USHORT    Vertical_ACTIVE;
-    USHORT    Vertical_FP;
-    USHORT    Vertical_SYNC;
-    USHORT    Vertical_BP;
+    unsigned short    Horizontal_ACTIVE;
+    unsigned short    Horizontal_FP;
+    unsigned short    Horizontal_SYNC;
+    unsigned short    Horizontal_BP;
+    unsigned short    Vertical_ACTIVE;
+    unsigned short    Vertical_FP;
+    unsigned short    Vertical_SYNC;
+    unsigned short    Vertical_BP;
     double    DCLK;
     UCHAR     FrameRate;
     UCHAR     Interlace;
-    USHORT    Margin;
+    unsigned short    Margin;
 } TimingInfo;
 
 #define _VB_STRUCT_
diff --git a/drivers/staging/xgifb/vb_table.h b/drivers/staging/xgifb/vb_table.h
index f804dfac6902..5e06afe368b0 100644
--- a/drivers/staging/xgifb/vb_table.h
+++ b/drivers/staging/xgifb/vb_table.h
@@ -2938,7 +2938,7 @@ XGI330_TVDataTablStruct XGI_TVDataTable[]=
  {0xffff,0x0000,12}  	/* END */
 };
 
-USHORT TVLenList[]=
+unsigned short TVLenList[] =
 {
    LVDSCRT1Len_H,
    LVDSCRT1Len_V,
@@ -2980,7 +2980,7 @@ XGI330_TVDataTablStruct XGI_EPLCHTVRegPtr[]=
   {0xFFFF,0x0000,4}
 };
 
-USHORT LCDLenList[]=
+unsigned short LCDLenList[] =
 {
    LVDSCRT1Len_H,
    LVDSCRT1Len_V,
@@ -3471,12 +3471,12 @@ UCHAR XGI330_CRT2Data_1_2 = 0x0;
 UCHAR XGI330_CRT2Data_4_D = 0x0;
 UCHAR XGI330_CRT2Data_4_E = 0x0;
 UCHAR XGI330_CRT2Data_4_10 = 0x80;
-USHORT XGI330_RGBSenseData = 0xd1;
-USHORT XGI330_VideoSenseData = 0xb9;
-USHORT XGI330_YCSenseData = 0xb3;
-USHORT XGI330_RGBSenseData2 = 0x0190;     /*301b*/
-USHORT XGI330_VideoSenseData2 = 0x0110;
-USHORT XGI330_YCSenseData2 = 0x016B;
+unsigned short XGI330_RGBSenseData = 0xd1;
+unsigned short XGI330_VideoSenseData = 0xb9;
+unsigned short XGI330_YCSenseData = 0xb3;
+unsigned short XGI330_RGBSenseData2 = 0x0190;     /*301b*/
+unsigned short XGI330_VideoSenseData2 = 0x0110;
+unsigned short XGI330_YCSenseData2 = 0x016B;
 UCHAR XGI330_NTSCPhase[] = {0x21,0xed,0x8a,0x8};
 UCHAR XGI330_PALPhase[] = {0x2a,0x5,0xd3,0x0};
 UCHAR XGI330_NTSCPhase2[] = {0x21,0xF0,0x7B,0xD6};/*301b*/
@@ -4045,7 +4045,7 @@ UCHAR TVEdgeList[]=
       0x00             /* ; 1 HiTV */
 };
 
-ULONG TVPhaseList[]=
+unsigned long TVPhaseList[]=
 {      0x08BAED21, /* ; 0 NTSC phase */
        0x00E3052A, /* ; 1 PAL phase */
        0x9B2EE421, /* ; 2 PAL-M phase */
diff --git a/drivers/staging/xgifb/vb_util.c b/drivers/staging/xgifb/vb_util.c
index 0842cb68b834..5e32afda28c2 100644
--- a/drivers/staging/xgifb/vb_util.c
+++ b/drivers/staging/xgifb/vb_util.c
@@ -6,17 +6,20 @@
 #include &lt;asm/io.h&gt;
 #include &lt;linux/types.h&gt;
 
-void XGINew_SetReg1( ULONG , USHORT , USHORT ) ;
-void XGINew_SetReg2( ULONG , USHORT , USHORT ) ;
-void XGINew_SetReg3( ULONG , USHORT ) ;
-void XGINew_SetReg4( ULONG , ULONG ) ;
-UCHAR XGINew_GetReg1( ULONG , USHORT) ;
-UCHAR XGINew_GetReg2( ULONG ) ;
-ULONG XGINew_GetReg3( ULONG ) ;
-void XGINew_ClearDAC(unsigned char *) ;
-void     XGINew_SetRegANDOR(ULONG Port,USHORT Index,USHORT DataAND,USHORT DataOR);
-void     XGINew_SetRegOR(ULONG Port,USHORT Index,USHORT DataOR);
-void     XGINew_SetRegAND(ULONG Port,USHORT Index,USHORT DataAND);
+void XGINew_SetReg1(unsigned long,unsigned short,unsigned short);
+void XGINew_SetReg2(unsigned long,unsigned short,unsigned short);
+void XGINew_SetReg3(unsigned long,unsigned short);
+void XGINew_SetReg4(unsigned long,unsigned long);
+UCHAR XGINew_GetReg1(unsigned long,unsigned short);
+UCHAR XGINew_GetReg2(unsigned long);
+unsigned long XGINew_GetReg3(unsigned long);
+void XGINew_ClearDAC(unsigned char *);
+void XGINew_SetRegANDOR(unsigned long Port,unsigned short Index,
+			unsigned short DataAND,unsigned short DataOR);
+void XGINew_SetRegOR(unsigned long Port,unsigned short Index,
+		     unsigned short DataOR);
+void XGINew_SetRegAND(unsigned long Port,unsigned short Index,
+		      unsigned short DataAND);
 
 
 /* --------------------------------------------------------------------- */
@@ -25,7 +28,7 @@ void     XGINew_SetRegAND(ULONG Port,USHORT Index,USHORT DataAND);
 /* Output : */
 /* Description : SR CRTC GR */
 /* --------------------------------------------------------------------- */
-void XGINew_SetReg1( ULONG port , USHORT index , USHORT data )
+void XGINew_SetReg1( unsigned long port , unsigned short index , unsigned short data )
 {
 	outb(index, port);
 	outb(data, port + 1);
@@ -38,7 +41,7 @@ void XGINew_SetReg1( ULONG port , USHORT index , USHORT data )
 /* Output : */
 /* Description : AR( 3C0 ) */
 /* --------------------------------------------------------------------- */
-/*void XGINew_SetReg2( ULONG port , USHORT index , USHORT data )
+/*void XGINew_SetReg2( unsigned long port , unsigned short index , unsigned short data )
 {
     InPortByte( ( PUCHAR )port + 0x3da - 0x3c0 ) ;
     OutPortByte( XGINew_P3c0 , index ) ;
@@ -53,7 +56,7 @@ void XGINew_SetReg1( ULONG port , USHORT index , USHORT data )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_SetReg3( ULONG port , USHORT data )
+void XGINew_SetReg3( unsigned long port , unsigned short data )
 {
 	outb(data, port);
 }
@@ -65,7 +68,7 @@ void XGINew_SetReg3( ULONG port , USHORT data )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_SetReg4( ULONG port , ULONG data )
+void XGINew_SetReg4( unsigned long port , unsigned long data )
 {
 	outl(data, port);
 }
@@ -77,7 +80,7 @@ void XGINew_SetReg4( ULONG port , ULONG data )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGINew_GetReg1( ULONG port , USHORT index )
+UCHAR XGINew_GetReg1( unsigned long port , unsigned short index )
 {
     UCHAR data ;
 
@@ -93,7 +96,7 @@ UCHAR XGINew_GetReg1( ULONG port , USHORT index )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-UCHAR XGINew_GetReg2( ULONG port )
+UCHAR XGINew_GetReg2( unsigned long port )
 {
     UCHAR data ;
 
@@ -109,9 +112,9 @@ UCHAR XGINew_GetReg2( ULONG port )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-ULONG XGINew_GetReg3( ULONG port )
+unsigned long XGINew_GetReg3( unsigned long port )
 {
-    ULONG data ;
+    unsigned long data ;
 
     data = inl(port) ;
 
@@ -126,9 +129,9 @@ ULONG XGINew_GetReg3( ULONG port )
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_SetRegANDOR( ULONG Port , USHORT Index , USHORT DataAND , USHORT DataOR )
+void XGINew_SetRegANDOR( unsigned long Port , unsigned short Index , unsigned short DataAND , unsigned short DataOR )
 {
-    USHORT temp ;
+    unsigned short temp ;
 
     temp = XGINew_GetReg1( Port , Index ) ;		/* XGINew_Part1Port index 02 */
     temp = ( temp &amp; ( DataAND ) ) | DataOR ;
@@ -142,9 +145,9 @@ void XGINew_SetRegANDOR( ULONG Port , USHORT Index , USHORT DataAND , USHORT Dat
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_SetRegAND(ULONG Port,USHORT Index,USHORT DataAND)
+void XGINew_SetRegAND(unsigned long Port,unsigned short Index,unsigned short DataAND)
 {
-    USHORT temp ;
+    unsigned short temp ;
 
     temp = XGINew_GetReg1( Port , Index ) ;	/* XGINew_Part1Port index 02 */
     temp &amp;= DataAND ;
@@ -158,9 +161,9 @@ void XGINew_SetRegAND(ULONG Port,USHORT Index,USHORT DataAND)
 /* Output : */
 /* Description : */
 /* --------------------------------------------------------------------- */
-void XGINew_SetRegOR( ULONG Port , USHORT Index , USHORT DataOR )
+void XGINew_SetRegOR( unsigned long Port , unsigned short Index , unsigned short DataOR )
 {
-    USHORT temp ;
+    unsigned short temp ;
 
     temp = XGINew_GetReg1( Port , Index ) ;	/* XGINew_Part1Port index 02 */
     temp |= DataOR ;
diff --git a/drivers/staging/xgifb/vb_util.h b/drivers/staging/xgifb/vb_util.h
index 91779d8cfdc6..aaaf361477ab 100644
--- a/drivers/staging/xgifb/vb_util.h
+++ b/drivers/staging/xgifb/vb_util.h
@@ -2,14 +2,14 @@
 #define _VBUTIL_
 extern   void     NewDelaySeconds( int );
 extern   void     Newdebugcode( UCHAR );
-extern   void     XGINew_SetReg1(ULONG, USHORT, USHORT);
-extern   void     XGINew_SetReg3(ULONG, USHORT);
-extern   UCHAR    XGINew_GetReg1(ULONG, USHORT);
-extern   UCHAR    XGINew_GetReg2(ULONG);
-extern   void     XGINew_SetReg4(ULONG, ULONG);
-extern   ULONG    XGINew_GetReg3(ULONG);
-extern   void     XGINew_SetRegOR(ULONG Port,USHORT Index,USHORT DataOR);
-extern   void     XGINew_SetRegAND(ULONG Port,USHORT Index,USHORT DataAND);
-extern   void     XGINew_SetRegANDOR(ULONG Port,USHORT Index,USHORT DataAND,USHORT DataOR);
+extern   void     XGINew_SetReg1(unsigned long, unsigned short, unsigned short);
+extern   void     XGINew_SetReg3(unsigned long, unsigned short);
+extern   UCHAR    XGINew_GetReg1(unsigned long, unsigned short);
+extern   UCHAR    XGINew_GetReg2(unsigned long);
+extern   void     XGINew_SetReg4(unsigned long, unsigned long);
+extern   unsigned long    XGINew_GetReg3(unsigned long);
+extern   void     XGINew_SetRegOR(unsigned long Port,unsigned short Index,unsigned short DataOR);
+extern   void     XGINew_SetRegAND(unsigned long Port,unsigned short Index,unsigned short DataAND);
+extern   void     XGINew_SetRegANDOR(unsigned long Port,unsigned short Index,unsigned short DataAND,unsigned short DataOR);
 #endif
 
diff --git a/drivers/staging/xgifb/vgatypes.h b/drivers/staging/xgifb/vgatypes.h
index 0d5472ec9297..a85f21a7aebc 100644
--- a/drivers/staging/xgifb/vgatypes.h
+++ b/drivers/staging/xgifb/vgatypes.h
@@ -20,26 +20,6 @@ typedef long  LONG;
 typedef unsigned char UCHAR;
 #endif
 
-#ifndef USHORT
-typedef unsigned short USHORT;
-#endif
-
-#ifndef ULONG
-typedef unsigned long ULONG;
-#endif
-
-#ifndef VOID
-typedef void VOID;
-#endif
-
-#ifndef BOOLEAN
-typedef UCHAR BOOLEAN;
-#endif
-/*
-#ifndef bool
-typedef UCHAR bool;
-#endif
-*/
 typedef unsigned long XGIIOADDRESS;
 
 
@@ -103,30 +83,30 @@ typedef struct _XGI_DSReg
 
 typedef struct _XGI_HW_DEVICE_INFO  XGI_HW_DEVICE_INFO, *PXGI_HW_DEVICE_INFO;
 
-typedef BOOLEAN (*PXGI_QUERYSPACE)   (PXGI_HW_DEVICE_INFO, ULONG, ULONG, ULONG *);
+typedef unsigned char (*PXGI_QUERYSPACE)   (PXGI_HW_DEVICE_INFO, unsigned long, unsigned long, unsigned long *);
 
 struct _XGI_HW_DEVICE_INFO
 {
-    ULONG  ulExternalChip;       /* NO VB or other video bridge*/
+    unsigned long  ulExternalChip;       /* NO VB or other video bridge*/
                                  /* if ujVBChipID = VB_CHIP_UNKNOWN, */
 
     unsigned char *pjVirtualRomBase;    /* ROM image */
 
-    BOOLEAN UseROM;		 /* Use the ROM image if provided */
+    unsigned char UseROM;		 /* Use the ROM image if provided */
 
     void *pDevice;
 
     unsigned char *pjVideoMemoryAddress;/* base virtual memory address */
                                  /* of Linear VGA memory */
 
-    ULONG  ulVideoMemorySize;    /* size, in bytes, of the memory on the board */
+    unsigned long  ulVideoMemorySize;    /* size, in bytes, of the memory on the board */
 
     unsigned char *pjIOAddress;          /* base I/O address of VGA ports (0x3B0) */
 
     unsigned char *pjCustomizedROMImage;
 
     unsigned char *pj2ndVideoMemoryAddress;
-    ULONG  ul2ndVideoMemorySize;
+    unsigned long  ul2ndVideoMemorySize;
 
     unsigned char *pj2ndIOAddress;
     UCHAR  jChipType;            /* Used to Identify Graphics Chip */
@@ -139,20 +119,20 @@ struct _XGI_HW_DEVICE_INFO
                                  /* defined in the data structure type */
                                  /* "XGI_VB_CHIP_TYPE" */
 
-    BOOLEAN    bNewScratch;
+    unsigned char    bNewScratch;
 
-    ULONG  ulCRT2LCDType;        /* defined in the data structure type */
+    unsigned long  ulCRT2LCDType;        /* defined in the data structure type */
 
-    ULONG usExternalChip;       /* NO VB or other video bridge (other than  */
+    unsigned long usExternalChip;       /* NO VB or other video bridge (other than  */
                                  /*  video bridge) */
 
-    BOOLEAN bIntegratedMMEnabled;/* supporting integration MM enable */
+    unsigned char bIntegratedMMEnabled;/* supporting integration MM enable */
 
-    BOOLEAN bSkipDramSizing;     /* True: Skip video memory sizing. */
+    unsigned char bSkipDramSizing;     /* True: Skip video memory sizing. */
 
-    BOOLEAN bSkipSense;
+    unsigned char bSkipSense;
 
-    BOOLEAN bIsPowerSaving;     /* True: XGIInit() is invoked by power management,
+    unsigned char bIsPowerSaving;     /* True: XGIInit() is invoked by power management,
                                    otherwise by 2nd adapter's initialzation */
 
     PXGI_DSReg  pSR;             /* restore SR registers in initial function. */</pre><hr><pre>commit 490ce818c6ff60257b543207aa042991e32017af
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Jun 17 13:10:45 2010 -0400

    Staging: xgifb: Remove unused code
    
    Remove code that was removed using #if 0
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Arnaud Patard &lt;apatard@mandriva.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/xgifb/XGI_accel.c b/drivers/staging/xgifb/XGI_accel.c
index 85af55c32091..feda029fa82a 100644
--- a/drivers/staging/xgifb/XGI_accel.c
+++ b/drivers/staging/xgifb/XGI_accel.c
@@ -97,102 +97,12 @@ static const unsigned char myrops[] = {
    };
 
 /* 300 series */
-#if 0
-static void
-XGI300Sync(void)
-{
-	XGI300Idle
-}
-#endif
 static void
 XGI310Sync(void)
 {
 	XGI310Idle
 }
-#if 0
-static void
-XGI300SetupForScreenToScreenCopy(int xdir, int ydir, int rop,
-                                unsigned int planemask, int trans_color)
-{
-	XGI300SetupDSTColorDepth(xgi_video_info.DstColor);
-	XGI300SetupSRCPitch(xgi_video_info.video_linelength)
-	XGI300SetupDSTRect(xgi_video_info.video_linelength, 0xFFF)
-
-	if(trans_color != -1) {
-		XGI300SetupROP(0x0A)
-		XGI300SetupSRCTrans(trans_color)
-		XGI300SetupCMDFlag(TRANSPARENT_BITBLT)
-	} else {
-	        XGI300SetupROP(XGIALUConv[rop])
-	}
-	if(xdir &gt; 0) {
-		XGI300SetupCMDFlag(X_INC)
-	}
-	if(ydir &gt; 0) {
-		XGI300SetupCMDFlag(Y_INC)
-	}
-}
-
-static void
-XGI300SubsequentScreenToScreenCopy(int src_x, int src_y, int dst_x, int dst_y,
-                                int width, int height)
-{
-	long srcbase, dstbase;
-
-	srcbase = dstbase = 0;
-	if (src_y &gt;= 2048) {
-		srcbase = xgi_video_info.video_linelength * src_y;
-		src_y = 0;
-	}
-	if (dst_y &gt;= 2048) {
-		dstbase = xgi_video_info.video_linelength * dst_y;
-		dst_y = 0;
-	}
 
-	XGI300SetupSRCBase(srcbase);
-	XGI300SetupDSTBase(dstbase);
-
-	if(!(xgi_video_info.CommandReg &amp; X_INC))  {
-		src_x += width-1;
-		dst_x += width-1;
-	}
-	if(!(xgi_video_info.CommandReg &amp; Y_INC))  {
-		src_y += height-1;
-		dst_y += height-1;
-	}
-	XGI300SetupRect(width, height)
-	XGI300SetupSRCXY(src_x, src_y)
-	XGI300SetupDSTXY(dst_x, dst_y)
-	XGI300DoCMD
-}
-
-static void
-XGI300SetupForSolidFill(int color, int rop, unsigned int planemask)
-{
-	XGI300SetupPATFG(color)
-	XGI300SetupDSTRect(xgi_video_info.video_linelength, 0xFFF)
-	XGI300SetupDSTColorDepth(xgi_video_info.DstColor);
-	XGI300SetupROP(XGIPatALUConv[rop])
-	XGI300SetupCMDFlag(PATFG)
-}
-
-static void
-XGI300SubsequentSolidFillRect(int x, int y, int w, int h)
-{
-	long dstbase;
-
-	dstbase = 0;
-	if(y &gt;= 2048) {
-		dstbase = xgi_video_info.video_linelength * y;
-		y = 0;
-	}
-	XGI300SetupDSTBase(dstbase)
-	XGI300SetupDSTXY(x,y)
-	XGI300SetupRect(w,h)
-	XGI300SetupCMDFlag(X_INC | Y_INC | BITBLT)
-	XGI300DoCMD
-}
-#endif
 /* 310/325 series ------------------------------------------------ */
 
 static void
diff --git a/drivers/staging/xgifb/XGI_main.h b/drivers/staging/xgifb/XGI_main.h
index a3862a98803e..7c643a6a0632 100644
--- a/drivers/staging/xgifb/XGI_main.h
+++ b/drivers/staging/xgifb/XGI_main.h
@@ -805,10 +805,6 @@ extern void     fbcon_XGI_fillrect(struct fb_info *info,
                                    const struct fb_fillrect *rect);
 extern void     fbcon_XGI_copyarea(struct fb_info *info,
                                    const struct fb_copyarea *area);
-#if 0
-extern void     cfb_imageblit(struct fb_info *info,
-                              const struct fb_image *image);
-#endif
 extern int      fbcon_XGI_sync(struct fb_info *info);
 
 static int XGIfb_ioctl(struct fb_info *info, unsigned int cmd,
diff --git a/drivers/staging/xgifb/XGI_main_26.c b/drivers/staging/xgifb/XGI_main_26.c
index c3483b60cf31..e3f837337fba 100644
--- a/drivers/staging/xgifb/XGI_main_26.c
+++ b/drivers/staging/xgifb/XGI_main_26.c
@@ -371,18 +371,6 @@ XGIfb_mode_rate_to_ddata(VB_DEVICE_INFO *XGI_Pr, PXGI_HW_DEVICE_INFO HwDeviceExt
       }
     }
 
-#if 0  /* That's bullshit, only the resolution needs to be shifted */
-    if((*vmode &amp; FB_VMODE_MASK) == FB_VMODE_INTERLACED) {
-       *upper_margin &lt;&lt;= 1;
-       *lower_margin &lt;&lt;= 1;
-       *vsync_len &lt;&lt;= 1;
-    } else if((*vmode &amp; FB_VMODE_MASK) == FB_VMODE_DOUBLE) {
-       *upper_margin &gt;&gt;= 1;
-       *lower_margin &gt;&gt;= 1;
-       *vsync_len &gt;&gt;= 1;
-    }
-#endif
-
     return 1;
 }
 
@@ -1537,58 +1525,7 @@ static int XGIfb_pan_display( struct fb_var_screeninfo *var,
 }
 #endif
 
-#if 0
-static int XGIfb_mmap(struct fb_info *info, struct file *file,
-		      struct vm_area_struct *vma)
-{
-	unsigned long start;
-	unsigned long off;
-	u32 len, mmio_off;
-
-	DEBUGPRN("inside mmap");
-	if(vma-&gt;vm_pgoff &gt; (~0UL &gt;&gt; PAGE_SHIFT))  return -EINVAL;
-
-	off = vma-&gt;vm_pgoff &lt;&lt; PAGE_SHIFT;
 
-	start = (unsigned long) xgi_video_info.video_base;
-	len = PAGE_ALIGN((start &amp; ~PAGE_MASK) + xgi_video_info.video_size);
-	start &amp;= PAGE_MASK;
-#if 0
-	if (off &gt;= len) {
-		off -= len;
-#endif
-	/* By Jake Page: Treat mmap request with offset beyond heapstart
-	 *               as request for mapping the mmio area
-	 */
-	#if 1
-	mmio_off = PAGE_ALIGN((start &amp; ~PAGE_MASK) + xgi_video_info.heapstart);
-	if(off &gt;= mmio_off) {
-		off -= mmio_off;
-		if(info-&gt;var.accel_flags) return -EINVAL;
-
-		start = (unsigned long) xgi_video_info.mmio_base;
-		len = PAGE_ALIGN((start &amp; ~PAGE_MASK) + XGIfb_mmio_size);
-	}
-	start &amp;= PAGE_MASK;
-	#endif
-	if((vma-&gt;vm_end - vma-&gt;vm_start + off) &gt; len)	return -EINVAL;
-
-	off += start;
-	vma-&gt;vm_pgoff = off &gt;&gt; PAGE_SHIFT;
-	vma-&gt;vm_flags |= VM_IO;   /* by Jake Page; is that really needed? */
-
-#if defined(__i386__) || defined(__x86_64__)
-	if (boot_cpu_data.x86 &gt; 3)
-		pgprot_val(vma-&gt;vm_page_prot) |= _PAGE_PCD;
-#endif
-	if (io_remap_pfn_range(vma, vma-&gt;vm_start, off &gt;&gt; PAGE_SHIFT, vma-&gt;vm_end - vma-&gt;vm_start,
-				vma-&gt;vm_page_prot))
-		return -EAGAIN;
-
-        DEBUGPRN("end of mmap");
-	return 0;
-}
-#endif
 static int XGIfb_blank(int blank, struct fb_info *info)
 {
 	u8 reg;
@@ -2652,12 +2589,6 @@ static void XGIfb_post_setmode(void)
 {
 	u8 reg;
 	BOOLEAN doit = 1;
-#if 0	/* TW: Wrong: Is not in MMIO space, but in RAM */
-	/* Backup mode number to MMIO space */
-	if(xgi_video_info.mmio_vbase) {
-	  *(volatile u8 *)(((u8*)xgi_video_info.mmio_vbase) + 0x449) = (unsigned char)XGIfb_mode_no;
-	}
-#endif
 /*	outXGIIDXREG(XGISR,IND_XGI_PASSWORD,XGI_PASSWORD);
 	outXGIIDXREG(XGICR,0x13,0x00);
 	setXGIIDXREG(XGISR,0x0E,0xF0,0x01);
@@ -3445,20 +3376,6 @@ int __devinit xgifb_probe(struct pci_dev *pdev, const struct pci_device_id *ent)
 
 	        }
 
-
-#if 0
-#ifdef XGIFB_PAN
-		if(XGIfb_ypan) {
-	    		default_var.yres_virtual =
-				xgi_video_info.heapstart / (default_var.xres * (default_var.bits_per_pixel &gt;&gt; 3));
-	    		if(default_var.yres_virtual &lt;= default_var.yres) {
-	        		default_var.yres_virtual = default_var.yres;
-	    		}
-		}
-#endif
-#endif
-
-
 		xgi_video_info.accel = 0;
 		if(XGIfb_accel) {
 		   xgi_video_info.accel = -1;
diff --git a/drivers/staging/xgifb/vb_init.c b/drivers/staging/xgifb/vb_init.c
index 04e6f6ef922e..2abdd24ef52b 100644
--- a/drivers/staging/xgifb/vb_init.c
+++ b/drivers/staging/xgifb/vb_init.c
@@ -476,15 +476,6 @@ printk("19");
         }   	/* SkipDramSizing */
         else
         {
-#if 0
-           if ( HwDeviceExtension-&gt;jChipType == XG20 )
-            {
-            	XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x13 , pVBInfo-&gt;SR15[0][XGINew_RAMType] ) ;
-                XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x14 , pVBInfo-&gt;SR15[1][XGINew_RAMType] ) ;
-                XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x20 , 0x20 ) ;
-            }
-            else
-#endif
 {
 printk("20");
 
@@ -2700,195 +2691,6 @@ void ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo)
 	volatile unsigned char *pVideoMemory = (unsigned char *)pVBInfo-&gt;ROMAddr;
     ULONG   i ;
     UCHAR   j , k ;
-#if 0
-    ULONG   ii , jj ;
-    i = pVideoMemory[ 0x1CF ] | ( pVideoMemory[ 0x1D0 ] &lt;&lt; 8 ) ;		/* UniROM */
-    if ( i != 0 )
-        UNIROM = 1 ;
-
-    ii = 0x90 ;
-    for( jj = 0x00 ; jj &lt; 0x08 ; jj++ )
-    {
-        pVBInfo-&gt;MCLKData[ jj ].SR28 = pVideoMemory[ ii ] ;
-        pVBInfo-&gt;MCLKData[ jj ].SR29 = pVideoMemory[ ii + 1] ;
-        pVBInfo-&gt;MCLKData[ jj ].SR2A = pVideoMemory[ ii + 2] ;
-        pVBInfo-&gt;MCLKData[ jj ].CLOCK = pVideoMemory[ ii + 3 ] | ( pVideoMemory[ ii + 4 ] &lt;&lt; 8 ) ;
-        ii += 0x05 ;
-    }
-
-    ii = 0xB8 ;
-    for( jj = 0x00 ; jj &lt; 0x08 ; jj++ )
-    {
-        pVBInfo-&gt;ECLKData[ jj ].SR2E = pVideoMemory[ ii ] ;
-        pVBInfo-&gt;ECLKData[ jj ].SR2F=pVideoMemory[ ii + 1 ] ;
-        pVBInfo-&gt;ECLKData[ jj ].SR30= pVideoMemory[ ii + 2 ] ;
-        pVBInfo-&gt;ECLKData[ jj ].CLOCK= pVideoMemory[ ii + 3 ] | ( pVideoMemory[ ii + 4 ] &lt;&lt; 8 ) ;
-        ii += 0x05 ;
-    }
-
-    /* Volari customize data area start */
-    /* if ( ChipType == XG40 ) */
-    if ( ChipType &gt;= XG40 )
-    {
-        ii = 0xE0 ;
-        for( jj = 0x00 ; jj &lt; 0x03 ; jj++ )
-        {
-            pVBInfo-&gt;SR15[ jj ][ 0 ] = pVideoMemory[ ii ] ;		/* SR13, SR14, and SR18 */
-            pVBInfo-&gt;SR15[ jj ][ 1 ] = pVideoMemory[ ii + 1 ] ;
-            pVBInfo-&gt;SR15[ jj ][ 2 ] = pVideoMemory[ ii + 2 ] ;
-            pVBInfo-&gt;SR15[ jj ][ 3 ] = pVideoMemory[ ii + 3 ] ;
-            pVBInfo-&gt;SR15[ jj ][ 4 ] = pVideoMemory[ ii + 4 ] ;
-            pVBInfo-&gt;SR15[ jj ][ 5 ] = pVideoMemory[ ii + 5 ] ;
-            pVBInfo-&gt;SR15[ jj ][ 6 ] = pVideoMemory[ ii + 6 ] ;
-            pVBInfo-&gt;SR15[ jj ][ 7 ] = pVideoMemory[ ii + 7 ] ;
-            ii += 0x08 ;
-        }
-        ii = 0x110 ;
-        jj = 0x03 ;
-        pVBInfo-&gt;SR15[ jj ][ 0 ] = pVideoMemory[ ii ] ;		/* SR1B */
-        pVBInfo-&gt;SR15[ jj ][ 1 ] = pVideoMemory[ ii + 1 ] ;
-        pVBInfo-&gt;SR15[ jj ][ 2 ] = pVideoMemory[ ii + 2 ] ;
-        pVBInfo-&gt;SR15[ jj ][ 3 ] = pVideoMemory[ ii + 3 ] ;
-        pVBInfo-&gt;SR15[ jj ][ 4 ] = pVideoMemory[ ii + 4 ] ;
-        pVBInfo-&gt;SR15[ jj ][ 5 ] = pVideoMemory[ ii + 5 ] ;
-        pVBInfo-&gt;SR15[ jj ][ 6 ] = pVideoMemory[ ii + 6 ] ;
-        pVBInfo-&gt;SR15[ jj ][ 7 ] = pVideoMemory[ ii + 7 ] ;
-
-        *pVBInfo-&gt;pSR07 = pVideoMemory[ 0x74 ] ;
-        *pVBInfo-&gt;pSR1F = pVideoMemory[ 0x75 ] ;
-        *pVBInfo-&gt;pSR21 = pVideoMemory[ 0x76 ] ;
-        *pVBInfo-&gt;pSR22 = pVideoMemory[ 0x77 ] ;
-        *pVBInfo-&gt;pSR23 = pVideoMemory[ 0x78 ] ;
-        *pVBInfo-&gt;pSR24 = pVideoMemory[ 0x79 ] ;
-        pVBInfo-&gt;SR25[ 0 ] = pVideoMemory[ 0x7A ] ;
-        *pVBInfo-&gt;pSR31 = pVideoMemory[ 0x7B ] ;
-        *pVBInfo-&gt;pSR32 = pVideoMemory[ 0x7C ] ;
-        *pVBInfo-&gt;pSR33 = pVideoMemory[ 0x7D ] ;
-        ii = 0xF8 ;
-
-        for( jj = 0 ; jj &lt; 3 ; jj++ )
-        {
-            pVBInfo-&gt;CR40[ jj ][ 0 ] = pVideoMemory[ ii ] ;
-            pVBInfo-&gt;CR40[ jj ][ 1 ] = pVideoMemory[ ii + 1 ] ;
-            pVBInfo-&gt;CR40[ jj ][ 2 ] = pVideoMemory[ ii + 2 ] ;
-            pVBInfo-&gt;CR40[ jj ][ 3 ] = pVideoMemory[ ii + 3 ] ;
-            pVBInfo-&gt;CR40[ jj ][ 4 ] = pVideoMemory[ ii + 4 ] ;
-            pVBInfo-&gt;CR40[ jj ][ 5 ] = pVideoMemory[ ii + 5 ] ;
-            pVBInfo-&gt;CR40[ jj ][ 6 ] = pVideoMemory[ ii + 6 ] ;
-            pVBInfo-&gt;CR40[ jj ][ 7 ] = pVideoMemory[ ii + 7 ] ;
-            ii += 0x08 ;
-        }
-
-        ii = 0x118 ;
-        for( j = 3 ; j &lt; 24 ; j++ )
-        {
-            pVBInfo-&gt;CR40[ j ][ 0 ] = pVideoMemory[ ii ] ;
-            pVBInfo-&gt;CR40[ j ][ 1 ] = pVideoMemory[ ii + 1 ] ;
-            pVBInfo-&gt;CR40[ j ][ 2 ] = pVideoMemory[ ii + 2 ] ;
-            pVBInfo-&gt;CR40[ j ][ 3 ] = pVideoMemory[ ii + 3 ] ;
-            pVBInfo-&gt;CR40[ j ][ 4 ] = pVideoMemory[ ii + 4 ] ;
-            pVBInfo-&gt;CR40[ j ][ 5 ] = pVideoMemory[ ii + 5 ] ;
-            pVBInfo-&gt;CR40[ j ][ 6 ] = pVideoMemory[ ii + 6 ] ;
-            pVBInfo-&gt;CR40[ j ][ 7 ] = pVideoMemory[ ii + 7 ] ;
-            ii += 0x08 ;
-        }
-
-        i = pVideoMemory[ 0x1C0 ] | ( pVideoMemory[ 0x1C1 ] &lt;&lt; 8 ) ;
-
-        for( j = 0 ; j &lt; 8 ; j++ )
-        {
-            for( k = 0 ; k &lt; 4 ; k++ )
-                pVBInfo-&gt;CR6B[ j ][ k ] = pVideoMemory[ i + 4 * j + k ] ;
-        }
-
-        i = pVideoMemory[ 0x1C2 ] | ( pVideoMemory[ 0x1C3 ] &lt;&lt; 8 ) ;
-
-        for( j = 0 ; j &lt; 8 ; j++ )
-        {
-            for( k = 0 ; k &lt; 4 ; k++ )
-                pVBInfo-&gt;CR6E[ j ][ k ] = pVideoMemory[ i + 4 * j + k ] ;
-        }
-
-        i = pVideoMemory[ 0x1C4 ] | ( pVideoMemory[ 0x1C5 ] &lt;&lt; 8 ) ;
-        for( j = 0 ; j &lt; 8 ; j++ )
-        {
-            for( k = 0 ; k &lt; 32 ; k++ )
-                pVBInfo-&gt;CR6F[ j ][ k ] = pVideoMemory[ i + 32 * j + k ] ;
-        }
-
-        i = pVideoMemory[ 0x1C6 ] | ( pVideoMemory[ 0x1C7 ] &lt;&lt; 8 ) ;
-
-        for( j = 0 ; j &lt; 8 ; j++ )
-        {
-            for( k = 0 ; k &lt; 2 ; k++ )
-                pVBInfo-&gt;CR89[ j ][ k ] = pVideoMemory[ i + 2 * j + k ] ;
-        }
-
-        i = pVideoMemory[ 0x1C8 ] | ( pVideoMemory[ 0x1C9 ] &lt;&lt; 8 ) ;
-        for( j = 0 ; j &lt; 12 ; j++ )
-            pVBInfo-&gt;AGPReg[ j ] = pVideoMemory[ i + j ] ;
-
-        i = pVideoMemory[ 0x1CF ] | ( pVideoMemory[ 0x1D0 ] &lt;&lt; 8 ) ;
-        for( j = 0 ; j &lt; 4 ; j++ )
-            pVBInfo-&gt;SR16[ j ] = pVideoMemory[ i + j ] ;
-
-        if ( ChipType == XG21 )
-        {
-            if (pVideoMemory[ 0x67 ] &amp; 0x80)
-            {
-                *pVBInfo-&gt;pDVOSetting = pVideoMemory[ 0x67 ];
-            }
-            if ( (pVideoMemory[ 0x67 ] &amp; 0xC0) == 0xC0 )
-            {
-                *pVBInfo-&gt;pCR2E = pVideoMemory[ i + 4 ] ;
-                *pVBInfo-&gt;pCR2F = pVideoMemory[ i + 5 ] ;
-                *pVBInfo-&gt;pCR46 = pVideoMemory[ i + 6 ] ;
-                *pVBInfo-&gt;pCR47 = pVideoMemory[ i + 7 ] ;
-            }
-        }
-
-        if ( ChipType == XG27 )
-        {
-            jj = i+j;
-            for( i = 0 ; i &lt;= 0xB ; i++,jj++ )
-              pVBInfo-&gt;pCRD0[i] = pVideoMemory[ jj ] ;
-            for( i = 0x0 ; i &lt;= 0x1 ; i++,jj++ )
-              pVBInfo-&gt;pCRDE[i] = pVideoMemory[ jj ] ;
-
-            *pVBInfo-&gt;pSR40 = pVideoMemory[ jj ] ;
-            jj++;
-            *pVBInfo-&gt;pSR41 = pVideoMemory[ jj ] ;
-
-            if (pVideoMemory[ 0x67 ] &amp; 0x80)
-            {
-                *pVBInfo-&gt;pDVOSetting = pVideoMemory[ 0x67 ];
-            }
-            if ( (pVideoMemory[ 0x67 ] &amp; 0xC0) == 0xC0 )
-            {
-                jj++;
-                *pVBInfo-&gt;pCR2E = pVideoMemory[ jj ] ;
-                *pVBInfo-&gt;pCR2F = pVideoMemory[ jj + 1 ] ;
-                *pVBInfo-&gt;pCR46 = pVideoMemory[ jj + 2 ] ;
-                *pVBInfo-&gt;pCR47 = pVideoMemory[ jj + 3 ] ;
-            }
-
-        }
-
-        *pVBInfo-&gt;pCRCF = pVideoMemory[ 0x1CA ] ;
-        *pVBInfo-&gt;pXGINew_DRAMTypeDefinition = pVideoMemory[ 0x1CB ] ;
-        *pVBInfo-&gt;pXGINew_I2CDefinition = pVideoMemory[ 0x1D1 ] ;
-        if ( ChipType &gt;= XG20 )
-        {
-           *pVBInfo-&gt;pXGINew_CR97 = pVideoMemory[ 0x1D2 ] ;
-           if ( ChipType == XG27 )
-           {
-             *pVBInfo-&gt;pSR36 = pVideoMemory[ 0x1D3 ] ;
-             *pVBInfo-&gt;pCR8F = pVideoMemory[ 0x1D5 ] ;
-           }
-        }
-
-    }
-#endif
     /* Volari customize data area end */
 
     if ( ChipType == XG21 )
diff --git a/drivers/staging/xgifb/vb_setmode.c b/drivers/staging/xgifb/vb_setmode.c
index 662ca77f79e4..4a2fa32e7d94 100644
--- a/drivers/staging/xgifb/vb_setmode.c
+++ b/drivers/staging/xgifb/vb_setmode.c
@@ -2579,53 +2579,6 @@ void XGI_WriteDAC( USHORT dl , USHORT ah , USHORT al , USHORT dh,PVB_DEVICE_INFO
     XGINew_SetReg3( pVBInfo-&gt;P3c9 , ( USHORT )bl ) ;
 }
 
-#if 0
-/* --------------------------------------------------------------------- */
-/* Function : XGI_ClearBuffer */
-/* Input : */
-/* Output : */
-/* Description : */
-/* --------------------------------------------------------------------- */
-void XGI_ClearBuffer( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo, PVB_DEVICE_INFO  pVBInfo)
-{
-    void *VideoMemoryAddress = (void *)HwDeviceExtension-&gt;pjVideoMemoryAddress;
-    ULONG AdapterMemorySize  = ( ULONG )HwDeviceExtension-&gt;ulVideoMemorySize ;
-    unsigned short *pBuffer ;
-    int i ;
-
-    if ( pVBInfo-&gt;ModeType &gt;= ModeEGA )
-    {
-        if ( ModeNo &gt; 0x13 )
-        {
-            AdapterMemorySize = 0x40000 ;	/* clear 256k */
-            /* GetDRAMSize( HwDeviceExtension ) ; */
-	    memset(VideoMemoryAddress, 0, AdapterMemorySize);
-        }
-        else
-        {
-/*
-            pBuffer = VideoMemoryAddress ;
-            for( i = 0 ; i &lt; 0x4000 ; i++ )
-                pBuffer[ i ] = 0x0000 ;
-*/
-        }
-    }
-    else
-    {
-        pBuffer = VideoMemoryAddress ;
-        if ( pVBInfo-&gt;ModeType &lt; ModeCGA )
-        {
-/*
-            for ( i = 0 ; i &lt; 0x4000 ; i++ )
-                pBuffer[ i ] = 0x0720 ;
-*/
-        }
-        else
-		memset(VideoMemoryAddress , 0, 0x8000);
-    }
-}
-
-#endif
 /* --------------------------------------------------------------------- */
 /* Function : XGI_SetLCDAGroup */
 /* Input : */
diff --git a/drivers/staging/xgifb/vb_table.h b/drivers/staging/xgifb/vb_table.h
index 781caefc56b1..f804dfac6902 100644
--- a/drivers/staging/xgifb/vb_table.h
+++ b/drivers/staging/xgifb/vb_table.h
@@ -126,36 +126,6 @@ UCHAR XGI27_cr41[24][8]=
 {0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}/* 23 CRC5 */
 };
 
-
-#if 0
-UCHAR XGI27_cr41[24][8]=
-{
-{0x20,0x60,0x60,0x00,0x00,0x00,0x00,0x00},/* 0 CR41 */
-{0x04,0x44,0x84,0x00,0x00,0x00,0x00,0x00},/* 1 CR8A */
-{0x04,0x40,0x84,0x00,0x00,0x00,0x00,0x00},/* 2 CR8B */
-{0xb5,0x03,0xa4,0x00,0x00,0x00,0x00,0x00},/* 3 CR40[7],CR99[2:0],CR45[3:0]*/
-{0xf0,0xf5,0xf0,0x00,0x00,0x00,0x00,0x00},/* 4 CR59 */
-{0xa4,0x1C,0x24,0x00,0x00,0x00,0x00,0x00},/* 5 CR68 */
-{0x77,0x77,0x44,0x00,0x00,0x00,0x00,0x00},/* 6 CR69 */
-{0x77,0x77,0x44,0x00,0x00,0x00,0x00,0x00},/* 7 CR6A */
-{0xff,0xff,0xff,0x00,0x00,0x00,0x00,0x00},/* 8 CR6D */
-{0x55,0x55,0x55,0x00,0x00,0x00,0x00,0x00},/* 9 CR80 */
-{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/* 10 CR81 */
-{0x48,0xa8,0x48,0x00,0x00,0x00,0x00,0x00},/* 11 CR82 */
-{0x77,0x88,0x77,0x00,0x00,0x00,0x00,0x00},/* 12 CR85 */
-{0x88,0x88,0x88,0x00,0x00,0x00,0x00,0x00},/* 13 CR86 */
-{0x44,0x32,0x44,0x00,0x00,0x00,0x00,0x00},/* 14 CR90 */
-{0x44,0x33,0x44,0x00,0x00,0x00,0x00,0x00},/* 15 CR91 */
-{0x07,0x07,0x07,0x00,0x00,0x00,0x00,0x00},/* 16 CR92 */
-{0x44,0x63,0x44,0x00,0x00,0x00,0x00,0x00},/* 17 CR93 */
-{0x0A,0x14,0x0A,0x00,0x00,0x00,0x00,0x00},/* 18 CR94 */
-{0x0C,0x0B,0x0C,0x00,0x00,0x00,0x00,0x00},/* 19 CR95 */
-{0x05,0x22,0x05,0x00,0x00,0x00,0x00,0x00},/* 20 CR96 */
-{0xf0,0xf0,0xf0,0x00,0x00,0x00,0x00,0x00},/* 21 CRC3 */
-{0x03,0x00,0x02,0x00,0x00,0x00,0x00,0x00},/* 22 CRC4 */
-{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00}/* 23 CRC5 */
-};
-#endif
 UCHAR XGI340_CR6B[8][4]={
 {0xaa,0xaa,0xaa,0xaa},
 {0xaa,0xaa,0xaa,0xaa},</pre><hr><pre>commit fc3678a6c0ee4eb59244a5ba2da58ca47fd20501
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Jun 17 13:10:44 2010 -0400

    Staging: xgifb: Remove PUSHORT, PLONGU, and PVOID typedefs
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Arnaud Patard &lt;apatard@mandriva.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/xgifb/vb_init.c b/drivers/staging/xgifb/vb_init.c
index 7d4beda828d3..04e6f6ef922e 100644
--- a/drivers/staging/xgifb/vb_init.c
+++ b/drivers/staging/xgifb/vb_init.c
@@ -1619,9 +1619,9 @@ void XGINew_SetDRAMSizingType( int index , USHORT DRAMTYPE_TABLE[][ 5 ] ,PVB_DEV
 void XGINew_CheckBusWidth_310(  PVB_DEVICE_INFO pVBInfo)
 {
     USHORT data ;
-    PULONG volatile pVideoMemory ;
+    volatile unsigned long *pVideoMemory ;
 
-    pVideoMemory = (PULONG) pVBInfo-&gt;FBAddr;
+    pVideoMemory = (unsigned long *) pVBInfo-&gt;FBAddr;
 
     if ( XGINew_Get310DRAMType( pVBInfo ) &lt; 2 )
     {
@@ -1832,17 +1832,17 @@ int XGINew_CheckColumn( int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INF
 
     for( i = 0 , Position = 0 ; i &lt; 2 ; i++ )
     {
-        *( ( PULONG )( pVBInfo-&gt;FBAddr + Position ) ) = Position ;
-        Position += Increment ;
+	    *((unsigned long *)(pVBInfo-&gt;FBAddr + Position)) = Position;
+	    Position += Increment ;
     }
 
 
     for( i = 0 , Position = 0 ; i &lt; 2 ; i++ )
     {
         /* if ( pVBInfo-&gt;FBAddr[ Position ] != Position ) */
-        if ( ( *( PULONG )( pVBInfo-&gt;FBAddr + Position ) ) != Position )
-            return( 0 ) ;
-        Position += Increment ;
+	    if ((*(unsigned long *)(pVBInfo-&gt;FBAddr + Position)) != Position)
+		    return 0;
+	    Position += Increment;
     }
     return( 1 ) ;
 }
@@ -1864,16 +1864,16 @@ int XGINew_CheckBanks( int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB_DEVICE_INFO
     for( i = 0 , Position = 0 ; i &lt; 4 ; i++ )
     {
         /* pVBInfo-&gt;FBAddr[ Position ] = Position ; */
-        *( ( PULONG )( pVBInfo-&gt;FBAddr + Position ) ) = Position ;
-        Position += Increment ;
+	    *((unsigned long *)(pVBInfo-&gt;FBAddr + Position)) = Position;
+	    Position += Increment ;
     }
 
     for( i = 0 , Position = 0 ; i &lt; 4 ; i++ )
     {
         /* if (pVBInfo-&gt;FBAddr[ Position ] != Position ) */
-        if ( ( *( PULONG )( pVBInfo-&gt;FBAddr + Position ) ) != Position )
-            return( 0 ) ;
-        Position += Increment ;
+	    if ((*(unsigned long *)(pVBInfo-&gt;FBAddr + Position)) != Position)
+		    return 0;
+	    Position += Increment;
     }
     return( 1 ) ;
 }
@@ -1896,18 +1896,18 @@ int XGINew_CheckRank( int RankNo , int index , USHORT DRAMTYPE_TABLE[][ 5 ], PVB
     for( i = 0 , Position = 0 ; i &lt; 2 ; i++ )
     {
         /* pVBInfo-&gt;FBAddr[ Position ] = Position ; */
-        /* *( ( PULONG )( pVBInfo-&gt;FBAddr ) ) = Position ; */
-        *( ( PULONG )( pVBInfo-&gt;FBAddr + Position ) ) = Position ;
-        Position += Increment ;
+        /* *( (unsigned long *)( pVBInfo-&gt;FBAddr ) ) = Position ; */
+	    *((unsigned long *)(pVBInfo-&gt;FBAddr + Position)) = Position;
+	    Position += Increment;
     }
 
     for( i = 0 , Position = 0 ; i &lt; 2 ; i++ )
     {
         /* if ( pVBInfo-&gt;FBAddr[ Position ] != Position ) */
-        /* if ( ( *( PULONG )( pVBInfo-&gt;FBAddr ) ) != Position ) */
-        if ( ( *( PULONG )( pVBInfo-&gt;FBAddr + Position ) ) != Position )
-            return( 0 ) ;
-        Position += Increment ;
+        /* if ( ( *(unsigned long *)( pVBInfo-&gt;FBAddr ) ) != Position ) */
+	    if ((*(unsigned long *)(pVBInfo-&gt;FBAddr + Position)) != Position)
+		    return 0;
+	    Position += Increment;
     }
     return( 1 );
 }
@@ -1930,18 +1930,18 @@ int XGINew_CheckDDRRank( int RankNo , int index , USHORT DRAMTYPE_TABLE[][ 5 ],
     Increment += Increment / 2 ;
 
     Position = 0;
-    *( ( PULONG )( pVBInfo-&gt;FBAddr + Position + 0 ) ) = 0x01234567 ;
-    *( ( PULONG )( pVBInfo-&gt;FBAddr + Position + 1 ) ) = 0x456789AB ;
-    *( ( PULONG )( pVBInfo-&gt;FBAddr + Position + 2 ) ) = 0x55555555 ;
-    *( ( PULONG )( pVBInfo-&gt;FBAddr + Position + 3 ) ) = 0x55555555 ;
-    *( ( PULONG )( pVBInfo-&gt;FBAddr + Position + 4 ) ) = 0xAAAAAAAA ;
-    *( ( PULONG )( pVBInfo-&gt;FBAddr + Position + 5 ) ) = 0xAAAAAAAA ;
-
-    if ( ( *( PULONG )( pVBInfo-&gt;FBAddr + 1 ) ) == 0x456789AB )
-        return( 1 ) ;
+    *((unsigned long *)(pVBInfo-&gt;FBAddr + Position + 0)) = 0x01234567;
+    *((unsigned long *)(pVBInfo-&gt;FBAddr + Position + 1)) = 0x456789AB;
+    *((unsigned long *)(pVBInfo-&gt;FBAddr + Position + 2)) = 0x55555555;
+    *((unsigned long *)(pVBInfo-&gt;FBAddr + Position + 3)) = 0x55555555;
+    *((unsigned long *)(pVBInfo-&gt;FBAddr + Position + 4)) = 0xAAAAAAAA;
+    *((unsigned long *)(pVBInfo-&gt;FBAddr + Position + 5)) = 0xAAAAAAAA;
 
-    if ( ( *( PULONG )( pVBInfo-&gt;FBAddr + 0 ) ) == 0x01234567 )
-        return( 0 ) ;
+    if ((*(unsigned long *)(pVBInfo-&gt;FBAddr + 1)) == 0x456789AB)
+	    return 1;
+
+    if ((*(unsigned long *)(pVBInfo-&gt;FBAddr + 0)) == 0x01234567)
+	    return 0;
 
     data = XGINew_GetReg1( pVBInfo-&gt;P3c4 , 0x14 ) ;
     data &amp;= 0xF3 ;
@@ -2147,26 +2147,26 @@ int XGINew_ReadWriteRest( USHORT StopAddr , USHORT StartAddr, PVB_DEVICE_INFO pV
     int i ;
     ULONG Position = 0 ;
 
-   *( ( PULONG )( pVBInfo-&gt;FBAddr + Position ) ) = Position ;
+    *((unsigned long *)(pVBInfo-&gt;FBAddr + Position)) = Position;
 
     for( i = StartAddr ; i &lt;= StopAddr ; i++ )
     {
         Position = 1 &lt;&lt; i ;
-        *( ( PULONG )( pVBInfo-&gt;FBAddr + Position ) ) = Position ;
+	*((unsigned long *)(pVBInfo-&gt;FBAddr + Position)) = Position;
     }
 
     DelayUS( 500 ) ;	/* [Vicent] 2004/04/16. Fix #1759 Memory Size error in Multi-Adapter. */
 
     Position = 0 ;
 
-   if ( ( *( PULONG )( pVBInfo-&gt;FBAddr + Position ) ) != Position )
-        return( 0 ) ;
+   if ((*(unsigned long *)(pVBInfo-&gt;FBAddr + Position)) != Position)
+	   return 0;
 
     for( i = StartAddr ; i &lt;= StopAddr ; i++ )
     {
         Position = 1 &lt;&lt; i ;
-        if ( ( *( PULONG )( pVBInfo-&gt;FBAddr + Position ) ) != Position )
-            return( 0 ) ;
+	if ((*(unsigned long *)(pVBInfo-&gt;FBAddr + Position)) != Position)
+		return 0;
     }
     return( 1 ) ;
 }
diff --git a/drivers/staging/xgifb/vb_setmode.c b/drivers/staging/xgifb/vb_setmode.c
index a0ccce07f125..662ca77f79e4 100644
--- a/drivers/staging/xgifb/vb_setmode.c
+++ b/drivers/staging/xgifb/vb_setmode.c
@@ -2588,9 +2588,9 @@ void XGI_WriteDAC( USHORT dl , USHORT ah , USHORT al , USHORT dh,PVB_DEVICE_INFO
 /* --------------------------------------------------------------------- */
 void XGI_ClearBuffer( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo, PVB_DEVICE_INFO  pVBInfo)
 {
-    PVOID VideoMemoryAddress = ( PVOID )HwDeviceExtension-&gt;pjVideoMemoryAddress ;
+    void *VideoMemoryAddress = (void *)HwDeviceExtension-&gt;pjVideoMemoryAddress;
     ULONG AdapterMemorySize  = ( ULONG )HwDeviceExtension-&gt;ulVideoMemorySize ;
-    PUSHORT pBuffer ;
+    unsigned short *pBuffer ;
     int i ;
 
     if ( pVBInfo-&gt;ModeType &gt;= ModeEGA )
diff --git a/drivers/staging/xgifb/vgatypes.h b/drivers/staging/xgifb/vgatypes.h
index ec4c83f7a7c4..0d5472ec9297 100644
--- a/drivers/staging/xgifb/vgatypes.h
+++ b/drivers/staging/xgifb/vgatypes.h
@@ -28,22 +28,10 @@ typedef unsigned short USHORT;
 typedef unsigned long ULONG;
 #endif
 
-#ifndef PUSHORT
-typedef USHORT *PUSHORT;
-#endif
-
-#ifndef PLONGU
-typedef ULONG *PULONG;
-#endif
-
 #ifndef VOID
 typedef void VOID;
 #endif
 
-#ifndef PVOID
-typedef void *PVOID;
-#endif
-
 #ifndef BOOLEAN
 typedef UCHAR BOOLEAN;
 #endif
@@ -126,7 +114,7 @@ struct _XGI_HW_DEVICE_INFO
 
     BOOLEAN UseROM;		 /* Use the ROM image if provided */
 
-    PVOID   pDevice;
+    void *pDevice;
 
     unsigned char *pjVideoMemoryAddress;/* base virtual memory address */
                                  /* of Linear VGA memory */</pre><hr><pre>commit 274afb73bd14558d8363898c51d4ee708bba73b7
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Jun 17 13:10:43 2010 -0400

    Staging: xgifb: Remove PUCHAR typedef
    
    PUCHAR was unsigned char *, use that instead
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Arnaud Patard &lt;apatard@mandriva.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/xgifb/XGI_main_26.c b/drivers/staging/xgifb/XGI_main_26.c
index 403b5d4c2b54..c3483b60cf31 100644
--- a/drivers/staging/xgifb/XGI_main_26.c
+++ b/drivers/staging/xgifb/XGI_main_26.c
@@ -2970,9 +2970,10 @@ int __devinit xgifb_probe(struct pci_dev *pdev, const struct pci_device_id *ent)
 	  xgi_video_info.mmio_base = pci_resource_start(pdev, 1);
 	  XGIfb_mmio_size =  pci_resource_len(pdev, 1);
 	  xgi_video_info.vga_base = pci_resource_start(pdev, 2) + 0x30;
-	  XGIhw_ext.pjIOAddress = (PUCHAR)xgi_video_info.vga_base;
+	  XGIhw_ext.pjIOAddress = (unsigned char *)xgi_video_info.vga_base;
 	  //XGI_Pr.RelIO  = ioremap(pci_resource_start(pdev, 2), 128) + 0x30;
-	  printk("XGIfb: Relocate IO address: %lx [%08lx] \n", (unsigned long)pci_resource_start(pdev, 2), XGI_Pr.RelIO);
+	  printk("XGIfb: Relocate IO address: %lx [%08lx]\n",
+		 (unsigned long)pci_resource_start(pdev, 2), XGI_Pr.RelIO);
 
 	  if (pci_enable_device(pdev))
 	          return -EIO;
diff --git a/drivers/staging/xgifb/vb_init.c b/drivers/staging/xgifb/vb_init.c
index da8f84fcf5e0..7d4beda828d3 100644
--- a/drivers/staging/xgifb/vb_init.c
+++ b/drivers/staging/xgifb/vb_init.c
@@ -127,7 +127,7 @@ BOOLEAN XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension )
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
     UCHAR   i , temp = 0 , temp1 ;
      //       VBIOSVersion[ 5 ] ;
-    PUCHAR  volatile pVideoMemory;
+    volatile unsigned char *pVideoMemory;
 
     /* ULONG j, k ; */
 
@@ -141,7 +141,7 @@ BOOLEAN XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension )
 
     pVBInfo-&gt;BaseAddr = (ULONG)HwDeviceExtension-&gt;pjIOAddress ;
 
-    pVideoMemory = ( PUCHAR )pVBInfo-&gt;ROMAddr;
+    pVideoMemory = (unsigned char *)pVBInfo-&gt;ROMAddr;
 
 
 //    Newdebugcode( 0x99 ) ;
@@ -1254,7 +1254,7 @@ void XGINew_DDR_MRS(PVB_DEVICE_INFO pVBInfo)
 {
     USHORT data ;
 
-    PUCHAR volatile pVideoMemory = ( PUCHAR )pVBInfo-&gt;ROMAddr ;
+    volatile unsigned char *pVideoMemory = (unsigned char *)pVBInfo-&gt;ROMAddr;
 
     /* SR16 &lt;- 1F,DF,2F,AF */
     /* yriver modified SR16 &lt;- 0F,DF,0F,AF */
@@ -1320,7 +1320,7 @@ void XGINew_DDR_MRS(PVB_DEVICE_INFO pVBInfo)
 /* --------------------------------------------------------------------- */
 void XGINew_VerifyMclk( PXGI_HW_DEVICE_INFO  HwDeviceExtension , PVB_DEVICE_INFO pVBInfo)
 {
-    PUCHAR pVideoMemory = pVBInfo-&gt;FBAddr ;
+    unsigned char *pVideoMemory = pVBInfo-&gt;FBAddr ;
     UCHAR i , j ;
     USHORT Temp , SR21 ;
 
@@ -2697,7 +2697,7 @@ void XGINew_InitVBIOSData(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
 /* --------------------------------------------------------------------- */
 void ReadVBIOSTablData( UCHAR ChipType , PVB_DEVICE_INFO pVBInfo)
 {
-    PUCHAR  volatile pVideoMemory = ( PUCHAR )pVBInfo-&gt;ROMAddr ;
+	volatile unsigned char *pVideoMemory = (unsigned char *)pVBInfo-&gt;ROMAddr;
     ULONG   i ;
     UCHAR   j , k ;
 #if 0
@@ -3279,7 +3279,7 @@ void XGINew_SetModeScratch ( PXGI_HW_DEVICE_INFO HwDeviceExtension , PVB_DEVICE_
 void XGINew_GetXG21Sense(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
 {
     UCHAR Temp;
-    PUCHAR  volatile pVideoMemory = ( PUCHAR )pVBInfo-&gt;ROMAddr ;
+    volatile unsigned char *pVideoMemory = (unsigned char *)pVBInfo-&gt;ROMAddr;
 
     pVBInfo-&gt;IF_DEF_LVDS = 0 ;
 
diff --git a/drivers/staging/xgifb/vb_struct.h b/drivers/staging/xgifb/vb_struct.h
index bb25c0e2785e..1ee619f65978 100644
--- a/drivers/staging/xgifb/vb_struct.h
+++ b/drivers/staging/xgifb/vb_struct.h
@@ -415,8 +415,8 @@ struct _VB_DEVICE_INFO
     USHORT   NewFlickerMode;
     USHORT   SelectCRT2Rate;
 
-    PUCHAR ROMAddr;
-    PUCHAR FBAddr;
+    unsigned char *ROMAddr;
+    unsigned char *FBAddr;
     ULONG BaseAddr;
     ULONG RelIO;
 
diff --git a/drivers/staging/xgifb/vb_util.c b/drivers/staging/xgifb/vb_util.c
index f83aee7ea90e..0842cb68b834 100644
--- a/drivers/staging/xgifb/vb_util.c
+++ b/drivers/staging/xgifb/vb_util.c
@@ -13,7 +13,7 @@ void XGINew_SetReg4( ULONG , ULONG ) ;
 UCHAR XGINew_GetReg1( ULONG , USHORT) ;
 UCHAR XGINew_GetReg2( ULONG ) ;
 ULONG XGINew_GetReg3( ULONG ) ;
-void XGINew_ClearDAC( PUCHAR ) ;
+void XGINew_ClearDAC(unsigned char *) ;
 void     XGINew_SetRegANDOR(ULONG Port,USHORT Index,USHORT DataAND,USHORT DataOR);
 void     XGINew_SetRegOR(ULONG Port,USHORT Index,USHORT DataOR);
 void     XGINew_SetRegAND(ULONG Port,USHORT Index,USHORT DataAND);
diff --git a/drivers/staging/xgifb/vgatypes.h b/drivers/staging/xgifb/vgatypes.h
index c1c798562ddd..ec4c83f7a7c4 100644
--- a/drivers/staging/xgifb/vgatypes.h
+++ b/drivers/staging/xgifb/vgatypes.h
@@ -28,10 +28,6 @@ typedef unsigned short USHORT;
 typedef unsigned long ULONG;
 #endif
 
-#ifndef PUCHAR
-typedef UCHAR *PUCHAR;
-#endif
-
 #ifndef PUSHORT
 typedef USHORT *PUSHORT;
 #endif
@@ -126,25 +122,25 @@ struct _XGI_HW_DEVICE_INFO
     ULONG  ulExternalChip;       /* NO VB or other video bridge*/
                                  /* if ujVBChipID = VB_CHIP_UNKNOWN, */
 
-    PUCHAR  pjVirtualRomBase;    /* ROM image */
+    unsigned char *pjVirtualRomBase;    /* ROM image */
 
     BOOLEAN UseROM;		 /* Use the ROM image if provided */
 
     PVOID   pDevice;
 
-    PUCHAR  pjVideoMemoryAddress;/* base virtual memory address */
+    unsigned char *pjVideoMemoryAddress;/* base virtual memory address */
                                  /* of Linear VGA memory */
 
     ULONG  ulVideoMemorySize;    /* size, in bytes, of the memory on the board */
 
-    PUCHAR pjIOAddress;          /* base I/O address of VGA ports (0x3B0) */
+    unsigned char *pjIOAddress;          /* base I/O address of VGA ports (0x3B0) */
 
-    PUCHAR pjCustomizedROMImage;
+    unsigned char *pjCustomizedROMImage;
 
-    PUCHAR pj2ndVideoMemoryAddress;
+    unsigned char *pj2ndVideoMemoryAddress;
     ULONG  ul2ndVideoMemorySize;
 
-    PUCHAR pj2ndIOAddress;
+    unsigned char *pj2ndIOAddress;
     UCHAR  jChipType;            /* Used to Identify Graphics Chip */
                                  /* defined in the data structure type  */
                                  /* "XGI_CHIP_TYPE" */</pre><hr><pre>commit dda08c59680d5fce058430ad59678d27fa0448c2
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Jun 17 13:10:42 2010 -0400

    Staging: xgifb: Remove defines for TRUE, FALSE, and NULL
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Arnaud Patard &lt;apatard@mandriva.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/xgifb/XGI_main_26.c b/drivers/staging/xgifb/XGI_main_26.c
index c7ad6cdffff9..403b5d4c2b54 100644
--- a/drivers/staging/xgifb/XGI_main_26.c
+++ b/drivers/staging/xgifb/XGI_main_26.c
@@ -440,10 +440,10 @@ XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 		DPRINTK("XGIfb: Set offset 0x%lx to 0x%lx\n", offset, *value);
 
 	if (!init) {
-		init = TRUE;
+		init = 1;
 		pdev = pci_get_device(PCI_VENDOR_ID_XG, xgi_video_info.chip_id, pdev);
 		if (pdev) {
-			valid_pdev = TRUE;
+			valid_pdev = 1;
 			pci_dev_put(pdev);
 		}
 	}
@@ -451,7 +451,7 @@ XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 	if (!valid_pdev) {
 		printk(KERN_DEBUG "XGIfb: Can't find XGI %d VGA device.\n",
 				xgi_video_info.chip_id);
-		return FALSE;
+		return 0;
 	}
 
 	if (set == 0)
@@ -459,7 +459,7 @@ XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 	else
 		pci_write_config_dword(pdev, offset, (u32)(*value));
 
-	return TRUE;
+	return 1;
 }
 
 /*BOOLEAN XGIfb_query_north_bridge_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
@@ -470,7 +470,7 @@ XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 	u16 nbridge_id = 0;
 
 	if (!init) {
-		init = TRUE;
+		init = 1;
 		switch (xgi_video_info.chip) {
 		case XGI_540:
 			nbridge_id = PCI_DEVICE_ID_XG_540;
@@ -497,13 +497,13 @@ XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 
 		pdev = pci_find_device(PCI_VENDOR_ID_SI, nbridge_id, pdev);
 		if (pdev)
-			valid_pdev = TRUE;
+			valid_pdev = 1;
 	}
 
 	if (!valid_pdev) {
 		printk(KERN_DEBUG "XGIfb: Can't find XGI %d North Bridge device.\n",
 				nbridge_id);
-		return FALSE;
+		return 0;
 	}
 
 	if (set == 0)
@@ -511,7 +511,7 @@ XGIfb_query_VGA_config_space(PXGI_HW_DEVICE_INFO pXGIhw_ext,
 	else
 		pci_write_config_dword(pdev, offset, (u32)(*value));
 
-	return TRUE;
+	return 1;
 }
 */
 /* ------------------ Internal helper routines ----------------- */
@@ -953,14 +953,14 @@ static BOOLEAN XGIfb_bridgeisslave(void)
 {
    unsigned char usScratchP1_00;
 
-   if(xgi_video_info.hasVB == HASVB_NONE) return FALSE;
+   if (xgi_video_info.hasVB == HASVB_NONE)
+	   return 0;
 
    inXGIIDXREG(XGIPART1,0x00,usScratchP1_00);
-   if( (usScratchP1_00 &amp; 0x50) == 0x10)  {
-	   return TRUE;
-   } else {
-           return FALSE;
-   }
+   if ((usScratchP1_00 &amp; 0x50) == 0x10)
+	   return 1;
+   else
+	   return 0;
 }
 
 static BOOLEAN XGIfbcheckvretracecrt1(void)
@@ -968,24 +968,30 @@ static BOOLEAN XGIfbcheckvretracecrt1(void)
    unsigned char temp;
 
    inXGIIDXREG(XGICR,0x17,temp);
-   if(!(temp &amp; 0x80)) return FALSE;
+   if (!(temp &amp; 0x80))
+	   return 0;
 
 
    inXGIIDXREG(XGISR,0x1f,temp);
-   if(temp &amp; 0xc0) return FALSE;
-
+   if (temp &amp; 0xc0)
+	   return 0;
 
-   if(inXGIREG(XGIINPSTAT) &amp; 0x08) return TRUE;
-   else 			   return FALSE;
+   if (inXGIREG(XGIINPSTAT) &amp; 0x08)
+	   return 1;
+   else
+	   return 0;
 }
 
 static BOOLEAN XGIfbcheckvretracecrt2(void)
 {
    unsigned char temp;
-   if(xgi_video_info.hasVB == HASVB_NONE) return FALSE;
+   if (xgi_video_info.hasVB == HASVB_NONE)
+	   return 0;
    inXGIIDXREG(XGIPART1, 0x30, temp);
-   if(temp &amp; 0x02) return FALSE;
-   else 	   return TRUE;
+   if (temp &amp; 0x02)
+	   return 0;
+   else
+	   return 1;
 }
 
 static BOOLEAN XGIfb_CheckVBRetrace(void)
@@ -1989,9 +1995,9 @@ static int XGIfb_has_VB(void)
 		break;
 	   default:
 		xgi_video_info.hasVB = HASVB_NONE;
-		return FALSE;
+		return 0;
 	}
-	return TRUE;
+	return 1;
 }
 
 
@@ -2645,7 +2651,7 @@ static void XGIfb_pre_setmode(void)
 static void XGIfb_post_setmode(void)
 {
 	u8 reg;
-	BOOLEAN doit = TRUE;
+	BOOLEAN doit = 1;
 #if 0	/* TW: Wrong: Is not in MMIO space, but in RAM */
 	/* Backup mode number to MMIO space */
 	if(xgi_video_info.mmio_vbase) {
@@ -2659,11 +2665,11 @@ static void XGIfb_post_setmode(void)
 	if (xgi_video_info.video_bpp == 8) {
 		/* TW: We can't switch off CRT1 on LVDS/Chrontel in 8bpp Modes */
 		if ((xgi_video_info.hasVB == HASVB_LVDS) || (xgi_video_info.hasVB == HASVB_LVDS_CHRONTEL)) {
-			doit = FALSE;
+			doit = 0;
 		}
 		/* TW: We can't switch off CRT1 on 301B-DH in 8bpp Modes if using LCD */
 		if  (xgi_video_info.disp_state &amp; DISPTYPE_LCD)  {
-	        	doit = FALSE;
+			doit = 0;
 	        }
 	}
 
@@ -2672,14 +2678,15 @@ static void XGIfb_post_setmode(void)
 		inXGIIDXREG(XGIPART1, 0x00, reg);
 
 
-		if((reg &amp; 0x50) == 0x10) {
-			doit = FALSE;
-		}
+		if ((reg &amp; 0x50) == 0x10)
+			doit = 0;
 
-	} else XGIfb_crt1off = 0;
+
+	} else
+		XGIfb_crt1off = 0;
 
 	inXGIIDXREG(XGICR, 0x17, reg);
-	if((XGIfb_crt1off) &amp;&amp; (doit))
+	if ((XGIfb_crt1off) &amp;&amp; (doit))
 		reg &amp;= ~0x80;
 	else
 		reg |= 0x80;
@@ -3027,7 +3034,7 @@ int __devinit xgifb_probe(struct pci_dev *pdev, const struct pci_device_id *ent)
 		   case XG20:
 		   case XG21:
                    case XG27:
-                   XGIhw_ext.bIntegratedMMEnabled = TRUE;
+			   XGIhw_ext.bIntegratedMMEnabled = 1;
 			break;
 
 		   default:
@@ -3316,14 +3323,14 @@ int __devinit xgifb_probe(struct pci_dev *pdev, const struct pci_device_id *ent)
 	          inXGIIDXREG(XGICR,0x38,tmp);
 		      if((tmp &amp; 0x03) == 0x03)
 		      {
-//		          XGI_Pr.XGI_UseLCDA = TRUE;
+/*		          XGI_Pr.XGI_UseLCDA = 1; */
 		      }else
 		      {
 		     //  Currently on LCDA? (Some newer BIOSes set D0 in CR35)
 		         inXGIIDXREG(XGICR,0x35,tmp);
 		         if(tmp &amp; 0x01)
 		         {
-//		              XGI_Pr.XGI_UseLCDA = TRUE;
+/*		              XGI_Pr.XGI_UseLCDA = 1; */
 		           }else
 		           {
 		               inXGIIDXREG(XGICR,0x30,tmp);
@@ -3332,7 +3339,7 @@ int __devinit xgifb_probe(struct pci_dev *pdev, const struct pci_device_id *ent)
 		                   inXGIIDXREG(XGIPART1,0x13,tmp);
 			               if(tmp &amp; 0x04)
 			               {
-//			                XGI_Pr.XGI_UseLCDA = TRUE;
+/*			                XGI_Pr.XGI_UseLCDA = 1; */
 			               }
 		               }
 		           }
diff --git a/drivers/staging/xgifb/vb_init.c b/drivers/staging/xgifb/vb_init.c
index c5c7284ab679..da8f84fcf5e0 100644
--- a/drivers/staging/xgifb/vb_init.c
+++ b/drivers/staging/xgifb/vb_init.c
@@ -148,18 +148,16 @@ BOOLEAN XGIInitNew( PXGI_HW_DEVICE_INFO HwDeviceExtension )
 
 
    /* if ( pVBInfo-&gt;ROMAddr == 0 ) */
-   /* return( FALSE ) ; */
+   /* return( 0 ) ; */
 
-    if ( pVBInfo-&gt;FBAddr == 0 )
-{
+    if (pVBInfo-&gt;FBAddr == 0) {
        printk("\n pVBInfo-&gt;FBAddr == 0 ");
-       return( FALSE ) ;
-}
+       return 0;
+    }
 printk("1");
-    if ( pVBInfo-&gt;BaseAddr == 0 )
-{
-       printk("\npVBInfo-&gt;BaseAddr == 0 ");
-        return( FALSE ) ;
+if (pVBInfo-&gt;BaseAddr == 0) {
+	printk("\npVBInfo-&gt;BaseAddr == 0 ");
+	return 0;
 }
 printk("2");
 
@@ -169,9 +167,8 @@ printk("2");
 printk("3");
 
 if ( !HwDeviceExtension-&gt;bIntegratedMMEnabled )
-{
-        return( FALSE ) ;	/* alan */
-}
+	return 0;	/* alan */
+
 printk("4");
 
  //   VBIOSVersion[ 4 ] = 0x0 ;
@@ -422,15 +419,14 @@ printk("18");
         XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x83 , 0x00 ) ;
 printk("181");
 
-    if ( HwDeviceExtension-&gt;bSkipSense == FALSE )
-    {
-printk("182");
+if (HwDeviceExtension-&gt;bSkipSense == 0) {
+	printk("182");
 
         XGI_SenseCRT1(pVBInfo) ;
 
-printk("183");
+	printk("183");
         /* XGINew_DetectMonitor( HwDeviceExtension ) ; */
-pVBInfo-&gt;IF_DEF_CH7007 = 0;
+	pVBInfo-&gt;IF_DEF_CH7007 = 0;
         if ( ( HwDeviceExtension-&gt;jChipType == XG21 ) &amp;&amp; (pVBInfo-&gt;IF_DEF_CH7007) )
         {
 printk("184");
@@ -466,8 +462,7 @@ printk("19");
 
         XGINew_SetDRAMDefaultRegister340( HwDeviceExtension ,  pVBInfo-&gt;P3d4,  pVBInfo ) ;
 
-        if ( HwDeviceExtension-&gt;bSkipDramSizing == TRUE )
-        {
+	if (HwDeviceExtension-&gt;bSkipDramSizing == 1) {
             pSR = HwDeviceExtension-&gt;pSR ;
             if ( pSR!=NULL )
             {
@@ -547,7 +542,7 @@ XGINew_SetReg1( pVBInfo-&gt;P3d4 , 0x8c , 0x87);
 XGINew_SetReg1( pVBInfo-&gt;P3c4 , 0x14 , 0x31);
 printk("25");
 
-    return( TRUE ) ;
+return 1;
 } /* end of init */
 
 
@@ -2608,10 +2603,10 @@ void XGINew_SetMemoryClock( PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_IN
 /* --------------------------------------------------------------------- */
 BOOLEAN ChkLFB( PVB_DEVICE_INFO pVBInfo )
 {
-    if ( LFBDRAMTrap &amp; XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x78 ) )
-        return( TRUE ) ;
-    else
-        return( FALSE );
+	if (LFBDRAMTrap &amp; XGINew_GetReg1(pVBInfo-&gt;P3d4 , 0x78))
+		return 1;
+	else
+		return 0;
 }
 
 
diff --git a/drivers/staging/xgifb/vb_setmode.c b/drivers/staging/xgifb/vb_setmode.c
index dc4e186f987e..a0ccce07f125 100644
--- a/drivers/staging/xgifb/vb_setmode.c
+++ b/drivers/staging/xgifb/vb_setmode.c
@@ -510,15 +510,9 @@ BOOLEAN XGISetModeNew( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo )
     }	/* !XG20 */
     else
     {
-
-
-        if ( pVBInfo-&gt;IF_DEF_LVDS == 1 )
-        {
-            if ( !XGI_XG21CheckLVDSMode(ModeNo , ModeIdIndex, pVBInfo) )
-            {
-              return FALSE;
-            }
-        }
+	    if (pVBInfo-&gt;IF_DEF_LVDS == 1)
+		    if (!XGI_XG21CheckLVDSMode(ModeNo , ModeIdIndex, pVBInfo))
+			    return 0;
 
         if ( ModeNo &lt;= 0x13 )
         {
@@ -577,7 +571,7 @@ BOOLEAN XGISetModeNew( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo )
     XGI_LockCRT2( HwDeviceExtension, pVBInfo ) ;
 }
 
-    return( TRUE ) ;
+    return 1;
 }
 
 
@@ -3987,10 +3981,10 @@ BOOLEAN XGI_SearchModeID( USHORT ModeNo , USHORT *ModeIdIndex, PVB_DEVICE_INFO p
         /* for (*ModeIdIndex=0;*ModeIdIndex&lt;sizeof(pVBInfo-&gt;SModeIDTable)/sizeof(XGI_StStruct);(*ModeIdIndex)++) */
         for( *ModeIdIndex = 0 ; ; ( *ModeIdIndex )++ )
         {
-            if ( pVBInfo-&gt;SModeIDTable[ *ModeIdIndex ].St_ModeID == ModeNo )
-                break ;
-            if ( pVBInfo-&gt;SModeIDTable[ *ModeIdIndex ].St_ModeID == 0xFF )
-                return( FALSE ) ;
+		if (pVBInfo-&gt;SModeIDTable[*ModeIdIndex].St_ModeID == ModeNo)
+			break;
+		if (pVBInfo-&gt;SModeIDTable[*ModeIdIndex].St_ModeID == 0xFF)
+			return 0;
         }
 
         if ( ModeNo == 0x07 )
@@ -4005,16 +3999,16 @@ BOOLEAN XGI_SearchModeID( USHORT ModeNo , USHORT *ModeIdIndex, PVB_DEVICE_INFO p
         /* for (*ModeIdIndex=0;*ModeIdIndex&lt;sizeof(pVBInfo-&gt;EModeIDTable)/sizeof(XGI_ExtStruct);(*ModeIdIndex)++) */
         for( *ModeIdIndex = 0 ; ; ( *ModeIdIndex )++ )
         {
-            if ( pVBInfo-&gt;EModeIDTable[ *ModeIdIndex ].Ext_ModeID == ModeNo )
-                break ;
-            if ( pVBInfo-&gt;EModeIDTable[ *ModeIdIndex ].Ext_ModeID == 0xFF )
-                return( FALSE ) ;
+		if (pVBInfo-&gt;EModeIDTable[*ModeIdIndex].Ext_ModeID == ModeNo)
+			break;
+		if (pVBInfo-&gt;EModeIDTable[*ModeIdIndex].Ext_ModeID == 0xFF)
+			return 0;
         }
     }
 
 #endif
 
-    return( TRUE ) ;
+    return 1;
 }
 
 
@@ -4039,7 +4033,7 @@ BOOLEAN XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT Mode
 /*  if ( ( HwDeviceExtension-&gt;jChipType == XGI_650 ) ||
          ( HwDeviceExtension-&gt;jChipType == XGI_650M ) )
     {
-        return( TRUE ) ;
+	return 1;
     } */
 
     if ( ModeNo &lt;= 0x13 )
@@ -4097,10 +4091,10 @@ BOOLEAN XGINew_CheckMemorySize(PXGI_HW_DEVICE_INFO HwDeviceExtension,USHORT Mode
             temp &lt;&lt;= 1 ;
         }
     }
-    if ( temp &lt; memorysize )
-        return( FALSE ) ;
+    if (temp &lt; memorysize)
+	    return 0;
     else
-        return( TRUE ) ;
+	    return 1;
 }
 
 
@@ -7736,7 +7730,7 @@ void* XGI_GetTVPtr (USHORT BX,USHORT ModeNo,USHORT ModeIdIndex,USHORT RefreshRat
 /* --------------------------------------------------------------------- */
 /* Function : XGI_BacklightByDrv */
 /* Input : */
-/* Output : TRUE -&gt; Skip backlight control */
+/* Output : 1 -&gt; Skip backlight control */
 /* Description : */
 /* --------------------------------------------------------------------- */
 BOOLEAN XGI_BacklightByDrv( PVB_DEVICE_INFO pVBInfo )
@@ -7744,10 +7738,10 @@ BOOLEAN XGI_BacklightByDrv( PVB_DEVICE_INFO pVBInfo )
     UCHAR tempah ;
 
     tempah = ( UCHAR )XGINew_GetReg1( pVBInfo-&gt;P3d4 , 0x3A ) ;
-    if ( tempah &amp; BacklightControlBit )
-        return TRUE ;
+    if (tempah &amp; BacklightControlBit)
+	    return 1;
     else
-        return FALSE ;
+	    return 0;
 }
 
 
@@ -8055,10 +8049,10 @@ BOOLEAN XGI_XG21CheckLVDSMode(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO
 
     lvdstableindex = XGI_GetLVDSOEMTableIndex( pVBInfo );
     if ( xres &gt; (pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDSHDE) )
-      return FALSE;
+	    return 0;
 
     if ( yres &gt; (pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDSVDE) )
-      return FALSE;
+	    return 0;
 
     if ( ModeNo &gt; 0x13 )
     {
@@ -8066,13 +8060,12 @@ BOOLEAN XGI_XG21CheckLVDSMode(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO
            ( yres != (pVBInfo-&gt;XG21_LVDSCapList[lvdstableindex].LVDSVDE)) )
       {
           colordepth = XGI_GetColorDepth( ModeNo , ModeIdIndex, pVBInfo ) ;
-          if ( colordepth &gt; 2 )
-          {
-            return FALSE;
-          }
+	  if (colordepth &gt; 2)
+		  return 0;
+
       }
     }
-    return TRUE;
+    return 1;
 }
 
 void XGI_SetXG21FPBits(PVB_DEVICE_INFO pVBInfo)
@@ -8463,8 +8456,8 @@ void XGI_SetXG27LVDSPara(USHORT ModeNo,USHORT ModeIdIndex, PVB_DEVICE_INFO pVBIn
 /* --------------------------------------------------------------------- */
 /* Function : XGI_IsLCDON */
 /* Input : */
-/* Output : FALSE : Skip PSC Control */
-/* TRUE: Disable PSC */
+/* Output : 0 : Skip PSC Control */
+/* 1: Disable PSC */
 /* Description : */
 /* --------------------------------------------------------------------- */
 BOOLEAN XGI_IsLCDON(PVB_DEVICE_INFO pVBInfo)
@@ -8473,11 +8466,11 @@ BOOLEAN XGI_IsLCDON(PVB_DEVICE_INFO pVBInfo)
 
     tempax = pVBInfo-&gt;VBInfo ;
     if ( tempax &amp; SetCRT2ToDualEdge )
-        return FALSE ;
+	    return 0;
     else if ( tempax &amp; ( DisableCRT2Display | SwitchToCRT2 | SetSimuScanMode ) )
-        return TRUE ;
+	    return 1;
 
-    return FALSE ;
+    return 0;
 }
 
 
@@ -8518,7 +8511,7 @@ void XGI_DisablePWD( PVB_DEVICE_INFO pVBInfo )
 /* --------------------------------------------------------------------- */
 /* Function : XGI_DisableChISLCD */
 /* Input : */
-/* Output : FALSE -&gt; Not LCD Mode */
+/* Output : 0 -&gt; Not LCD Mode */
 /* Description : */
 /* --------------------------------------------------------------------- */
 BOOLEAN XGI_DisableChISLCD(PVB_DEVICE_INFO pVBInfo)
@@ -8532,16 +8525,16 @@ BOOLEAN XGI_DisableChISLCD(PVB_DEVICE_INFO pVBInfo)
     if ( tempbx &amp; ( EnableChA | DisableChA ) )
     {
         if ( !( tempah &amp; 0x08 ) )		/* Chk LCDA Mode */
-            return FALSE ;
+		return 0 ;
     }
 
     if ( !( tempbx &amp; ( EnableChB | DisableChB ) ) )
-        return FALSE ;
+	    return 0;
 
     if ( tempah &amp; 0x01 )       /* Chk LCDB Mode */
-        return TRUE ;
+	    return 1;
 
-    return FALSE ;
+    return 0;
 }
 
 
@@ -8563,16 +8556,16 @@ BOOLEAN XGI_EnableChISLCD(PVB_DEVICE_INFO pVBInfo)
     if ( tempbx &amp; ( EnableChA | DisableChA ) )
     {
         if ( !( tempah &amp; 0x08 ) )		/* Chk LCDA Mode */
-            return FALSE ;
+		return 0;
     }
 
     if ( !( tempbx &amp; ( EnableChB | DisableChB ) ) )
-        return FALSE ;
+	    return 0;
 
     if ( tempah &amp; 0x01 )       /* Chk LCDB Mode */
-        return TRUE ;
+	    return 1;
 
-    return FALSE ;
+    return 0;
 }
 
 
diff --git a/drivers/staging/xgifb/vgatypes.h b/drivers/staging/xgifb/vgatypes.h
index 83fea8e37a30..c1c798562ddd 100644
--- a/drivers/staging/xgifb/vgatypes.h
+++ b/drivers/staging/xgifb/vgatypes.h
@@ -4,18 +4,6 @@
 
 #include &lt;linux/ioctl.h&gt;
 
-#ifndef FALSE
-#define FALSE   0
-#endif
-
-#ifndef TRUE
-#define TRUE    1
-#endif
-
-#ifndef NULL
-#define NULL    0
-#endif
-
 #ifndef CHAR
 typedef char CHAR;
 #endif
@@ -186,12 +174,12 @@ struct _XGI_HW_DEVICE_INFO
     PXGI_DSReg  pSR;             /* restore SR registers in initial function. */
                                  /* end data :(idx, val) =  (FF, FF). */
                                  /* Note : restore SR registers if  */
-                                 /* bSkipDramSizing = TRUE */
+                                 /* bSkipDramSizing = 1 */
 
     PXGI_DSReg  pCR;             /* restore CR registers in initial function. */
                                  /* end data :(idx, val) =  (FF, FF) */
                                  /* Note : restore cR registers if  */
-                                 /* bSkipDramSizing = TRUE */
+                                 /* bSkipDramSizing = 1 */
 /*
 #endif
 */</pre><hr><pre>commit 1e59f7119f0a998e3d453614b3d074962b84bc83
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Jun 17 13:10:41 2010 -0400

    Staging: xgifb: Remove port macros in osdef.h
    
    The port related macros in osdef.h are replaced with calls to out?()
    and in?().  This removes the last macros defined in osdef.h, so this
    file is no longer needed.
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Arnaud Patard &lt;apatard@mandriva.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/xgifb/XGI_accel.c b/drivers/staging/xgifb/XGI_accel.c
index 24f454d93772..85af55c32091 100644
--- a/drivers/staging/xgifb/XGI_accel.c
+++ b/drivers/staging/xgifb/XGI_accel.c
@@ -43,7 +43,6 @@
 #include &lt;asm/mtrr.h&gt;
 #endif
 
-#include "osdef.h"
 #include "vgatypes.h"
 #include "vb_struct.h"
 #include "XGIfb.h"
diff --git a/drivers/staging/xgifb/XGI_main_26.c b/drivers/staging/xgifb/XGI_main_26.c
index e9551d347a88..c7ad6cdffff9 100644
--- a/drivers/staging/xgifb/XGI_main_26.c
+++ b/drivers/staging/xgifb/XGI_main_26.c
@@ -29,8 +29,6 @@
 #include &lt;linux/types.h&gt;
 #include &lt;linux/proc_fs.h&gt;
 
-#include "osdef.h"
-
 
 #ifndef XGIFB_PAN
 #define XGIFB_PAN
diff --git a/drivers/staging/xgifb/osdef.h b/drivers/staging/xgifb/osdef.h
deleted file mode 100644
index 7d05ea47c72f..000000000000
--- a/drivers/staging/xgifb/osdef.h
+++ /dev/null
@@ -1,37 +0,0 @@
-#ifndef _OSDEF_H_
-#define _OSDEF_H_
-
-/**********************************************************************/
-
-#ifdef OutPortByte
-#undef OutPortByte
-#endif /* OutPortByte */
-
-#ifdef OutPortWord
-#undef OutPortWord
-#endif /* OutPortWord */
-
-#ifdef OutPortLong
-#undef OutPortLong
-#endif /* OutPortLong */
-
-#ifdef InPortByte
-#undef InPortByte
-#endif /* InPortByte */
-
-#ifdef InPortWord
-#undef InPortWord
-#endif /* InPortWord */
-
-#ifdef InPortLong
-#undef InPortLong
-#endif /* InPortLong */
-
-#define OutPortByte(p,v) outb((u8)(v),(p))
-#define OutPortWord(p,v) outw((u16)(v),(p))
-#define OutPortLong(p,v) outl((u32)(v),(p))
-#define InPortByte(p)    inb(p)
-#define InPortWord(p)    inw(p)
-#define InPortLong(p)    inl(p)
-
-#endif // _OSDEF_H_
diff --git a/drivers/staging/xgifb/vb_ext.c b/drivers/staging/xgifb/vb_ext.c
index f4969c2ced61..4358d96bad7e 100644
--- a/drivers/staging/xgifb/vb_ext.c
+++ b/drivers/staging/xgifb/vb_ext.c
@@ -1,5 +1,3 @@
-#include "osdef.h"
-
 #include &lt;linux/version.h&gt;
 #include &lt;asm/io.h&gt;
 #include &lt;linux/types.h&gt;
diff --git a/drivers/staging/xgifb/vb_init.c b/drivers/staging/xgifb/vb_init.c
index dc1218463ea0..c5c7284ab679 100644
--- a/drivers/staging/xgifb/vb_init.c
+++ b/drivers/staging/xgifb/vb_init.c
@@ -1,4 +1,3 @@
-#include "osdef.h"
 #include "vgatypes.h"
 
 #include &lt;linux/version.h&gt;
diff --git a/drivers/staging/xgifb/vb_setmode.c b/drivers/staging/xgifb/vb_setmode.c
index 95efa8bb0de0..dc4e186f987e 100644
--- a/drivers/staging/xgifb/vb_setmode.c
+++ b/drivers/staging/xgifb/vb_setmode.c
@@ -1,7 +1,3 @@
-#include "osdef.h"
-
-
-
 
 #include &lt;asm/io.h&gt;
 #include &lt;linux/types.h&gt;
diff --git a/drivers/staging/xgifb/vb_util.c b/drivers/staging/xgifb/vb_util.c
index 753b1c550727..f83aee7ea90e 100644
--- a/drivers/staging/xgifb/vb_util.c
+++ b/drivers/staging/xgifb/vb_util.c
@@ -1,4 +1,3 @@
-#include "osdef.h"
 #include "vb_def.h"
 #include "vgatypes.h"
 #include "vb_struct.h"
@@ -28,8 +27,8 @@ void     XGINew_SetRegAND(ULONG Port,USHORT Index,USHORT DataAND);
 /* --------------------------------------------------------------------- */
 void XGINew_SetReg1( ULONG port , USHORT index , USHORT data )
 {
-    OutPortByte( port , index ) ;
-    OutPortByte( port + 1 , data ) ;
+	outb(index, port);
+	outb(data, port + 1);
 }
 
 
@@ -56,7 +55,7 @@ void XGINew_SetReg1( ULONG port , USHORT index , USHORT data )
 /* --------------------------------------------------------------------- */
 void XGINew_SetReg3( ULONG port , USHORT data )
 {
-    OutPortByte( port , data ) ;
+	outb(data, port);
 }
 
 
@@ -68,7 +67,7 @@ void XGINew_SetReg3( ULONG port , USHORT data )
 /* --------------------------------------------------------------------- */
 void XGINew_SetReg4( ULONG port , ULONG data )
 {
-    OutPortLong( port , data ) ;
+	outl(data, port);
 }
 
 
@@ -82,9 +81,8 @@ UCHAR XGINew_GetReg1( ULONG port , USHORT index )
 {
     UCHAR data ;
 
-    OutPortByte( port , index ) ;
-    data = InPortByte( port + 1 ) ;
-
+    outb(index, port);
+    data = inb(port + 1) ;
     return( data ) ;
 }
 
@@ -99,7 +97,7 @@ UCHAR XGINew_GetReg2( ULONG port )
 {
     UCHAR data ;
 
-    data = InPortByte( port ) ;
+    data = inb(port) ;
 
     return( data ) ;
 }
@@ -115,7 +113,7 @@ ULONG XGINew_GetReg3( ULONG port )
 {
     ULONG data ;
 
-    data = InPortLong( port ) ;
+    data = inl(port) ;
 
     return( data ) ;
 }
diff --git a/drivers/staging/xgifb/vgatypes.h b/drivers/staging/xgifb/vgatypes.h
index 745c993e057e..83fea8e37a30 100644
--- a/drivers/staging/xgifb/vgatypes.h
+++ b/drivers/staging/xgifb/vgatypes.h
@@ -2,8 +2,6 @@
 #ifndef _VGATYPES_
 #define _VGATYPES_
 
-#include "osdef.h"
-
 #include &lt;linux/ioctl.h&gt;
 
 #ifndef FALSE</pre><hr><pre>commit cc75bb02db530748515f0bf95039c4a15b3ef0be
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Jun 17 13:10:40 2010 -0400

    Staging: xgifb: Remove XGI_SetMemory and XGI_MemoryCopy
    
    These were just macros for memset and memcpy, so use those instead.
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Arnaud Patard &lt;apatard@mandriva.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/xgifb/osdef.h b/drivers/staging/xgifb/osdef.h
index fb1d41149caa..7d05ea47c72f 100644
--- a/drivers/staging/xgifb/osdef.h
+++ b/drivers/staging/xgifb/osdef.h
@@ -1,10 +1,6 @@
 #ifndef _OSDEF_H_
 #define _OSDEF_H_
 
-#define XGI_SetMemory(MemoryAddress,MemorySize,value) memset(MemoryAddress, value, MemorySize)
-
-#define XGI_MemoryCopy(Destination,Soruce,Length) memcpy(Destination,Soruce,Length)
-
 /**********************************************************************/
 
 #ifdef OutPortByte
diff --git a/drivers/staging/xgifb/vb_init.c b/drivers/staging/xgifb/vb_init.c
index 94fa48b9f9f5..dc1218463ea0 100644
--- a/drivers/staging/xgifb/vb_init.c
+++ b/drivers/staging/xgifb/vb_init.c
@@ -175,8 +175,6 @@ if ( !HwDeviceExtension-&gt;bIntegratedMMEnabled )
 }
 printk("4");
 
-//    XGI_MemoryCopy( VBIOSVersion , HwDeviceExtension-&gt;szVBIOSVer , 4 ) ;
-
  //   VBIOSVersion[ 4 ] = 0x0 ;
 
     /* 09/07/99 modify by domao */
diff --git a/drivers/staging/xgifb/vb_setmode.c b/drivers/staging/xgifb/vb_setmode.c
index daf7b3c739c0..95efa8bb0de0 100644
--- a/drivers/staging/xgifb/vb_setmode.c
+++ b/drivers/staging/xgifb/vb_setmode.c
@@ -2609,7 +2609,7 @@ void XGI_ClearBuffer( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo, PVB
         {
             AdapterMemorySize = 0x40000 ;	/* clear 256k */
             /* GetDRAMSize( HwDeviceExtension ) ; */
-            XGI_SetMemory( VideoMemoryAddress , AdapterMemorySize , 0 ) ;
+	    memset(VideoMemoryAddress, 0, AdapterMemorySize);
         }
         else
         {
@@ -2631,7 +2631,7 @@ void XGI_ClearBuffer( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo, PVB
 */
         }
         else
-            XGI_SetMemory( VideoMemoryAddress , 0x8000 , 0 ) ;
+		memset(VideoMemoryAddress , 0, 0x8000);
     }
 }
 </pre><hr><pre>commit f2f58e14efe5d1de1003a05fbdb82a66fc22dfb8
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Jun 17 13:10:39 2010 -0400

    Staging: xgifb: Remove use of LINUX_KERNEL define
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Arnaud Patard &lt;apatard@mandriva.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/xgifb/XGI_main_26.c b/drivers/staging/xgifb/XGI_main_26.c
index f2658c41b7d6..e9551d347a88 100644
--- a/drivers/staging/xgifb/XGI_main_26.c
+++ b/drivers/staging/xgifb/XGI_main_26.c
@@ -163,7 +163,6 @@ struct video_info  xgi_video_info;
 
 /* --------------- Hardware Access Routines -------------------------- */
 
-#ifdef LINUX_KERNEL
 int
 XGIfb_mode_rate_to_dclock(VB_DEVICE_INFO *XGI_Pr, PXGI_HW_DEVICE_INFO HwDeviceExtension,
 			  unsigned char modeno, unsigned char rateindex)
@@ -389,7 +388,6 @@ XGIfb_mode_rate_to_ddata(VB_DEVICE_INFO *XGI_Pr, PXGI_HW_DEVICE_INFO HwDeviceExt
     return 1;
 }
 
-#endif
 
 
 
diff --git a/drivers/staging/xgifb/osdef.h b/drivers/staging/xgifb/osdef.h
index ffb683819e41..fb1d41149caa 100644
--- a/drivers/staging/xgifb/osdef.h
+++ b/drivers/staging/xgifb/osdef.h
@@ -1,30 +1,9 @@
 #ifndef _OSDEF_H_
 #define _OSDEF_H_
 
-#define LINUX_KERNEL
-
-/**********************************************************************/
-#ifdef LINUX_KERNEL
-//#include &lt;linux/config.h&gt;
-#endif
-
-
-/**********************************************************************/
-#ifdef LINUX_KERNEL
-#define LINUX
-#endif
-
-/**********************************************************************/
-#ifdef LINUX_KERNEL
 #define XGI_SetMemory(MemoryAddress,MemorySize,value) memset(MemoryAddress, value, MemorySize)
-#endif
-/**********************************************************************/
-
-/**********************************************************************/
 
-#ifdef LINUX_KERNEL
 #define XGI_MemoryCopy(Destination,Soruce,Length) memcpy(Destination,Soruce,Length)
-#endif
 
 /**********************************************************************/
 
@@ -52,33 +31,11 @@
 #undef InPortLong
 #endif /* InPortLong */
 
-/**********************************************************************/
-/*  TC                                                                */
-/**********************************************************************/
-
-
-/**********************************************************************/
-/*  LINUX XF86                                                        */
-/**********************************************************************/
-
-
-#ifdef LINUX_KERNEL
 #define OutPortByte(p,v) outb((u8)(v),(p))
 #define OutPortWord(p,v) outw((u16)(v),(p))
 #define OutPortLong(p,v) outl((u32)(v),(p))
 #define InPortByte(p)    inb(p)
 #define InPortWord(p)    inw(p)
 #define InPortLong(p)    inl(p)
-#endif
-
-/**********************************************************************/
-/*  WIN 2000                                                          */
-/**********************************************************************/
-
-
-
-/**********************************************************************/
-/*  WIN CE                                                          */
-/**********************************************************************/
 
 #endif // _OSDEF_H_
diff --git a/drivers/staging/xgifb/vb_def.h b/drivers/staging/xgifb/vb_def.h
index 17a7ada4926e..4de182b23d41 100644
--- a/drivers/staging/xgifb/vb_def.h
+++ b/drivers/staging/xgifb/vb_def.h
@@ -6,7 +6,7 @@
 #define NewScratch
 #endif
 /* shampoo */
-#ifdef LINUX_KERNEL
+
 #define SEQ_ADDRESS_PORT	  0x0014
 #define SEQ_DATA_PORT		  0x0015
 #define MISC_OUTPUT_REG_READ_PORT 0x001C
@@ -17,7 +17,7 @@
 #define CRTC_ADDRESS_PORT_COLOR   0x0024
 #define VIDEO_SUBSYSTEM_ENABLE_PORT 0x0013
 #define PCI_COMMAND		0x04
-#endif
+
 /* ~shampoo */
 
 
diff --git a/drivers/staging/xgifb/vb_ext.c b/drivers/staging/xgifb/vb_ext.c
index 683558513799..f4969c2ced61 100644
--- a/drivers/staging/xgifb/vb_ext.c
+++ b/drivers/staging/xgifb/vb_ext.c
@@ -1,18 +1,9 @@
 #include "osdef.h"
 
-
-
-
-
-
-#ifdef LINUX_KERNEL
 #include &lt;linux/version.h&gt;
 #include &lt;asm/io.h&gt;
 #include &lt;linux/types.h&gt;
 #include "XGIfb.h"
-#endif
-
-
 
 #include "vb_def.h"
 #include "vgatypes.h"
diff --git a/drivers/staging/xgifb/vb_init.c b/drivers/staging/xgifb/vb_init.c
index d3201d2470f1..94fa48b9f9f5 100644
--- a/drivers/staging/xgifb/vb_init.c
+++ b/drivers/staging/xgifb/vb_init.c
@@ -1,19 +1,10 @@
 #include "osdef.h"
 #include "vgatypes.h"
 
-
-#ifdef LINUX_KERNEL
 #include &lt;linux/version.h&gt;
 #include &lt;linux/types.h&gt;
 #include &lt;linux/delay.h&gt; /* udelay */
 #include "XGIfb.h"
-/*#if LINUX_VERSxION_CODE &gt;= KERNEL_VERSION(2,5,0)
-#include &lt;video/XGIfb.h&gt;
-#else
-#include &lt;linux/XGIfb.h&gt;
-#endif */
-#endif
-
 
 #include "vb_def.h"
 #include "vb_struct.h"
@@ -23,9 +14,7 @@
 #include "vb_ext.h"
 
 
-#ifdef LINUX_KERNEL
 #include &lt;asm/io.h&gt;
-#endif
 
 
 
@@ -120,13 +109,11 @@ UCHAR    GetXG21FPBits(PVB_DEVICE_INFO pVBInfo);
 void     XGINew_GetXG27Sense(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo) ;
 UCHAR    GetXG27FPBits(PVB_DEVICE_INFO pVBInfo);
 
-
-#ifdef LINUX_KERNEL
 void DelayUS(ULONG MicroSeconds)
 {
 	udelay(MicroSeconds);
 }
-#endif
+
 
 /* --------------------------------------------------------------------- */
 /* Function : XGIInitNew */
@@ -2667,8 +2654,6 @@ void SetPowerConsume ( PXGI_HW_DEVICE_INFO HwDeviceExtension , ULONG XGI_P3d4Por
 }
 
 
-
-#if defined(LINUX_KERNEL)
 void XGINew_InitVBIOSData(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
 {
 
@@ -2711,7 +2696,6 @@ void XGINew_InitVBIOSData(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO
 	}
 
 }
-#endif /* For Linux */
 
 /* --------------------------------------------------------------------- */
 /* Function : ReadVBIOSTablData */
diff --git a/drivers/staging/xgifb/vb_setmode.c b/drivers/staging/xgifb/vb_setmode.c
index 5078788f48d0..daf7b3c739c0 100644
--- a/drivers/staging/xgifb/vb_setmode.c
+++ b/drivers/staging/xgifb/vb_setmode.c
@@ -3,12 +3,10 @@
 
 
 
-#ifdef LINUX_KERNEL
 #include &lt;asm/io.h&gt;
 #include &lt;linux/types.h&gt;
 #include &lt;linux/version.h&gt;
 #include "XGIfb.h"
-#endif
 
 
 #include "vb_def.h"
diff --git a/drivers/staging/xgifb/vb_util.c b/drivers/staging/xgifb/vb_util.c
index b9ccce070738..753b1c550727 100644
--- a/drivers/staging/xgifb/vb_util.c
+++ b/drivers/staging/xgifb/vb_util.c
@@ -3,11 +3,9 @@
 #include "vgatypes.h"
 #include "vb_struct.h"
 
-#ifdef LINUX_KERNEL
 #include "XGIfb.h"
 #include &lt;asm/io.h&gt;
 #include &lt;linux/types.h&gt;
-#endif
 
 void XGINew_SetReg1( ULONG , USHORT , USHORT ) ;
 void XGINew_SetReg2( ULONG , USHORT , USHORT ) ;
@@ -188,8 +186,6 @@ void NewDelaySeconds( int seconds )
 
 
 
-#ifdef LINUX_KERNEL
-#endif
     }
 }
 
diff --git a/drivers/staging/xgifb/vgatypes.h b/drivers/staging/xgifb/vgatypes.h
index 256ef26c2789..745c993e057e 100644
--- a/drivers/staging/xgifb/vgatypes.h
+++ b/drivers/staging/xgifb/vgatypes.h
@@ -4,10 +4,7 @@
 
 #include "osdef.h"
 
-
-#ifdef LINUX_KERNEL  /* We don't want the X driver to depend on kernel source */
 #include &lt;linux/ioctl.h&gt;
-#endif
 
 #ifndef FALSE
 #define FALSE   0
@@ -73,45 +70,13 @@ typedef UCHAR BOOLEAN;
 typedef UCHAR bool;
 #endif
 */
-#ifdef LINUX_KERNEL
 typedef unsigned long XGIIOADDRESS;
-#endif
 
 
 #ifndef VBIOS_VER_MAX_LENGTH
 #define VBIOS_VER_MAX_LENGTH    4
 #endif
 
-#ifndef LINUX_KERNEL   /* For the linux kernel, this is defined in xgifb.h */
-#ifndef XGI_CHIP_TYPE
-typedef enum _XGI_CHIP_TYPE {
-    XGI_VGALegacy = 0,
-    XGI_300,
-    XGI_630,
-    XGI_640,
-    XGI_315H,
-    XGI_315,
-    XGI_315PRO,
-    XGI_550,
-    XGI_650,
-    XGI_650M,
-    XGI_740,
-    XGI_330,
-    XGI_661,
-    XGI_660,
-    XGI_760,
-    XG40 = 32,
-    XG41,
-    XG42,
-    XG45,
-    XG20 = 48,
-    XG21,
-    XG27,
-    MAX_XGI_CHIP
-} XGI_CHIP_TYPE;
-#endif
-#endif
-
 #ifndef XGI_VB_CHIP_TYPE
 typedef enum _XGI_VB_CHIP_TYPE {
     VB_CHIP_Legacy = 0,</pre><hr><pre>commit 84c7603c3888da8ee69802ad4f4647f94d18e2c5
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Thu Jun 17 13:10:38 2010 -0400

    Staging: xgifb: Remove use of LINUX_XF86 define
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Cc: Arnaud Patard &lt;apatard@mandriva.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/xgifb/osdef.h b/drivers/staging/xgifb/osdef.h
index 01a87202b76f..ffb683819e41 100644
--- a/drivers/staging/xgifb/osdef.h
+++ b/drivers/staging/xgifb/osdef.h
@@ -2,7 +2,6 @@
 #define _OSDEF_H_
 
 #define LINUX_KERNEL
-/* #define LINUX_XF86 */
 
 /**********************************************************************/
 #ifdef LINUX_KERNEL
@@ -11,17 +10,11 @@
 
 
 /**********************************************************************/
-#ifdef LINUX_XF86
-#define LINUX
-#endif
 #ifdef LINUX_KERNEL
 #define LINUX
 #endif
 
 /**********************************************************************/
-#ifdef LINUX_XF86
-#define XGI_SetMemory(MemoryAddress,MemorySize,value) memset(MemoryAddress, value, MemorySize)
-#endif
 #ifdef LINUX_KERNEL
 #define XGI_SetMemory(MemoryAddress,MemorySize,value) memset(MemoryAddress, value, MemorySize)
 #endif
@@ -29,9 +22,6 @@
 
 /**********************************************************************/
 
-#ifdef LINUX_XF86
-#define XGI_MemoryCopy(Destination,Soruce,Length) memcpy(Destination,Soruce,Length)
-#endif
 #ifdef LINUX_KERNEL
 #define XGI_MemoryCopy(Destination,Soruce,Length) memcpy(Destination,Soruce,Length)
 #endif
@@ -71,14 +61,6 @@
 /*  LINUX XF86                                                        */
 /**********************************************************************/
 
-#ifdef LINUX_XF86
-#define OutPortByte(p,v) outb((CARD16)(p),(CARD8)(v))
-#define OutPortWord(p,v) outw((CARD16)(p),(CARD16)(v))
-#define OutPortLong(p,v) outl((CARD16)(p),(CARD32)(v))
-#define InPortByte(p)    inb((CARD16)(p))
-#define InPortWord(p)    inw((CARD16)(p))
-#define InPortLong(p)    inl((CARD16)(p))
-#endif
 
 #ifdef LINUX_KERNEL
 #define OutPortByte(p,v) outb((u8)(v),(p))
diff --git a/drivers/staging/xgifb/vb_ext.c b/drivers/staging/xgifb/vb_ext.c
index 7a96dad686c6..683558513799 100644
--- a/drivers/staging/xgifb/vb_ext.c
+++ b/drivers/staging/xgifb/vb_ext.c
@@ -4,12 +4,6 @@
 
 
 
-#ifdef LINUX_XF86
-#include "xf86.h"
-#include "xf86PciInfo.h"
-#include "xgi.h"
-#include "xgi_regs.h"
-#endif
 
 #ifdef LINUX_KERNEL
 #include &lt;linux/version.h&gt;
diff --git a/drivers/staging/xgifb/vb_init.c b/drivers/staging/xgifb/vb_init.c
index dfa047338513..d3201d2470f1 100644
--- a/drivers/staging/xgifb/vb_init.c
+++ b/drivers/staging/xgifb/vb_init.c
@@ -22,12 +22,6 @@
 #include "vb_init.h"
 #include "vb_ext.h"
 
-#ifdef LINUX_XF86
-#include "xf86.h"
-#include "xf86PciInfo.h"
-#include "xgi.h"
-#include "xgi_regs.h"
-#endif
 
 #ifdef LINUX_KERNEL
 #include &lt;asm/io.h&gt;
@@ -2674,7 +2668,7 @@ void SetPowerConsume ( PXGI_HW_DEVICE_INFO HwDeviceExtension , ULONG XGI_P3d4Por
 
 
 
-#if defined(LINUX_XF86)||defined(LINUX_KERNEL)
+#if defined(LINUX_KERNEL)
 void XGINew_InitVBIOSData(PXGI_HW_DEVICE_INFO HwDeviceExtension, PVB_DEVICE_INFO pVBInfo)
 {
 
@@ -3103,9 +3097,8 @@ void XGINew_SetDRAMModeRegister_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension )
 /*
 void XGINew_SetDRAMModeRegister_XG27( PXGI_HW_DEVICE_INFO HwDeviceExtension )
 {
-#ifndef LINUX_XF86
+
     UCHAR data ;
-#endif
     VB_DEVICE_INFO VBINF;
     PVB_DEVICE_INFO pVBInfo = &amp;VBINF;
     pVBInfo-&gt;ROMAddr = HwDeviceExtension-&gt;pjVirtualRomBase ;
diff --git a/drivers/staging/xgifb/vb_setmode.c b/drivers/staging/xgifb/vb_setmode.c
index 9f5ce8c98c1e..5078788f48d0 100644
--- a/drivers/staging/xgifb/vb_setmode.c
+++ b/drivers/staging/xgifb/vb_setmode.c
@@ -2,12 +2,6 @@
 
 
 
-#ifdef LINUX_XF86
-#include "xf86.h"
-#include "xf86PciInfo.h"
-#include "xgi.h"
-#include "xgi_regs.h"
-#endif
 
 #ifdef LINUX_KERNEL
 #include &lt;asm/io.h&gt;
@@ -2609,9 +2603,7 @@ void XGI_ClearBuffer( PXGI_HW_DEVICE_INFO HwDeviceExtension , USHORT ModeNo, PVB
     PVOID VideoMemoryAddress = ( PVOID )HwDeviceExtension-&gt;pjVideoMemoryAddress ;
     ULONG AdapterMemorySize  = ( ULONG )HwDeviceExtension-&gt;ulVideoMemorySize ;
     PUSHORT pBuffer ;
-#ifndef LINUX_XF86
     int i ;
-#endif
 
     if ( pVBInfo-&gt;ModeType &gt;= ModeEGA )
     {
@@ -4901,10 +4893,7 @@ UCHAR XGI_GetVCLKPtr(USHORT RefreshRateTableIndex,USHORT ModeNo,USHORT ModeIdInd
 
     USHORT index ,
            modeflag ;
-#ifndef LINUX_XF86
     USHORT tempbx ;
-#endif
-
     UCHAR tempal ;
     UCHAR *CHTVVCLKPtr = NULL ;
 
diff --git a/drivers/staging/xgifb/vb_util.c b/drivers/staging/xgifb/vb_util.c
index 4c8ec25211f2..b9ccce070738 100644
--- a/drivers/staging/xgifb/vb_util.c
+++ b/drivers/staging/xgifb/vb_util.c
@@ -9,18 +9,6 @@
 #include &lt;linux/types.h&gt;
 #endif
 
-
-
-#ifdef LINUX_XF86
-#include "xf86.h"
-#include "xf86PciInfo.h"
-#include "xgi.h"
-#include "xgi_regs.h"
-#endif
-
-
-
-
 void XGINew_SetReg1( ULONG , USHORT , USHORT ) ;
 void XGINew_SetReg2( ULONG , USHORT , USHORT ) ;
 void XGINew_SetReg3( ULONG , USHORT ) ;
@@ -42,13 +30,8 @@ void     XGINew_SetRegAND(ULONG Port,USHORT Index,USHORT DataAND);
 /* --------------------------------------------------------------------- */
 void XGINew_SetReg1( ULONG port , USHORT index , USHORT data )
 {
-#ifdef LINUX_XF86
-    OutPortByte( ( PUCHAR )(ULONG)port , index ) ;
-    OutPortByte( ( PUCHAR )(ULONG)port + 1 , data ) ;
-#else
     OutPortByte( port , index ) ;
     OutPortByte( port + 1 , data ) ;
-#endif
 }
 
 
@@ -101,13 +84,8 @@ UCHAR XGINew_GetReg1( ULONG port , USHORT index )
 {
     UCHAR data ;
 
-#ifdef LINUX_XF86
-    OutPortByte( ( PUCHAR )(ULONG)port , index ) ;
-    data = InPortByte( ( PUCHAR )(ULONG)port + 1 ) ;
-#else
     OutPortByte( port , index ) ;
     data = InPortByte( port + 1 ) ;
-#endif
 
     return( data ) ;
 }
diff --git a/drivers/staging/xgifb/vgatypes.h b/drivers/staging/xgifb/vgatypes.h
index 5a09c942203b..256ef26c2789 100644
--- a/drivers/staging/xgifb/vgatypes.h
+++ b/drivers/staging/xgifb/vgatypes.h
@@ -4,10 +4,6 @@
 
 #include "osdef.h"
 
-#ifdef LINUX_XF86
-#include "xf86Version.h"
-#include "xf86Pci.h"
-#endif
 
 #ifdef LINUX_KERNEL  /* We don't want the X driver to depend on kernel source */
 #include &lt;linux/ioctl.h&gt;
@@ -81,14 +77,6 @@ typedef UCHAR bool;
 typedef unsigned long XGIIOADDRESS;
 #endif
 
-#ifdef LINUX_XF86
-#if XF86_VERSION_CURRENT &lt; XF86_VERSION_NUMERIC(4,2,0,0,0)
-typedef unsigned char IOADDRESS;
-typedef unsigned char XGIIOADDRESS;
-#else
-typedef IOADDRESS XGIIOADDRESS;
-#endif
-#endif
 
 #ifndef VBIOS_VER_MAX_LENGTH
 #define VBIOS_VER_MAX_LENGTH    4
@@ -98,10 +86,6 @@ typedef IOADDRESS XGIIOADDRESS;
 #ifndef XGI_CHIP_TYPE
 typedef enum _XGI_CHIP_TYPE {
     XGI_VGALegacy = 0,
-#ifdef LINUX_XF86
-    XGI_530,
-    XGI_OLD,
-#endif
     XGI_300,
     XGI_630,
     XGI_640,
@@ -190,9 +174,6 @@ struct _XGI_HW_DEVICE_INFO
 {
     ULONG  ulExternalChip;       /* NO VB or other video bridge*/
                                  /* if ujVBChipID = VB_CHIP_UNKNOWN, */
-#ifdef LINUX_XF86
-    PCITAG PciTag;		 /* PCI Tag */
-#endif
 
     PUCHAR  pjVirtualRomBase;    /* ROM image */
 
@@ -264,55 +245,6 @@ struct _XGI_HW_DEVICE_INFO
 /* Addtional IOCTL for communication xgifb &lt;&gt; X driver        */
 /* If changing this, xgifb.h must also be changed (for xgifb) */
 
-#ifdef LINUX_XF86  /* We don't want the X driver to depend on the kernel source */
-
-/* ioctl for identifying and giving some info (esp. memory heap start) */
-#define XGIFB_GET_INFO    0x80046ef8  /* Wow, what a terrible hack... */
-
-/* Structure argument for XGIFB_GET_INFO ioctl  */
-typedef struct _XGIFB_INFO xgifb_info, *pxgifb_info;
-
-struct _XGIFB_INFO {
-	CARD32 	xgifb_id;         	/* for identifying xgifb */
-#ifndef XGIFB_ID
-#define XGIFB_ID	  0x53495346    /* Identify myself with 'XGIF' */
-#endif
- 	CARD32 	chip_id;		/* PCI ID of detected chip */
-	CARD32	memory;			/* video memory in KB which xgifb manages */
-	CARD32	heapstart;             	/* heap start (= xgifb "mem" argument) in KB */
-	CARD8 	fbvidmode;		/* current xgifb mode */
-
-	CARD8 	xgifb_version;
-	CARD8	xgifb_revision;
-	CARD8 	xgifb_patchlevel;
-
-	CARD8 	xgifb_caps;		/* xgifb's capabilities */
-
-	CARD32 	xgifb_tqlen;		/* turbo queue length (in KB) */
-
-	CARD32 	xgifb_pcibus;      	/* The card's PCI ID */
-	CARD32 	xgifb_pcislot;
-	CARD32 	xgifb_pcifunc;
-
-	CARD8 	xgifb_lcdpdc;
-
-	CARD8	xgifb_lcda;
-
-	CARD32	xgifb_vbflags;
-	CARD32	xgifb_currentvbflags;
-
-	CARD32 	xgifb_scalelcd;
-	CARD32 	xgifb_specialtiming;
-
-	CARD8 	xgifb_haveemi;
-	CARD8 	xgifb_emi30,xgifb_emi31,xgifb_emi32,xgifb_emi33;
-	CARD8 	xgifb_haveemilcd;
-
-	CARD8 	xgifb_lcdpdca;
-
-	CARD8 reserved[212]; 		/* for future use */
-};
-#endif
 
 #endif
 </pre>
    <div class="pagination">
        <a href='3_42.html'>&lt;&lt;Prev</a><a href='3.html'>1</a><a href='3_2.html'>2</a><a href='3_3.html'>3</a><a href='3_4.html'>4</a><a href='3_5.html'>5</a><a href='3_6.html'>6</a><a href='3_7.html'>7</a><a href='3_8.html'>8</a><a href='3_9.html'>9</a><a href='3_10.html'>10</a><a href='3_11.html'>11</a><a href='3_12.html'>12</a><a href='3_13.html'>13</a><a href='3_14.html'>14</a><a href='3_15.html'>15</a><a href='3_16.html'>16</a><a href='3_17.html'>17</a><a href='3_18.html'>18</a><a href='3_19.html'>19</a><a href='3_20.html'>20</a><a href='3_21.html'>21</a><a href='3_22.html'>22</a><a href='3_23.html'>23</a><a href='3_24.html'>24</a><a href='3_25.html'>25</a><a href='3_26.html'>26</a><a href='3_27.html'>27</a><a href='3_28.html'>28</a><a href='3_29.html'>29</a><a href='3_30.html'>30</a><a href='3_31.html'>31</a><a href='3_32.html'>32</a><a href='3_33.html'>33</a><a href='3_34.html'>34</a><a href='3_35.html'>35</a><a href='3_36.html'>36</a><a href='3_37.html'>37</a><a href='3_38.html'>38</a><a href='3_39.html'>39</a><a href='3_40.html'>40</a><a href='3_41.html'>41</a><a href='3_42.html'>42</a><span>[43]</span><a href='3_44.html'>44</a><a href='3_45.html'>45</a><a href='3_46.html'>46</a><a href='3_47.html'>47</a><a href='3_48.html'>48</a><a href='3_49.html'>49</a><a href='3_50.html'>50</a><a href='3_51.html'>51</a><a href='3_52.html'>52</a><a href='3_53.html'>53</a><a href='3_54.html'>54</a><a href='3_55.html'>55</a><a href='3_56.html'>56</a><a href='3_57.html'>57</a><a href='3_58.html'>58</a><a href='3_59.html'>59</a><a href='3_60.html'>60</a><a href='3_61.html'>61</a><a href='3_62.html'>62</a><a href='3_63.html'>63</a><a href='3_64.html'>64</a><a href='3_65.html'>65</a><a href='3_66.html'>66</a><a href='3_67.html'>67</a><a href='3_68.html'>68</a><a href='3_69.html'>69</a><a href='3_70.html'>70</a><a href='3_71.html'>71</a><a href='3_72.html'>72</a><a href='3_73.html'>73</a><a href='3_74.html'>74</a><a href='3_75.html'>75</a><a href='3_76.html'>76</a><a href='3_77.html'>77</a><a href='3_78.html'>78</a><a href='3_79.html'>79</a><a href='3_80.html'>80</a><a href='3_81.html'>81</a><a href='3_82.html'>82</a><a href='3_83.html'>83</a><a href='3_44.html'>Next&gt;&gt;</a>
    <div>
</body>

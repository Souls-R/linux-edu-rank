<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by Virginia Tech</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by Virginia Tech</h1>
    <div class="pagination">
        <a href='10_7.html'>&lt;&lt;Prev</a><a href='10.html'>1</a><a href='10_2.html'>2</a><a href='10_3.html'>3</a><a href='10_4.html'>4</a><a href='10_5.html'>5</a><a href='10_6.html'>6</a><a href='10_7.html'>7</a><span>[8]</span><a href='10_9.html'>9</a><a href='10_10.html'>10</a><a href='10_11.html'>11</a><a href='10_12.html'>12</a><a href='10_9.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit cede666e2eb28dc8a680d1622fded533769f07a4
Author: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
Date:   Tue Mar 12 04:58:32 2019 -0400

    trace/probes: Remove kernel doc style from non kernel doc comment
    
      CC      kernel/trace/trace_kprobe.o
    kernel/trace/trace_kprobe.c:41: warning: cannot understand function prototype: 'struct trace_kprobe '
    
    The real problem is that a comment looked like kerneldoc when it shouldn't be...
    
    Link: http://lkml.kernel.org/r/2812.1552381112@turing-police
    
    Signed-off-by: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
    Signed-off-by: Steven Rostedt (VMware) &lt;rostedt@goodmis.org&gt;

diff --git a/kernel/trace/trace_kprobe.c b/kernel/trace/trace_kprobe.c
index d5fb09ebba8b..ceafa0a2b1d1 100644
--- a/kernel/trace/trace_kprobe.c
+++ b/kernel/trace/trace_kprobe.c
@@ -35,7 +35,7 @@ static struct dyn_event_operations trace_kprobe_ops = {
 	.match = trace_kprobe_match,
 };
 
-/**
+/*
  * Kprobe event core functions
  */
 struct trace_kprobe {</pre><hr><pre>commit 0841625201b649c0b1bf0f0e25cf4401e68fb8fd
Author: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
Date:   Tue Mar 12 04:52:58 2019 -0400

    tracing/probes: Make reserved_field_names static
    
    sparse complains:
      CHECK   kernel/trace/trace_probe.c
    kernel/trace/trace_probe.c:16:12: warning: symbol 'reserved_field_names' was not declared. Should it be static?
    
    Yes, it should be static.
    
    Link: http://lkml.kernel.org/r/2478.1552380778@turing-police
    
    Signed-off-by: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
    Signed-off-by: Steven Rostedt (VMware) &lt;rostedt@goodmis.org&gt;

diff --git a/kernel/trace/trace_probe.c b/kernel/trace/trace_probe.c
index 89da34b326e3..cfcf77e6fb19 100644
--- a/kernel/trace/trace_probe.c
+++ b/kernel/trace/trace_probe.c
@@ -13,7 +13,7 @@
 
 #include "trace_probe.h"
 
-const char *reserved_field_names[] = {
+static const char *reserved_field_names[] = {
 	"common_type",
 	"common_flags",
 	"common_preempt_count",</pre><hr><pre>commit 8496ecd0bed4c70b43f39cecf0872b84360f0d14
Author: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
Date:   Thu Mar 7 16:29:06 2019 -0800

    init/calibrate.c: provide proper prototype
    
    Sparse issues a warning:
    
        CHECK   init/calibrate.c
      init/calibrate.c:271:28: warning: symbol 'calibration_delay_done' was not declared. Should it be static?
    
    The actual issue is that it's a __weak symbol that archs can override
    (in fact, ARM does so), but no prototype is provided.  Let's provide one
    to prevent surprises.
    
    Link: http://lkml.kernel.org/r/18827.1548750938@turing-police.cc.vt.edu
    Signed-off-by: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
    Reviewed-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

diff --git a/include/linux/delay.h b/include/linux/delay.h
index b78bab4395d8..8e6828094c1e 100644
--- a/include/linux/delay.h
+++ b/include/linux/delay.h
@@ -55,6 +55,7 @@ static inline void ndelay(unsigned long x)
 
 extern unsigned long lpj_fine;
 void calibrate_delay(void);
+void __attribute__((weak)) calibration_delay_done(void);
 void msleep(unsigned int msecs);
 unsigned long msleep_interruptible(unsigned int msecs);
 void usleep_range(unsigned long min, unsigned long max);</pre><hr><pre>commit a98eb6f19952f18a7e5ac55d6bd7bbbb2bdc8b88
Author: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
Date:   Thu Mar 7 16:26:46 2019 -0800

    kernel/hung_task.c - fix sparse warnings
    
    sparse complains:
    
        CHECK   kernel/hung_task.c
      kernel/hung_task.c:28:19: warning: symbol 'sysctl_hung_task_check_count' was not declared. Should it be static?
      kernel/hung_task.c:42:29: warning: symbol 'sysctl_hung_task_timeout_secs' was not declared. Should it be static?
      kernel/hung_task.c:47:29: warning: symbol 'sysctl_hung_task_check_interval_secs' was not declared. Should it be static?
      kernel/hung_task.c:49:19: warning: symbol 'sysctl_hung_task_warnings' was not declared. Should it be static?
      kernel/hung_task.c:61:28: warning: symbol 'sysctl_hung_task_panic' was not declared. Should it be static?
      kernel/hung_task.c:219:5: warning: symbol 'proc_dohung_task_timeout_secs' was not declared. Should it be static?
    
    Add the appropriate header file to provide declarations.
    
    Link: http://lkml.kernel.org/r/467.1548649525@turing-police.cc.vt.edu
    Signed-off-by: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
    Cc: "Paul E. McKenney" &lt;paulmck@linux.ibm.com&gt;
    Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

diff --git a/kernel/hung_task.c b/kernel/hung_task.c
index 4a9191617076..0c11216171c9 100644
--- a/kernel/hung_task.c
+++ b/kernel/hung_task.c
@@ -19,6 +19,7 @@
 #include &lt;linux/utsname.h&gt;
 #include &lt;linux/sched/signal.h&gt;
 #include &lt;linux/sched/debug.h&gt;
+#include &lt;linux/sched/sysctl.h&gt;
 
 #include &lt;trace/events/sched.h&gt;
 </pre><hr><pre>commit 1832f4ef5867fd3898d8a6c6c1978b75d76fc246
Author: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
Date:   Tue Jan 29 01:47:06 2019 -0500

    bpf, cgroups: clean up kerneldoc warnings
    
    Building with W=1 reveals some bitrot:
    
      CC      kernel/bpf/cgroup.o
    kernel/bpf/cgroup.c:238: warning: Function parameter or member 'flags' not described in '__cgroup_bpf_attach'
    kernel/bpf/cgroup.c:367: warning: Function parameter or member 'unused_flags' not described in '__cgroup_bpf_detach'
    
    Add a kerneldoc line for 'flags'.
    
    Fixing the warning for 'unused_flags' is best approached by
    removing the unused parameter on the function call.
    
    Signed-off-by: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
    Acked-by: Song Liu &lt;songliubraving@fb.com&gt;
    Signed-off-by: Daniel Borkmann &lt;daniel@iogearbox.net&gt;

diff --git a/include/linux/bpf-cgroup.h b/include/linux/bpf-cgroup.h
index 588dd5f0bd85..695b2a880d9a 100644
--- a/include/linux/bpf-cgroup.h
+++ b/include/linux/bpf-cgroup.h
@@ -78,7 +78,7 @@ int cgroup_bpf_inherit(struct cgroup *cgrp);
 int __cgroup_bpf_attach(struct cgroup *cgrp, struct bpf_prog *prog,
 			enum bpf_attach_type type, u32 flags);
 int __cgroup_bpf_detach(struct cgroup *cgrp, struct bpf_prog *prog,
-			enum bpf_attach_type type, u32 flags);
+			enum bpf_attach_type type);
 int __cgroup_bpf_query(struct cgroup *cgrp, const union bpf_attr *attr,
 		       union bpf_attr __user *uattr);
 
diff --git a/kernel/bpf/cgroup.c b/kernel/bpf/cgroup.c
index ab612fe9862f..d78cfec5807d 100644
--- a/kernel/bpf/cgroup.c
+++ b/kernel/bpf/cgroup.c
@@ -230,6 +230,7 @@ static int update_effective_progs(struct cgroup *cgrp,
  * @cgrp: The cgroup which descendants to traverse
  * @prog: A program to attach
  * @type: Type of attach operation
+ * @flags: Option flags
  *
  * Must be called with cgroup_mutex held.
  */
@@ -363,7 +364,7 @@ int __cgroup_bpf_attach(struct cgroup *cgrp, struct bpf_prog *prog,
  * Must be called with cgroup_mutex held.
  */
 int __cgroup_bpf_detach(struct cgroup *cgrp, struct bpf_prog *prog,
-			enum bpf_attach_type type, u32 unused_flags)
+			enum bpf_attach_type type)
 {
 	struct list_head *progs = &amp;cgrp-&gt;bpf.progs[type];
 	enum bpf_cgroup_storage_type stype;
diff --git a/kernel/cgroup/cgroup.c b/kernel/cgroup/cgroup.c
index f31bd61c9466..9f617605dacb 100644
--- a/kernel/cgroup/cgroup.c
+++ b/kernel/cgroup/cgroup.c
@@ -5996,7 +5996,7 @@ int cgroup_bpf_detach(struct cgroup *cgrp, struct bpf_prog *prog,
 	int ret;
 
 	mutex_lock(&amp;cgroup_mutex);
-	ret = __cgroup_bpf_detach(cgrp, prog, type, flags);
+	ret = __cgroup_bpf_detach(cgrp, prog, type);
 	mutex_unlock(&amp;cgroup_mutex);
 	return ret;
 }</pre><hr><pre>commit 116bfa96a255123ed209da6544f74a4f2eaca5da
Author: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
Date:   Tue Jan 29 01:04:25 2019 -0500

    bpf: fix missing prototype warnings
    
    Compiling with W=1 generates warnings:
    
      CC      kernel/bpf/core.o
    kernel/bpf/core.c:721:12: warning: no previous prototype for ?bpf_jit_alloc_exec_limit? [-Wmissing-prototypes]
      721 | u64 __weak bpf_jit_alloc_exec_limit(void)
          |            ^~~~~~~~~~~~~~~~~~~~~~~~
    kernel/bpf/core.c:757:14: warning: no previous prototype for ?bpf_jit_alloc_exec? [-Wmissing-prototypes]
      757 | void *__weak bpf_jit_alloc_exec(unsigned long size)
          |              ^~~~~~~~~~~~~~~~~~
    kernel/bpf/core.c:762:13: warning: no previous prototype for ?bpf_jit_free_exec? [-Wmissing-prototypes]
      762 | void __weak bpf_jit_free_exec(void *addr)
          |             ^~~~~~~~~~~~~~~~~
    
    All three are weak functions that archs can override, provide
    proper prototypes for when a new arch provides their own.
    
    Signed-off-by: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
    Acked-by: Song Liu &lt;songliubraving@fb.com&gt;
    Signed-off-by: Daniel Borkmann &lt;daniel@iogearbox.net&gt;

diff --git a/include/linux/filter.h b/include/linux/filter.h
index e4b473f85b46..7317376734f7 100644
--- a/include/linux/filter.h
+++ b/include/linux/filter.h
@@ -880,7 +880,9 @@ bpf_jit_binary_alloc(unsigned int proglen, u8 **image_ptr,
 		     unsigned int alignment,
 		     bpf_jit_fill_hole_t bpf_fill_ill_insns);
 void bpf_jit_binary_free(struct bpf_binary_header *hdr);
-
+u64 bpf_jit_alloc_exec_limit(void);
+void *bpf_jit_alloc_exec(unsigned long size);
+void bpf_jit_free_exec(void *addr);
 void bpf_jit_free(struct bpf_prog *fp);
 
 int bpf_jit_get_func_addr(const struct bpf_prog *prog,</pre><hr><pre>commit de1da68d9c9d230e448b9fa0abff139a0468fb96
Author: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
Date:   Mon Jan 28 23:04:46 2019 -0500

    bpf: fix bitrotted kerneldoc
    
    Over the years, the function signature has changed, but the
    kerneldoc block hasn't.
    
    Signed-off-by: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
    Acked-by: Song Liu &lt;songliubraving@fb.com&gt;
    Signed-off-by: Daniel Borkmann &lt;daniel@iogearbox.net&gt;

diff --git a/kernel/bpf/core.c b/kernel/bpf/core.c
index a7bcb23bee84..f13c543b7b36 100644
--- a/kernel/bpf/core.c
+++ b/kernel/bpf/core.c
@@ -1263,8 +1263,9 @@ bool bpf_opcode_in_insntable(u8 code)
 #ifndef CONFIG_BPF_JIT_ALWAYS_ON
 /**
  *	__bpf_prog_run - run eBPF program on a given context
- *	@ctx: is the data we are operating on
+ *	@regs: is the array of MAX_BPF_EXT_REG eBPF pseudo-registers
  *	@insn: is the array of eBPF instructions
+ *	@stack: is the eBPF storage stack
  *
  * Decode and execute eBPF instructions.
  */</pre><hr><pre>commit 90a8c78b8b5e2c8537a170ee675127f02ca94532
Author: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
Date:   Wed Sep 26 18:49:38 2018 -0400

    crypto/morus(640,1280) - make crypto_...-algs static
    
    sparse complains thusly:
    
      CHECK   arch/x86/crypto/morus640-sse2-glue.c
    arch/x86/crypto/morus640-sse2-glue.c:38:1: warning: symbol 'crypto_morus640_sse2_algs' was not declared. Should it be static?
      CHECK   arch/x86/crypto/morus1280-sse2-glue.c
    arch/x86/crypto/morus1280-sse2-glue.c:38:1: warning: symbol 'crypto_morus1280_sse2_algs' was not declared. Should it be static?
      CHECK   arch/x86/crypto/morus1280-avx2-glue.c
    arch/x86/crypto/morus1280-avx2-glue.c:38:1: warning: symbol 'crypto_morus1280_avx2_algs' was not declared. Should it be static?
    
    and sparse is correct - these don't need to be global and polluting the namespace.
    
    Signed-off-by: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
    Acked-by: Ondrej Mosnacek &lt;omosnacek@gmail.com&gt;
    Signed-off-by: Herbert Xu &lt;herbert@gondor.apana.org.au&gt;

diff --git a/include/crypto/morus1280_glue.h b/include/crypto/morus1280_glue.h
index b26dd70efd9a..ba782e10065e 100644
--- a/include/crypto/morus1280_glue.h
+++ b/include/crypto/morus1280_glue.h
@@ -82,7 +82,7 @@ void cryptd_morus1280_glue_exit_tfm(struct crypto_aead *aead);
 	{ \
 	} \
 	\
-	struct aead_alg crypto_morus1280_##id##_algs[] = {\
+	static struct aead_alg crypto_morus1280_##id##_algs[] = {\
 		{ \
 			.setkey = crypto_morus1280_glue_setkey, \
 			.setauthsize = crypto_morus1280_glue_setauthsize, \
diff --git a/include/crypto/morus640_glue.h b/include/crypto/morus640_glue.h
index 90c8db07e740..27fa790a2362 100644
--- a/include/crypto/morus640_glue.h
+++ b/include/crypto/morus640_glue.h
@@ -82,7 +82,7 @@ void cryptd_morus640_glue_exit_tfm(struct crypto_aead *aead);
 	{ \
 	} \
 	\
-	struct aead_alg crypto_morus640_##id##_algs[] = {\
+	static struct aead_alg crypto_morus640_##id##_algs[] = {\
 		{ \
 			.setkey = crypto_morus640_glue_setkey, \
 			.setauthsize = crypto_morus640_glue_setauthsize, \</pre><hr><pre>commit 1ec49a236565060566be547b6e050bb414d0da96
Author: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
Date:   Wed Aug 8 16:16:54 2018 -0400

    mt76: fix build for MediaTek MT7610U USB wireless dongle
    
    The mt76x0 driver requires the mt76 core driver to actually function.
    So add a 'select' to avoid embarrassing 'symbol unknown' errors
    when attempting to modprobe it in a module tree that doesn't
    include mt76.ko
    
    Signed-off-by: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
    Signed-off-by: Kalle Valo &lt;kvalo@codeaurora.org&gt;

diff --git a/drivers/net/wireless/mediatek/mt76/Kconfig b/drivers/net/wireless/mediatek/mt76/Kconfig
index 850611ad347a..b6c5f17dca30 100644
--- a/drivers/net/wireless/mediatek/mt76/Kconfig
+++ b/drivers/net/wireless/mediatek/mt76/Kconfig
@@ -11,6 +11,7 @@ config MT76x2_COMMON
 
 config MT76x0U
 	tristate "MediaTek MT76x0U (USB) support"
+	select MT76_CORE
 	depends on MAC80211
 	depends on USB
 	help</pre><hr><pre>commit 701b3a3c0ac42630f74a5efba8545d61ac0e3293
Author: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
Date:   Tue Jul 17 12:57:29 2018 -0400

    PATCH scripts/kernel-doc
    
    Fix a warning whinge from Perl introduced by "scripts: kernel-doc: parse next structs/unions"
    
    Unescaped left brace in regex is deprecated here (and will be fatal in Perl 5.32), passed through in regex; marked by &lt;-- HERE in m/({ &lt;-- HERE [^\{\}]*})/ at ./scripts/kernel-doc line 1155.
    Unescaped left brace in regex is deprecated here (and will be fatal in Perl 5.32), passed through in regex; marked by &lt;-- HERE in m/({ &lt;-- HERE )/ at ./scripts/kernel-doc line 1179.
    
    Signed-off-by: Valdis Kletnieks &lt;valdis.kletnieks@vt.edu&gt;
    Reviewed-by: Mauro Carvalho Chehab &lt;mchehab+samsung@kernel.org&gt;
    Signed-off-by: Jonathan Corbet &lt;corbet@lwn.net&gt;

diff --git a/scripts/kernel-doc b/scripts/kernel-doc
index 0057d8eafcc1..31a34ced55a3 100755
--- a/scripts/kernel-doc
+++ b/scripts/kernel-doc
@@ -1152,7 +1152,7 @@ sub dump_struct($$) {
 	}
 
 	# Ignore other nested elements, like enums
-	$members =~ s/({[^\{\}]*})//g;
+	$members =~ s/(\{[^\{\}]*})//g;
 
 	create_parameterlist($members, ';', $file, $declaration_name);
 	check_sections($file, $declaration_name, $decl_type, $sectcheck, $struct_actual);
@@ -1176,7 +1176,7 @@ sub dump_struct($$) {
 			$declaration .= "\t" x $level;
 		}
 		$declaration .= "\t" . $clause . "\n";
-		$level++ if ($clause =~ m/({)/ &amp;&amp; !($clause =~m/}/));
+		$level++ if ($clause =~ m/(\{)/ &amp;&amp; !($clause =~m/}/));
 	}
 	output_declaration($declaration_name,
 			   'struct',</pre>
    <div class="pagination">
        <a href='10_7.html'>&lt;&lt;Prev</a><a href='10.html'>1</a><a href='10_2.html'>2</a><a href='10_3.html'>3</a><a href='10_4.html'>4</a><a href='10_5.html'>5</a><a href='10_6.html'>6</a><a href='10_7.html'>7</a><span>[8]</span><a href='10_9.html'>9</a><a href='10_10.html'>10</a><a href='10_11.html'>11</a><a href='10_12.html'>12</a><a href='10_9.html'>Next&gt;&gt;</a>
    <div>
</body>

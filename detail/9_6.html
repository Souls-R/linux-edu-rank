<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by State University of New York at Stony Brook</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by State University of New York at Stony Brook</h1>
    <div class="pagination">
        <a href='9_5.html'>&lt;&lt;Prev</a><a href='9.html'>1</a><a href='9_2.html'>2</a><a href='9_3.html'>3</a><a href='9_4.html'>4</a><a href='9_5.html'>5</a><span>[6]</span><a href='9_7.html'>7</a><a href='9_8.html'>8</a><a href='9_9.html'>9</a><a href='9_10.html'>10</a><a href='9_11.html'>11</a><a href='9_12.html'>12</a><a href='9_13.html'>13</a><a href='9_14.html'>14</a><a href='9_7.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit d1f229744ece0b7aa7ce89ecd1fb598b90305d5b
Author: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
Date:   Fri Dec 8 02:37:14 2006 -0800

    [PATCH] struct path: convert ixj
    
    Signed-off-by: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/drivers/telephony/ixj.c b/drivers/telephony/ixj.c
index 1b601b6cf2a2..df4cc1fb5f68 100644
--- a/drivers/telephony/ixj.c
+++ b/drivers/telephony/ixj.c
@@ -2747,7 +2747,7 @@ static void alaw2ulaw(unsigned char *buff, unsigned long len)
 static ssize_t ixj_read(struct file * file_p, char __user *buf, size_t length, loff_t * ppos)
 {
 	unsigned long i = *ppos;
-	IXJ * j = get_ixj(NUM(file_p-&gt;f_dentry-&gt;d_inode));
+	IXJ * j = get_ixj(NUM(file_p-&gt;f_path.dentry-&gt;d_inode));
 
 	DECLARE_WAITQUEUE(wait, current);
 
@@ -2804,7 +2804,7 @@ static ssize_t ixj_enhanced_read(struct file * file_p, char __user *buf, size_t
 {
 	int pre_retval;
 	ssize_t read_retval = 0;
-	IXJ *j = get_ixj(NUM(file_p-&gt;f_dentry-&gt;d_inode));
+	IXJ *j = get_ixj(NUM(file_p-&gt;f_path.dentry-&gt;d_inode));
 
 	pre_retval = ixj_PreRead(j, 0L);
 	switch (pre_retval) {
@@ -2883,7 +2883,7 @@ static ssize_t ixj_enhanced_write(struct file * file_p, const char __user *buf,
 	int pre_retval;
 	ssize_t write_retval = 0;
 
-	IXJ *j = get_ixj(NUM(file_p-&gt;f_dentry-&gt;d_inode));
+	IXJ *j = get_ixj(NUM(file_p-&gt;f_path.dentry-&gt;d_inode));
 
 	pre_retval = ixj_PreWrite(j, 0L);
 	switch (pre_retval) {
@@ -4582,7 +4582,7 @@ static unsigned int ixj_poll(struct file *file_p, poll_table * wait)
 {
 	unsigned int mask = 0;
 
-	IXJ *j = get_ixj(NUM(file_p-&gt;f_dentry-&gt;d_inode));
+	IXJ *j = get_ixj(NUM(file_p-&gt;f_path.dentry-&gt;d_inode));
 
 	poll_wait(file_p, &amp;(j-&gt;poll_q), wait);
 	if (j-&gt;read_buffer_ready &gt; 0)
@@ -6657,7 +6657,7 @@ static int ixj_ioctl(struct inode *inode, struct file *file_p, unsigned int cmd,
 
 static int ixj_fasync(int fd, struct file *file_p, int mode)
 {
-	IXJ *j = get_ixj(NUM(file_p-&gt;f_dentry-&gt;d_inode));
+	IXJ *j = get_ixj(NUM(file_p-&gt;f_path.dentry-&gt;d_inode));
 
 	return fasync_helper(fd, file_p, mode, &amp;j-&gt;async_queue);
 }</pre><hr><pre>commit 4482dfad69d783d1df03ed3952838451a249985e
Author: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
Date:   Fri Dec 8 02:37:13 2006 -0800

    [PATCH] struct path: convert isdn
    
    Signed-off-by: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/drivers/isdn/capi/capi.c b/drivers/isdn/capi/capi.c
index 11844bbfe933..787a630a8e56 100644
--- a/drivers/isdn/capi/capi.c
+++ b/drivers/isdn/capi/capi.c
@@ -1010,7 +1010,7 @@ static int capinc_tty_open(struct tty_struct * tty, struct file * file)
 {
 	struct capiminor *mp;
 
-	if ((mp = capiminor_find(iminor(file-&gt;f_dentry-&gt;d_inode))) == 0)
+	if ((mp = capiminor_find(iminor(file-&gt;f_path.dentry-&gt;d_inode))) == 0)
 		return -ENXIO;
 	if (mp-&gt;nccip == 0)
 		return -ENXIO;
diff --git a/drivers/isdn/hysdn/hysdn_proclog.c b/drivers/isdn/hysdn/hysdn_proclog.c
index fcd49920b220..4d238eff1773 100644
--- a/drivers/isdn/hysdn/hysdn_proclog.c
+++ b/drivers/isdn/hysdn/hysdn_proclog.c
@@ -204,7 +204,7 @@ hysdn_log_read(struct file *file, char __user *buf, size_t count, loff_t * off)
 {
 	struct log_data *inf;
 	int len;
-	struct proc_dir_entry *pde = PDE(file-&gt;f_dentry-&gt;d_inode);
+	struct proc_dir_entry *pde = PDE(file-&gt;f_path.dentry-&gt;d_inode);
 	struct procdata *pd = NULL;
 	hysdn_card *card;
 
@@ -354,7 +354,7 @@ static unsigned int
 hysdn_log_poll(struct file *file, poll_table * wait)
 {
 	unsigned int mask = 0;
-	struct proc_dir_entry *pde = PDE(file-&gt;f_dentry-&gt;d_inode);
+	struct proc_dir_entry *pde = PDE(file-&gt;f_path.dentry-&gt;d_inode);
 	hysdn_card *card;
 	struct procdata *pd = NULL;
 
diff --git a/drivers/isdn/i4l/isdn_common.c b/drivers/isdn/i4l/isdn_common.c
index 69aee2602aa6..a610a05aa217 100644
--- a/drivers/isdn/i4l/isdn_common.c
+++ b/drivers/isdn/i4l/isdn_common.c
@@ -1059,7 +1059,7 @@ isdn_info_update(void)
 static ssize_t
 isdn_read(struct file *file, char __user *buf, size_t count, loff_t * off)
 {
-	uint minor = iminor(file-&gt;f_dentry-&gt;d_inode);
+	uint minor = iminor(file-&gt;f_path.dentry-&gt;d_inode);
 	int len = 0;
 	int drvidx;
 	int chidx;
@@ -1166,7 +1166,7 @@ isdn_read(struct file *file, char __user *buf, size_t count, loff_t * off)
 static ssize_t
 isdn_write(struct file *file, const char __user *buf, size_t count, loff_t * off)
 {
-	uint minor = iminor(file-&gt;f_dentry-&gt;d_inode);
+	uint minor = iminor(file-&gt;f_path.dentry-&gt;d_inode);
 	int drvidx;
 	int chidx;
 	int retval;
@@ -1228,7 +1228,7 @@ static unsigned int
 isdn_poll(struct file *file, poll_table * wait)
 {
 	unsigned int mask = 0;
-	unsigned int minor = iminor(file-&gt;f_dentry-&gt;d_inode);
+	unsigned int minor = iminor(file-&gt;f_path.dentry-&gt;d_inode);
 	int drvidx = isdn_minor2drv(minor - ISDN_MINOR_CTRL);
 
 	lock_kernel();
diff --git a/drivers/isdn/i4l/isdn_ppp.c b/drivers/isdn/i4l/isdn_ppp.c
index 119412d6bd15..175199088bf4 100644
--- a/drivers/isdn/i4l/isdn_ppp.c
+++ b/drivers/isdn/i4l/isdn_ppp.c
@@ -667,7 +667,7 @@ isdn_ppp_poll(struct file *file, poll_table * wait)
 
 	if (is-&gt;debug &amp; 0x2)
 		printk(KERN_DEBUG "isdn_ppp_poll: minor: %d\n",
-				iminor(file-&gt;f_dentry-&gt;d_inode));
+				iminor(file-&gt;f_path.dentry-&gt;d_inode));
 
 	/* just registers wait_queue hook. This doesn't really wait. */
 	poll_wait(file, &amp;is-&gt;wq, wait);</pre><hr><pre>commit b23463b9b94a00baf4cc3cf835c366cffff715c2
Author: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
Date:   Fri Dec 8 02:37:13 2006 -0800

    [PATCH] struct path: convert isapnp
    
    Signed-off-by: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/drivers/pnp/isapnp/proc.c b/drivers/pnp/isapnp/proc.c
index 958c11bedd0d..d21f3c1e72fc 100644
--- a/drivers/pnp/isapnp/proc.c
+++ b/drivers/pnp/isapnp/proc.c
@@ -56,7 +56,7 @@ static loff_t isapnp_proc_bus_lseek(struct file *file, loff_t off, int whence)
 
 static ssize_t isapnp_proc_bus_read(struct file *file, char __user *buf, size_t nbytes, loff_t *ppos)
 {
-	struct inode *ino = file-&gt;f_dentry-&gt;d_inode;
+	struct inode *ino = file-&gt;f_path.dentry-&gt;d_inode;
 	struct proc_dir_entry *dp = PDE(ino);
 	struct pnp_dev *dev = dp-&gt;data;
 	int pos = *ppos;</pre><hr><pre>commit 780884144248cbb6945b191c9867741bb8c0ad35
Author: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
Date:   Fri Dec 8 02:37:12 2006 -0800

    [PATCH] struct path: convert ipmi
    
    Signed-off-by: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/drivers/char/ipmi/ipmi_devintf.c b/drivers/char/ipmi/ipmi_devintf.c
index 375d3378eecd..e257835a9a73 100644
--- a/drivers/char/ipmi/ipmi_devintf.c
+++ b/drivers/char/ipmi/ipmi_devintf.c
@@ -798,7 +798,7 @@ static long compat_ipmi_ioctl(struct file *filep, unsigned int cmd,
 		if (copy_to_user(precv64, &amp;recv64, sizeof(recv64)))
 			return -EFAULT;
 
-		rc = ipmi_ioctl(filep-&gt;f_dentry-&gt;d_inode, filep,
+		rc = ipmi_ioctl(filep-&gt;f_path.dentry-&gt;d_inode, filep,
 				((cmd == COMPAT_IPMICTL_RECEIVE_MSG)
 				 ? IPMICTL_RECEIVE_MSG
 				 : IPMICTL_RECEIVE_MSG_TRUNC),
@@ -815,7 +815,7 @@ static long compat_ipmi_ioctl(struct file *filep, unsigned int cmd,
 		return rc;
 	}
 	default:
-		return ipmi_ioctl(filep-&gt;f_dentry-&gt;d_inode, filep, cmd, arg);
+		return ipmi_ioctl(filep-&gt;f_path.dentry-&gt;d_inode, filep, cmd, arg);
 	}
 }
 #endif</pre><hr><pre>commit 6d63079adde80bb549528371e6407f88e9d27bc3
Author: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
Date:   Fri Dec 8 02:37:11 2006 -0800

    [PATCH] struct path: convert ipc
    
    Signed-off-by: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/ipc/mqueue.c b/ipc/mqueue.c
index 3acc1661e517..02717f71d8d0 100644
--- a/ipc/mqueue.c
+++ b/ipc/mqueue.c
@@ -322,7 +322,7 @@ static int mqueue_unlink(struct inode *dir, struct dentry *dentry)
 static ssize_t mqueue_read_file(struct file *filp, char __user *u_data,
 				size_t count, loff_t * off)
 {
-	struct mqueue_inode_info *info = MQUEUE_I(filp-&gt;f_dentry-&gt;d_inode);
+	struct mqueue_inode_info *info = MQUEUE_I(filp-&gt;f_path.dentry-&gt;d_inode);
 	char buffer[FILENT_SIZE];
 	size_t slen;
 	loff_t o;
@@ -354,13 +354,13 @@ static ssize_t mqueue_read_file(struct file *filp, char __user *u_data,
 		return -EFAULT;
 
 	*off = o + count;
-	filp-&gt;f_dentry-&gt;d_inode-&gt;i_atime = filp-&gt;f_dentry-&gt;d_inode-&gt;i_ctime = CURRENT_TIME;
+	filp-&gt;f_path.dentry-&gt;d_inode-&gt;i_atime = filp-&gt;f_path.dentry-&gt;d_inode-&gt;i_ctime = CURRENT_TIME;
 	return count;
 }
 
 static int mqueue_flush_file(struct file *filp, fl_owner_t id)
 {
-	struct mqueue_inode_info *info = MQUEUE_I(filp-&gt;f_dentry-&gt;d_inode);
+	struct mqueue_inode_info *info = MQUEUE_I(filp-&gt;f_path.dentry-&gt;d_inode);
 
 	spin_lock(&amp;info-&gt;lock);
 	if (task_tgid(current) == info-&gt;notify_owner)
@@ -372,7 +372,7 @@ static int mqueue_flush_file(struct file *filp, fl_owner_t id)
 
 static unsigned int mqueue_poll_file(struct file *filp, struct poll_table_struct *poll_tab)
 {
-	struct mqueue_inode_info *info = MQUEUE_I(filp-&gt;f_dentry-&gt;d_inode);
+	struct mqueue_inode_info *info = MQUEUE_I(filp-&gt;f_path.dentry-&gt;d_inode);
 	int retval = 0;
 
 	poll_wait(filp, &amp;info-&gt;wait_q, poll_tab);
@@ -836,7 +836,7 @@ asmlinkage long sys_mq_timedsend(mqd_t mqdes, const char __user *u_msg_ptr,
 	if (unlikely(!filp))
 		goto out;
 
-	inode = filp-&gt;f_dentry-&gt;d_inode;
+	inode = filp-&gt;f_path.dentry-&gt;d_inode;
 	if (unlikely(filp-&gt;f_op != &amp;mqueue_file_operations))
 		goto out_fput;
 	info = MQUEUE_I(inode);
@@ -919,7 +919,7 @@ asmlinkage ssize_t sys_mq_timedreceive(mqd_t mqdes, char __user *u_msg_ptr,
 	if (unlikely(!filp))
 		goto out;
 
-	inode = filp-&gt;f_dentry-&gt;d_inode;
+	inode = filp-&gt;f_path.dentry-&gt;d_inode;
 	if (unlikely(filp-&gt;f_op != &amp;mqueue_file_operations))
 		goto out_fput;
 	info = MQUEUE_I(inode);
@@ -1056,7 +1056,7 @@ asmlinkage long sys_mq_notify(mqd_t mqdes,
 	if (!filp)
 		goto out;
 
-	inode = filp-&gt;f_dentry-&gt;d_inode;
+	inode = filp-&gt;f_path.dentry-&gt;d_inode;
 	if (unlikely(filp-&gt;f_op != &amp;mqueue_file_operations))
 		goto out_fput;
 	info = MQUEUE_I(inode);
@@ -1126,7 +1126,7 @@ asmlinkage long sys_mq_getsetattr(mqd_t mqdes,
 	if (!filp)
 		goto out;
 
-	inode = filp-&gt;f_dentry-&gt;d_inode;
+	inode = filp-&gt;f_path.dentry-&gt;d_inode;
 	if (unlikely(filp-&gt;f_op != &amp;mqueue_file_operations))
 		goto out_fput;
 	info = MQUEUE_I(inode);
diff --git a/ipc/shm.c b/ipc/shm.c
index d1198dd07a1a..6d16bb6de7d2 100644
--- a/ipc/shm.c
+++ b/ipc/shm.c
@@ -168,7 +168,7 @@ static inline void shm_inc(struct ipc_namespace *ns, int id)
 static void shm_open(struct vm_area_struct *shmd)
 {
 	shm_inc(shm_file_ns(shmd-&gt;vm_file),
-			shmd-&gt;vm_file-&gt;f_dentry-&gt;d_inode-&gt;i_ino);
+			shmd-&gt;vm_file-&gt;f_path.dentry-&gt;d_inode-&gt;i_ino);
 }
 
 /*
@@ -187,7 +187,7 @@ static void shm_destroy(struct ipc_namespace *ns, struct shmid_kernel *shp)
 	if (!is_file_hugepages(shp-&gt;shm_file))
 		shmem_lock(shp-&gt;shm_file, 0, shp-&gt;mlock_user);
 	else
-		user_shm_unlock(shp-&gt;shm_file-&gt;f_dentry-&gt;d_inode-&gt;i_size,
+		user_shm_unlock(shp-&gt;shm_file-&gt;f_path.dentry-&gt;d_inode-&gt;i_size,
 						shp-&gt;mlock_user);
 	fput (shp-&gt;shm_file);
 	security_shm_free(shp);
@@ -203,7 +203,7 @@ static void shm_destroy(struct ipc_namespace *ns, struct shmid_kernel *shp)
 static void shm_close (struct vm_area_struct *shmd)
 {
 	struct file * file = shmd-&gt;vm_file;
-	int id = file-&gt;f_dentry-&gt;d_inode-&gt;i_ino;
+	int id = file-&gt;f_path.dentry-&gt;d_inode-&gt;i_ino;
 	struct shmid_kernel *shp;
 	struct ipc_namespace *ns;
 
@@ -233,7 +233,7 @@ static int shm_mmap(struct file * file, struct vm_area_struct * vma)
 		vma-&gt;vm_ops = &amp;shm_vm_ops;
 		if (!(vma-&gt;vm_flags &amp; VM_WRITE))
 			vma-&gt;vm_flags &amp;= ~VM_MAYWRITE;
-		shm_inc(shm_file_ns(file), file-&gt;f_dentry-&gt;d_inode-&gt;i_ino);
+		shm_inc(shm_file_ns(file), file-&gt;f_path.dentry-&gt;d_inode-&gt;i_ino);
 	}
 
 	return ret;
@@ -330,7 +330,7 @@ static int newseg (struct ipc_namespace *ns, key_t key, int shmflg, size_t size)
 	shp-&gt;shm_nattch = 0;
 	shp-&gt;id = shm_buildid(ns, id, shp-&gt;shm_perm.seq);
 	shp-&gt;shm_file = file;
-	file-&gt;f_dentry-&gt;d_inode-&gt;i_ino = shp-&gt;id;
+	file-&gt;f_path.dentry-&gt;d_inode-&gt;i_ino = shp-&gt;id;
 
 	shm_file_ns(file) = get_ipc_ns(ns);
 
@@ -495,7 +495,7 @@ static void shm_get_stat(struct ipc_namespace *ns, unsigned long *rss,
 		if(!shp)
 			continue;
 
-		inode = shp-&gt;shm_file-&gt;f_dentry-&gt;d_inode;
+		inode = shp-&gt;shm_file-&gt;f_path.dentry-&gt;d_inode;
 
 		if (is_file_hugepages(shp-&gt;shm_file)) {
 			struct address_space *mapping = inode-&gt;i_mapping;
@@ -843,7 +843,7 @@ long do_shmat(int shmid, char __user *shmaddr, int shmflg, ulong *raddr)
 	}
 		
 	file = shp-&gt;shm_file;
-	size = i_size_read(file-&gt;f_dentry-&gt;d_inode);
+	size = i_size_read(file-&gt;f_path.dentry-&gt;d_inode);
 	shp-&gt;shm_nattch++;
 	shm_unlock(shp);
 
@@ -948,7 +948,7 @@ asmlinkage long sys_shmdt(char __user *shmaddr)
 			(vma-&gt;vm_start - addr)/PAGE_SIZE == vma-&gt;vm_pgoff) {
 
 
-			size = vma-&gt;vm_file-&gt;f_dentry-&gt;d_inode-&gt;i_size;
+			size = vma-&gt;vm_file-&gt;f_path.dentry-&gt;d_inode-&gt;i_size;
 			do_munmap(mm, vma-&gt;vm_start, vma-&gt;vm_end - vma-&gt;vm_start);
 			/*
 			 * We discovered the size of the shm segment, so</pre><hr><pre>commit 1cfd6e648b5ea21b0d48bf6f18b129e4576557d5
Author: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
Date:   Fri Dec 8 02:37:10 2006 -0800

    [PATCH] struct path: convert infiniband
    
    Signed-off-by: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/drivers/infiniband/core/uverbs_main.c b/drivers/infiniband/core/uverbs_main.c
index 4e16314e8e6d..a617ca7b6923 100644
--- a/drivers/infiniband/core/uverbs_main.c
+++ b/drivers/infiniband/core/uverbs_main.c
@@ -534,9 +534,9 @@ struct file *ib_uverbs_alloc_event_file(struct ib_uverbs_file *uverbs_file,
 	 * module reference.
 	 */
 	filp-&gt;f_op 	   = fops_get(&amp;uverbs_event_fops);
-	filp-&gt;f_vfsmnt 	   = mntget(uverbs_event_mnt);
-	filp-&gt;f_dentry 	   = dget(uverbs_event_mnt-&gt;mnt_root);
-	filp-&gt;f_mapping    = filp-&gt;f_dentry-&gt;d_inode-&gt;i_mapping;
+	filp-&gt;f_path.mnt 	   = mntget(uverbs_event_mnt);
+	filp-&gt;f_path.dentry 	   = dget(uverbs_event_mnt-&gt;mnt_root);
+	filp-&gt;f_mapping    = filp-&gt;f_path.dentry-&gt;d_inode-&gt;i_mapping;
 	filp-&gt;f_flags      = O_RDONLY;
 	filp-&gt;f_mode       = FMODE_READ;
 	filp-&gt;private_data = ev_file;
diff --git a/drivers/infiniband/hw/ipath/ipath_file_ops.c b/drivers/infiniband/hw/ipath/ipath_file_ops.c
index a9ddc6911f66..340f27e3ebff 100644
--- a/drivers/infiniband/hw/ipath/ipath_file_ops.c
+++ b/drivers/infiniband/hw/ipath/ipath_file_ops.c
@@ -1745,9 +1745,9 @@ static int ipath_assign_port(struct file *fp,
 		goto done;
 	}
 
-	i_minor = iminor(fp-&gt;f_dentry-&gt;d_inode) - IPATH_USER_MINOR_BASE;
+	i_minor = iminor(fp-&gt;f_path.dentry-&gt;d_inode) - IPATH_USER_MINOR_BASE;
 	ipath_cdbg(VERBOSE, "open on dev %lx (minor %d)\n",
-		   (long)fp-&gt;f_dentry-&gt;d_inode-&gt;i_rdev, i_minor);
+		   (long)fp-&gt;f_path.dentry-&gt;d_inode-&gt;i_rdev, i_minor);
 
 	if (i_minor)
 		ret = find_free_port(i_minor - 1, fp, uinfo);
diff --git a/drivers/infiniband/hw/ipath/ipath_fs.c b/drivers/infiniband/hw/ipath/ipath_fs.c
index d9ff283f725e..79a60f020a21 100644
--- a/drivers/infiniband/hw/ipath/ipath_fs.c
+++ b/drivers/infiniband/hw/ipath/ipath_fs.c
@@ -118,7 +118,7 @@ static ssize_t atomic_counters_read(struct file *file, char __user *buf,
 	u16 i;
 	struct ipath_devdata *dd;
 
-	dd = file-&gt;f_dentry-&gt;d_inode-&gt;i_private;
+	dd = file-&gt;f_path.dentry-&gt;d_inode-&gt;i_private;
 
 	for (i = 0; i &lt; NUM_COUNTERS; i++)
 		counters[i] = ipath_snap_cntr(dd, i);
@@ -138,7 +138,7 @@ static ssize_t atomic_node_info_read(struct file *file, char __user *buf,
 	struct ipath_devdata *dd;
 	u64 guid;
 
-	dd = file-&gt;f_dentry-&gt;d_inode-&gt;i_private;
+	dd = file-&gt;f_path.dentry-&gt;d_inode-&gt;i_private;
 
 	guid = be64_to_cpu(dd-&gt;ipath_guid);
 
@@ -177,7 +177,7 @@ static ssize_t atomic_port_info_read(struct file *file, char __user *buf,
 	u32 tmp, tmp2;
 	struct ipath_devdata *dd;
 
-	dd = file-&gt;f_dentry-&gt;d_inode-&gt;i_private;
+	dd = file-&gt;f_path.dentry-&gt;d_inode-&gt;i_private;
 
 	/* so we only initialize non-zero fields. */
 	memset(portinfo, 0, sizeof portinfo);
@@ -324,7 +324,7 @@ static ssize_t flash_read(struct file *file, char __user *buf,
 		goto bail;
 	}
 
-	dd = file-&gt;f_dentry-&gt;d_inode-&gt;i_private;
+	dd = file-&gt;f_path.dentry-&gt;d_inode-&gt;i_private;
 	if (ipath_eeprom_read(dd, pos, tmp, count)) {
 		ipath_dev_err(dd, "failed to read from flash\n");
 		ret = -ENXIO;
@@ -377,7 +377,7 @@ static ssize_t flash_write(struct file *file, const char __user *buf,
 		goto bail_tmp;
 	}
 
-	dd = file-&gt;f_dentry-&gt;d_inode-&gt;i_private;
+	dd = file-&gt;f_path.dentry-&gt;d_inode-&gt;i_private;
 	if (ipath_eeprom_write(dd, pos, tmp, count)) {
 		ret = -ENXIO;
 		ipath_dev_err(dd, "failed to write to flash\n");</pre><hr><pre>commit 4db61081fac72623eb638f918819046361ff1508
Author: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
Date:   Fri Dec 8 02:37:10 2006 -0800

    [PATCH] struct path: convert ieee1394
    
    Signed-off-by: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/drivers/ieee1394/ieee1394_core.h b/drivers/ieee1394/ieee1394_core.h
index af4a78a8ef3b..536ba3f580fd 100644
--- a/drivers/ieee1394/ieee1394_core.h
+++ b/drivers/ieee1394/ieee1394_core.h
@@ -217,7 +217,7 @@ void hpsb_packet_received(struct hpsb_host *host, quadlet_t *data, size_t size,
 /* return the index (within a minor number block) of a file */
 static inline unsigned char ieee1394_file_to_instance(struct file *file)
 {
-	return file-&gt;f_dentry-&gt;d_inode-&gt;i_cindex;
+	return file-&gt;f_path.dentry-&gt;d_inode-&gt;i_cindex;
 }
 
 extern int hpsb_disable_irm;</pre><hr><pre>commit b66ffad90429a2ed84c6e8954d205539f6cc86a9
Author: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
Date:   Fri Dec 8 02:37:09 2006 -0800

    [PATCH] struct path: convert ia64
    
    Signed-off-by: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/arch/ia64/ia32/sys_ia32.c b/arch/ia64/ia32/sys_ia32.c
index a4a6e1463af8..957681c39ad9 100644
--- a/arch/ia64/ia32/sys_ia32.c
+++ b/arch/ia64/ia32/sys_ia32.c
@@ -235,7 +235,7 @@ mmap_subpage (struct file *file, unsigned long start, unsigned long end, int pro
 
 	if (!(flags &amp; MAP_ANONYMOUS)) {
 		/* read the file contents */
-		inode = file-&gt;f_dentry-&gt;d_inode;
+		inode = file-&gt;f_path.dentry-&gt;d_inode;
 		if (!inode-&gt;i_fop || !file-&gt;f_op-&gt;read
 		    || ((*file-&gt;f_op-&gt;read)(file, (char __user *) start, end - start, &amp;off) &lt; 0))
 		{
@@ -837,7 +837,7 @@ emulate_mmap (struct file *file, unsigned long start, unsigned long len, int pro
 
 	if (!is_congruent) {
 		/* read the file contents */
-		inode = file-&gt;f_dentry-&gt;d_inode;
+		inode = file-&gt;f_path.dentry-&gt;d_inode;
 		if (!inode-&gt;i_fop || !file-&gt;f_op-&gt;read
 		    || ((*file-&gt;f_op-&gt;read)(file, (char __user *) pstart, pend - pstart, &amp;poff)
 			&lt; 0))
diff --git a/arch/ia64/kernel/perfmon.c b/arch/ia64/kernel/perfmon.c
index dbb28164b19b..aa94f60fa8e7 100644
--- a/arch/ia64/kernel/perfmon.c
+++ b/arch/ia64/kernel/perfmon.c
@@ -2188,13 +2188,13 @@ pfm_alloc_fd(struct file **cfile)
 	/*
 	 * allocate a new dcache entry
 	 */
-	file-&gt;f_dentry = d_alloc(pfmfs_mnt-&gt;mnt_sb-&gt;s_root, &amp;this);
-	if (!file-&gt;f_dentry) goto out;
+	file-&gt;f_path.dentry = d_alloc(pfmfs_mnt-&gt;mnt_sb-&gt;s_root, &amp;this);
+	if (!file-&gt;f_path.dentry) goto out;
 
-	file-&gt;f_dentry-&gt;d_op = &amp;pfmfs_dentry_operations;
+	file-&gt;f_path.dentry-&gt;d_op = &amp;pfmfs_dentry_operations;
 
-	d_add(file-&gt;f_dentry, inode);
-	file-&gt;f_vfsmnt = mntget(pfmfs_mnt);
+	d_add(file-&gt;f_path.dentry, inode);
+	file-&gt;f_path.mnt = mntget(pfmfs_mnt);
 	file-&gt;f_mapping = inode-&gt;i_mapping;
 
 	file-&gt;f_op    = &amp;pfm_file_ops;
diff --git a/arch/ia64/kernel/salinfo.c b/arch/ia64/kernel/salinfo.c
index fd607ca51a8d..e375a2f0f2c3 100644
--- a/arch/ia64/kernel/salinfo.c
+++ b/arch/ia64/kernel/salinfo.c
@@ -302,7 +302,7 @@ salinfo_event_open(struct inode *inode, struct file *file)
 static ssize_t
 salinfo_event_read(struct file *file, char __user *buffer, size_t count, loff_t *ppos)
 {
-	struct inode *inode = file-&gt;f_dentry-&gt;d_inode;
+	struct inode *inode = file-&gt;f_path.dentry-&gt;d_inode;
 	struct proc_dir_entry *entry = PDE(inode);
 	struct salinfo_data *data = entry-&gt;data;
 	char cmd[32];
@@ -464,7 +464,7 @@ salinfo_log_new_read(int cpu, struct salinfo_data *data)
 static ssize_t
 salinfo_log_read(struct file *file, char __user *buffer, size_t count, loff_t *ppos)
 {
-	struct inode *inode = file-&gt;f_dentry-&gt;d_inode;
+	struct inode *inode = file-&gt;f_path.dentry-&gt;d_inode;
 	struct proc_dir_entry *entry = PDE(inode);
 	struct salinfo_data *data = entry-&gt;data;
 	u8 *buf;
@@ -525,7 +525,7 @@ salinfo_log_clear(struct salinfo_data *data, int cpu)
 static ssize_t
 salinfo_log_write(struct file *file, const char __user *buffer, size_t count, loff_t *ppos)
 {
-	struct inode *inode = file-&gt;f_dentry-&gt;d_inode;
+	struct inode *inode = file-&gt;f_path.dentry-&gt;d_inode;
 	struct proc_dir_entry *entry = PDE(inode);
 	struct salinfo_data *data = entry-&gt;data;
 	char cmd[32];</pre><hr><pre>commit cba0a128434f1fae6f90ba9f1fedf18be7abcf48
Author: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
Date:   Fri Dec 8 02:37:08 2006 -0800

    [PATCH] struct path: convert i2c-drivers
    
    Signed-off-by: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/drivers/i2c/i2c-dev.c b/drivers/i2c/i2c-dev.c
index 94a4e9a3013c..2e22a2ffa606 100644
--- a/drivers/i2c/i2c-dev.c
+++ b/drivers/i2c/i2c-dev.c
@@ -119,7 +119,7 @@ static ssize_t i2cdev_read (struct file *file, char __user *buf, size_t count,
 		return -ENOMEM;
 
 	pr_debug("i2c-dev: i2c-%d reading %zd bytes.\n",
-		iminor(file-&gt;f_dentry-&gt;d_inode), count);
+		iminor(file-&gt;f_path.dentry-&gt;d_inode), count);
 
 	ret = i2c_master_recv(client,tmp,count);
 	if (ret &gt;= 0)
@@ -147,7 +147,7 @@ static ssize_t i2cdev_write (struct file *file, const char __user *buf, size_t c
 	}
 
 	pr_debug("i2c-dev: i2c-%d writing %zd bytes.\n",
-		iminor(file-&gt;f_dentry-&gt;d_inode), count);
+		iminor(file-&gt;f_path.dentry-&gt;d_inode), count);
 
 	ret = i2c_master_send(client,tmp,count);
 	kfree(tmp);</pre><hr><pre>commit b39424e274a17c9c3233c9911dd328b10370de8f
Author: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
Date:   Fri Dec 8 02:37:07 2006 -0800

    [PATCH] struct path: convert hugetlbfs
    
    Signed-off-by: Josef Sipek &lt;jsipek@fsl.cs.sunysb.edu&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/fs/hugetlbfs/inode.c b/fs/hugetlbfs/inode.c
index 0706f5aac6a2..ed2c22340ad7 100644
--- a/fs/hugetlbfs/inode.c
+++ b/fs/hugetlbfs/inode.c
@@ -58,7 +58,7 @@ static void huge_pagevec_release(struct pagevec *pvec)
 
 static int hugetlbfs_file_mmap(struct file *file, struct vm_area_struct *vma)
 {
-	struct inode *inode = file-&gt;f_dentry-&gt;d_inode;
+	struct inode *inode = file-&gt;f_path.dentry-&gt;d_inode;
 	loff_t len, vma_len;
 	int ret;
 
@@ -774,8 +774,8 @@ struct file *hugetlb_zero_setup(size_t size)
 	d_instantiate(dentry, inode);
 	inode-&gt;i_size = size;
 	inode-&gt;i_nlink = 0;
-	file-&gt;f_vfsmnt = mntget(hugetlbfs_vfsmount);
-	file-&gt;f_dentry = dentry;
+	file-&gt;f_path.mnt = mntget(hugetlbfs_vfsmount);
+	file-&gt;f_path.dentry = dentry;
 	file-&gt;f_mapping = inode-&gt;i_mapping;
 	file-&gt;f_op = &amp;hugetlbfs_file_operations;
 	file-&gt;f_mode = FMODE_WRITE | FMODE_READ;</pre>
    <div class="pagination">
        <a href='9_5.html'>&lt;&lt;Prev</a><a href='9.html'>1</a><a href='9_2.html'>2</a><a href='9_3.html'>3</a><a href='9_4.html'>4</a><a href='9_5.html'>5</a><span>[6]</span><a href='9_7.html'>7</a><a href='9_8.html'>8</a><a href='9_9.html'>9</a><a href='9_10.html'>10</a><a href='9_11.html'>11</a><a href='9_12.html'>12</a><a href='9_13.html'>13</a><a href='9_14.html'>14</a><a href='9_7.html'>Next&gt;&gt;</a>
    <div>
</body>

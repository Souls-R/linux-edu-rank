<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of Minnesota</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of Minnesota</h1>
    <div class="pagination">
        <a href='7_22.html'>&lt;&lt;Prev</a><a href='7.html'>1</a><a href='7_2.html'>2</a><a href='7_3.html'>3</a><a href='7_4.html'>4</a><a href='7_5.html'>5</a><a href='7_6.html'>6</a><a href='7_7.html'>7</a><a href='7_8.html'>8</a><a href='7_9.html'>9</a><a href='7_10.html'>10</a><a href='7_11.html'>11</a><a href='7_12.html'>12</a><a href='7_13.html'>13</a><a href='7_14.html'>14</a><a href='7_15.html'>15</a><a href='7_16.html'>16</a><a href='7_17.html'>17</a><a href='7_18.html'>18</a><a href='7_19.html'>19</a><a href='7_20.html'>20</a><a href='7_21.html'>21</a><a href='7_22.html'>22</a><span>[23]</span><a href='7_24.html'>24</a><a href='7_25.html'>25</a><a href='7_26.html'>26</a><a href='7_27.html'>27</a><a href='7_28.html'>28</a><a href='7_29.html'>29</a><a href='7_30.html'>30</a><a href='7_24.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit 5b711870bec4dc9a6d705d41e127e73944fa3650
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Tue Dec 25 03:24:41 2018 -0500

    media: usb: gspca: add a missed check for goto_low_power
    
    The fix checks if goto_low_power() fails, and if so, issues an error
    message.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: Mauro Carvalho Chehab &lt;mchehab+samsung@kernel.org&gt;

diff --git a/drivers/media/usb/gspca/cpia1.c b/drivers/media/usb/gspca/cpia1.c
index 23fbda56fc91..7c817a4a93c4 100644
--- a/drivers/media/usb/gspca/cpia1.c
+++ b/drivers/media/usb/gspca/cpia1.c
@@ -1434,6 +1434,7 @@ static int sd_config(struct gspca_dev *gspca_dev,
 {
 	struct sd *sd = (struct sd *) gspca_dev;
 	struct cam *cam;
+	int ret;
 
 	sd-&gt;mainsFreq = FREQ_DEF == V4L2_CID_POWER_LINE_FREQUENCY_60HZ;
 	reset_camera_params(gspca_dev);
@@ -1445,7 +1446,10 @@ static int sd_config(struct gspca_dev *gspca_dev,
 	cam-&gt;cam_mode = mode;
 	cam-&gt;nmodes = ARRAY_SIZE(mode);
 
-	goto_low_power(gspca_dev);
+	ret = goto_low_power(gspca_dev);
+	if (ret)
+		gspca_err(gspca_dev, "Cannot go to low power mode: %d\n",
+			  ret);
 	/* Check the firmware version. */
 	sd-&gt;params.version.firmwareVersion = 0;
 	get_version_information(gspca_dev);</pre><hr><pre>commit 5ceaf5452c1b2a452dadaf377f9f07af7bda9cc3
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Tue Dec 25 01:31:21 2018 -0500

    media: usb: gspca: add a missed return-value check for do_command
    
    do_command() may fail. The fix adds the missed return value of
    do_command(). If it fails, returns its error code.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: Mauro Carvalho Chehab &lt;mchehab+samsung@kernel.org&gt;

diff --git a/drivers/media/usb/gspca/cpia1.c b/drivers/media/usb/gspca/cpia1.c
index 2b09af8865f4..23fbda56fc91 100644
--- a/drivers/media/usb/gspca/cpia1.c
+++ b/drivers/media/usb/gspca/cpia1.c
@@ -547,10 +547,14 @@ static int do_command(struct gspca_dev *gspca_dev, u16 command,
 		}
 		if (sd-&gt;params.qx3.button) {
 			/* button pressed - unlock the latch */
-			do_command(gspca_dev, CPIA_COMMAND_WriteMCPort,
+			ret = do_command(gspca_dev, CPIA_COMMAND_WriteMCPort,
 				   3, 0xdf, 0xdf, 0);
-			do_command(gspca_dev, CPIA_COMMAND_WriteMCPort,
+			if (ret)
+				return ret;
+			ret = do_command(gspca_dev, CPIA_COMMAND_WriteMCPort,
 				   3, 0xff, 0xff, 0);
+			if (ret)
+				return ret;
 		}
 
 		/* test whether microscope is cradled */</pre><hr><pre>commit 0a54ea9f481f1a2ca5a171e91ddaacb75040f287
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Sat Dec 22 16:58:06 2018 -0600

    staging: rtlwifi: rtl8822b: fix a missing check of alloc_skb
    
    __netdev_alloc_skb() return NULl when it fails. skb_put() further uses
    it even when the allocation fails, leading to NULL pointer dereference.
    The fix inserts a check for the return value of __netdev_alloc_skb().
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;

diff --git a/drivers/staging/rtlwifi/rtl8822be/fw.c b/drivers/staging/rtlwifi/rtl8822be/fw.c
index a40396614814..f061dd1382aa 100644
--- a/drivers/staging/rtlwifi/rtl8822be/fw.c
+++ b/drivers/staging/rtlwifi/rtl8822be/fw.c
@@ -486,6 +486,8 @@ bool rtl8822b_halmac_cb_write_data_h2c(struct rtl_priv *rtlpriv, u8 *buf,
 
 	/* without GFP_DMA, pci_map_single() may not work */
 	skb = __netdev_alloc_skb(NULL, size, GFP_ATOMIC | GFP_DMA);
+	if (!skb)
+		return false;
 	memcpy((u8 *)skb_put(skb, size), buf, size);
 
 	return _rtl8822be_send_bcn_or_cmd_packet(rtlpriv-&gt;hw, skb, H2C_QUEUE);</pre><hr><pre>commit fc6a6521556c8250e356ddc6a3f2391aa62dc976
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Wed Dec 26 00:43:28 2018 -0600

    ath6kl: return error code in ath6kl_wmi_set_roam_lrssi_cmd()
    
    ath6kl_wmi_cmd_send could fail, so let's return its error code upstream.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: Kalle Valo &lt;kvalo@codeaurora.org&gt;

diff --git a/drivers/net/wireless/ath/ath6kl/wmi.c b/drivers/net/wireless/ath/ath6kl/wmi.c
index 9d7ac1ab2d02..68854c45d0a4 100644
--- a/drivers/net/wireless/ath/ath6kl/wmi.c
+++ b/drivers/net/wireless/ath/ath6kl/wmi.c
@@ -776,10 +776,8 @@ int ath6kl_wmi_set_roam_lrssi_cmd(struct wmi *wmi, u8 lrssi)
 	cmd-&gt;info.params.roam_rssi_floor = DEF_LRSSI_ROAM_FLOOR;
 	cmd-&gt;roam_ctrl = WMI_SET_LRSSI_SCAN_PARAMS;
 
-	ath6kl_wmi_cmd_send(wmi, 0, skb, WMI_SET_ROAM_CTRL_CMDID,
+	return ath6kl_wmi_cmd_send(wmi, 0, skb, WMI_SET_ROAM_CTRL_CMDID,
 			    NO_SYNC_WMIFLAG);
-
-	return 0;
 }
 
 int ath6kl_wmi_force_roam_cmd(struct wmi *wmi, const u8 *bssid)</pre><hr><pre>commit 42daad3343be4a4e1ee03e30a5f5cc731dadfef5
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Tue Dec 25 19:22:24 2018 -0600

    brcmfmac: add a check for the status of usb_register
    
    usb_register() may fail, so let's check its status and issue an error
    message if it fails.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: Kalle Valo &lt;kvalo@codeaurora.org&gt;

diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c
index a4308c6e72d7..76cfaf6999c8 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c
@@ -1550,6 +1550,10 @@ void brcmf_usb_exit(void)
 
 void brcmf_usb_register(void)
 {
+	int ret;
+
 	brcmf_dbg(USB, "Enter\n");
-	usb_register(&amp;brcmf_usbdrvr);
+	ret = usb_register(&amp;brcmf_usbdrvr);
+	if (ret)
+		brcmf_err("usb_register failed %d\n", ret);
 }</pre><hr><pre>commit 51f689cc11333944c7a457f25ec75fcb41e99410
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Tue Dec 25 19:26:19 2018 -0600

    serial: max310x: pass return value of spi_register_driver
    
    spi_register_driver() may fail, so let's pass its return value upstream.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;

diff --git a/drivers/tty/serial/max310x.c b/drivers/tty/serial/max310x.c
index 4f479841769a..eb040d8292a8 100644
--- a/drivers/tty/serial/max310x.c
+++ b/drivers/tty/serial/max310x.c
@@ -1467,10 +1467,10 @@ static int __init max310x_uart_init(void)
 		return ret;
 
 #ifdef CONFIG_SPI_MASTER
-	spi_register_driver(&amp;max310x_spi_driver);
+	ret = spi_register_driver(&amp;max310x_spi_driver);
 #endif
 
-	return 0;
+	return ret;
 }
 module_init(max310x_uart_init);
 </pre><hr><pre>commit e85bb0beb6498c0dffe18a2f1f16d575bc175c32
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Mon Jan 7 11:53:59 2019 -0800

    Input: ad7879 - add check for read errors in interrupt
    
    regmap_bulk_read() can return a non zero value on failure. The fix checks
    if the function call succeeded before calling mod_timer. The issue was
    identified by a static analysis tool.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: Dmitry Torokhov &lt;dmitry.torokhov@gmail.com&gt;

diff --git a/drivers/input/touchscreen/ad7879.c b/drivers/input/touchscreen/ad7879.c
index 6fa714c587b4..3a016f43fb85 100644
--- a/drivers/input/touchscreen/ad7879.c
+++ b/drivers/input/touchscreen/ad7879.c
@@ -246,11 +246,14 @@ static void ad7879_timer(struct timer_list *t)
 static irqreturn_t ad7879_irq(int irq, void *handle)
 {
 	struct ad7879 *ts = handle;
+	int error;
 
-	regmap_bulk_read(ts-&gt;regmap, AD7879_REG_XPLUS,
-			 ts-&gt;conversion_data, AD7879_NR_SENSE);
-
-	if (!ad7879_report(ts))
+	error = regmap_bulk_read(ts-&gt;regmap, AD7879_REG_XPLUS,
+				 ts-&gt;conversion_data, AD7879_NR_SENSE);
+	if (error)
+		dev_err_ratelimited(ts-&gt;dev, "failed to read %#02x: %d\n",
+				    AD7879_REG_XPLUS, error);
+	else if (!ad7879_report(ts))
 		mod_timer(&amp;ts-&gt;timer, jiffies + TS_PEN_UP_TIMEOUT);
 
 	return IRQ_HANDLED;</pre><hr><pre>commit 44fabd8cdaaa3acb80ad2bb3b5c61ae2136af661
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Tue Dec 25 20:29:48 2018 -0600

    ASoC: atom: fix a missing check of snd_pcm_lib_malloc_pages
    
    snd_pcm_lib_malloc_pages() may fail, so let's check its status and
    return its error code upstream.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Acked-by: Pierre-Louis Bossart &lt;pierre-louis.bossart@linux.intel.com&gt;
    Signed-off-by: Mark Brown &lt;broonie@kernel.org&gt;
    Cc: stable@vger.kernel.org

diff --git a/sound/soc/intel/atom/sst-mfld-platform-pcm.c b/sound/soc/intel/atom/sst-mfld-platform-pcm.c
index afc559866095..91a2436ce952 100644
--- a/sound/soc/intel/atom/sst-mfld-platform-pcm.c
+++ b/sound/soc/intel/atom/sst-mfld-platform-pcm.c
@@ -399,7 +399,13 @@ static int sst_media_hw_params(struct snd_pcm_substream *substream,
 				struct snd_pcm_hw_params *params,
 				struct snd_soc_dai *dai)
 {
-	snd_pcm_lib_malloc_pages(substream, params_buffer_bytes(params));
+	int ret;
+
+	ret =
+		snd_pcm_lib_malloc_pages(substream,
+				params_buffer_bytes(params));
+	if (ret)
+		return ret;
 	memset(substream-&gt;runtime-&gt;dma_area, 0, params_buffer_bytes(params));
 	return 0;
 }</pre><hr><pre>commit beae77170c60aa786f3e4599c18ead2854d8694d
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sun Jan 6 11:16:00 2019 -0600

    ALSA: sb: fix a missing check of snd_ctl_add
    
    snd_ctl_add() could fail, so let's check its return value and return its
    error code upstream upon failure.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: Takashi Iwai &lt;tiwai@suse.de&gt;

diff --git a/sound/isa/sb/sb16_main.c b/sound/isa/sb/sb16_main.c
index 37e6ce7b0b13..981d65d122b6 100644
--- a/sound/isa/sb/sb16_main.c
+++ b/sound/isa/sb/sb16_main.c
@@ -879,10 +879,14 @@ int snd_sb16dsp_pcm(struct snd_sb *chip, int device)
 	snd_pcm_set_ops(pcm, SNDRV_PCM_STREAM_PLAYBACK, &amp;snd_sb16_playback_ops);
 	snd_pcm_set_ops(pcm, SNDRV_PCM_STREAM_CAPTURE, &amp;snd_sb16_capture_ops);
 
-	if (chip-&gt;dma16 &gt;= 0 &amp;&amp; chip-&gt;dma8 != chip-&gt;dma16)
-		snd_ctl_add(card, snd_ctl_new1(&amp;snd_sb16_dma_control, chip));
-	else
+	if (chip-&gt;dma16 &gt;= 0 &amp;&amp; chip-&gt;dma8 != chip-&gt;dma16) {
+		err = snd_ctl_add(card, snd_ctl_new1(
+					&amp;snd_sb16_dma_control, chip));
+		if (err)
+			return err;
+	} else {
 		pcm-&gt;info_flags = SNDRV_PCM_INFO_HALF_DUPLEX;
+	}
 
 	snd_pcm_lib_preallocate_pages_for_all(pcm, SNDRV_DMA_TYPE_DEV,
 					      snd_dma_isa_data(),</pre><hr><pre>commit 02cc53e223d498010de5f114d72c11a2d55118e8
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sun Jan 6 11:01:47 2019 -0600

    ALSA: line6: fix check on snd_card_register
    
    The fix checks if snd_card_register() fails, and if so logs the error
    via dev_err() consistent with other patches.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: Takashi Iwai &lt;tiwai@suse.de&gt;

diff --git a/sound/usb/line6/pod.c b/sound/usb/line6/pod.c
index 020c81818951..ce45b6dab651 100644
--- a/sound/usb/line6/pod.c
+++ b/sound/usb/line6/pod.c
@@ -320,7 +320,8 @@ static void pod_startup4(struct work_struct *work)
 	line6_read_serial_number(&amp;pod-&gt;line6, &amp;pod-&gt;serial_number);
 
 	/* ALSA audio interface: */
-	snd_card_register(line6-&gt;card);
+	if (snd_card_register(line6-&gt;card))
+		dev_err(line6-&gt;ifcdev, "Failed to register POD card.\n");
 }
 
 /* POD special files: */</pre>
    <div class="pagination">
        <a href='7_22.html'>&lt;&lt;Prev</a><a href='7.html'>1</a><a href='7_2.html'>2</a><a href='7_3.html'>3</a><a href='7_4.html'>4</a><a href='7_5.html'>5</a><a href='7_6.html'>6</a><a href='7_7.html'>7</a><a href='7_8.html'>8</a><a href='7_9.html'>9</a><a href='7_10.html'>10</a><a href='7_11.html'>11</a><a href='7_12.html'>12</a><a href='7_13.html'>13</a><a href='7_14.html'>14</a><a href='7_15.html'>15</a><a href='7_16.html'>16</a><a href='7_17.html'>17</a><a href='7_18.html'>18</a><a href='7_19.html'>19</a><a href='7_20.html'>20</a><a href='7_21.html'>21</a><a href='7_22.html'>22</a><span>[23]</span><a href='7_24.html'>24</a><a href='7_25.html'>25</a><a href='7_26.html'>26</a><a href='7_27.html'>27</a><a href='7_28.html'>28</a><a href='7_29.html'>29</a><a href='7_30.html'>30</a><a href='7_24.html'>Next&gt;&gt;</a>
    <div>
</body>

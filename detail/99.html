<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by Ozyegin University</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by Ozyegin University</h1>
    <div class="pagination">
        <span>[1]</span>
    </div>
    <hr>
    <pre>commit 7efa16c3b04e53e1a1c2ddecfcfb9b3aaafb71b5
Author: Koray Gulcu &lt;koray.gulcu@ozu.edu.tr&gt;
Date:   Sun Oct 12 19:46:51 2014 +0100

    staging: rtl8192u: Fix checkpatch.pl warnings
    
    This patch fixes "line over 80 characters" warnings found in the first patch by breaking u4bAcParam's calculation down into a few steps.
    
    Signed-off-by: Koray Gulcu &lt;koray.gulcu@ozu.edu.tr&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;

diff --git a/drivers/staging/rtl8192u/r8192U_core.c b/drivers/staging/rtl8192u/r8192U_core.c
index 49b40eabd819..e031a253e2ae 100644
--- a/drivers/staging/rtl8192u/r8192U_core.c
+++ b/drivers/staging/rtl8192u/r8192U_core.c
@@ -1821,8 +1821,11 @@ static void rtl8192_qos_activate(struct work_struct *work)
 	struct net_device *dev = priv-&gt;ieee80211-&gt;dev;
 	struct ieee80211_qos_parameters *qos_parameters = &amp;priv-&gt;ieee80211-&gt;current_network.qos_data.parameters;
 	u8 mode = priv-&gt;ieee80211-&gt;current_network.mode;
-	u8  u1bAIFS;
+	u32  u1bAIFS;
 	u32 u4bAcParam;
+	u32 op_limit;
+	u32 cw_max;
+	u32 cw_min;
 	int i;
 
 	mutex_lock(&amp;priv-&gt;mutex);
@@ -1835,11 +1838,14 @@ static void rtl8192_qos_activate(struct work_struct *work)
 	for (i = 0; i &lt;  QOS_QUEUE_NUM; i++) {
 		//Mode G/A: slotTimeTimer = 9; Mode B: 20
 		u1bAIFS = qos_parameters-&gt;aifs[i] * ((mode&amp;(IEEE_G|IEEE_N_24G)) ? 9 : 20) + aSifsTime;
-		u4bAcParam = ((((u32)(le16_to_cpu(qos_parameters-&gt;tx_op_limit[i]))) &lt;&lt; AC_PARAM_TXOP_LIMIT_OFFSET)|
-			      (((u32)(le16_to_cpu(qos_parameters-&gt;cw_max[i]))) &lt;&lt; AC_PARAM_ECW_MAX_OFFSET)|
-			      (((u32)(le16_to_cpu(qos_parameters-&gt;cw_min[i]))) &lt;&lt; AC_PARAM_ECW_MIN_OFFSET)|
-			      ((u32)u1bAIFS &lt;&lt; AC_PARAM_AIFS_OFFSET));
-
+		u1bAIFS &lt;&lt;= AC_PARAM_AIFS_OFFSET;
+		op_limit = (u32)le16_to_cpu(qos_parameters-&gt;tx_op_limit[i]);
+		op_limit &lt;&lt;= AC_PARAM_TXOP_LIMIT_OFFSET;
+		cw_max = (u32)le16_to_cpu(qos_parameters-&gt;cw_max[i]);
+		cw_max &lt;&lt;= AC_PARAM_ECW_MAX_OFFSET;
+		cw_min = (u32)le16_to_cpu(qos_parameters-&gt;cw_min[i]);
+		cw_min &lt;&lt;= AC_PARAM_ECW_MIN_OFFSET;
+		u4bAcParam = op_limit | cw_max | cw_min | u1bAIFS;
 		write_nic_dword(dev, WDCAPARA_ADD[i], u4bAcParam);
 	}
 </pre><hr><pre>commit 7d95983735889d8f97356fb875a490b55bfd744e
Author: Koray Gulcu &lt;koray.gulcu@ozu.edu.tr&gt;
Date:   Sun Oct 12 19:46:50 2014 +0100

    staging: rtl8192u: Fix sparse warnings of r8182U_core
    
    This patch fixes the following endianness warnings found by sparse running with CF=-D__CHECK_ENDIAN__:
    
    drivers/staging/rtl8192u/r8192U_core.c:1794:10: warning: incorrect type in initializer (different base types)
    drivers/staging/rtl8192u/r8192U_core.c:1794:10:    expected restricted __le16
    drivers/staging/rtl8192u/r8192U_core.c:1794:10:    got int
    drivers/staging/rtl8192u/r8192U_core.c:1794:13: warning: incorrect type in initializer (different base types)
    drivers/staging/rtl8192u/r8192U_core.c:1794:13:    expected restricted __le16
    drivers/staging/rtl8192u/r8192U_core.c:1794:13:    got int
    drivers/staging/rtl8192u/r8192U_core.c:1794:16: warning: incorrect type in initializer (different base types)
    drivers/staging/rtl8192u/r8192U_core.c:1794:16:    expected restricted __le16
    drivers/staging/rtl8192u/r8192U_core.c:1794:16:    got int
    drivers/staging/rtl8192u/r8192U_core.c:1794:19: warning: incorrect type in initializer (different base types)
    drivers/staging/rtl8192u/r8192U_core.c:1794:19:    expected restricted __le16
    drivers/staging/rtl8192u/r8192U_core.c:1794:19:    got int
    drivers/staging/rtl8192u/r8192U_core.c:1795:10: warning: incorrect type in initializer (different base types)
    drivers/staging/rtl8192u/r8192U_core.c:1795:10:    expected restricted __le16
    drivers/staging/rtl8192u/r8192U_core.c:1795:10:    got int
    drivers/staging/rtl8192u/r8192U_core.c:1795:13: warning: incorrect type in initializer (different base types)
    drivers/staging/rtl8192u/r8192U_core.c:1795:13:    expected restricted __le16
    drivers/staging/rtl8192u/r8192U_core.c:1795:13:    got int
    drivers/staging/rtl8192u/r8192U_core.c:1795:16: warning: incorrect type in initializer (different base types)
    drivers/staging/rtl8192u/r8192U_core.c:1795:16:    expected restricted __le16
    drivers/staging/rtl8192u/r8192U_core.c:1795:16:    got int
    drivers/staging/rtl8192u/r8192U_core.c:1795:19: warning: incorrect type in initializer (different base types)
    drivers/staging/rtl8192u/r8192U_core.c:1795:19:    expected restricted __le16
    drivers/staging/rtl8192u/r8192U_core.c:1795:19:    got int
    drivers/staging/rtl8192u/r8192U_core.c:1838:34: warning: cast from restricted __le16
    drivers/staging/rtl8192u/r8192U_core.c:1839:34: warning: cast from restricted __le16
    drivers/staging/rtl8192u/r8192U_core.c:1840:34: warning: cast from restricted __le16
    
    Signed-off-by: Koray Gulcu &lt;koray.gulcu@ozu.edu.tr&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;

diff --git a/drivers/staging/rtl8192u/r8192U_core.c b/drivers/staging/rtl8192u/r8192U_core.c
index 929ac29197cc..49b40eabd819 100644
--- a/drivers/staging/rtl8192u/r8192U_core.c
+++ b/drivers/staging/rtl8192u/r8192U_core.c
@@ -1791,8 +1791,8 @@ static void rtl8192_link_change(struct net_device *dev)
 }
 
 static struct ieee80211_qos_parameters def_qos_parameters = {
-	{3, 3, 3, 3},/* cw_min */
-	{7, 7, 7, 7},/* cw_max */
+	{cpu_to_le16(3), cpu_to_le16(3), cpu_to_le16(3), cpu_to_le16(3)},
+	{cpu_to_le16(7), cpu_to_le16(7), cpu_to_le16(7), cpu_to_le16(7)},
 	{2, 2, 2, 2},/* aifs */
 	{0, 0, 0, 0},/* flags */
 	{0, 0, 0, 0} /* tx_op_limit */
@@ -1835,9 +1835,9 @@ static void rtl8192_qos_activate(struct work_struct *work)
 	for (i = 0; i &lt;  QOS_QUEUE_NUM; i++) {
 		//Mode G/A: slotTimeTimer = 9; Mode B: 20
 		u1bAIFS = qos_parameters-&gt;aifs[i] * ((mode&amp;(IEEE_G|IEEE_N_24G)) ? 9 : 20) + aSifsTime;
-		u4bAcParam = ((((u32)(qos_parameters-&gt;tx_op_limit[i]))&lt;&lt; AC_PARAM_TXOP_LIMIT_OFFSET)|
-			      (((u32)(qos_parameters-&gt;cw_max[i]))&lt;&lt; AC_PARAM_ECW_MAX_OFFSET)|
-			      (((u32)(qos_parameters-&gt;cw_min[i]))&lt;&lt; AC_PARAM_ECW_MIN_OFFSET)|
+		u4bAcParam = ((((u32)(le16_to_cpu(qos_parameters-&gt;tx_op_limit[i]))) &lt;&lt; AC_PARAM_TXOP_LIMIT_OFFSET)|
+			      (((u32)(le16_to_cpu(qos_parameters-&gt;cw_max[i]))) &lt;&lt; AC_PARAM_ECW_MAX_OFFSET)|
+			      (((u32)(le16_to_cpu(qos_parameters-&gt;cw_min[i]))) &lt;&lt; AC_PARAM_ECW_MIN_OFFSET)|
 			      ((u32)u1bAIFS &lt;&lt; AC_PARAM_AIFS_OFFSET));
 
 		write_nic_dword(dev, WDCAPARA_ADD[i], u4bAcParam);</pre>
    <div class="pagination">
        <span>[1]</span>
    <div>
</body>

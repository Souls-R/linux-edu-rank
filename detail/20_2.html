<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by Concordia University Wisconsin</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by Concordia University Wisconsin</h1>
    <div class="pagination">
        <a href='20.html'>&lt;&lt;Prev</a><a href='20.html'>1</a><span>[2]</span><a href='20_3.html'>3</a><a href='20_4.html'>4</a><a href='20_5.html'>5</a><a href='20_3.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit e3a2c775336641663b1c38dfa7dd8a1c1210ae23
Author: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
Date:   Tue Sep 6 18:25:32 2011 -0500

    iwlegacy: 4965-rs: cleanup il4965_rs_sta_dbgfs_rate_scale_data_read
    
    1) remove ret local var and return the result directly
    2) remove il since it is not used
    
    Signed-off-by: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
    Signed-off-by: Stanislaw Gruszka &lt;sgruszka@redhat.com&gt;

diff --git a/drivers/net/wireless/iwlegacy/4965-rs.c b/drivers/net/wireless/iwlegacy/4965-rs.c
index 162c778773ec..467d0cb14ecd 100644
--- a/drivers/net/wireless/iwlegacy/4965-rs.c
+++ b/drivers/net/wireless/iwlegacy/4965-rs.c
@@ -2769,14 +2769,9 @@ il4965_rs_sta_dbgfs_rate_scale_data_read(struct file *file,
 {
 	char buff[120];
 	int desc = 0;
-	ssize_t ret;
-
 	struct il_lq_sta *lq_sta = file-&gt;private_data;
-	struct il_priv *il;
 	struct il_scale_tbl_info *tbl = &amp;lq_sta-&gt;lq_info[lq_sta-&gt;active_tbl];
 
-	il = lq_sta-&gt;drv;
-
 	if (is_Ht(tbl-&gt;lq_type))
 		desc +=
 		    sprintf(buff + desc, "Bit Rate= %d Mb/s\n",
@@ -2786,8 +2781,7 @@ il4965_rs_sta_dbgfs_rate_scale_data_read(struct file *file,
 		    sprintf(buff + desc, "Bit Rate= %d Mb/s\n",
 			    il_rates[lq_sta-&gt;last_txrate_idx].ieee &gt;&gt; 1);
 
-	ret = simple_read_from_buffer(user_buf, count, ppos, buff, desc);
-	return ret;
+	return simple_read_from_buffer(user_buf, count, ppos, buff, desc);
 }
 
 static const struct file_operations rs_sta_dbgfs_rate_scale_data_ops = {</pre><hr><pre>commit a741b99577c3fa359208c9ff14aede77bc0d0e02
Author: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
Date:   Tue Sep 6 17:49:07 2011 -0500

    iwlegacy: 4965-rs: don't return rate from il4965_rs_update_rate_tbl
    
    1) don't return rate from il4965_rs_update_rate_tbl
    2) fix up il4965_rs_rate_scale_perform
    
    Signed-off-by: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
    Signed-off-by: Stanislaw Gruszka &lt;sgruszka@redhat.com&gt;

diff --git a/drivers/net/wireless/iwlegacy/4965-rs.c b/drivers/net/wireless/iwlegacy/4965-rs.c
index 52006376febd..162c778773ec 100644
--- a/drivers/net/wireless/iwlegacy/4965-rs.c
+++ b/drivers/net/wireless/iwlegacy/4965-rs.c
@@ -1731,9 +1731,8 @@ il4965_rs_stay_in_table(struct il_lq_sta *lq_sta, bool force_search)
 
 /*
  * setup rate table in uCode
- * return rate_n_flags as used in the table
  */
-static u32
+static void
 il4965_rs_update_rate_tbl(struct il_priv *il, struct il_rxon_context *ctx,
 			  struct il_lq_sta *lq_sta,
 			  struct il_scale_tbl_info *tbl, int idx, u8 is_green)
@@ -1744,8 +1743,6 @@ il4965_rs_update_rate_tbl(struct il_priv *il, struct il_rxon_context *ctx,
 	rate = il4965_rate_n_flags_from_tbl(il, tbl, idx, is_green);
 	il4965_rs_fill_link_cmd(il, lq_sta, rate);
 	il_send_lq_cmd(il, ctx, &amp;lq_sta-&gt;lq, CMD_ASYNC, false);
-
-	return rate;
 }
 
 /*
@@ -1774,7 +1771,6 @@ il4965_rs_rate_scale_perform(struct il_priv *il, struct sk_buff *skb,
 	u8 update_lq = 0;
 	struct il_scale_tbl_info *tbl, *tbl1;
 	u16 rate_scale_idx_msk = 0;
-	u32 rate;
 	u8 is_green = 0;
 	u8 active_tbl = 0;
 	u8 done_search = 0;
@@ -1858,8 +1854,7 @@ il4965_rs_rate_scale_perform(struct il_priv *il, struct sk_buff *skb,
 			tbl = &amp;(lq_sta-&gt;lq_info[lq_sta-&gt;active_tbl]);
 			/* get "active" rate info */
 			idx = il4965_hwrate_to_plcp_idx(tbl-&gt;current_rate);
-			rate =
-			    il4965_rs_update_rate_tbl(il, ctx, lq_sta, tbl, idx,
+			il4965_rs_update_rate_tbl(il, ctx, lq_sta, tbl, idx,
 						      is_green);
 		}
 		return;
@@ -2062,8 +2057,7 @@ il4965_rs_rate_scale_perform(struct il_priv *il, struct sk_buff *skb,
 lq_update:
 	/* Replace uCode's rate table for the destination station. */
 	if (update_lq)
-		rate =
-		    il4965_rs_update_rate_tbl(il, ctx, lq_sta, tbl, idx,
+		il4965_rs_update_rate_tbl(il, ctx, lq_sta, tbl, idx,
 					      is_green);
 
 	/* Should we stay with this modulation mode,</pre><hr><pre>commit 3e4b0655207452be0a1d82425f19ed4a081cf48b
Author: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
Date:   Tue Sep 6 18:12:05 2011 -0500

    iwlegacy: 4965-rs: il4965_rs_alloc_sta: remove lq_sta local var
    
    remove the lq_sta local variable and return the
    result directly in il4965_rs_alloc_sta
    
    Signed-off-by: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
    Signed-off-by: Stanislaw Gruszka &lt;sgruszka@redhat.com&gt;

diff --git a/drivers/net/wireless/iwlegacy/4965-rs.c b/drivers/net/wireless/iwlegacy/4965-rs.c
index 2ec808e40c96..52006376febd 100644
--- a/drivers/net/wireless/iwlegacy/4965-rs.c
+++ b/drivers/net/wireless/iwlegacy/4965-rs.c
@@ -2295,7 +2295,6 @@ il4965_rs_get_rate(void *il_r, struct ieee80211_sta *sta, void *il_sta,
 static void *
 il4965_rs_alloc_sta(void *il_rate, struct ieee80211_sta *sta, gfp_t gfp)
 {
-	struct il_lq_sta *lq_sta;
 	struct il_station_priv *sta_priv =
 	    (struct il_station_priv *)sta-&gt;drv_priv;
 	struct il_priv *il;
@@ -2303,9 +2302,7 @@ il4965_rs_alloc_sta(void *il_rate, struct ieee80211_sta *sta, gfp_t gfp)
 	il = (struct il_priv *)il_rate;
 	D_RATE("create station rate scale win\n");
 
-	lq_sta = &amp;sta_priv-&gt;lq_sta;
-
-	return lq_sta;
+	return &amp;sta_priv-&gt;lq_sta;
 }
 
 /*</pre><hr><pre>commit 144c0961b47ab07812ec1440adea6d4218b9a6a6
Author: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
Date:   Tue Sep 6 18:31:13 2011 -0500

    iwlegacy: 4965-rs: remove unnecessary null check for sta and lq_sta
    
    both sta and lq_sta are guaranteed to be not null in the calling
    function so we don't need to check them here.
    
    Signed-off-by: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
    Signed-off-by: Stanislaw Gruszka &lt;sgruszka@redhat.com&gt;

diff --git a/drivers/net/wireless/iwlegacy/4965-rs.c b/drivers/net/wireless/iwlegacy/4965-rs.c
index b0946a1ee37d..2ec808e40c96 100644
--- a/drivers/net/wireless/iwlegacy/4965-rs.c
+++ b/drivers/net/wireless/iwlegacy/4965-rs.c
@@ -1793,9 +1793,6 @@ il4965_rs_rate_scale_perform(struct il_priv *il, struct sk_buff *skb,
 	    (info-&gt;flags &amp; IEEE80211_TX_CTL_NO_ACK))
 		return;
 
-	if (!sta || !lq_sta)
-		return;
-
 	lq_sta-&gt;supp_rates = sta-&gt;supp_rates[lq_sta-&gt;band];
 
 	tid = il4965_rs_tl_add_packet(lq_sta, hdr);</pre><hr><pre>commit da6134d2537363775c73e96186c0d5eb9b2c6b1c
Author: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
Date:   Tue Sep 6 17:38:34 2011 -0500

    iwlegacy: 4965-rs: remove null check on sta in il4965_rs_tx_status
    
    the null check on sta in il4965_rs_tx_status is not necessary
    
    Signed-off-by: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
    Signed-off-by: Stanislaw Gruszka &lt;sgruszka@redhat.com&gt;

diff --git a/drivers/net/wireless/iwlegacy/4965-rs.c b/drivers/net/wireless/iwlegacy/4965-rs.c
index 93c3a4d9b9b5..b0946a1ee37d 100644
--- a/drivers/net/wireless/iwlegacy/4965-rs.c
+++ b/drivers/net/wireless/iwlegacy/4965-rs.c
@@ -991,7 +991,7 @@ il4965_rs_tx_status(void *il_r, struct ieee80211_supported_band *sband,
 	lq_sta-&gt;last_rate_n_flags = tx_rate;
 done:
 	/* See if there's a better rate or modulation mode to try. */
-	if (sta &amp;&amp; sta-&gt;supp_rates[sband-&gt;band])
+	if (sta-&gt;supp_rates[sband-&gt;band])
 		il4965_rs_rate_scale_perform(il, skb, sta, lq_sta);
 }
 </pre><hr><pre>commit 730b4c2102902a0061bb01a3d3fa1b6461973849
Author: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
Date:   Tue Sep 6 17:33:51 2011 -0500

    iwlegacy: 4965: remove vif null check in request_scan
    
    remove null check on vif in il4965_request_scan
    
    Signed-off-by: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
    Signed-off-by: Stanislaw Gruszka &lt;sgruszka@redhat.com&gt;

diff --git a/drivers/net/wireless/iwlegacy/4965-mac.c b/drivers/net/wireless/iwlegacy/4965-mac.c
index 8d2f6162d6e8..4aaef4135564 100644
--- a/drivers/net/wireless/iwlegacy/4965-mac.c
+++ b/drivers/net/wireless/iwlegacy/4965-mac.c
@@ -850,8 +850,7 @@ il4965_request_scan(struct il_priv *il, struct ieee80211_vif *vif)
 
 	lockdep_assert_held(&amp;il-&gt;mutex);
 
-	if (vif)
-		ctx = il_rxon_ctx_from_vif(vif);
+	ctx = il_rxon_ctx_from_vif(vif);
 
 	if (!il-&gt;scan_cmd) {
 		il-&gt;scan_cmd =</pre><hr><pre>commit dd44eb9e13131f7b1fda65518b24fd3dfcf3a114
Author: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
Date:   Sun Aug 28 08:32:10 2011 -0500

    iwlegacy: change IL_ERR to D_HT in iwl4965_rs_tl_turn_on_agg_for_tid
    
    This message should be a debug message and not an error.
    
    Signed-off-by: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
    Signed-off-by: Stanislaw Gruszka &lt;sgruszka@redhat.com&gt;

diff --git a/drivers/net/wireless/iwlegacy/4965-rs.c b/drivers/net/wireless/iwlegacy/4965-rs.c
index 4bc5a1845821..93c3a4d9b9b5 100644
--- a/drivers/net/wireless/iwlegacy/4965-rs.c
+++ b/drivers/net/wireless/iwlegacy/4965-rs.c
@@ -371,10 +371,10 @@ il4965_rs_tl_turn_on_agg_for_tid(struct il_priv *il, struct il_lq_sta *lq_data,
 			IL_ERR("Fail start Tx agg on tid: %d\n", tid);
 			ieee80211_stop_tx_ba_session(sta, tid);
 		}
-	} else {
-		IL_ERR("Aggregation not enabled for tid %d "
-		       "because load = %u\n", tid, load);
-	}
+	} else
+		D_HT("Aggregation not enabled for tid %d because load = %u\n",
+		     tid, load);
+
 	return ret;
 }
 </pre><hr><pre>commit 53611e05263ca2101a29736920fdf86ccad0e93b
Author: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
Date:   Sun Aug 28 08:26:16 2011 -0500

    iwlegacy: change IL_WARN to D_HT in il4965_tx_agg_start
    
    This message should be a debug message and not a warning.
    
    Signed-off-by: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
    Signed-off-by: Stanislaw Gruszka &lt;sgruszka@redhat.com&gt;

diff --git a/drivers/net/wireless/iwlegacy/4965-mac.c b/drivers/net/wireless/iwlegacy/4965-mac.c
index 21a1381c9748..8d2f6162d6e8 100644
--- a/drivers/net/wireless/iwlegacy/4965-mac.c
+++ b/drivers/net/wireless/iwlegacy/4965-mac.c
@@ -2252,7 +2252,7 @@ il4965_tx_agg_start(struct il_priv *il, struct ieee80211_vif *vif,
 	if (unlikely(tx_fifo &lt; 0))
 		return tx_fifo;
 
-	IL_WARN("%s on ra = %pM tid = %d\n", __func__, sta-&gt;addr, tid);
+	D_HT("%s on ra = %pM tid = %d\n", __func__, sta-&gt;addr, tid);
 
 	sta_id = il_sta_id(sta);
 	if (sta_id == IL_INVALID_STATION) {</pre><hr><pre>commit a76011e2cbb6915f60488477311e0f269cee6496
Author: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
Date:   Wed Sep 28 17:54:04 2011 -0500

    iwlagn: iwl-agn-rs: remove unnecessary null check for sta and lq_sta
    
    both sta and lq_sta are guaranteed to be not null in the
    calling function so we don't need to check them here.
    
    Signed-off-by: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
    Signed-off-by: Wey-Yi Guy &lt;wey-yi.w.guy@intel.com&gt;
    Signed-off-by: John W. Linville &lt;linville@tuxdriver.com&gt;

diff --git a/drivers/net/wireless/iwlwifi/iwl-agn-rs.c b/drivers/net/wireless/iwlwifi/iwl-agn-rs.c
index c14f8d6fd7d8..7d6a3bf64950 100644
--- a/drivers/net/wireless/iwlwifi/iwl-agn-rs.c
+++ b/drivers/net/wireless/iwlwifi/iwl-agn-rs.c
@@ -2273,9 +2273,6 @@ static void rs_rate_scale_perform(struct iwl_priv *priv,
 	    info-&gt;flags &amp; IEEE80211_TX_CTL_NO_ACK)
 		return;
 
-	if (!sta || !lq_sta)
-		return;
-
 	lq_sta-&gt;supp_rates = sta-&gt;supp_rates[lq_sta-&gt;band];
 
 	tid = rs_tl_add_packet(lq_sta, hdr);</pre><hr><pre>commit 2fa8b6a0e42570690a48a56cb65778211e3cc9cc
Author: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
Date:   Sun Aug 28 08:22:38 2011 -0500

    iwlwifi: iwl-agn-rs.c: remove old comment
    
    this comment refers to some code that was removed.
    
    Signed-off-by: Greg Dietsche &lt;Gregory.Dietsche@cuw.edu&gt;
    Signed-off-by: Wey-Yi Guy &lt;wey-yi.w.guy@intel.com&gt;
    Signed-off-by: John W. Linville &lt;linville@tuxdriver.com&gt;

diff --git a/drivers/net/wireless/iwlwifi/iwl-agn-rs.c b/drivers/net/wireless/iwlwifi/iwl-agn-rs.c
index 356762f21d2f..ffee15ba06a8 100644
--- a/drivers/net/wireless/iwlwifi/iwl-agn-rs.c
+++ b/drivers/net/wireless/iwlwifi/iwl-agn-rs.c
@@ -2214,7 +2214,6 @@ static void rs_stay_in_table(struct iwl_lq_sta *lq_sta, bool force_search)
 
 /*
  * setup rate table in uCode
- * return rate_n_flags as used in the table
  */
 static void rs_update_rate_tbl(struct iwl_priv *priv,
 			       struct iwl_rxon_context *ctx,</pre>
    <div class="pagination">
        <a href='20.html'>&lt;&lt;Prev</a><a href='20.html'>1</a><span>[2]</span><a href='20_3.html'>3</a><a href='20_4.html'>4</a><a href='20_5.html'>5</a><a href='20_3.html'>Next&gt;&gt;</a>
    <div>
</body>

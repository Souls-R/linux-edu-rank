<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by Lanzhou University</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by Lanzhou University</h1>
    <div class="pagination">
        <span>[1]</span>
    </div>
    <hr>
    <pre>commit 5e4166461cf66a26f925011d90017da74e410747
Author: Yang Hubin &lt;yanghb2019@lzu.edu.cn&gt;
Date:   Sat Nov 4 00:45:01 2023 -0700

    f2fs: the name of a struct is wrong in a comment.
    
    The macro SUMMARY_SIZE represents the size of the struct f2fs_summary,
    
    instead of the size of the struct summary.
    
    Signed-off-by: Yang Hubin &lt;yanghb2019@lzu.edu.cn&gt;
    Signed-off-by: Qian Haolai &lt;qianhl2023@lzu.edu.cn&gt;
    Reviewed-by: Chao Yu &lt;chao@kernel.org&gt;
    Signed-off-by: Jaegeuk Kim &lt;jaegeuk@kernel.org&gt;

diff --git a/include/linux/f2fs_fs.h b/include/linux/f2fs_fs.h
index 039fe0ce8d83..053137a0fe45 100644
--- a/include/linux/f2fs_fs.h
+++ b/include/linux/f2fs_fs.h
@@ -441,7 +441,7 @@ struct f2fs_sit_block {
  * ex) data_blkaddr = (block_t)(nodepage_start_address + ofs_in_node)
  */
 #define ENTRIES_IN_SUM		(F2FS_BLKSIZE / 8)
-#define	SUMMARY_SIZE		(7)	/* sizeof(struct summary) */
+#define	SUMMARY_SIZE		(7)	/* sizeof(struct f2fs_summary) */
 #define	SUM_FOOTER_SIZE		(5)	/* sizeof(struct summary_footer) */
 #define SUM_ENTRY_SIZE		(SUMMARY_SIZE * ENTRIES_IN_SUM)
 </pre><hr><pre>commit 747800efbe8b98459f48d1d9d742298f8283f8fa
Author: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
Date:   Mon May 23 16:23:59 2016 -0700

    kernel/signal.c: convert printk(KERN_&lt;LEVEL&gt; ...) to pr_&lt;level&gt;(...)
    
    Use pr_&lt;level&gt; instead of printk(KERN_&lt;LEVEL&gt; ).
    
    Signed-off-by: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
    Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

diff --git a/kernel/signal.c b/kernel/signal.c
index ab122a2cee41..96e9bc40667f 100644
--- a/kernel/signal.c
+++ b/kernel/signal.c
@@ -224,7 +224,7 @@ static inline void print_dropped_signal(int sig)
 	if (!__ratelimit(&amp;ratelimit_state))
 		return;
 
-	printk(KERN_INFO "%s/%d: reached RLIMIT_SIGPENDING, dropped signal %d\n",
+	pr_info("%s/%d: reached RLIMIT_SIGPENDING, dropped signal %d\n",
 				current-&gt;comm, current-&gt;pid, sig);
 }
 
@@ -1089,10 +1089,10 @@ static int send_signal(int sig, struct siginfo *info, struct task_struct *t,
 static void print_fatal_signal(int signr)
 {
 	struct pt_regs *regs = signal_pt_regs();
-	printk(KERN_INFO "potentially unexpected fatal signal %d.\n", signr);
+	pr_info("potentially unexpected fatal signal %d.\n", signr);
 
 #if defined(__i386__) &amp;&amp; !defined(__arch_um__)
-	printk(KERN_INFO "code at %08lx: ", regs-&gt;ip);
+	pr_info("code at %08lx: ", regs-&gt;ip);
 	{
 		int i;
 		for (i = 0; i &lt; 16; i++) {
@@ -1100,10 +1100,10 @@ static void print_fatal_signal(int signr)
 
 			if (get_user(insn, (unsigned char *)(regs-&gt;ip + i)))
 				break;
-			printk(KERN_CONT "%02x ", insn);
+			pr_cont("%02x ", insn);
 		}
 	}
-	printk(KERN_CONT "\n");
+	pr_cont("\n");
 #endif
 	preempt_disable();
 	show_regs(regs);</pre><hr><pre>commit 4afe6495e5cb3c352d95f07512cbb227e607e2ce
Author: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
Date:   Mon Apr 18 15:23:29 2016 +0800

    tracing: Don't use the address of the buffer array name in copy_from_user
    
    With the following code snippet:
    
        ...
        char buf[64];
        ...
        if (copy_from_user(&amp;buf, ubuf, cnt))
        ...
    
    Even though the value of "&amp;buf" equals "buf", but there is no need
    to get the address of the "buf" again. Use "buf" instead of "&amp;buf".
    
    Link: http://lkml.kernel.org/r/20160418152329.18b72bea@debian
    
    Signed-off-by: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
    Signed-off-by: Steven Rostedt &lt;rostedt@goodmis.org&gt;

diff --git a/kernel/trace/trace.c b/kernel/trace/trace.c
index 5e3ad3481e4b..46028d47d252 100644
--- a/kernel/trace/trace.c
+++ b/kernel/trace/trace.c
@@ -3664,7 +3664,7 @@ tracing_trace_options_write(struct file *filp, const char __user *ubuf,
 	if (cnt &gt;= sizeof(buf))
 		return -EINVAL;
 
-	if (copy_from_user(&amp;buf, ubuf, cnt))
+	if (copy_from_user(buf, ubuf, cnt))
 		return -EFAULT;
 
 	buf[cnt] = 0;
@@ -4537,7 +4537,7 @@ tracing_set_trace_write(struct file *filp, const char __user *ubuf,
 	if (cnt &gt; MAX_TRACER_SIZE)
 		cnt = MAX_TRACER_SIZE;
 
-	if (copy_from_user(&amp;buf, ubuf, cnt))
+	if (copy_from_user(buf, ubuf, cnt))
 		return -EFAULT;
 
 	buf[cnt] = 0;
@@ -5327,7 +5327,7 @@ static ssize_t tracing_clock_write(struct file *filp, const char __user *ubuf,
 	if (cnt &gt;= sizeof(buf))
 		return -EINVAL;
 
-	if (copy_from_user(&amp;buf, ubuf, cnt))
+	if (copy_from_user(buf, ubuf, cnt))
 		return -EFAULT;
 
 	buf[cnt] = 0;</pre><hr><pre>commit 0b94f17507dc3a92f091812e5bff890c8845d1a3
Author: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
Date:   Tue Mar 15 14:56:39 2016 -0700

    mm/memory-failure.c: remove useless "undef"s
    
    Remove the useless #undef, since the corresponding #define has already
    been removed.
    
    Signed-off-by: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
    Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

diff --git a/mm/memory-failure.c b/mm/memory-failure.c
index ac595e7a3a95..67c30eb993f0 100644
--- a/mm/memory-failure.c
+++ b/mm/memory-failure.c
@@ -826,8 +826,6 @@ static struct page_state {
 #undef lru
 #undef swapbacked
 #undef head
-#undef tail
-#undef compound
 #undef slab
 #undef reserved
 </pre><hr><pre>commit 7f43add451d2a0d235074b72d254ae266a6a023f
Author: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
Date:   Fri Jan 15 16:57:22 2016 -0800

    mm/mlock.c: change can_do_mlock return value type to boolean
    
    Since can_do_mlock only return 1 or 0, so make it boolean.
    
    No functional change.
    
    [akpm@linux-foundation.org: update declaration in mm.h]
    Signed-off-by: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
    Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

diff --git a/include/linux/mm.h b/include/linux/mm.h
index 1d6ec55d8b25..f1cd22f2df1a 100644
--- a/include/linux/mm.h
+++ b/include/linux/mm.h
@@ -1100,7 +1100,7 @@ static inline bool shmem_mapping(struct address_space *mapping)
 }
 #endif
 
-extern int can_do_mlock(void);
+extern bool can_do_mlock(void);
 extern int user_shm_lock(size_t, struct user_struct *);
 extern void user_shm_unlock(size_t, struct user_struct *);
 
diff --git a/mm/mlock.c b/mm/mlock.c
index 9197b6721a1e..e1e2b1207bf2 100644
--- a/mm/mlock.c
+++ b/mm/mlock.c
@@ -24,13 +24,13 @@
 
 #include "internal.h"
 
-int can_do_mlock(void)
+bool can_do_mlock(void)
 {
 	if (rlimit(RLIMIT_MEMLOCK) != 0)
-		return 1;
+		return true;
 	if (capable(CAP_IPC_LOCK))
-		return 1;
-	return 0;
+		return true;
+	return false;
 }
 EXPORT_SYMBOL(can_do_mlock);
 </pre><hr><pre>commit 61e165578dc7ec4ee044e9ca581a315d9ca9c656
Author: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
Date:   Fri Jan 15 16:57:19 2016 -0800

    mm/vmalloc.c: use macro IS_ALIGNED to judge the aligment
    
    Just cleanup, no functional change.
    
    Signed-off-by: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
    Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

diff --git a/mm/vmalloc.c b/mm/vmalloc.c
index 58ceeb107960..fb42a5bffe47 100644
--- a/mm/vmalloc.c
+++ b/mm/vmalloc.c
@@ -455,7 +455,7 @@ static struct vmap_area *alloc_vmap_area(unsigned long size,
 	free_vmap_cache = &amp;va-&gt;rb_node;
 	spin_unlock(&amp;vmap_area_lock);
 
-	BUG_ON(va-&gt;va_start &amp; (align-1));
+	BUG_ON(!IS_ALIGNED(va-&gt;va_start, align));
 	BUG_ON(va-&gt;va_start &lt; vstart);
 	BUG_ON(va-&gt;va_end &gt; vend);
 
@@ -1086,7 +1086,7 @@ void vm_unmap_ram(const void *mem, unsigned int count)
 	BUG_ON(!addr);
 	BUG_ON(addr &lt; VMALLOC_START);
 	BUG_ON(addr &gt; VMALLOC_END);
-	BUG_ON(addr &amp; (PAGE_SIZE-1));
+	BUG_ON(!IS_ALIGNED(addr, PAGE_SIZE));
 
 	debug_check_no_locks_freed(mem, size);
 	vmap_debug_free_range(addr, addr+size);</pre><hr><pre>commit 6f8d2b8a262c6b71e1464d488f41cccf9aafbc07
Author: Wang Xiaoqiang &lt;wangxq10@lzu.edu.cn&gt;
Date:   Fri Jan 15 16:57:13 2016 -0800

    mm/page_isolation: do some cleanup in "undo_isolate_page_range"
    
    Use "IS_ALIGNED" to judge the alignment, rather than directly judging.
    
    Signed-off-by: Wang Xiaoqiang &lt;wang_xiaoq@126.com&gt;
    Cc: Naoya Horiguchi &lt;n-horiguchi@ah.jp.nec.com&gt;
    Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

diff --git a/mm/page_isolation.c b/mm/page_isolation.c
index 5e139fec6c6c..92c4c36501e7 100644
--- a/mm/page_isolation.c
+++ b/mm/page_isolation.c
@@ -196,8 +196,10 @@ int undo_isolate_page_range(unsigned long start_pfn, unsigned long end_pfn,
 {
 	unsigned long pfn;
 	struct page *page;
-	BUG_ON((start_pfn) &amp; (pageblock_nr_pages - 1));
-	BUG_ON((end_pfn) &amp; (pageblock_nr_pages - 1));
+
+	BUG_ON(!IS_ALIGNED(start_pfn, pageblock_nr_pages));
+	BUG_ON(!IS_ALIGNED(end_pfn, pageblock_nr_pages));
+
 	for (pfn = start_pfn;
 	     pfn &lt; end_pfn;
 	     pfn += pageblock_nr_pages) {</pre>
    <div class="pagination">
        <span>[1]</span>
    <div>
</body>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of Minnesota</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of Minnesota</h1>
    <div class="pagination">
        <a href='7_23.html'>&lt;&lt;Prev</a><a href='7.html'>1</a><a href='7_2.html'>2</a><a href='7_3.html'>3</a><a href='7_4.html'>4</a><a href='7_5.html'>5</a><a href='7_6.html'>6</a><a href='7_7.html'>7</a><a href='7_8.html'>8</a><a href='7_9.html'>9</a><a href='7_10.html'>10</a><a href='7_11.html'>11</a><a href='7_12.html'>12</a><a href='7_13.html'>13</a><a href='7_14.html'>14</a><a href='7_15.html'>15</a><a href='7_16.html'>16</a><a href='7_17.html'>17</a><a href='7_18.html'>18</a><a href='7_19.html'>19</a><a href='7_20.html'>20</a><a href='7_21.html'>21</a><a href='7_22.html'>22</a><a href='7_23.html'>23</a><span>[24]</span><a href='7_25.html'>25</a><a href='7_26.html'>26</a><a href='7_27.html'>27</a><a href='7_28.html'>28</a><a href='7_29.html'>29</a><a href='7_30.html'>30</a><a href='7_25.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit c99776cc4018e91c66bd448002e924edd4910947
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sun Jan 6 10:31:44 2019 -0600

    ALSA: ice1712: fix a missing check of snd_i2c_sendbytes
    
    snd_i2c_sendbytes could fail. The fix checks its return value: if it
    fails, issues an error message and returns with its error code.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: Takashi Iwai &lt;tiwai@suse.de&gt;

diff --git a/sound/pci/ice1712/ews.c b/sound/pci/ice1712/ews.c
index b8af747ecb43..7646c93e8268 100644
--- a/sound/pci/ice1712/ews.c
+++ b/sound/pci/ice1712/ews.c
@@ -826,7 +826,12 @@ static int snd_ice1712_6fire_read_pca(struct snd_ice1712 *ice, unsigned char reg
 
 	snd_i2c_lock(ice-&gt;i2c);
 	byte = reg;
-	snd_i2c_sendbytes(spec-&gt;i2cdevs[EWS_I2C_6FIRE], &amp;byte, 1);
+	if (snd_i2c_sendbytes(spec-&gt;i2cdevs[EWS_I2C_6FIRE], &amp;byte, 1)) {
+		snd_i2c_unlock(ice-&gt;i2c);
+		dev_err(ice-&gt;card-&gt;dev, "cannot send pca\n");
+		return -EIO;
+	}
+
 	byte = 0;
 	if (snd_i2c_readbytes(spec-&gt;i2cdevs[EWS_I2C_6FIRE], &amp;byte, 1) != 1) {
 		snd_i2c_unlock(ice-&gt;i2c);</pre><hr><pre>commit 0f25e000cb4398081748e54f62a902098aa79ec1
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Tue Dec 25 19:40:51 2018 -0600

    ALSA: gus: add a check of the status of snd_ctl_add
    
    snd_ctl_add() could fail, so let's check its status and issue an error
    message if it indeed fails.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: Takashi Iwai &lt;tiwai@suse.de&gt;

diff --git a/sound/isa/gus/gus_main.c b/sound/isa/gus/gus_main.c
index 3b8a0c880db5..33c8b66d5c8a 100644
--- a/sound/isa/gus/gus_main.c
+++ b/sound/isa/gus/gus_main.c
@@ -92,8 +92,17 @@ static const struct snd_kcontrol_new snd_gus_joystick_control = {
 
 static void snd_gus_init_control(struct snd_gus_card *gus)
 {
-	if (!gus-&gt;ace_flag)
-		snd_ctl_add(gus-&gt;card, snd_ctl_new1(&amp;snd_gus_joystick_control, gus));
+	int ret;
+
+	if (!gus-&gt;ace_flag) {
+		ret =
+			snd_ctl_add(gus-&gt;card,
+					snd_ctl_new1(&amp;snd_gus_joystick_control,
+						gus));
+		if (ret)
+			snd_printk(KERN_ERR "gus: snd_ctl_add failed: %d\n",
+					ret);
+	}
 }
 
 /*</pre><hr><pre>commit c8c2702409430a6a2fd928e857f15773aaafcc99
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sat Jan 5 08:14:41 2019 -0600

    Staging: rts5208: Fix error handling on rtsx_send_cmd
    
    In sd_execute_write_data, the rtsx_send_cmd could fail with ETIMEDOUT
    or EIO. The fix adds a check to handle these failures.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;

diff --git a/drivers/staging/rts5208/sd.c b/drivers/staging/rts5208/sd.c
index 2c47ae613ea1..c256a2398651 100644
--- a/drivers/staging/rts5208/sd.c
+++ b/drivers/staging/rts5208/sd.c
@@ -4437,7 +4437,12 @@ int sd_execute_write_data(struct scsi_cmnd *srb, struct rtsx_chip *chip)
 		rtsx_init_cmd(chip);
 		rtsx_add_cmd(chip, CHECK_REG_CMD, 0xFD30, 0x02, 0x02);
 
-		rtsx_send_cmd(chip, SD_CARD, 250);
+		retval = rtsx_send_cmd(chip, SD_CARD, 250);
+		if (retval &lt; 0) {
+			write_err = true;
+			rtsx_clear_sd_error(chip);
+			goto sd_execute_write_cmd_failed;
+		}
 
 		retval = sd_update_lock_status(chip);
 		if (retval != STATUS_SUCCESS) {</pre><hr><pre>commit 73b69c01cc925d9c48e5b4f78e3d8b88c4e5b924
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Thu Dec 27 13:35:53 2018 -0600

    staging: rts5208: Add a check for ms_read_extra_data
    
    In ms_copy_page, the function ms_read_extra_data may fail for many
    reasons. The fix adds a check similar to other invocation to return
    error upstream.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Reviewed-by: Dan Carpenter &lt;dan.carpenter@oracle.com&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;

diff --git a/drivers/staging/rts5208/ms.c b/drivers/staging/rts5208/ms.c
index e43f92080c20..1128eec3bd08 100644
--- a/drivers/staging/rts5208/ms.c
+++ b/drivers/staging/rts5208/ms.c
@@ -1665,7 +1665,10 @@ static int ms_copy_page(struct rtsx_chip *chip, u16 old_blk, u16 new_blk,
 			return STATUS_FAIL;
 		}
 
-		ms_read_extra_data(chip, old_blk, i, extra, MS_EXTRA_SIZE);
+		retval = ms_read_extra_data(chip, old_blk, i, extra,
+					    MS_EXTRA_SIZE);
+		if (retval != STATUS_SUCCESS)
+			return STATUS_FAIL;
 
 		retval = ms_set_rw_reg_addr(chip, OverwriteFlag,
 					    MS_EXTRA_SIZE, SystemParm, 6);</pre><hr><pre>commit 906b40b246b0acb54c4dc97e815cf734761c9820
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Fri Dec 28 13:26:41 2018 -0600

    dmaengine: stm32-mdma: Add a check on read_u32_array
    
    In stm32_mdma_probe, after reading the property "st,ahb-addr-masks", the
    second call is not checked for failure. This time of check to time of use
    case of "count" error is sent upstream.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Acked-by: Pierre-Yves MORDRET &lt;pierre-yves.mordret@st.com&gt;
    Signed-off-by: Vinod Koul &lt;vkoul@kernel.org&gt;

diff --git a/drivers/dma/stm32-mdma.c b/drivers/dma/stm32-mdma.c
index 390e4cae0e1a..485dea177704 100644
--- a/drivers/dma/stm32-mdma.c
+++ b/drivers/dma/stm32-mdma.c
@@ -1579,9 +1579,11 @@ static int stm32_mdma_probe(struct platform_device *pdev)
 
 	dmadev-&gt;nr_channels = nr_channels;
 	dmadev-&gt;nr_requests = nr_requests;
-	device_property_read_u32_array(&amp;pdev-&gt;dev, "st,ahb-addr-masks",
+	ret = device_property_read_u32_array(&amp;pdev-&gt;dev, "st,ahb-addr-masks",
 				       dmadev-&gt;ahb_addr_masks,
 				       count);
+	if (ret)
+		return ret;
 	dmadev-&gt;nr_ahb_addr_masks = count;
 
 	res = platform_get_resource(pdev, IORESOURCE_MEM, 0);</pre><hr><pre>commit a474b3f0428d6b02a538aa10b3c3b722751cb382
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Fri Dec 28 14:11:19 2018 -0600

    dmaengine: qcom_hidma: Check for driver register failure
    
    While initializing the driver, the function platform_driver_register can
    fail and return an error. Consistent with other invocations, this patch
    returns the error upstream.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Acked-by: Sinan Kaya &lt;okaya@kernel.org&gt;
    Signed-off-by: Vinod Koul &lt;vkoul@kernel.org&gt;

diff --git a/drivers/dma/qcom/hidma_mgmt.c b/drivers/dma/qcom/hidma_mgmt.c
index d64edeb6771a..681de12f4c67 100644
--- a/drivers/dma/qcom/hidma_mgmt.c
+++ b/drivers/dma/qcom/hidma_mgmt.c
@@ -423,9 +423,8 @@ static int __init hidma_mgmt_init(void)
 		hidma_mgmt_of_populate_channels(child);
 	}
 #endif
-	platform_driver_register(&amp;hidma_mgmt_driver);
+	return platform_driver_register(&amp;hidma_mgmt_driver);
 
-	return 0;
 }
 module_init(hidma_mgmt_init);
 MODULE_LICENSE("GPL v2");</pre><hr><pre>commit 7c97381e7a9a5ec359007c0d491a143e3d9f787c
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Mon Dec 24 11:41:54 2018 -0600

    dmaengine: mv_xor: Fix a missing check in mv_xor_channel_add
    
    dma_async_device_register() may fail and return an error. The capabilities
    checked in mv_xor_channel_add() are not complete. The fix handles the
    error by freeing the resources.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: Vinod Koul &lt;vkoul@kernel.org&gt;

diff --git a/drivers/dma/mv_xor.c b/drivers/dma/mv_xor.c
index 7f595355fb79..e733c5eeaabc 100644
--- a/drivers/dma/mv_xor.c
+++ b/drivers/dma/mv_xor.c
@@ -1153,7 +1153,10 @@ mv_xor_channel_add(struct mv_xor_device *xordev,
 		 dma_has_cap(DMA_MEMCPY, dma_dev-&gt;cap_mask) ? "cpy " : "",
 		 dma_has_cap(DMA_INTERRUPT, dma_dev-&gt;cap_mask) ? "intr " : "");
 
-	dma_async_device_register(dma_dev);
+	ret = dma_async_device_register(dma_dev);
+	if (ret)
+		goto err_free_irq;
+
 	return mv_chan;
 
 err_free_irq:</pre><hr><pre>commit 7fc93f3285b17f4632694efce5ff0160303388a8
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Thu Dec 27 13:54:52 2018 -0600

    iio: adc: xilinx: check return value of xadc_write_adc_reg
    
    In function xadc_probe, xadc_write_adc_reg can return an error value
    when write fails. The fix checks for the return value consistent with
    other invocations of the latter function.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Reviewed-by: Michal Simek &lt;michal.simek@xilinx.com&gt;
    Signed-off-by: Jonathan Cameron &lt;Jonathan.Cameron@huawei.com&gt;

diff --git a/drivers/iio/adc/xilinx-xadc-core.c b/drivers/iio/adc/xilinx-xadc-core.c
index 3f6be5ac049a..b13c61539d46 100644
--- a/drivers/iio/adc/xilinx-xadc-core.c
+++ b/drivers/iio/adc/xilinx-xadc-core.c
@@ -1273,8 +1273,10 @@ static int xadc_probe(struct platform_device *pdev)
 			xadc-&gt;threshold[i] = 0xffff;
 		else
 			xadc-&gt;threshold[i] = 0;
-		xadc_write_adc_reg(xadc, XADC_REG_THRESHOLD(i),
+		ret = xadc_write_adc_reg(xadc, XADC_REG_THRESHOLD(i),
 			xadc-&gt;threshold[i]);
+		if (ret)
+			goto err_free_irq;
 	}
 
 	/* Go to non-buffered mode */</pre><hr><pre>commit ae0b3773721f08526c850e2d8dec85bdb870cd12
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Thu Dec 20 01:21:22 2018 -0600

    iio: ad9523: fix a missing check of return value
    
    If ad9523_write() fails, indio_dev may get incorrect data. The fix
    inserts a check for the return value of ad9523_write(), and it fails,
    returns an error.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: Jonathan Cameron &lt;Jonathan.Cameron@huawei.com&gt;

diff --git a/drivers/iio/frequency/ad9523.c b/drivers/iio/frequency/ad9523.c
index f3f94fbdd20a..3f9be69499ec 100644
--- a/drivers/iio/frequency/ad9523.c
+++ b/drivers/iio/frequency/ad9523.c
@@ -943,11 +943,14 @@ static int ad9523_setup(struct iio_dev *indio_dev)
 		}
 	}
 
-	for_each_clear_bit(i, &amp;active_mask, AD9523_NUM_CHAN)
-		ad9523_write(indio_dev,
+	for_each_clear_bit(i, &amp;active_mask, AD9523_NUM_CHAN) {
+		ret = ad9523_write(indio_dev,
 			     AD9523_CHANNEL_CLOCK_DIST(i),
 			     AD9523_CLK_DIST_DRIVER_MODE(TRISTATE) |
 			     AD9523_CLK_DIST_PWR_DOWN_EN);
+		if (ret &lt; 0)
+			return ret;
+	}
 
 	ret = ad9523_write(indio_dev, AD9523_POWER_DOWN_CTRL, 0);
 	if (ret &lt; 0)</pre><hr><pre>commit 6ae16dfb61bce538d48b7fe98160fada446056c5
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Mon Dec 24 15:39:14 2018 -0600

    HID: lenovo: Add checks to fix of_led_classdev_register
    
    In lenovo_probe_tpkbd(), the function of_led_classdev_register() could
    return an error value that is unchecked. The fix adds these checks.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: Jiri Kosina &lt;jkosina@suse.cz&gt;

diff --git a/drivers/hid/hid-lenovo.c b/drivers/hid/hid-lenovo.c
index 643b6eb54442..eacc76d2ab96 100644
--- a/drivers/hid/hid-lenovo.c
+++ b/drivers/hid/hid-lenovo.c
@@ -743,7 +743,9 @@ static int lenovo_probe_tpkbd(struct hid_device *hdev)
 	data_pointer-&gt;led_mute.brightness_get = lenovo_led_brightness_get_tpkbd;
 	data_pointer-&gt;led_mute.brightness_set = lenovo_led_brightness_set_tpkbd;
 	data_pointer-&gt;led_mute.dev = dev;
-	led_classdev_register(dev, &amp;data_pointer-&gt;led_mute);
+	ret = led_classdev_register(dev, &amp;data_pointer-&gt;led_mute);
+	if (ret &lt; 0)
+		goto err;
 
 	data_pointer-&gt;led_micmute.name = name_micmute;
 	data_pointer-&gt;led_micmute.brightness_get =
@@ -751,7 +753,11 @@ static int lenovo_probe_tpkbd(struct hid_device *hdev)
 	data_pointer-&gt;led_micmute.brightness_set =
 		lenovo_led_brightness_set_tpkbd;
 	data_pointer-&gt;led_micmute.dev = dev;
-	led_classdev_register(dev, &amp;data_pointer-&gt;led_micmute);
+	ret = led_classdev_register(dev, &amp;data_pointer-&gt;led_micmute);
+	if (ret &lt; 0) {
+		led_classdev_unregister(&amp;data_pointer-&gt;led_mute);
+		goto err;
+	}
 
 	lenovo_features_set_tpkbd(hdev);
 </pre>
    <div class="pagination">
        <a href='7_23.html'>&lt;&lt;Prev</a><a href='7.html'>1</a><a href='7_2.html'>2</a><a href='7_3.html'>3</a><a href='7_4.html'>4</a><a href='7_5.html'>5</a><a href='7_6.html'>6</a><a href='7_7.html'>7</a><a href='7_8.html'>8</a><a href='7_9.html'>9</a><a href='7_10.html'>10</a><a href='7_11.html'>11</a><a href='7_12.html'>12</a><a href='7_13.html'>13</a><a href='7_14.html'>14</a><a href='7_15.html'>15</a><a href='7_16.html'>16</a><a href='7_17.html'>17</a><a href='7_18.html'>18</a><a href='7_19.html'>19</a><a href='7_20.html'>20</a><a href='7_21.html'>21</a><a href='7_22.html'>22</a><a href='7_23.html'>23</a><span>[24]</span><a href='7_25.html'>25</a><a href='7_26.html'>26</a><a href='7_27.html'>27</a><a href='7_28.html'>28</a><a href='7_29.html'>29</a><a href='7_30.html'>30</a><a href='7_25.html'>Next&gt;&gt;</a>
    <div>
</body>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by Nicolaus Copernicus Astronomical Center of Pharmacology Polish Academy of Sciences</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by Nicolaus Copernicus Astronomical Center of Pharmacology Polish Academy of Sciences</h1>
    <div class="pagination">
        <span>[1]</span>
    </div>
    <hr>
    <pre>commit aa5bd67dcfdf9af34c7fa36ebc87d4e1f7e91873
Author: Kacper Kornet &lt;kornet@camk.edu.pl&gt;
Date:   Sat Jan 29 00:21:04 2011 +0100

    Fix prlimit64 for suid/sgid processes
    
    Since check_prlimit_permission always fails in the case of SUID/GUID
    processes, such processes are not able to read or set their own limits.
    This commit changes this by assuming that process can always read/change
    its own limits.
    
    Signed-off-by: Kacper Kornet &lt;kornet@camk.edu.pl&gt;
    Acked-by: Jiri Slaby &lt;jslaby@suse.cz&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

diff --git a/kernel/sys.c b/kernel/sys.c
index 31b71a276b40..18da702ec813 100644
--- a/kernel/sys.c
+++ b/kernel/sys.c
@@ -1385,7 +1385,8 @@ static int check_prlimit_permission(struct task_struct *task)
 	const struct cred *cred = current_cred(), *tcred;
 
 	tcred = __task_cred(task);
-	if ((cred-&gt;uid != tcred-&gt;euid ||
+	if (current != task &amp;&amp;
+	    (cred-&gt;uid != tcred-&gt;euid ||
 	     cred-&gt;uid != tcred-&gt;suid ||
 	     cred-&gt;uid != tcred-&gt;uid  ||
 	     cred-&gt;gid != tcred-&gt;egid ||</pre>
    <div class="pagination">
        <span>[1]</span>
    <div>
</body>

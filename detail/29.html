<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by ShanghaiTech University</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by ShanghaiTech University</h1>
    <div class="pagination">
        <span>[1]</span><a href='29_2.html'>2</a><a href='29_3.html'>3</a><a href='29_2.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit 726c0eb7cb15be3e5fe9a9f1c8aad12c5cbe4675
Author: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
Date:   Wed Sep 29 03:47:30 2021 +0800

    Bluetooth: ath3k: remove superfluous header files
    
    ath3k.c hasn't use any macro or function declared in linux/device.h.
    Thus, these files can be removed from ath3k.c safely without
    affecting the compilation of the ./drivers/bluetooth module
    
    Signed-off-by: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
    Signed-off-by: Marcel Holtmann &lt;marcel@holtmann.org&gt;

diff --git a/drivers/bluetooth/ath3k.c b/drivers/bluetooth/ath3k.c
index 759d7828931d..88262d3a9392 100644
--- a/drivers/bluetooth/ath3k.c
+++ b/drivers/bluetooth/ath3k.c
@@ -10,7 +10,6 @@
 #include &lt;linux/slab.h&gt;
 #include &lt;linux/types.h&gt;
 #include &lt;linux/errno.h&gt;
-#include &lt;linux/device.h&gt;
 #include &lt;linux/firmware.h&gt;
 #include &lt;linux/usb.h&gt;
 #include &lt;asm/unaligned.h&gt;</pre><hr><pre>commit 520e31a99100b786d82e518f89e4fd132570a349
Author: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
Date:   Wed Sep 29 03:51:08 2021 +0800

    Bluetooth: bcm203x: remove superfluous header files
    
    bcm203x.c hasn't use any macro or function declared in linux/atomic.h.
    Thus, these files can be removed from bcm203x.c safely without
    affecting the compilation of the ./drivers/bluetooth module
    
    Signed-off-by: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
    Signed-off-by: Marcel Holtmann &lt;marcel@holtmann.org&gt;

diff --git a/drivers/bluetooth/bcm203x.c b/drivers/bluetooth/bcm203x.c
index e667933c3d70..c738ad0408cb 100644
--- a/drivers/bluetooth/bcm203x.c
+++ b/drivers/bluetooth/bcm203x.c
@@ -9,7 +9,6 @@
 
 #include &lt;linux/module.h&gt;
 
-#include &lt;linux/atomic.h&gt;
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/init.h&gt;
 #include &lt;linux/slab.h&gt;</pre><hr><pre>commit a1554c002699cbc9ced2e9f44f9c1357181bead3
Author: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
Date:   Fri Nov 5 13:45:21 2021 -0700

    include/linux/mm.h: move nr_free_buffer_pages from swap.h to mm.h
    
    nr_free_buffer_pages could be exposed through mm.h instead of swap.h.
    The advantage of this change is that it can reduce the obsolete
    includes.  For example, net/ipv4/tcp.c wouldn't need swap.h any more
    since it has already included mm.h.  Similarly, after checking all the
    other files, it comes that tcp.c, udp.c meter.c ,...  follow the same
    rule, so these files can have swap.h removed too.
    
    Moreover, after preprocessing all the files that use
    nr_free_buffer_pages, it turns out that those files have already
    included mm.h.Thus, we can move nr_free_buffer_pages from swap.h to mm.h
    safely.  This change will not affect the compilation of other files.
    
    Link: https://lkml.kernel.org/r/20210912133640.1624-1-liumh1@shanghaitech.edu.cn
    Signed-off-by: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
    Cc: Jakub Kicinski &lt;kuba@kernel.org&gt;
    CC: Ulf Hansson &lt;ulf.hansson@linaro.org&gt;
    Cc: "David S . Miller" &lt;davem@davemloft.net&gt;
    Cc: Simon Horman &lt;horms@verge.net.au&gt;
    Cc: Pravin B Shelar &lt;pshelar@ovn.org&gt;
    Cc: Vlad Yasevich &lt;vyasevich@gmail.com&gt;
    Cc: Marcelo Ricardo Leitner &lt;marcelo.leitner@gmail.com&gt;
    Cc: Matthew Wilcox &lt;willy@infradead.org&gt;
    Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

diff --git a/drivers/mmc/core/mmc_test.c b/drivers/mmc/core/mmc_test.c
index 63524551a13a..e6a2fd2c6d5c 100644
--- a/drivers/mmc/core/mmc_test.c
+++ b/drivers/mmc/core/mmc_test.c
@@ -10,7 +10,6 @@
 #include &lt;linux/slab.h&gt;
 
 #include &lt;linux/scatterlist.h&gt;
-#include &lt;linux/swap.h&gt;		/* For nr_free_buffer_pages() */
 #include &lt;linux/list.h&gt;
 
 #include &lt;linux/debugfs.h&gt;
diff --git a/include/linux/mm.h b/include/linux/mm.h
index 15058d9cec99..b1720aa63727 100644
--- a/include/linux/mm.h
+++ b/include/linux/mm.h
@@ -875,6 +875,8 @@ void put_pages_list(struct list_head *pages);
 void split_page(struct page *page, unsigned int order);
 void copy_huge_page(struct page *dst, struct page *src);
 
+unsigned long nr_free_buffer_pages(void);
+
 /*
  * Compound pages have a destructor function.  Provide a
  * prototype for that function and accessor functions.
diff --git a/include/linux/swap.h b/include/linux/swap.h
index ba52f3a3478e..53f759a59996 100644
--- a/include/linux/swap.h
+++ b/include/linux/swap.h
@@ -335,7 +335,6 @@ void workingset_update_node(struct xa_node *node);
 
 /* linux/mm/page_alloc.c */
 extern unsigned long totalreserve_pages;
-extern unsigned long nr_free_buffer_pages(void);
 
 /* Definition of global_zone_page_state not available yet */
 #define nr_free_pages() global_zone_page_state(NR_FREE_PAGES)
diff --git a/net/ipv4/tcp.c b/net/ipv4/tcp.c
index f5c336f8b0c8..c5e07a2c6c52 100644
--- a/net/ipv4/tcp.c
+++ b/net/ipv4/tcp.c
@@ -260,7 +260,6 @@
 #include &lt;linux/random.h&gt;
 #include &lt;linux/memblock.h&gt;
 #include &lt;linux/highmem.h&gt;
-#include &lt;linux/swap.h&gt;
 #include &lt;linux/cache.h&gt;
 #include &lt;linux/err.h&gt;
 #include &lt;linux/time.h&gt;
diff --git a/net/ipv4/udp.c b/net/ipv4/udp.c
index 2fffcf2b54f3..319dd7bbfe33 100644
--- a/net/ipv4/udp.c
+++ b/net/ipv4/udp.c
@@ -78,7 +78,6 @@
 #include &lt;asm/ioctls.h&gt;
 #include &lt;linux/memblock.h&gt;
 #include &lt;linux/highmem.h&gt;
-#include &lt;linux/swap.h&gt;
 #include &lt;linux/types.h&gt;
 #include &lt;linux/fcntl.h&gt;
 #include &lt;linux/module.h&gt;
diff --git a/net/netfilter/ipvs/ip_vs_ctl.c b/net/netfilter/ipvs/ip_vs_ctl.c
index 29ec3ef63edc..6ea4b882435e 100644
--- a/net/netfilter/ipvs/ip_vs_ctl.c
+++ b/net/netfilter/ipvs/ip_vs_ctl.c
@@ -24,7 +24,6 @@
 #include &lt;linux/sysctl.h&gt;
 #include &lt;linux/proc_fs.h&gt;
 #include &lt;linux/workqueue.h&gt;
-#include &lt;linux/swap.h&gt;
 #include &lt;linux/seq_file.h&gt;
 #include &lt;linux/slab.h&gt;
 
diff --git a/net/openvswitch/meter.c b/net/openvswitch/meter.c
index 896b8f5bc885..04a060ac7fdf 100644
--- a/net/openvswitch/meter.c
+++ b/net/openvswitch/meter.c
@@ -12,7 +12,6 @@
 #include &lt;linux/openvswitch.h&gt;
 #include &lt;linux/netlink.h&gt;
 #include &lt;linux/rculist.h&gt;
-#include &lt;linux/swap.h&gt;
 
 #include &lt;net/netlink.h&gt;
 #include &lt;net/genetlink.h&gt;
diff --git a/net/sctp/protocol.c b/net/sctp/protocol.c
index ec0f52567c16..35928fefae33 100644
--- a/net/sctp/protocol.c
+++ b/net/sctp/protocol.c
@@ -33,7 +33,6 @@
 #include &lt;linux/seq_file.h&gt;
 #include &lt;linux/memblock.h&gt;
 #include &lt;linux/highmem.h&gt;
-#include &lt;linux/swap.h&gt;
 #include &lt;linux/slab.h&gt;
 #include &lt;net/net_namespace.h&gt;
 #include &lt;net/protocol.h&gt;</pre><hr><pre>commit de5169ac53c8997c4b889283b36c9992f990e6de
Author: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
Date:   Wed Sep 29 14:58:24 2021 +0800

    clk/actions/owl-factor.c: remove superfluous headers
    
    owl-factor.c hasn't use any macro or function declared in linux/slab.h.
    Thus, these files can be removed from owl-factor.c safely without
    affecting the compilation of the ./drivers/clk module
    
    Signed-off-by: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
    Link: https://lore.kernel.org/r/20210929065824.23691-1-liumh1@shanghaitech.edu.cn
    Reviewed-by: Manivannan Sadhasivam &lt;mani@kernel.org&gt;
    Signed-off-by: Stephen Boyd &lt;sboyd@kernel.org&gt;

diff --git a/drivers/clk/actions/owl-factor.c b/drivers/clk/actions/owl-factor.c
index f15e2621fa18..64f316cf7cfc 100644
--- a/drivers/clk/actions/owl-factor.c
+++ b/drivers/clk/actions/owl-factor.c
@@ -10,7 +10,6 @@
 
 #include &lt;linux/clk-provider.h&gt;
 #include &lt;linux/regmap.h&gt;
-#include &lt;linux/slab.h&gt;
 
 #include "owl-factor.h"
 </pre><hr><pre>commit 1515b849f726f60dfff5c0bde2b0713cac26dd6c
Author: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
Date:   Wed Sep 29 03:15:09 2021 +0800

    auxdisplay: ht16k33: remove superfluous header files
    
    ht16k33.c doesn't use any macro or function declared in
    linux/slab.h. Thus, these files can be removed from ht16k33.c
    safely without affecting the compilation.
    
    Signed-off-by: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
    Acked-by: Robin van der Gracht &lt;robin@protonic.nl&gt;
    [reworded]
    Signed-off-by: Miguel Ojeda &lt;ojeda@kernel.org&gt;

diff --git a/drivers/auxdisplay/ht16k33.c b/drivers/auxdisplay/ht16k33.c
index 1134ae9f30de..4fab3b2c7023 100644
--- a/drivers/auxdisplay/ht16k33.c
+++ b/drivers/auxdisplay/ht16k33.c
@@ -14,7 +14,6 @@
 #include &lt;linux/i2c.h&gt;
 #include &lt;linux/property.h&gt;
 #include &lt;linux/fb.h&gt;
-#include &lt;linux/slab.h&gt;
 #include &lt;linux/backlight.h&gt;
 #include &lt;linux/input.h&gt;
 #include &lt;linux/input/matrix_keypad.h&gt;</pre><hr><pre>commit 2b7ea42e7e29cc6c96f255a5c5289630ca612be0
Author: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
Date:   Wed Sep 29 03:06:44 2021 +0800

    auxdisplay: ks0108: remove superfluous header files
    
    ks0108.c doesn't use any macro or function declared in
    linux/fs.h, linux/io.h and linux/uaccess.h. Thus,
    these files can be removed from ks0108.c safely without
    affecting the compilation.
    
    Signed-off-by: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
    [reworded]
    Signed-off-by: Miguel Ojeda &lt;ojeda@kernel.org&gt;

diff --git a/drivers/auxdisplay/ks0108.c b/drivers/auxdisplay/ks0108.c
index e871b94a1911..234f9dbe6e30 100644
--- a/drivers/auxdisplay/ks0108.c
+++ b/drivers/auxdisplay/ks0108.c
@@ -15,10 +15,7 @@
 #include &lt;linux/module.h&gt;
 #include &lt;linux/kernel.h&gt;
 #include &lt;linux/delay.h&gt;
-#include &lt;linux/fs.h&gt;
-#include &lt;linux/io.h&gt;
 #include &lt;linux/parport.h&gt;
-#include &lt;linux/uaccess.h&gt;
 #include &lt;linux/ks0108.h&gt;
 
 #define KS0108_NAME "ks0108"</pre><hr><pre>commit 83bb3d512fc256cf3bbfb0aa961bc025a561d31e
Author: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
Date:   Wed Sep 29 03:21:42 2021 +0800

    auxdisplay: cfag12864bfb: remove superfluous header files
    
    cfag12864bfb.c doesn't use any macro or function declared in
    linux/delay.h, linux/string.h and linux/uaccess.h. Thus,
    these files can be removed from cfag12864bfb.c safely without
    affecting the compilation.
    
    Signed-off-by: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
    [reworded]
    Signed-off-by: Miguel Ojeda &lt;ojeda@kernel.org&gt;

diff --git a/drivers/auxdisplay/cfag12864bfb.c b/drivers/auxdisplay/cfag12864bfb.c
index d66821adf453..9e6681f19dc4 100644
--- a/drivers/auxdisplay/cfag12864bfb.c
+++ b/drivers/auxdisplay/cfag12864bfb.c
@@ -12,13 +12,10 @@
 #include &lt;linux/init.h&gt;
 #include &lt;linux/module.h&gt;
 #include &lt;linux/kernel.h&gt;
-#include &lt;linux/delay.h&gt;
 #include &lt;linux/errno.h&gt;
 #include &lt;linux/fb.h&gt;
 #include &lt;linux/mm.h&gt;
 #include &lt;linux/platform_device.h&gt;
-#include &lt;linux/string.h&gt;
-#include &lt;linux/uaccess.h&gt;
 #include &lt;linux/cfag12864b.h&gt;
 
 #define CFAG12864BFB_NAME "cfag12864bfb"</pre><hr><pre>commit 30b7ecf731ae800f4231fae8dbf3b47cf3d39142
Author: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
Date:   Wed Sep 29 03:38:49 2021 +0800

    drivers/base/component.c: remove superfluous header files from component.c
    
    component.c hasn't use any macro or function declared in linux/kref.h.
    Thus, these files can be removed from component.c safely without
    affecting the compilation of the drivers/base/ module
    
    Signed-off-by: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
    Link: https://lore.kernel.org/r/20210928193849.28717-1-liumh1@shanghaitech.edu.cn
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;

diff --git a/drivers/base/component.c b/drivers/base/component.c
index 5e79299f6c3f..6dc309913ccd 100644
--- a/drivers/base/component.c
+++ b/drivers/base/component.c
@@ -9,7 +9,6 @@
  */
 #include &lt;linux/component.h&gt;
 #include &lt;linux/device.h&gt;
-#include &lt;linux/kref.h&gt;
 #include &lt;linux/list.h&gt;
 #include &lt;linux/mutex.h&gt;
 #include &lt;linux/slab.h&gt;</pre><hr><pre>commit b39214911a548746e7375985c87cdaa8e1a0dfde
Author: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
Date:   Wed Sep 29 03:31:38 2021 +0800

    drivers/base/arch_topology.c: remove superfluous header
    
    arch_topology.c hasn't use any macro or function declared in linux/percpu.h,
    linux/smp.h and linux/string.h.
    Thus, these files can be removed from arch_topology.c safely without
    affecting the compilation of the drivers/base/ module
    
    Signed-off-by: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
    Link: https://lore.kernel.org/r/20210928193138.24192-1-liumh1@shanghaitech.edu.cn
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@linuxfoundation.org&gt;

diff --git a/drivers/base/arch_topology.c b/drivers/base/arch_topology.c
index 43407665918f..92200873bd50 100644
--- a/drivers/base/arch_topology.c
+++ b/drivers/base/arch_topology.c
@@ -12,15 +12,12 @@
 #include &lt;linux/device.h&gt;
 #include &lt;linux/of.h&gt;
 #include &lt;linux/slab.h&gt;
-#include &lt;linux/string.h&gt;
 #include &lt;linux/sched/topology.h&gt;
 #include &lt;linux/cpuset.h&gt;
 #include &lt;linux/cpumask.h&gt;
 #include &lt;linux/init.h&gt;
-#include &lt;linux/percpu.h&gt;
 #include &lt;linux/rcupdate.h&gt;
 #include &lt;linux/sched.h&gt;
-#include &lt;linux/smp.h&gt;
 
 static DEFINE_PER_CPU(struct scale_freq_data __rcu *, sft_data);
 static struct cpumask scale_freq_counters_mask;</pre><hr><pre>commit 6a832a6c72b9365299406f13c799b63dafe03677
Author: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
Date:   Wed Sep 29 13:31:09 2021 +0800

    net/ipv4/datagram.c: remove superfluous header files from datagram.c
    
    datagram.c hasn't use any macro or function declared in linux/ip.h.
    Thus, these files can be removed from datagram.c safely without
    affecting the compilation of the net/ipv4 module
    
    Signed-off-by: Mianhan Liu &lt;liumh1@shanghaitech.edu.cn&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/net/ipv4/datagram.c b/net/ipv4/datagram.c
index 4a8550c49202..48f337ccf949 100644
--- a/net/ipv4/datagram.c
+++ b/net/ipv4/datagram.c
@@ -9,7 +9,6 @@
 
 #include &lt;linux/types.h&gt;
 #include &lt;linux/module.h&gt;
-#include &lt;linux/ip.h&gt;
 #include &lt;linux/in.h&gt;
 #include &lt;net/ip.h&gt;
 #include &lt;net/sock.h&gt;</pre>
    <div class="pagination">
        <span>[1]</span><a href='29_2.html'>2</a><a href='29_3.html'>3</a><a href='29_2.html'>Next&gt;&gt;</a>
    <div>
</body>

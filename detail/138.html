<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by Olin College of Engineering</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by Olin College of Engineering</h1>
    <div class="pagination">
        <span>[1]</span>
    </div>
    <hr>
    <pre>commit 77c1ff3982c6b36961725dd19e872a1c07df7f3b
Author: Andy Getzendanner &lt;james.getzendanner@students.olin.edu&gt;
Date:   Thu Feb 11 14:04:48 2010 +1000

    vgaarb: fix incorrect dereference of userspace pointer.
    
    This patch corrects a userspace pointer dereference in the VGA arbiter
    in 2.6.32.1.
    
    copy_from_user() is used at line 822 to copy the contents of buf into
    kbuf, but a call to strncmp() on line 964 uses buf rather than kbuf.  This
    problem led to a GPF in strncmp() when X was started on my x86_32 systems.
     X triggered the behavior with a write of "target PCI:0000:01:00.0" to
    /dev/vga_arbiter.
    
    The patch has been tested against 2.6.32.1 and observed to correct the GPF
    observed when starting X or manually writing the string "target
    PCI:0000:01:00.0" to /dev/vga_arbiter.
    
    Signed-off-by: Andy Getzendanner &lt;james.getzendanner@students.olin.edu&gt;
    Cc: Jesse Barnes &lt;jbarnes@virtuousgeek.org&gt;
    Cc: &lt;stable@kernel.org&gt;
    Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Dave Airlie &lt;airlied@redhat.com&gt;

diff --git a/drivers/gpu/vga/vgaarb.c b/drivers/gpu/vga/vgaarb.c
index 1ac0c93603c9..24b56dc54597 100644
--- a/drivers/gpu/vga/vgaarb.c
+++ b/drivers/gpu/vga/vgaarb.c
@@ -961,7 +961,7 @@ static ssize_t vga_arb_write(struct file *file, const char __user * buf,
 		remaining -= 7;
 		pr_devel("client 0x%p called 'target'\n", priv);
 		/* if target is default */
-		if (!strncmp(buf, "default", 7))
+		if (!strncmp(kbuf, "default", 7))
 			pdev = pci_dev_get(vga_default_device());
 		else {
 			if (!vga_pci_str_to_vars(curr_pos, remaining,</pre>
    <div class="pagination">
        <span>[1]</span>
    <div>
</body>

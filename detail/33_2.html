<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of California, Riverside</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of California, Riverside</h1>
    <div class="pagination">
        <a href='33.html'>&lt;&lt;Prev</a><a href='33.html'>1</a><span>[2]</span>
    </div>
    <hr>
    <pre>commit 09e7f2805c352dc38d13f663613663574a0584ad
Author: Yizhuo &lt;yzhai003@ucr.edu&gt;
Date:   Mon Sep 2 12:52:49 2019 -0700

    platform/x86: compal-laptop: Initialize "value" in ec_read_u8()
    
    In function ec_read_u8(), variable "value" could be uninitialized
    if ec_read() fails. However, "value" is returned directly and used
    in its callers. This is potentially unsafe.
    
    Signed-off-by: Yizhuo &lt;yzhai003@ucr.edu&gt;
    Signed-off-by: Andy Shevchenko &lt;andriy.shevchenko@linux.intel.com&gt;

diff --git a/drivers/platform/x86/compal-laptop.c b/drivers/platform/x86/compal-laptop.c
index 09dfa6f48a1a..ab610376fdad 100644
--- a/drivers/platform/x86/compal-laptop.c
+++ b/drivers/platform/x86/compal-laptop.c
@@ -226,7 +226,7 @@ static const unsigned char pwm_lookup_table[256] = {
 /* General access */
 static u8 ec_read_u8(u8 addr)
 {
-	u8 value;
+	u8 value = 0;
 	ec_read(addr, &amp;value);
 	return value;
 }</pre><hr><pre>commit e33b4325e60e146c2317a8b548cbd633239ff83b
Author: Yizhuo &lt;yzhai003@ucr.edu&gt;
Date:   Fri Aug 30 19:00:48 2019 -0700

    net: stmmac: dwmac-sun8i: Variable "val" in function sun8i_dwmac_set_syscon() could be uninitialized
    
    In function sun8i_dwmac_set_syscon(), local variable "val" could
    be uninitialized if function regmap_field_read() returns -EINVAL.
    However, it will be used directly in the if statement, which
    is potentially unsafe.
    
    Signed-off-by: Yizhuo &lt;yzhai003@ucr.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/net/ethernet/stmicro/stmmac/dwmac-sun8i.c b/drivers/net/ethernet/stmicro/stmmac/dwmac-sun8i.c
index 4083019c547a..f97a4096f8fc 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwmac-sun8i.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwmac-sun8i.c
@@ -873,7 +873,12 @@ static int sun8i_dwmac_set_syscon(struct stmmac_priv *priv)
 	int ret;
 	u32 reg, val;
 
-	regmap_field_read(gmac-&gt;regmap_field, &amp;val);
+	ret = regmap_field_read(gmac-&gt;regmap_field, &amp;val);
+	if (ret) {
+		dev_err(priv-&gt;device, "Fail to read from regmap field.\n");
+		return ret;
+	}
+
 	reg = gmac-&gt;variant-&gt;default_syscon_value;
 	if (reg != val)
 		dev_warn(priv-&gt;device,</pre><hr><pre>commit 0fb68ce02ae73626a61b8d03eab1625021057af5
Author: Yizhuo &lt;yzhai003@ucr.edu&gt;
Date:   Mon Aug 26 20:55:28 2019 -0300

    media: pvrusb2: qctrl.flag will be uninitlaized if cx2341x_ctrl_query() returns error code
    
    Inside function ctrl_cx2341x_getv4lflags(), qctrl.flag
    will be uninitlaized if cx2341x_ctrl_query() returns -EINVAL.
    However, it will be used in the later if statement, which is
    potentially unsafe.
    
    Signed-off-by: Yizhuo &lt;yzhai003@ucr.edu&gt;
    Acked-by: Mike Isely &lt;isely@pobox.com&gt;
    Signed-off-by: Hans Verkuil &lt;hverkuil-cisco@xs4all.nl&gt;
    Signed-off-by: Mauro Carvalho Chehab &lt;mchehab+samsung@kernel.org&gt;

diff --git a/drivers/media/usb/pvrusb2/pvrusb2-hdw.c b/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
index 2a946cff84b7..1cfb7cf64131 100644
--- a/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
+++ b/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
@@ -784,7 +784,7 @@ static int ctrl_cx2341x_set(struct pvr2_ctrl *cptr,int m,int v)
 
 static unsigned int ctrl_cx2341x_getv4lflags(struct pvr2_ctrl *cptr)
 {
-	struct v4l2_queryctrl qctrl;
+	struct v4l2_queryctrl qctrl = {};
 	struct pvr2_ctl_info *info;
 	qctrl.id = cptr-&gt;info-&gt;v4l_id;
 	cx2341x_ctrl_query(&amp;cptr-&gt;hdw-&gt;enc_ctl_state,&amp;qctrl);</pre><hr><pre>commit 37d1e62b5bb3b1229d0c49f2ee45e67dc67274be
Author: Yizhuo &lt;yzhai003@ucr.edu&gt;
Date:   Wed Jan 30 12:33:30 2019 -0500

    media: ts2020: Variable "utmp" in function ts2020_set_tuner_rf() could be uninitialized
    
    In function ts2020_set_tuner_rf(), local variable "utmp" could
    be uninitialized if function regmap_read() returns -EINVAL.
    However, this value is used in if statement and written to
    the register, which is potentially unsafe.
    
    Signed-off-by: Yizhuo &lt;yzhai003@ucr.edu&gt;
    Signed-off-by: Sean Young &lt;sean@mess.org&gt;
    Signed-off-by: Mauro Carvalho Chehab &lt;mchehab+samsung@kernel.org&gt;

diff --git a/drivers/media/dvb-frontends/ts2020.c b/drivers/media/dvb-frontends/ts2020.c
index e5cd2cd414f4..0af9b335be12 100644
--- a/drivers/media/dvb-frontends/ts2020.c
+++ b/drivers/media/dvb-frontends/ts2020.c
@@ -180,6 +180,9 @@ static int ts2020_set_tuner_rf(struct dvb_frontend *fe)
 	unsigned int utmp;
 
 	ret = regmap_read(dev-&gt;regmap, 0x3d, &amp;utmp);
+	if (ret)
+		return ret;
+
 	utmp &amp;= 0x7f;
 	if (utmp &lt; 0x16)
 		utmp = 0xa1;</pre><hr><pre>commit dc30e70391376ba3987aeb856ae6d9c0706534f1
Author: Yizhuo &lt;yzhai003@ucr.edu&gt;
Date:   Fri Jan 25 22:32:20 2019 -0800

    ARM: OMAP2+: Variable "reg" in function omap4_dsi_mux_pads() could be uninitialized
    
    In function omap4_dsi_mux_pads(), local variable "reg" could
    be uninitialized if function regmap_read() returns -EINVAL.
    However, it will be used directly in the later context, which
    is potentially unsafe.
    
    Signed-off-by: Yizhuo &lt;yzhai003@ucr.edu&gt;
    Signed-off-by: Tony Lindgren &lt;tony@atomide.com&gt;

diff --git a/arch/arm/mach-omap2/display.c b/arch/arm/mach-omap2/display.c
index f86b72d1d59e..1444b4b4bd9f 100644
--- a/arch/arm/mach-omap2/display.c
+++ b/arch/arm/mach-omap2/display.c
@@ -83,6 +83,7 @@ static int omap4_dsi_mux_pads(int dsi_id, unsigned lanes)
 	u32 enable_mask, enable_shift;
 	u32 pipd_mask, pipd_shift;
 	u32 reg;
+	int ret;
 
 	if (dsi_id == 0) {
 		enable_mask = OMAP4_DSI1_LANEENABLE_MASK;
@@ -98,7 +99,11 @@ static int omap4_dsi_mux_pads(int dsi_id, unsigned lanes)
 		return -ENODEV;
 	}
 
-	regmap_read(omap4_dsi_mux_syscon, OMAP4_DSIPHY_SYSCON_OFFSET, &amp;reg);
+	ret = regmap_read(omap4_dsi_mux_syscon,
+					  OMAP4_DSIPHY_SYSCON_OFFSET,
+					  &amp;reg);
+	if (ret)
+		return ret;
 
 	reg &amp;= ~enable_mask;
 	reg &amp;= ~pipd_mask;</pre><hr><pre>commit e20bfeb0b7d808bc05e7c4cb1f492cd31d837da0
Author: Yizhuo &lt;yzhai003@ucr.edu&gt;
Date:   Fri Jan 25 10:45:37 2019 -0800

    ASoC: rt5651: Variable "ret" in function rt5651_i2c_probe() could be uninitialized
    
    In function rt5651_i2c_probe(), local variable "ret" could
    be uninitialized if function regmap_read() returns -EINVAL.
    However, this value is used in if statement. This is
    potentially unsafe.
    
    Signed-off-by: Yizhuo &lt;yzhai003@ucr.edu&gt;
    Signed-off-by: Mark Brown &lt;broonie@kernel.org&gt;

diff --git a/sound/soc/codecs/rt5651.c b/sound/soc/codecs/rt5651.c
index 75994297c896..29b2d60076b0 100644
--- a/sound/soc/codecs/rt5651.c
+++ b/sound/soc/codecs/rt5651.c
@@ -2181,6 +2181,7 @@ static int rt5651_i2c_probe(struct i2c_client *i2c,
 {
 	struct rt5651_priv *rt5651;
 	int ret;
+	int err;
 
 	rt5651 = devm_kzalloc(&amp;i2c-&gt;dev, sizeof(*rt5651),
 				GFP_KERNEL);
@@ -2197,7 +2198,10 @@ static int rt5651_i2c_probe(struct i2c_client *i2c,
 		return ret;
 	}
 
-	regmap_read(rt5651-&gt;regmap, RT5651_DEVICE_ID, &amp;ret);
+	err = regmap_read(rt5651-&gt;regmap, RT5651_DEVICE_ID, &amp;ret);
+	if (err)
+		return err;
+
 	if (ret != RT5651_DEVICE_ID_VALUE) {
 		dev_err(&amp;i2c-&gt;dev,
 			"Device with ID register %#x is not rt5651\n", ret);</pre><hr><pre>commit 4a8191aa9e057ea38279ef9e809265ba3966be40
Author: Yizhuo &lt;yzhai003@ucr.edu&gt;
Date:   Mon Jan 7 12:12:32 2019 -0800

    ASoC: rt274: Variable "buf" in function rt274_jack_detect() could be uninitialized
    
    In function rt274_jack_detect(), local variable "buf" could
    be uninitialized if function regmap_read() returns -EINVAL.
    However, it will be used to calculate "hp" and "mic" and
    make their value unpredictable while those value are used
    in the caller. This is potentially unsafe.
    
    Signed-off-by: Yizhuo &lt;yzhai003@ucr.edu&gt;
    Signed-off-by: Mark Brown &lt;broonie@kernel.org&gt;

diff --git a/sound/soc/codecs/rt274.c b/sound/soc/codecs/rt274.c
index 9e88f7b25d38..adf59039a3b6 100644
--- a/sound/soc/codecs/rt274.c
+++ b/sound/soc/codecs/rt274.c
@@ -353,6 +353,7 @@ static void rt274_index_sync(struct snd_soc_component *component)
 static int rt274_jack_detect(struct rt274_priv *rt274, bool *hp, bool *mic)
 {
 	unsigned int buf;
+	int ret;
 
 	*hp = false;
 	*mic = false;
@@ -360,9 +361,15 @@ static int rt274_jack_detect(struct rt274_priv *rt274, bool *hp, bool *mic)
 	if (!rt274-&gt;component)
 		return -EINVAL;
 
-	regmap_read(rt274-&gt;regmap, RT274_GET_HP_SENSE, &amp;buf);
+	ret = regmap_read(rt274-&gt;regmap, RT274_GET_HP_SENSE, &amp;buf);
+	if (ret)
+		return ret;
+
 	*hp = buf &amp; 0x80000000;
-	regmap_read(rt274-&gt;regmap, RT274_GET_MIC_SENSE, &amp;buf);
+	ret = regmap_read(rt274-&gt;regmap, RT274_GET_MIC_SENSE, &amp;buf);
+	if (ret)
+		return ret;
+
 	*mic = buf &amp; 0x80000000;
 
 	pr_debug("*hp = %d *mic = %d\n", *hp, *mic);</pre><hr><pre>commit 8c3590de0a378c2449fc1aec127cc693632458e4
Author: Yizhuo &lt;yzhai003@ucr.edu&gt;
Date:   Thu Jan 3 13:59:12 2019 -0800

    ASoC: Variable "val" in function rt274_i2c_probe() could be uninitialized
    
    Inside function rt274_i2c_probe(), if regmap_read() function
    returns -EINVAL, then local variable "val" leaves uninitialized
    but used in if statement. This is potentially unsafe.
    
    Signed-off-by: Yizhuo &lt;yzhai003@ucr.edu&gt;
    Signed-off-by: Mark Brown &lt;broonie@kernel.org&gt;

diff --git a/sound/soc/codecs/rt274.c b/sound/soc/codecs/rt274.c
index 0ef966d56bac..e2855ab9a2c6 100644
--- a/sound/soc/codecs/rt274.c
+++ b/sound/soc/codecs/rt274.c
@@ -1128,8 +1128,11 @@ static int rt274_i2c_probe(struct i2c_client *i2c,
 		return ret;
 	}
 
-	regmap_read(rt274-&gt;regmap,
+	ret = regmap_read(rt274-&gt;regmap,
 		RT274_GET_PARAM(AC_NODE_ROOT, AC_PAR_VENDOR_ID), &amp;val);
+	if (ret)
+		return ret;
+
 	if (val != RT274_VENDOR_ID) {
 		dev_err(&amp;i2c-&gt;dev,
 			"Device with ID register %#x is not rt274\n", val);</pre><hr><pre>commit 4674686d6c8974eb4eebec894c398a0f6c506af3
Author: yzhai003@ucr.edu &lt;yzhai003@ucr.edu&gt;
Date:   Fri Jun 1 11:30:14 2018 -0700

    iommu/amd: Argument page_size could be uninitialized
    
    Argument "page_size" passing to function "fetch_pte" could be
    uninitialized if the function returns NULL
    
    The caller "iommu_unmap_page" checks the return value but the page_size is
    used outside the if block.
    
    Signed-off-by: yzhai003@ucr.edu &lt;yzhai003@ucr.edu&gt;
    Signed-off-by: Joerg Roedel &lt;jroedel@suse.de&gt;

diff --git a/drivers/iommu/amd_iommu.c b/drivers/iommu/amd_iommu.c
index 596b95c50051..e688169721b8 100644
--- a/drivers/iommu/amd_iommu.c
+++ b/drivers/iommu/amd_iommu.c
@@ -1404,6 +1404,8 @@ static u64 *fetch_pte(struct protection_domain *domain,
 	int level;
 	u64 *pte;
 
+	*page_size = 0;
+
 	if (address &gt; PM_LEVEL_SIZE(domain-&gt;mode))
 		return NULL;
 </pre>
    <div class="pagination">
        <a href='33.html'>&lt;&lt;Prev</a><a href='33.html'>1</a><span>[2]</span>
    <div>
</body>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of Rhode Island</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of Rhode Island</h1>
    <div class="pagination">
        <span>[1]</span>
    </div>
    <hr>
    <pre>commit 1ef48593bd6a508984d1270a1075532628bfd9c8
Author: Will Simoneau &lt;simoneau@ele.uri.edu&gt;
Date:   Sat Jul 16 10:45:12 2011 -0700

    sparc: sun4m SMP: fix wrong shift instruction in IPI handler
    
    This shift instruction appears to be shifting in the wrong direction.
    Without this change, my SparcStation-20MP hangs just after bringing up
    the second CPU:
    
    Entering SMP Mode...
    Starting CPU 2 at f02b4e90
    Brought up 2 CPUs
    Total of 2 processors activated (99.52 BogoMIPS).
       *** stuck ***
    
    Signed-off-by: Will Simoneau &lt;simoneau@ele.uri.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/arch/sparc/kernel/entry.S b/arch/sparc/kernel/entry.S
index 9fe08a1ea6c6..f445e98463e6 100644
--- a/arch/sparc/kernel/entry.S
+++ b/arch/sparc/kernel/entry.S
@@ -293,7 +293,7 @@ maybe_smp4m_msg:
 	WRITE_PAUSE
 	wr	%l4, PSR_ET, %psr
 	WRITE_PAUSE
-	sll	%o3, 28, %o2		! shift for simpler checks below
+	srl	%o3, 28, %o2		! shift for simpler checks below
 maybe_smp4m_msg_check_single:
 	andcc	%o2, 0x1, %g0
 	beq,a	maybe_smp4m_msg_check_mask</pre>
    <div class="pagination">
        <span>[1]</span>
    <div>
</body>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of Illinois, Urbana-Champaign</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of Illinois, Urbana-Champaign</h1>
    <div class="pagination">
        <a href='24_2.html'>&lt;&lt;Prev</a><a href='24.html'>1</a><a href='24_2.html'>2</a><span>[3]</span>
    </div>
    <hr>
    <pre>commit c7e89b16eb90e7bdf0d71bd5ba265ce8d424f30b
Author: Heechul Yun &lt;heechul@illinois.edu&gt;
Date:   Fri Jul 8 13:32:34 2011 +0100

    ARM: 6995/2: mm: remove unnecessary cache flush on v6 copypage
    
    Originally introduced to maintain coherency between icache and dcache
    in v6 nonaliasing mode. This is now handled by __sync_icache_dcache since
    c0177800, therefore unnecessary in this function.
    
    Signed-off-by: Heechul Yun &lt;heechul@illinois.edu&gt;
    Acked-by: Catalin Marinas &lt;catalin.marinas@arm.com&gt;
    Signed-off-by: Russell King &lt;rmk+kernel@arm.linux.org.uk&gt;

diff --git a/arch/arm/mm/copypage-v6.c b/arch/arm/mm/copypage-v6.c
index bdba6c65c901..63cca0097130 100644
--- a/arch/arm/mm/copypage-v6.c
+++ b/arch/arm/mm/copypage-v6.c
@@ -41,7 +41,6 @@ static void v6_copy_user_highpage_nonaliasing(struct page *to,
 	kfrom = kmap_atomic(from, KM_USER0);
 	kto = kmap_atomic(to, KM_USER1);
 	copy_page(kto, kfrom);
-	__cpuc_flush_dcache_area(kto, PAGE_SIZE);
 	kunmap_atomic(kto, KM_USER1);
 	kunmap_atomic(kfrom, KM_USER0);
 }</pre><hr><pre>commit b6ac161364eccce1bea4a23a9de395883e90d7ab
Author: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
Date:   Tue Jul 21 22:02:27 2009 -0500

    Staging: ARRAY_SIZE changes
    
    These changes were a direct result of using a semantic patch
    More information can be found at http://www.emn.fr/x-info/coccinelle/
    
    Signed-off-by: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/drivers/amplc_pci230.c b/drivers/staging/comedi/drivers/amplc_pci230.c
index c4d8c4cae4a5..091a1a5822a8 100644
--- a/drivers/staging/comedi/drivers/amplc_pci230.c
+++ b/drivers/staging/comedi/drivers/amplc_pci230.c
@@ -513,7 +513,7 @@ MODULE_DEVICE_TABLE(pci, pci230_pci_table);
 /*
  * Useful for shorthand access to the particular board structure
  */
-#define n_pci230_boards (sizeof(pci230_boards)/sizeof(pci230_boards[0]))
+#define n_pci230_boards ARRAY_SIZE(pci230_boards)
 #define thisboard ((const struct pci230_board *)dev-&gt;board_ptr)
 
 /* this structure is for data unique to this hardware driver.  If
diff --git a/drivers/staging/comedi/drivers/cb_das16_cs.c b/drivers/staging/comedi/drivers/cb_das16_cs.c
index 2f7aa3b5ef8e..12d12b43a6f1 100644
--- a/drivers/staging/comedi/drivers/cb_das16_cs.c
+++ b/drivers/staging/comedi/drivers/cb_das16_cs.c
@@ -78,7 +78,7 @@ static const struct das16cs_board das16cs_boards[] = {
 	 },
 };
 
-#define n_boards (sizeof(das16cs_boards)/sizeof(das16cs_boards[0]))
+#define n_boards ARRAY_SIZE(das16cs_boards)
 #define thisboard ((const struct das16cs_board *)dev-&gt;board_ptr)
 
 struct das16cs_private {
diff --git a/drivers/staging/comedi/drivers/das08_cs.c b/drivers/staging/comedi/drivers/das08_cs.c
index 74fcc1086c51..9cab21eaaa18 100644
--- a/drivers/staging/comedi/drivers/das08_cs.c
+++ b/drivers/staging/comedi/drivers/das08_cs.c
@@ -65,8 +65,7 @@ static struct comedi_driver driver_das08_cs = {
 	.attach = das08_cs_attach,
 	.detach = das08_common_detach,
 	.board_name = &amp;das08_cs_boards[0].name,
-	.num_names = sizeof(das08_cs_boards) /
-	    sizeof(struct das08_board_struct),
+	.num_names = ARRAY_SIZE(das08_cs_boards),
 	.offset = sizeof(struct das08_board_struct),
 };
 
diff --git a/drivers/staging/comedi/drivers/ni_6527.c b/drivers/staging/comedi/drivers/ni_6527.c
index 7a49dfce67be..b37ef37c2d2d 100644
--- a/drivers/staging/comedi/drivers/ni_6527.c
+++ b/drivers/staging/comedi/drivers/ni_6527.c
@@ -103,7 +103,7 @@ static const struct ni6527_board ni6527_boards[] = {
 	 },
 };
 
-#define n_ni6527_boards (sizeof(ni6527_boards)/sizeof(ni6527_boards[0]))
+#define n_ni6527_boards ARRAY_SIZE(ni6527_boards)
 #define this_board ((const struct ni6527_board *)dev-&gt;board_ptr)
 
 static DEFINE_PCI_DEVICE_TABLE(ni6527_pci_table) = {
diff --git a/drivers/staging/comedi/drivers/ni_65xx.c b/drivers/staging/comedi/drivers/ni_65xx.c
index 8079c41b7338..6b118c15b49e 100644
--- a/drivers/staging/comedi/drivers/ni_65xx.c
+++ b/drivers/staging/comedi/drivers/ni_65xx.c
@@ -246,7 +246,7 @@ static const struct ni_65xx_board ni_65xx_boards[] = {
 	 },
 };
 
-#define n_ni_65xx_boards (sizeof(ni_65xx_boards)/sizeof(ni_65xx_boards[0]))
+#define n_ni_65xx_boards ARRAY_SIZE(ni_65xx_boards)
 static inline const struct ni_65xx_board *board(struct comedi_device *dev)
 {
 	return dev-&gt;board_ptr;
diff --git a/drivers/staging/comedi/drivers/ni_660x.c b/drivers/staging/comedi/drivers/ni_660x.c
index 772c9372e435..404d3c516ed1 100644
--- a/drivers/staging/comedi/drivers/ni_660x.c
+++ b/drivers/staging/comedi/drivers/ni_660x.c
@@ -454,7 +454,7 @@ static inline const struct ni_660x_board *board(struct comedi_device *dev)
 	return dev-&gt;board_ptr;
 }
 
-#define n_ni_660x_boards (sizeof(ni_660x_boards)/sizeof(ni_660x_boards[0]))
+#define n_ni_660x_boards ARRAY_SIZE(ni_660x_boards)
 
 static int ni_660x_attach(struct comedi_device *dev,
 			  struct comedi_devconfig *it);
diff --git a/drivers/staging/comedi/drivers/ni_670x.c b/drivers/staging/comedi/drivers/ni_670x.c
index 89ce5b873ffe..9b43547e80a1 100644
--- a/drivers/staging/comedi/drivers/ni_670x.c
+++ b/drivers/staging/comedi/drivers/ni_670x.c
@@ -111,7 +111,7 @@ struct ni_670x_private {
 };
 
 #define devpriv ((struct ni_670x_private *)dev-&gt;private)
-#define n_ni_670x_boards (sizeof(ni_670x_boards)/sizeof(ni_670x_boards[0]))
+#define n_ni_670x_boards ARRAY_SIZE(ni_670x_boards)
 
 static int ni_670x_attach(struct comedi_device *dev,
 			  struct comedi_devconfig *it);
diff --git a/drivers/staging/comedi/drivers/ni_atmio16d.c b/drivers/staging/comedi/drivers/ni_atmio16d.c
index cde30b77a15f..901833d9b772 100644
--- a/drivers/staging/comedi/drivers/ni_atmio16d.c
+++ b/drivers/staging/comedi/drivers/ni_atmio16d.c
@@ -121,7 +121,7 @@ static const struct atmio16_board_t atmio16_boards[] = {
 	 },
 };
 
-#define n_atmio16_boards sizeof(atmio16_boards)/sizeof(atmio16_boards[0])
+#define n_atmio16_boards ARRAY_SIZE(atmio16_boards)
 
 #define boardtype ((const struct atmio16_board_t *)dev-&gt;board_ptr)
 
diff --git a/drivers/staging/comedi/drivers/ni_pcidio.c b/drivers/staging/comedi/drivers/ni_pcidio.c
index 15148d1642d4..52b2eca9e73d 100644
--- a/drivers/staging/comedi/drivers/ni_pcidio.c
+++ b/drivers/staging/comedi/drivers/ni_pcidio.c
@@ -374,7 +374,7 @@ static const struct nidio_board nidio_boards[] = {
 	 },
 };
 
-#define n_nidio_boards (sizeof(nidio_boards)/sizeof(nidio_boards[0]))
+#define n_nidio_boards ARRAY_SIZE(nidio_boards)
 #define this_board ((const struct nidio_board *)dev-&gt;board_ptr)
 
 static DEFINE_PCI_DEVICE_TABLE(ni_pcidio_pci_table) = {
diff --git a/drivers/staging/comedi/drivers/ni_pcimio.c b/drivers/staging/comedi/drivers/ni_pcimio.c
index 0dc639212ade..19d87553d906 100644
--- a/drivers/staging/comedi/drivers/ni_pcimio.c
+++ b/drivers/staging/comedi/drivers/ni_pcimio.c
@@ -1208,7 +1208,7 @@ static const struct ni_board_struct ni_boards[] = {
 	 },
 };
 
-#define n_pcimio_boards ((sizeof(ni_boards)/sizeof(ni_boards[0])))
+#define n_pcimio_boards ARRAY_SIZE(ni_boards)
 
 static int pcimio_attach(struct comedi_device *dev,
 			 struct comedi_devconfig *it);
diff --git a/drivers/staging/comedi/drivers/pcmad.c b/drivers/staging/comedi/drivers/pcmad.c
index 7368bf3011c9..acac67090810 100644
--- a/drivers/staging/comedi/drivers/pcmad.c
+++ b/drivers/staging/comedi/drivers/pcmad.c
@@ -69,7 +69,7 @@ static const struct pcmad_board_struct pcmad_boards[] = {
 };
 
 #define this_board ((const struct pcmad_board_struct *)(dev-&gt;board_ptr))
-#define n_pcmad_boards (sizeof(pcmad_boards)/sizeof(pcmad_boards[0]))
+#define n_pcmad_boards ARRAY_SIZE(pcmad_boards)
 
 struct pcmad_priv_struct {
 	int differential;
diff --git a/drivers/staging/comedi/drivers/poc.c b/drivers/staging/comedi/drivers/poc.c
index 729a0d8766e8..d23e588d0632 100644
--- a/drivers/staging/comedi/drivers/poc.c
+++ b/drivers/staging/comedi/drivers/poc.c
@@ -102,7 +102,7 @@ static const struct boarddef_struct boards[] = {
 	 },
 };
 
-#define n_boards (sizeof(boards)/sizeof(boards[0]))
+#define n_boards ARRAY_SIZE(boards)
 #define this_board ((const struct boarddef_struct *)dev-&gt;board_ptr)
 
 static struct comedi_driver driver_poc = {
diff --git a/drivers/staging/epl/EplDllk.c b/drivers/staging/epl/EplDllk.c
index 25d2c34325db..0572c3d0aefd 100644
--- a/drivers/staging/epl/EplDllk.c
+++ b/drivers/staging/epl/EplDllk.c
@@ -328,7 +328,7 @@ tEplKernel EplDllkAddInstance(tEplDllkInitParam * pInitParam_p)
 	// initialize and link pointers in instance structure to frame tables
 	EplDllkInstance_g.m_pTxBuffer = aEplDllkTxBuffer_l;
 	EplDllkInstance_g.m_uiMaxTxFrames =
-	    sizeof(aEplDllkTxBuffer_l) / sizeof(tEdrvTxBuffer);
+	    ARRAY_SIZE(aEplDllkTxBuffer_l);
 
 	// initialize state
 	EplDllkInstance_g.m_DllState = kEplDllGsInit;
diff --git a/drivers/staging/epl/proc_fs.c b/drivers/staging/epl/proc_fs.c
index 9ccf079e67e1..e48949d9ddf5 100644
--- a/drivers/staging/epl/proc_fs.c
+++ b/drivers/staging/epl/proc_fs.c
@@ -196,7 +196,7 @@ void TgtDbgSignalTracePoint(u8 bTracePointNumber_p)
 {
 
 	if (bTracePointNumber_p &gt;=
-	    (sizeof(aatmDbgTracePoint_l) / sizeof(aatmDbgTracePoint_l[0]))) {
+	    ARRAY_SIZE(aatmDbgTracePoint_l)) {
 		goto Exit;
 	}
 
@@ -330,7 +330,7 @@ static int EplLinProcRead(char *pcBuffer_p,
 		nSize += snprintf(pcBuffer_p + nSize, nBufferSize_p - nSize,
 				  "DbgTracePoints:\n");
 		for (nNum = 0;
-		     nNum &lt; (sizeof(aatmDbgTracePoint_l) / sizeof(atomic_t));
+		     nNum &lt; ARRAY_SIZE(aatmDbgTracePoint_l);
 		     nNum++) {
 			nSize +=
 			    snprintf(pcBuffer_p + nSize, nBufferSize_p - nSize,
diff --git a/drivers/staging/line6/driver.c b/drivers/staging/line6/driver.c
index 85a20d0002c0..f188ecee502f 100644
--- a/drivers/staging/line6/driver.c
+++ b/drivers/staging/line6/driver.c
@@ -682,7 +682,7 @@ static int line6_probe(struct usb_interface *interface, const struct usb_device_
 		return -ENODEV;
 
 	/* check vendor and product id */
-	for (devtype = sizeof(line6_id_table) / sizeof(line6_id_table[0]) - 1; devtype--;)
+	for (devtype = ARRAY_SIZE(line6_id_table) - 1; devtype--;)
 		if ((le16_to_cpu(usbdev-&gt;descriptor.idVendor) == line6_id_table[devtype].idVendor) &amp;&amp;
 			 (le16_to_cpu(usbdev-&gt;descriptor.idProduct) == line6_id_table[devtype].idProduct))
 			break;
diff --git a/drivers/staging/meilhaus/me0600_device.h b/drivers/staging/meilhaus/me0600_device.h
index d93a8aee581b..75bd3b7351d2 100644
--- a/drivers/staging/meilhaus/me0600_device.h
+++ b/drivers/staging/meilhaus/me0600_device.h
@@ -54,7 +54,7 @@ static me0600_version_t me0600_versions[] = {
 	{0},
 };
 
-#define ME0600_DEVICE_VERSIONS (sizeof(me0600_versions) / sizeof(me0600_version_t) - 1)	/**&lt; Returns the number of entries in #me0600_versions. */
+#define ME0600_DEVICE_VERSIONS (ARRAY_SIZE(me0600_versions) - 1)	/**&lt; Returns the number of entries in #me0600_versions. */
 
 /**
  * @brief Returns the index of the device entry in #me0600_versions.
diff --git a/drivers/staging/meilhaus/me0900_device.h b/drivers/staging/meilhaus/me0900_device.h
index bd17f2521511..53c05e83675d 100644
--- a/drivers/staging/meilhaus/me0900_device.h
+++ b/drivers/staging/meilhaus/me0900_device.h
@@ -53,7 +53,7 @@ static me0900_version_t me0900_versions[] = {
 	{0},
 };
 
-#define ME0900_DEVICE_VERSIONS (sizeof(me0900_versions) / sizeof(me0900_version_t) - 1)	/**&lt; Returns the number of entries in #me0900_versions. */
+#define ME0900_DEVICE_VERSIONS (ARRAY_SIZE(me0900_versions) - 1)	/**&lt; Returns the number of entries in #me0900_versions. */
 
 /**
  * @brief Returns the index of the device entry in #me0900_versions.
diff --git a/drivers/staging/meilhaus/me1400_device.h b/drivers/staging/meilhaus/me1400_device.h
index 6215b250047d..d20112d8da60 100644
--- a/drivers/staging/meilhaus/me1400_device.h
+++ b/drivers/staging/meilhaus/me1400_device.h
@@ -60,7 +60,7 @@ static me1400_version_t me1400_versions[] = {
 	{0}
 };
 
-#define ME1400_DEVICE_VERSIONS (sizeof(me1400_versions) / sizeof(me1400_version_t) - 1)	/**&lt; Returns the number of entries in #me1400_versions. */
+#define ME1400_DEVICE_VERSIONS (ARRAY_SIZE(me1400_versions) - 1)	/**&lt; Returns the number of entries in #me1400_versions. */
 
 /**
  * @brief Returns the index of the device entry in #me1400_versions.
diff --git a/drivers/staging/meilhaus/me1600_device.h b/drivers/staging/meilhaus/me1600_device.h
index f7b231f73ac8..c73aca11ae88 100644
--- a/drivers/staging/meilhaus/me1600_device.h
+++ b/drivers/staging/meilhaus/me1600_device.h
@@ -58,7 +58,7 @@ static me1600_version_t me1600_versions[] = {
 };
 
 /**&lt; Returns the number of entries in #me1600_versions. */
-#define ME1600_DEVICE_VERSIONS (sizeof(me1600_versions) / sizeof(me1600_version_t) - 1)
+#define ME1600_DEVICE_VERSIONS (ARRAY_SIZE(me1600_versions) - 1)
 
 /**
  * @brief Returns the index of the device entry in #me1600_versions.
diff --git a/drivers/staging/meilhaus/me4600_device.h b/drivers/staging/meilhaus/me4600_device.h
index fa812d4cc6dc..c755c574cda2 100644
--- a/drivers/staging/meilhaus/me4600_device.h
+++ b/drivers/staging/meilhaus/me4600_device.h
@@ -80,7 +80,7 @@ static me4600_version_t me4600_versions[] = {
 	{0},
 };
 
-#define ME4600_DEVICE_VERSIONS (sizeof(me4600_versions) / sizeof(me4600_version_t) - 1)	/**&lt; Returns the number of entries in #me4600_versions. */
+#define ME4600_DEVICE_VERSIONS (ARRAY_SIZE(me4600_versions) - 1)	/**&lt; Returns the number of entries in #me4600_versions. */
 
 /**
  * @brief Returns the index of the device entry in #me4600_versions.
diff --git a/drivers/staging/meilhaus/me6000_device.h b/drivers/staging/meilhaus/me6000_device.h
index 18cc7d1e14f1..eed401152101 100644
--- a/drivers/staging/meilhaus/me6000_device.h
+++ b/drivers/staging/meilhaus/me6000_device.h
@@ -103,7 +103,7 @@ static me6000_version_t me6000_versions[] = {
 	{0},
 };
 
-#define ME6000_DEVICE_VERSIONS (sizeof(me6000_versions) / sizeof(me6000_version_t) - 1)	/**&lt; Returns the number of entries in #me6000_versions. */
+#define ME6000_DEVICE_VERSIONS (ARRAY_SIZE(me6000_versions) - 1)	/**&lt; Returns the number of entries in #me6000_versions. */
 
 /**
  * @brief Returns the index of the device entry in #me6000_versions.
diff --git a/drivers/staging/meilhaus/me8100_device.h b/drivers/staging/meilhaus/me8100_device.h
index 44c42efb04e2..238dc0622801 100644
--- a/drivers/staging/meilhaus/me8100_device.h
+++ b/drivers/staging/meilhaus/me8100_device.h
@@ -53,7 +53,7 @@ static me8100_version_t me8100_versions[] = {
 	{0},
 };
 
-#define ME8100_DEVICE_VERSIONS (sizeof(me8100_versions) / sizeof(me8100_version_t) - 1)	/**&lt; Returns the number of entries in #me8100_versions. */
+#define ME8100_DEVICE_VERSIONS (ARRAY_SIZE(me8100_versions) - 1)	/**&lt; Returns the number of entries in #me8100_versions. */
 
 /**
  * @brief Returns the index of the device entry in #me8100_versions.
diff --git a/drivers/staging/meilhaus/me8200_device.h b/drivers/staging/meilhaus/me8200_device.h
index cbd2a01ddb41..66f50842dac0 100644
--- a/drivers/staging/meilhaus/me8200_device.h
+++ b/drivers/staging/meilhaus/me8200_device.h
@@ -53,7 +53,7 @@ static me8200_version_t me8200_versions[] = {
 	{0},
 };
 
-#define ME8200_DEVICE_VERSIONS (sizeof(me8200_versions) / sizeof(me8200_version_t) - 1)	/**&lt; Returns the number of entries in #me8200_versions. */
+#define ME8200_DEVICE_VERSIONS (ARRAY_SIZE(me8200_versions) - 1)	/**&lt; Returns the number of entries in #me8200_versions. */
 
 /**
  * @brief Returns the index of the device entry in #me8200_versions.
diff --git a/drivers/staging/meilhaus/metempl_device.h b/drivers/staging/meilhaus/metempl_device.h
index 3c3702cc72eb..c0626e7b73a7 100644
--- a/drivers/staging/meilhaus/metempl_device.h
+++ b/drivers/staging/meilhaus/metempl_device.h
@@ -50,7 +50,7 @@ static metempl_version_t metempl_versions[] = {
 	{0},
 };
 
-#define METEMPL_DEVICE_VERSIONS (sizeof(metempl_versions) / sizeof(metempl_version_t) - 1) /**&lt; Returns the number of entries in #metempl_versions. */
+#define METEMPL_DEVICE_VERSIONS (ARRAY_SIZE(metempl_versions) - 1) /**&lt; Returns the number of entries in #metempl_versions. */
 
 /**
  * @brief Returns the index of the device entry in #metempl_versions.
diff --git a/drivers/staging/rtl8187se/r8180_wx.c b/drivers/staging/rtl8187se/r8180_wx.c
index 081c022f0bc2..766892e31f52 100644
--- a/drivers/staging/rtl8187se/r8180_wx.c
+++ b/drivers/staging/rtl8187se/r8180_wx.c
@@ -27,7 +27,7 @@
 u32 rtl8180_rates[] = {1000000,2000000,5500000,11000000,
 	6000000,9000000,12000000,18000000,24000000,36000000,48000000,54000000};
 
-#define RATE_COUNT (sizeof(rtl8180_rates)/sizeof(rtl8180_rates[0]))
+#define RATE_COUNT ARRAY_SIZE(rtl8180_rates)
 
 static CHANNEL_LIST DefaultChannelPlan[] = {
 //	{{1,2,3,4,5,6,7,8,9,10,11,12,13,14},14},			//Default channel plan
@@ -1578,9 +1578,9 @@ static struct iw_statistics *r8180_get_wireless_stats(struct net_device *dev)
 
 struct iw_handler_def  r8180_wx_handlers_def={
 	.standard = r8180_wx_handlers,
-	.num_standard = sizeof(r8180_wx_handlers) / sizeof(iw_handler),
+	.num_standard = ARRAY_SIZE(r8180_wx_handlers),
 	.private = r8180_private_handler,
-	.num_private = sizeof(r8180_private_handler) / sizeof(iw_handler),
+	.num_private = ARRAY_SIZE(r8180_private_handler),
  	.num_private_args = sizeof(r8180_private_args) / sizeof(struct iw_priv_args),
 	.get_wireless_stats = r8180_get_wireless_stats,
 	.private_args = (struct iw_priv_args *)r8180_private_args,
diff --git a/drivers/staging/rtl8192su/ieee80211/ieee80211_wx.c b/drivers/staging/rtl8192su/ieee80211/ieee80211_wx.c
index 3afd8b34f68c..145a3120c6bb 100644
--- a/drivers/staging/rtl8192su/ieee80211/ieee80211_wx.c
+++ b/drivers/staging/rtl8192su/ieee80211/ieee80211_wx.c
@@ -87,7 +87,7 @@ static inline char *rtl819x_translate_scan(struct ieee80211_device *ieee,
         }
 	/* Add the protocol name */
 	iwe.cmd = SIOCGIWNAME;
-	for(i=0; i&lt;(sizeof(ieee80211_modes)/sizeof(ieee80211_modes[0])); i++) {
+	for(i=0; i&lt;ARRAY_SIZE(ieee80211_modes); i++) {
 		if(network-&gt;mode&amp;(1&lt;&lt;i)) {
 			sprintf(pname,ieee80211_modes[i].mode_string,ieee80211_modes[i].mode_size);
 			pname +=ieee80211_modes[i].mode_size;
diff --git a/drivers/staging/rtl8192su/r8192U_wx.c b/drivers/staging/rtl8192su/r8192U_wx.c
index ad56faec596e..2208c9b1e726 100644
--- a/drivers/staging/rtl8192su/r8192U_wx.c
+++ b/drivers/staging/rtl8192su/r8192U_wx.c
@@ -1221,9 +1221,9 @@ struct iw_statistics *r8192_get_wireless_stats(struct net_device *dev)
 
 struct iw_handler_def  r8192_wx_handlers_def={
 	.standard = r8192_wx_handlers,
-	.num_standard = sizeof(r8192_wx_handlers) / sizeof(iw_handler),
+	.num_standard = ARRAY_SIZE(r8192_wx_handlers),
 	.private = r8192_private_handler,
-	.num_private = sizeof(r8192_private_handler) / sizeof(iw_handler),
+	.num_private = ARRAY_SIZE(r8192_private_handler),
  	.num_private_args = sizeof(r8192_private_args) / sizeof(struct iw_priv_args),
 	.get_wireless_stats = r8192_get_wireless_stats,
 	.private_args = (struct iw_priv_args *)r8192_private_args,
diff --git a/drivers/staging/slicoss/slicoss.c b/drivers/staging/slicoss/slicoss.c
index b01a2822a8ee..e67a130f9e46 100644
--- a/drivers/staging/slicoss/slicoss.c
+++ b/drivers/staging/slicoss/slicoss.c
@@ -1306,7 +1306,7 @@ static void slic_mcast_init_crc32(void)
 
 	static int p[] = { 0, 1, 2, 4, 5, 7, 8, 10, 11, 12, 16, 22, 23, 26 };
 
-	for (i = 0; i &lt; sizeof(p) / sizeof(int); i++)
+	for (i = 0; i &lt; ARRAY_SIZE(p); i++)
 		e |= 1L &lt;&lt; (31 - p[i]);
 
 	for (i = 1; i &lt; 256; i++) {
diff --git a/drivers/staging/sxg/sxg.c b/drivers/staging/sxg/sxg.c
index 3a0dac962e4d..395e876c7dc9 100644
--- a/drivers/staging/sxg/sxg.c
+++ b/drivers/staging/sxg/sxg.c
@@ -3500,7 +3500,7 @@ static void sxg_mcast_init_crc32(void)
 
 	static int p[] = { 0, 1, 2, 4, 5, 7, 8, 10, 11, 12, 16, 22, 23, 26 };
 
-	for (i = 0; i &lt; sizeof(p) / sizeof(int); i++) {
+	for (i = 0; i &lt; ARRAY_SIZE(p); i++) {
 		e |= 1L &lt;&lt; (31 - p[i]);
 	}
 </pre><hr><pre>commit 62f589c5e391dc2081db42e801382304c652e43a
Author: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
Date:   Wed Jul 22 05:02:33 2009 +0200

    ARRAY_SIZE changes
    
    These changes were a direct result of using a semantic patch
    More information can be found at http://www.emn.fr/x-info/coccinelle/
    
    Signed-off-by: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
    Signed-off-by: Jesper Nilsson &lt;jesper.nilsson@axis.com&gt;

diff --git a/arch/cris/arch-v32/mach-a3/io.c b/arch/cris/arch-v32/mach-a3/io.c
index c22f67ecd9f3..090ceb99ef0b 100644
--- a/arch/cris/arch-v32/mach-a3/io.c
+++ b/arch/cris/arch-v32/mach-a3/io.c
@@ -36,7 +36,7 @@ struct crisv32_ioport crisv32_ioports[] = {
 	},
 };
 
-#define NBR_OF_PORTS sizeof(crisv32_ioports)/sizeof(struct crisv32_ioport)
+#define NBR_OF_PORTS ARRAY_SIZE(crisv32_ioports)
 
 struct crisv32_iopin crisv32_led_net0_green;
 struct crisv32_iopin crisv32_led_net0_red;
diff --git a/arch/cris/arch-v32/mach-fs/io.c b/arch/cris/arch-v32/mach-fs/io.c
index cb6327b1f8f8..a6958661fa8e 100644
--- a/arch/cris/arch-v32/mach-fs/io.c
+++ b/arch/cris/arch-v32/mach-fs/io.c
@@ -52,7 +52,7 @@ struct crisv32_ioport crisv32_ioports[] = {
 	}
 };
 
-#define NBR_OF_PORTS sizeof(crisv32_ioports)/sizeof(struct crisv32_ioport)
+#define NBR_OF_PORTS ARRAY_SIZE(crisv32_ioports)
 
 struct crisv32_iopin crisv32_led_net0_green;
 struct crisv32_iopin crisv32_led_net0_red;</pre><hr><pre>commit a888ad451a96881a7e40f40f717d05f1f3b26ad4
Author: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
Date:   Tue Jul 21 17:02:31 2009 +0000

    powerpc: ARRAY_SIZE changes in pasemi and powermac code
    
    These changes were a direct result of using a semantic patch
    More information can be found at http://www.emn.fr/x-info/coccinelle/
    
    Signed-off-by: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
    Signed-off-by: Benjamin Herrenschmidt &lt;benh@kernel.crashing.org&gt;

diff --git a/arch/powerpc/platforms/pasemi/idle.c b/arch/powerpc/platforms/pasemi/idle.c
index 43911d8b0206..75b296bc51af 100644
--- a/arch/powerpc/platforms/pasemi/idle.c
+++ b/arch/powerpc/platforms/pasemi/idle.c
@@ -90,7 +90,7 @@ machine_late_initcall(pasemi, pasemi_idle_init);
 static int __init idle_param(char *p)
 {
 	int i;
-	for (i = 0; i &lt; sizeof(modes)/sizeof(struct sleep_mode); i++) {
+	for (i = 0; i &lt; ARRAY_SIZE(modes); i++) {
 		if (!strcmp(modes[i].name, p)) {
 			current_mode = i;
 			break;
diff --git a/arch/powerpc/platforms/powermac/feature.c b/arch/powerpc/platforms/powermac/feature.c
index e6c0040ee797..095de3227d83 100644
--- a/arch/powerpc/platforms/powermac/feature.c
+++ b/arch/powerpc/platforms/powermac/feature.c
@@ -2419,13 +2419,13 @@ static int __init probe_motherboard(void)
 	dt = of_find_node_by_name(NULL, "device-tree");
 	if (dt != NULL)
 		model = of_get_property(dt, "model", NULL);
-	for(i=0; model &amp;&amp; i&lt;(sizeof(pmac_mb_defs)/sizeof(struct pmac_mb_def)); i++) {
+	for(i=0; model &amp;&amp; i&lt;ARRAY_SIZE(pmac_mb_defs); i++) {
 	    if (strcmp(model, pmac_mb_defs[i].model_string) == 0) {
 		pmac_mb = pmac_mb_defs[i];
 		goto found;
 	    }
 	}
-	for(i=0; i&lt;(sizeof(pmac_mb_defs)/sizeof(struct pmac_mb_def)); i++) {
+	for(i=0; i&lt;ARRAY_SIZE(pmac_mb_defs); i++) {
 	    if (machine_is_compatible(pmac_mb_defs[i].model_string)) {
 		pmac_mb = pmac_mb_defs[i];
 		goto found;</pre><hr><pre>commit 2020002a878403a6858868d85a43623f74859dba
Author: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
Date:   Thu Aug 6 15:07:28 2009 -0700

    drivers/w1/masters/omap_hdq.c: fix missing mutex unlock
    
    This was found using a semantic patch, more info can be found at:
    http://www.emn.fr/x-info/coccinelle/
    
    Signed-off-by: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
    Acked-by: Evgeniy Polyakov &lt;johnpol@2ka.mipt.ru&gt;
    Signed-off-by: Andrew Morton &lt;akpm@linux-foundation.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@linux-foundation.org&gt;

diff --git a/drivers/w1/masters/omap_hdq.c b/drivers/w1/masters/omap_hdq.c
index a7e3b706b9d3..0d92969404c3 100644
--- a/drivers/w1/masters/omap_hdq.c
+++ b/drivers/w1/masters/omap_hdq.c
@@ -687,6 +687,7 @@ static int omap_hdq_remove(struct platform_device *pdev)
 
 	if (hdq_data-&gt;hdq_usecount) {
 		dev_dbg(&amp;pdev-&gt;dev, "removed when use count is not zero\n");
+		mutex_unlock(&amp;hdq_data-&gt;hdq_mutex);
 		return -EBUSY;
 	}
 </pre><hr><pre>commit 9b30a26bf3d2c56dcb1c3afaca28b73fcd6ed405
Author: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
Date:   Thu Jul 30 05:25:29 2009 -0500

    perf tools: Fix faulty check
    
    This patch fixes a spelling error that has resulted from copy
    and pasting. The location of the error was found using a
    semantic patch but the semantic patch was not trying to find
    these errors. After looking things over it seemed logical that
    this change was needed. Please review it and then include the
    patch if it is in fact the correct change.
    
    Signed-off-by: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
    Signed-off-by: Peter Zijlstra &lt;a.p.zijlstra@chello.nl&gt;
    Cc: Mike Galbraith &lt;efault@gmx.de&gt;
    Cc: Paul Mackerras &lt;paulus@samba.org&gt;
    Cc: Arnaldo Carvalho de Melo &lt;acme@redhat.com&gt;
    Cc: Frederic Weisbecker &lt;fweisbec@gmail.com&gt;
    LKML-Reference: &lt;1248949529-20891-1-git-send-email-sgayda2@uiuc.edu&gt;
    Signed-off-by: Ingo Molnar &lt;mingo@elte.hu&gt;

diff --git a/tools/perf/util/symbol.c b/tools/perf/util/symbol.c
index 28106059bf12..b4fe0579bd6b 100644
--- a/tools/perf/util/symbol.c
+++ b/tools/perf/util/symbol.c
@@ -565,7 +565,7 @@ static int dso__load_sym(struct dso *self, int fd, const char *name,
 		goto out_elf_end;
 
 	secstrs = elf_getdata(sec_strndx, NULL);
-	if (symstrs == NULL)
+	if (secstrs == NULL)
 		goto out_elf_end;
 
 	nr_syms = shdr.sh_size / shdr.sh_entsize;</pre><hr><pre>commit 450d6e306b4717bfae11218a02648509baf04ce1
Author: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
Date:   Thu Jul 30 10:25:19 2009 +0000

    parisc: fixed faulty check in lba_pci
    
    This patche fixes a spelling error that has resulted from copy and pasting.
    The location of the error was found using a semantic patch but the semantic
    patch was not trying to find these errors. After looking things over it
    seemed logical that this change was needed.
    
    Signed-off-by: Stoyan Gaydarov &lt;sgayda2@uiuc.edu&gt;
    Signed-off-by: Helge Deller &lt;deller@gmx.de&gt;

diff --git a/drivers/parisc/lba_pci.c b/drivers/parisc/lba_pci.c
index ede614616f8e..3aeb3279c92a 100644
--- a/drivers/parisc/lba_pci.c
+++ b/drivers/parisc/lba_pci.c
@@ -992,7 +992,7 @@ lba_pat_resources(struct parisc_device *pa_dev, struct lba_device *lba_dev)
 		return;
 
 	io_pdc_cell = kzalloc(sizeof(pdc_pat_cell_mod_maddr_block_t), GFP_KERNEL);
-	if (!pa_pdc_cell) {
+	if (!io_pdc_cell) {
 		kfree(pa_pdc_cell);
 		return;
 	}</pre>
    <div class="pagination">
        <a href='24_2.html'>&lt;&lt;Prev</a><a href='24.html'>1</a><a href='24_2.html'>2</a><span>[3]</span>
    <div>
</body>

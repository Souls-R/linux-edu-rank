<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of Virginia, Charlottesville</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of Virginia, Charlottesville</h1>
    <div class="pagination">
        <a href='3_81.html'>&lt;&lt;Prev</a><a href='3.html'>1</a><a href='3_2.html'>2</a><a href='3_3.html'>3</a><a href='3_4.html'>4</a><a href='3_5.html'>5</a><a href='3_6.html'>6</a><a href='3_7.html'>7</a><a href='3_8.html'>8</a><a href='3_9.html'>9</a><a href='3_10.html'>10</a><a href='3_11.html'>11</a><a href='3_12.html'>12</a><a href='3_13.html'>13</a><a href='3_14.html'>14</a><a href='3_15.html'>15</a><a href='3_16.html'>16</a><a href='3_17.html'>17</a><a href='3_18.html'>18</a><a href='3_19.html'>19</a><a href='3_20.html'>20</a><a href='3_21.html'>21</a><a href='3_22.html'>22</a><a href='3_23.html'>23</a><a href='3_24.html'>24</a><a href='3_25.html'>25</a><a href='3_26.html'>26</a><a href='3_27.html'>27</a><a href='3_28.html'>28</a><a href='3_29.html'>29</a><a href='3_30.html'>30</a><a href='3_31.html'>31</a><a href='3_32.html'>32</a><a href='3_33.html'>33</a><a href='3_34.html'>34</a><a href='3_35.html'>35</a><a href='3_36.html'>36</a><a href='3_37.html'>37</a><a href='3_38.html'>38</a><a href='3_39.html'>39</a><a href='3_40.html'>40</a><a href='3_41.html'>41</a><a href='3_42.html'>42</a><a href='3_43.html'>43</a><a href='3_44.html'>44</a><a href='3_45.html'>45</a><a href='3_46.html'>46</a><a href='3_47.html'>47</a><a href='3_48.html'>48</a><a href='3_49.html'>49</a><a href='3_50.html'>50</a><a href='3_51.html'>51</a><a href='3_52.html'>52</a><a href='3_53.html'>53</a><a href='3_54.html'>54</a><a href='3_55.html'>55</a><a href='3_56.html'>56</a><a href='3_57.html'>57</a><a href='3_58.html'>58</a><a href='3_59.html'>59</a><a href='3_60.html'>60</a><a href='3_61.html'>61</a><a href='3_62.html'>62</a><a href='3_63.html'>63</a><a href='3_64.html'>64</a><a href='3_65.html'>65</a><a href='3_66.html'>66</a><a href='3_67.html'>67</a><a href='3_68.html'>68</a><a href='3_69.html'>69</a><a href='3_70.html'>70</a><a href='3_71.html'>71</a><a href='3_72.html'>72</a><a href='3_73.html'>73</a><a href='3_74.html'>74</a><a href='3_75.html'>75</a><a href='3_76.html'>76</a><a href='3_77.html'>77</a><a href='3_78.html'>78</a><a href='3_79.html'>79</a><a href='3_80.html'>80</a><a href='3_81.html'>81</a><span>[82]</span><a href='3_83.html'>83</a><a href='3_83.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit d80235ce8474396ec25a64b6c70e9bd8919f5cd4
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Mon Mar 16 22:04:40 2009 -0400

    Staging: comedi: Remove rtdBoard typedef
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/drivers/rtd520.c b/drivers/staging/comedi/drivers/rtd520.c
index 95e4af27bd8d..f2fa4faa24a8 100644
--- a/drivers/staging/comedi/drivers/rtd520.c
+++ b/drivers/staging/comedi/drivers/rtd520.c
@@ -266,7 +266,7 @@ static const comedi_lrange rtd_ao_range = { 4, {
 /*
   Board descriptions
  */
-typedef struct rtdBoard_struct {
+struct rtdBoard {
 	const char *name;	/* must be first */
 	int device_id;
 	int aiChans;
@@ -274,9 +274,9 @@ typedef struct rtdBoard_struct {
 	int aiMaxGain;
 	int range10Start;	/* start of +-10V range */
 	int rangeUniStart;	/* start of +10V range */
-} rtdBoard;
+};
 
-static const rtdBoard rtd520Boards[] = {
+static const struct rtdBoard rtd520Boards[] = {
 	{
 	      name:	"DM7520",
 	      device_id : 0x7520,
@@ -308,13 +308,13 @@ MODULE_DEVICE_TABLE(pci, rtd520_pci_table);
 /*
  * Useful for shorthand access to the particular board structure
  */
-#define thisboard ((const rtdBoard *)dev-&gt;board_ptr)
+#define thisboard ((const struct rtdBoard *)dev-&gt;board_ptr)
 
 /*
    This structure is for data unique to this hardware driver.
    This is also unique for each board in the system.
 */
-typedef struct {
+struct rtdPrivate {
 	/* memory mapped board structures */
 	void *las0;
 	void *las1;
@@ -358,7 +358,7 @@ typedef struct {
 	u8 dma1Control;
 #endif				/* USE_DMA */
 	unsigned fifoLen;
-} rtdPrivate;
+};
 
 /* bit defines for "flags" */
 #define SEND_EOS	0x01	/* send End Of Scan events */
@@ -377,7 +377,7 @@ typedef struct {
  * most drivers define the following macro to make it easy to
  * access the private structure.
  */
-#define devpriv ((rtdPrivate *)dev-&gt;private)
+#define devpriv ((struct rtdPrivate *)dev-&gt;private)
 
 /* Macros to access registers */
 
@@ -739,7 +739,7 @@ static int rtd_attach(comedi_device *dev, comedi_devconfig *it)
 	 * Allocate the private structure area.  alloc_private() is a
 	 * convenient macro defined in comedidev.h.
 	 */
-	if (alloc_private(dev, sizeof(rtdPrivate)) &lt; 0)
+	if (alloc_private(dev, sizeof(struct rtdPrivate)) &lt; 0)
 		return -ENOMEM;
 
 	/*</pre><hr><pre>commit 52bfe6c8e8746591e276de2594b8c98a51222d49
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Mon Mar 16 22:04:34 2009 -0400

    Staging: comedi: Remove boardtype typedef
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/drivers/icp_multi.c b/drivers/staging/comedi/drivers/icp_multi.c
index d9ff56874483..41ce5ec058fa 100644
--- a/drivers/staging/comedi/drivers/icp_multi.c
+++ b/drivers/staging/comedi/drivers/icp_multi.c
@@ -133,7 +133,7 @@ static int icp_multi_detach(comedi_device *dev);
 */
 static unsigned short pci_list_builded = 0;	/*&gt;0 list of card is known */
 
-typedef struct {
+struct boardtype {
 	const char *name;	/*  driver name */
 	int device_id;
 	int iorange;		/*  I/O range len */
@@ -150,9 +150,9 @@ typedef struct {
 	const comedi_lrange *rangelist_ai;	/*  rangelist for A/D */
 	const char *rangecode;	/*  range codes for programming */
 	const comedi_lrange *rangelist_ao;	/*  rangelist for D/A */
-} boardtype;
+};
 
-static const boardtype boardtypes[] = {
+static const struct boardtype boardtypes[] = {
 	{"icp_multi",		/*  Driver name */
 			DEVICE_ID,	/*  PCI device ID */
 			IORANGE_ICP_MULTI,	/*  I/O range length */
@@ -171,7 +171,7 @@ static const boardtype boardtypes[] = {
 		&amp;range_analog},	/*  Rangelist for D/A */
 };
 
-#define n_boardtypes (sizeof(boardtypes)/sizeof(boardtype))
+#define n_boardtypes (sizeof(boardtypes)/sizeof(struct boardtype))
 
 static comedi_driver driver_icp_multi = {
       driver_name:"icp_multi",
@@ -180,12 +180,12 @@ static comedi_driver driver_icp_multi = {
       detach : icp_multi_detach,
       num_names : n_boardtypes,
       board_name : &amp;boardtypes[0].name,
-      offset : sizeof(boardtype),
+      offset : sizeof(struct boardtype),
 };
 
 COMEDI_INITCLEANUP(driver_icp_multi);
 
-typedef struct {
+struct icp_multi_private {
 	struct pcilst_struct *card;	/*  pointer to card */
 	char valid;		/*  card is usable */
 	void *io_addr;		/*  Pointer to mapped io address */
@@ -202,10 +202,10 @@ typedef struct {
 	sampl_t ao_data[4];	/*  data output buffer */
 	sampl_t di_data;	/*  Digital input data */
 	unsigned int do_data;	/*  Remember digital output data */
-} icp_multi_private;
+};
 
-#define devpriv ((icp_multi_private *)dev-&gt;private)
-#define this_board ((const boardtype *)dev-&gt;board_ptr)
+#define devpriv ((struct icp_multi_private *)dev-&gt;private)
+#define this_board ((const struct boardtype *)dev-&gt;board_ptr)
 
 /*
 ==============================================================================
@@ -882,7 +882,7 @@ static int icp_multi_attach(comedi_device *dev, comedi_devconfig *it)
 	printk("icp_multi EDBG: BGN: icp_multi_attach(...)\n");
 
 	/*  Alocate private data storage space */
-	ret = alloc_private(dev, sizeof(icp_multi_private));
+	ret = alloc_private(dev, sizeof(struct icp_multi_private));
 	if (ret &lt; 0)
 		return ret;
 </pre><hr><pre>commit bf8db92eb3c52ccc3c28ee8d382750a7d4dc758d
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Mon Mar 16 22:04:29 2009 -0400

    Staging: comedi: Remove comedi32_chaninfo_struct typedef
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/comedi_compat32.c b/drivers/staging/comedi/comedi_compat32.c
index 7f5a86903c6f..600060ed73dd 100644
--- a/drivers/staging/comedi/comedi_compat32.c
+++ b/drivers/staging/comedi/comedi_compat32.c
@@ -38,30 +38,30 @@
 #endif
 
 #define COMEDI32_CHANINFO _IOR(CIO, 3, comedi32_chaninfo)
-#define COMEDI32_RANGEINFO _IOR(CIO, 8, comedi32_rangeinfo)
+#define COMEDI32_RANGEINFO _IOR(CIO, 8, (struct comedi32_rangeinfo_struct))
 /* N.B. COMEDI32_CMD and COMEDI_CMD ought to use _IOWR, not _IOR.
  * It's too late to change it now, but it only affects the command number. */
-#define COMEDI32_CMD _IOR(CIO, 9, comedi32_cmd)
+#define COMEDI32_CMD _IOR(CIO, 9, (struct comedi32_cmd_struct))
 /* N.B. COMEDI32_CMDTEST and COMEDI_CMDTEST ought to use _IOWR, not _IOR.
  * It's too late to change it now, but it only affects the command number. */
-#define COMEDI32_CMDTEST _IOR(CIO, 10, comedi32_cmd)
-#define COMEDI32_INSNLIST _IOR(CIO, 11, comedi32_insnlist)
-#define COMEDI32_INSN _IOR(CIO, 12, comedi32_insn)
+#define COMEDI32_CMDTEST _IOR(CIO, 10, (struct comedi32_cmd_struct))
+#define COMEDI32_INSNLIST _IOR(CIO, 11, (struct comedi32_insnlist_struct))
+#define COMEDI32_INSN _IOR(CIO, 12, (struct comedi32_insn_struct))
 
-typedef struct comedi32_chaninfo_struct {
+struct comedi32_chaninfo_struct {
 	unsigned int subdev;
 	compat_uptr_t maxdata_list;	/* 32-bit 'lsampl_t *' */
 	compat_uptr_t flaglist;		/* 32-bit 'unsigned int *' */
 	compat_uptr_t rangelist;	/* 32-bit 'unsigned int *' */
 	unsigned int unused[4];
-} comedi32_chaninfo;
+};
 
-typedef struct comedi32_rangeinfo_struct {
+struct comedi32_rangeinfo_struct {
 	unsigned int range_type;
 	compat_uptr_t range_ptr;	/* 32-bit 'void *' */
-} comedi32_rangeinfo;
+};
 
-typedef struct comedi32_cmd_struct {
+struct comedi32_cmd_struct {
 	unsigned int subdev;
 	unsigned int flags;
 	unsigned int start_src;
@@ -78,21 +78,21 @@ typedef struct comedi32_cmd_struct {
 	unsigned int chanlist_len;
 	compat_uptr_t data;		/* 32-bit 'sampl_t *' */
 	unsigned int data_len;
-} comedi32_cmd;
+};
 
-typedef struct comedi32_insn_struct {
+struct comedi32_insn_struct {
 	unsigned int insn;
 	unsigned int n;
 	compat_uptr_t data;		/* 32-bit 'lsampl_t *' */
 	unsigned int subdev;
 	unsigned int chanspec;
 	unsigned int unused[3];
-} comedi32_insn;
+};
 
-typedef struct comedi32_insnlist_struct {
+struct comedi32_insnlist_struct {
 	unsigned int n_insns;
 	compat_uptr_t insns;		/* 32-bit 'comedi_insn *' */
-} comedi32_insnlist;
+};
 
 /* Handle translated ioctl. */
 static int translated_ioctl(struct file *file, unsigned int cmd,
@@ -123,8 +123,8 @@ static int translated_ioctl(struct file *file, unsigned int cmd,
 /* Handle 32-bit COMEDI_CHANINFO ioctl. */
 static int compat_chaninfo(struct file *file, unsigned long arg)
 {
-	comedi_chaninfo __user *chaninfo;
-	comedi32_chaninfo __user *chaninfo32;
+	struct comedi_chaninfo_struct __user *chaninfo;
+	struct comedi32_chaninfo_struct __user *chaninfo32;
 	int err;
 	union {
 		unsigned int uint;
@@ -159,7 +159,7 @@ static int compat_chaninfo(struct file *file, unsigned long arg)
 static int compat_rangeinfo(struct file *file, unsigned long arg)
 {
 	comedi_rangeinfo __user *rangeinfo;
-	comedi32_rangeinfo __user *rangeinfo32;
+	struct comedi32_rangeinfo_struct __user *rangeinfo32;
 	int err;
 	union {
 		unsigned int uint;
@@ -189,7 +189,7 @@ static int compat_rangeinfo(struct file *file, unsigned long arg)
 
 /* Copy 32-bit cmd structure to native cmd structure. */
 static int get_compat_cmd(comedi_cmd __user *cmd,
-		comedi32_cmd __user *cmd32)
+		struct comedi32_cmd_struct __user *cmd32)
 {
 	int err;
 	union {
@@ -239,7 +239,7 @@ static int get_compat_cmd(comedi_cmd __user *cmd,
 }
 
 /* Copy native cmd structure to 32-bit cmd structure. */
-static int put_compat_cmd(comedi32_cmd __user *cmd32, comedi_cmd __user *cmd)
+static int put_compat_cmd(struct comedi32_cmd_struct __user *cmd32, comedi_cmd __user *cmd)
 {
 	int err;
 	unsigned int temp;
@@ -290,7 +290,7 @@ static int put_compat_cmd(comedi32_cmd __user *cmd32, comedi_cmd __user *cmd)
 static int compat_cmd(struct file *file, unsigned long arg)
 {
 	comedi_cmd __user *cmd;
-	comedi32_cmd __user *cmd32;
+	struct comedi32_cmd_struct __user *cmd32;
 	int rc;
 
 	cmd32 = compat_ptr(arg);
@@ -307,7 +307,7 @@ static int compat_cmd(struct file *file, unsigned long arg)
 static int compat_cmdtest(struct file *file, unsigned long arg)
 {
 	comedi_cmd __user *cmd;
-	comedi32_cmd __user *cmd32;
+	struct comedi32_cmd_struct __user *cmd32;
 	int rc, err;
 
 	cmd32 = compat_ptr(arg);
@@ -330,7 +330,7 @@ static int compat_cmdtest(struct file *file, unsigned long arg)
 
 /* Copy 32-bit insn structure to native insn structure. */
 static int get_compat_insn(comedi_insn __user *insn,
-		comedi32_insn __user *insn32)
+		struct comedi32_insn_struct __user *insn32)
 {
 	int err;
 	union {
@@ -364,8 +364,8 @@ static int compat_insnlist(struct file *file, unsigned long arg)
 		comedi_insnlist insnlist;
 		comedi_insn insn[1];
 	} __user *s;
-	comedi32_insnlist __user *insnlist32;
-	comedi32_insn __user *insn32;
+	struct comedi32_insnlist_struct __user *insnlist32;
+	struct comedi32_insn_struct __user *insn32;
 	compat_uptr_t uptr;
 	unsigned int n_insns, n;
 	int err, rc;
@@ -411,7 +411,7 @@ static int compat_insnlist(struct file *file, unsigned long arg)
 static int compat_insn(struct file *file, unsigned long arg)
 {
 	comedi_insn __user *insn;
-	comedi32_insn __user *insn32;
+	struct comedi32_insn_struct __user *insn32;
 	int rc;
 
 	insn32 = compat_ptr(arg);</pre><hr><pre>commit 82675f3547ba2a0732beabd9bb4393535f74408c
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Mon Mar 16 22:04:23 2009 -0400

    Staging: comedi: Remove curly braces where they are not needed
    
    Changes as suggested by checkpatch.pl.
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/comedi_compat32.c b/drivers/staging/comedi/comedi_compat32.c
index 98e570a2cb3e..7f5a86903c6f 100644
--- a/drivers/staging/comedi/comedi_compat32.c
+++ b/drivers/staging/comedi/comedi_compat32.c
@@ -98,15 +98,14 @@ typedef struct comedi32_insnlist_struct {
 static int translated_ioctl(struct file *file, unsigned int cmd,
 		unsigned long arg)
 {
-	if (!file-&gt;f_op) {
+	if (!file-&gt;f_op)
 		return -ENOTTY;
-	}
+
 #ifdef HAVE_UNLOCKED_IOCTL
 	if (file-&gt;f_op-&gt;unlocked_ioctl) {
 		int rc = (int)(*file-&gt;f_op-&gt;unlocked_ioctl)(file, cmd, arg);
-		if (rc == -ENOIOCTLCMD) {
+		if (rc == -ENOIOCTLCMD)
 			rc = -ENOTTY;
-		}
 		return rc;
 	}
 #endif
@@ -150,9 +149,8 @@ static int compat_chaninfo(struct file *file, unsigned long arg)
 	err |= __put_user(compat_ptr(temp.uptr), &amp;chaninfo-&gt;flaglist);
 	err |= __get_user(temp.uptr, &amp;chaninfo32-&gt;rangelist);
 	err |= __put_user(compat_ptr(temp.uptr), &amp;chaninfo-&gt;rangelist);
-	if (err) {
+	if (err)
 		return -EFAULT;
-	}
 
 	return translated_ioctl(file, COMEDI_CHANINFO, (unsigned long)chaninfo);
 }
@@ -182,9 +180,8 @@ static int compat_rangeinfo(struct file *file, unsigned long arg)
 	err |= __put_user(temp.uint, &amp;rangeinfo-&gt;range_type);
 	err |= __get_user(temp.uptr, &amp;rangeinfo32-&gt;range_ptr);
 	err |= __put_user(compat_ptr(temp.uptr), &amp;rangeinfo-&gt;range_ptr);
-	if (err) {
+	if (err)
 		return -EFAULT;
-	}
 
 	return translated_ioctl(file, COMEDI_RANGEINFO,
 			(unsigned long)rangeinfo);
@@ -300,9 +297,8 @@ static int compat_cmd(struct file *file, unsigned long arg)
 	cmd = compat_alloc_user_space(sizeof(*cmd));
 
 	rc = get_compat_cmd(cmd, cmd32);
-	if (rc) {
+	if (rc)
 		return rc;
-	}
 
 	return translated_ioctl(file, COMEDI_CMD, (unsigned long)cmd);
 }
@@ -318,19 +314,17 @@ static int compat_cmdtest(struct file *file, unsigned long arg)
 	cmd = compat_alloc_user_space(sizeof(*cmd));
 
 	rc = get_compat_cmd(cmd, cmd32);
-	if (rc) {
+	if (rc)
 		return rc;
-	}
 
 	rc = translated_ioctl(file, COMEDI_CMDTEST, (unsigned long)cmd);
-	if (rc &lt; 0) {
+	if (rc &lt; 0)
 		return rc;
-	}
 
 	err = put_compat_cmd(cmd32, cmd);
-	if (err) {
+	if (err)
 		rc = err;
-	}
+
 	return rc;
 }
 
@@ -347,9 +341,9 @@ static int get_compat_insn(comedi_insn __user *insn,
 	/* Copy insn structure.  Ignore the unused members. */
 	err = 0;
 	if (!access_ok(VERIFY_READ, insn32, sizeof(*insn32))
-			|| !access_ok(VERIFY_WRITE, insn, sizeof(*insn))) {
+			|| !access_ok(VERIFY_WRITE, insn, sizeof(*insn)))
 		return -EFAULT;
-	}
+
 	err |= __get_user(temp.uint, &amp;insn32-&gt;insn);
 	err |= __put_user(temp.uint, &amp;insn-&gt;insn);
 	err |= __get_user(temp.uint, &amp;insn32-&gt;n);
@@ -386,9 +380,8 @@ static int compat_insnlist(struct file *file, unsigned long arg)
 	err |= __get_user(n_insns, &amp;insnlist32-&gt;n_insns);
 	err |= __get_user(uptr, &amp;insnlist32-&gt;insns);
 	insn32 = compat_ptr(uptr);
-	if (err) {
+	if (err)
 		return -EFAULT;
-	}
 
 	/* Allocate user memory to copy insnlist and insns into. */
 	s = compat_alloc_user_space(offsetof(struct combined_insnlist,
@@ -400,16 +393,14 @@ static int compat_insnlist(struct file *file, unsigned long arg)
 	}
 	err |= __put_user(n_insns, &amp;s-&gt;insnlist.n_insns);
 	err |= __put_user(&amp;s-&gt;insn[0], &amp;s-&gt;insnlist.insns);
-	if (err) {
+	if (err)
 		return -EFAULT;
-	}
 
 	/* Copy insn structures. */
 	for (n = 0; n &lt; n_insns; n++) {
 		rc = get_compat_insn(&amp;s-&gt;insn[n], &amp;insn32[n]);
-		if (rc) {
+		if (rc)
 			return rc;
-		}
 	}
 
 	return translated_ioctl(file, COMEDI_INSNLIST,
@@ -427,9 +418,8 @@ static int compat_insn(struct file *file, unsigned long arg)
 	insn = compat_alloc_user_space(sizeof(*insn));
 
 	rc = get_compat_insn(insn, insn32);
-	if (rc) {
+	if (rc)
 		return rc;
-	}
 
 	return translated_ioctl(file, COMEDI_INSN, (unsigned long)insn);
 }
@@ -512,14 +502,14 @@ static int mapped_ioctl(unsigned int fd, unsigned int cmd, unsigned long arg,
 	int rc;
 
 	/* Make sure we are dealing with a Comedi device. */
-	if (imajor(file-&gt;f_dentry-&gt;d_inode) != COMEDI_MAJOR) {
+	if (imajor(file-&gt;f_dentry-&gt;d_inode) != COMEDI_MAJOR)
 		return -ENOTTY;
-	}
+
 	rc = raw_ioctl(file, cmd, arg);
 	/* Do not return -ENOIOCTLCMD. */
-	if (rc == -ENOIOCTLCMD) {
+	if (rc == -ENOIOCTLCMD)
 		rc = -ENOTTY;
-	}
+
 	return rc;
 }
 
diff --git a/drivers/staging/comedi/drivers/icp_multi.c b/drivers/staging/comedi/drivers/icp_multi.c
index 9603d9e24d30..d9ff56874483 100644
--- a/drivers/staging/comedi/drivers/icp_multi.c
+++ b/drivers/staging/comedi/drivers/icp_multi.c
@@ -1080,9 +1080,8 @@ static int icp_multi_detach(comedi_device *dev)
 	if (dev-&gt;private &amp;&amp; devpriv-&gt;card)
 		pci_card_free(devpriv-&gt;card);
 
-	if (--pci_list_builded == 0) {
+	if (--pci_list_builded == 0)
 		pci_card_list_cleanup(PCI_VENDOR_ID_ICP);
-	}
 
 	return 0;
 }
diff --git a/drivers/staging/comedi/drivers/me4000.c b/drivers/staging/comedi/drivers/me4000.c
index c1f10b89a831..5f6e77cceb69 100644
--- a/drivers/staging/comedi/drivers/me4000.c
+++ b/drivers/staging/comedi/drivers/me4000.c
@@ -378,9 +378,9 @@ static int me4000_probe(comedi_device *dev, comedi_devconfig *it)
 	CALL_PDEBUG("In me4000_probe()\n");
 
 	/* Allocate private memory */
-	if (alloc_private(dev, sizeof(me4000_info_t)) &lt; 0) {
+	if (alloc_private(dev, sizeof(me4000_info_t)) &lt; 0)
 		return -ENOMEM;
-	}
+
 	/*
 	 * Probe the device to determine what device in the series it is.
 	 */
@@ -576,15 +576,13 @@ static int init_board_info(comedi_device *dev, struct pci_dev *pci_dev_p)
 
 	/* Get the serial number */
 	result = pci_read_config_dword(pci_dev_p, 0x2C, &amp;info-&gt;serial_no);
-	if (result != PCIBIOS_SUCCESSFUL) {
+	if (result != PCIBIOS_SUCCESSFUL)
 		return result;
-	}
 
 	/* Get the hardware revision */
 	result = pci_read_config_byte(pci_dev_p, 0x08, &amp;info-&gt;hw_revision);
-	if (result != PCIBIOS_SUCCESSFUL) {
+	if (result != PCIBIOS_SUCCESSFUL)
 		return result;
-	}
 
 	/* Get the vendor id */
 	info-&gt;vendor_id = pci_dev_p-&gt;vendor;
@@ -902,9 +900,8 @@ static int me4000_detach(comedi_device *dev)
 	if (info) {
 		if (info-&gt;pci_dev_p) {
 			reset_board(dev);
-			if (info-&gt;plx_regbase) {
+			if (info-&gt;plx_regbase)
 				comedi_pci_disable(info-&gt;pci_dev_p);
-			}
 			pci_dev_put(info-&gt;pci_dev_p);
 		}
 	}
@@ -1163,9 +1160,8 @@ static int ai_round_cmd_args(comedi_device *dev,
 		rest = (cmd-&gt;start_arg * 33) % 1000;
 
 		if (cmd-&gt;flags &amp; TRIG_ROUND_NEAREST) {
-			if (rest &gt; 33) {
+			if (rest &gt; 33)
 				(*init_ticks)++;
-			}
 		} else if (cmd-&gt;flags &amp; TRIG_ROUND_UP) {
 			if (rest)
 				(*init_ticks)++;
@@ -1177,9 +1173,8 @@ static int ai_round_cmd_args(comedi_device *dev,
 		rest = (cmd-&gt;scan_begin_arg * 33) % 1000;
 
 		if (cmd-&gt;flags &amp; TRIG_ROUND_NEAREST) {
-			if (rest &gt; 33) {
+			if (rest &gt; 33)
 				(*scan_ticks)++;
-			}
 		} else if (cmd-&gt;flags &amp; TRIG_ROUND_UP) {
 			if (rest)
 				(*scan_ticks)++;
@@ -1191,9 +1186,8 @@ static int ai_round_cmd_args(comedi_device *dev,
 		rest = (cmd-&gt;convert_arg * 33) % 1000;
 
 		if (cmd-&gt;flags &amp; TRIG_ROUND_NEAREST) {
-			if (rest &gt; 33) {
+			if (rest &gt; 33)
 				(*chan_ticks)++;
-			}
 		} else if (cmd-&gt;flags &amp; TRIG_ROUND_UP) {
 			if (rest)
 				(*chan_ticks)++;
@@ -1503,9 +1497,8 @@ static int me4000_ai_do_cmd_test(comedi_device *dev,
 		cmd-&gt;stop_src = TRIG_NONE;
 		err++;
 	}
-	if (err) {
+	if (err)
 		return 1;
-	}
 
 	/*
 	 * Stage 2. Check for trigger source conflicts.
@@ -1553,9 +1546,8 @@ static int me4000_ai_do_cmd_test(comedi_device *dev,
 		cmd-&gt;scan_end_src = TRIG_NONE;
 		err++;
 	}
-	if (err) {
+	if (err)
 		return 2;
-	}
 
 	/*
 	 * Stage 3. Check if arguments are generally valid.
@@ -1588,9 +1580,9 @@ static int me4000_ai_do_cmd_test(comedi_device *dev,
 		cmd-&gt;convert_arg = 2000;
 		err++;
 	}
-	if (err) {
+
+	if (err)
 		return 3;
-	}
 
 	/*
 	 * Stage 4. Check for argument conflicts.
@@ -1735,9 +1727,9 @@ static int me4000_ai_do_cmd_test(comedi_device *dev,
 			err++;
 		}
 	}
-	if (err) {
+
+	if (err)
 		return 4;
-	}
 
 	/*
 	 * Stage 5. Check the channel list.
@@ -1997,9 +1989,9 @@ static int me4000_dio_insn_bits(comedi_device *dev,
 	CALL_PDEBUG("In me4000_dio_insn_bits()\n");
 
 	/* Length of data must be 2 (mask and new data, see below) */
-	if (insn-&gt;n == 0) {
+	if (insn-&gt;n == 0)
 		return 0;
-	}
+
 	if (insn-&gt;n != 2) {
 		printk("comedi%d: me4000: me4000_dio_insn_bits(): Invalid instruction length\n", dev-&gt;minor);
 		return -EINVAL;
@@ -2274,9 +2266,9 @@ static int me4000_cnt_insn_read(comedi_device *dev,
 
 	CALL_PDEBUG("In me4000_cnt_insn_read()\n");
 
-	if (insn-&gt;n == 0) {
+	if (insn-&gt;n == 0)
 		return 0;
-	}
+
 	if (insn-&gt;n &gt; 1) {
 		printk(KERN_ERR
 			"comedi%d: me4000: me4000_cnt_insn_read(): Invalid instruction length %d\n",
diff --git a/drivers/staging/comedi/drivers/mite.c b/drivers/staging/comedi/drivers/mite.c
index c7fe073f27b7..e0e2d6c90ac3 100644
--- a/drivers/staging/comedi/drivers/mite.c
+++ b/drivers/staging/comedi/drivers/mite.c
@@ -331,9 +331,9 @@ int mite_buf_change(struct mite_dma_descriptor_ring *ring, comedi_async * async)
 	ring-&gt;descriptors_dma_addr = 0;
 	ring-&gt;n_links = 0;
 
-	if (async-&gt;prealloc_bufsz == 0) {
+	if (async-&gt;prealloc_bufsz == 0)
 		return 0;
-	}
+
 	n_links = async-&gt;prealloc_bufsz &gt;&gt; PAGE_SHIFT;
 
 	MDPRINTK("ring-&gt;hw_dev=%p, n_links=0x%04x\n", ring-&gt;hw_dev, n_links);
@@ -395,9 +395,9 @@ void mite_prep_dma(struct mite_channel *mite_chan,
 		   on e-series boards.  */
 		chcr |= CHCR_BYTE_SWAP_DEVICE | CHCR_BYTE_SWAP_MEMORY;
 	}
-	if (mite_chan-&gt;dir == COMEDI_INPUT) {
+	if (mite_chan-&gt;dir == COMEDI_INPUT)
 		chcr |= CHCR_DEV_TO_MEM;
-	}
+
 	writel(chcr, mite-&gt;mite_io_addr + MITE_CHCR(mite_chan-&gt;channel));
 
 	/* to/from memory */
@@ -547,9 +547,9 @@ int mite_sync_input_dma(struct mite_channel *mite_chan, comedi_async * async)
 	count = nbytes - async-&gt;buf_write_count;
 	/* it's possible count will be negative due to
 	 * conservative value returned by mite_bytes_written_to_memory_lb */
-	if (count &lt;= 0) {
+	if (count &lt;= 0)
 		return 0;
-	}
+
 	comedi_buf_write_free(async, count);
 
 	async-&gt;scan_progress += count;
@@ -586,9 +586,9 @@ int mite_sync_output_dma(struct mite_channel *mite_chan, comedi_async * async)
 		return -1;
 	}
 	count = nbytes_lb - async-&gt;buf_read_count;
-	if (count &lt;= 0) {
+	if (count &lt;= 0)
 		return 0;
-	}
+
 	if (count) {
 		comedi_buf_read_free(async, count);
 		async-&gt;events |= COMEDI_CB_BLOCK;
@@ -753,9 +753,8 @@ static void mite_decode(char **bit_str, unsigned int bits)
 	int i;
 
 	for (i = 31; i &gt;= 0; i--) {
-		if (bits &amp; (1 &lt;&lt; i)) {
+		if (bits &amp; (1 &lt;&lt; i))
 			printk(" %s", bit_str[i]);
-		}
 	}
 	printk("\n");
 }
diff --git a/drivers/staging/comedi/drivers/plx9080.h b/drivers/staging/comedi/drivers/plx9080.h
index e53d3d429d7f..9231ba802030 100644
--- a/drivers/staging/comedi/drivers/plx9080.h
+++ b/drivers/staging/comedi/drivers/plx9080.h
@@ -394,9 +394,9 @@ static inline int plx9080_abort_dma(void *iobase, unsigned int channel)
 
 	/*  abort dma transfer if necessary */
 	dma_status = readb(dma_cs_addr);
-	if ((dma_status &amp; PLX_DMA_EN_BIT) == 0) {
+	if ((dma_status &amp; PLX_DMA_EN_BIT) == 0)
 		return 0;
-	}
+
 	/*  wait to make sure done bit is zero */
 	for (i = 0; (dma_status &amp; PLX_DMA_DONE_BIT) &amp;&amp; i &lt; timeout; i++) {
 		comedi_udelay(1);
diff --git a/drivers/staging/comedi/drivers/s626.c b/drivers/staging/comedi/drivers/s626.c
index 22b1e72a9f71..d447f466d333 100644
--- a/drivers/staging/comedi/drivers/s626.c
+++ b/drivers/staging/comedi/drivers/s626.c
@@ -1290,18 +1290,15 @@ static int s626_detach(comedi_device *dev)
 			CloseDMAB(dev, &amp;devpriv-&gt;ANABuf, DMABUF_SIZE);
 		}
 
-		if (dev-&gt;irq) {
+		if (dev-&gt;irq)
 			comedi_free_irq(dev-&gt;irq, dev);
-		}
 
-		if (devpriv-&gt;base_addr) {
+		if (devpriv-&gt;base_addr)
 			iounmap(devpriv-&gt;base_addr);
-		}
 
 		if (devpriv-&gt;pdev) {
-			if (devpriv-&gt;got_regions) {
+			if (devpriv-&gt;got_regions)
 				comedi_pci_disable(devpriv-&gt;pdev);
-			}
 			pci_dev_put(devpriv-&gt;pdev);
 		}
 	}
@@ -2072,9 +2069,8 @@ static int s626_ao_rinsn(comedi_device *dev, comedi_subdevice *s,
 {
 	int i;
 
-	for (i = 0; i &lt; insn-&gt;n; i++) {
+	for (i = 0; i &lt; insn-&gt;n; i++)
 		data[i] = devpriv-&gt;ao_readback[CR_CHAN(insn-&gt;chanspec)];
-	}
 
 	return i;
 }
@@ -2119,9 +2115,9 @@ static int s626_dio_insn_bits(comedi_device *dev, comedi_subdevice *s,
 {
 
 	/* Length of data must be 2 (mask and new data, see below) */
-	if (insn-&gt;n == 0) {
+	if (insn-&gt;n == 0)
 		return 0;
-	}
+
 	if (insn-&gt;n != 2) {
 		printk("comedi%d: s626: s626_dio_insn_bits(): Invalid instruction length\n", dev-&gt;minor);
 		return -EINVAL;
diff --git a/drivers/staging/comedi/kcomedilib/get.c b/drivers/staging/comedi/kcomedilib/get.c
index 781733787e96..36778b30f396 100644
--- a/drivers/staging/comedi/kcomedilib/get.c
+++ b/drivers/staging/comedi/kcomedilib/get.c
@@ -160,9 +160,9 @@ int comedi_get_krange(comedi_t *d, unsigned int subdevice, unsigned int chan,
 	} else {
 		lr = s-&gt;range_table;
 	}
-	if (range &gt;= lr-&gt;length) {
+	if (range &gt;= lr-&gt;length)
 		return -EINVAL;
-	}
+
 	memcpy(krange, lr-&gt;range + range, sizeof(comedi_krange));
 
 	return 0;
diff --git a/drivers/staging/comedi/kcomedilib/kcomedilib_main.c b/drivers/staging/comedi/kcomedilib/kcomedilib_main.c
index 94a5067f6bd5..7818e391dcab 100644
--- a/drivers/staging/comedi/kcomedilib/kcomedilib_main.c
+++ b/drivers/staging/comedi/kcomedilib/kcomedilib_main.c
@@ -331,9 +331,9 @@ int comedi_lock(comedi_t *d, unsigned int subdevice)
 	unsigned long flags;
 	int ret = 0;
 
-	if (subdevice &gt;= dev-&gt;n_subdevices) {
+	if (subdevice &gt;= dev-&gt;n_subdevices)
 		return -EINVAL;
-	}
+
 	s = dev-&gt;subdevices + subdevice;
 
 	comedi_spin_lock_irqsave(&amp;s-&gt;spin_lock, flags);
@@ -375,9 +375,9 @@ int comedi_unlock(comedi_t *d, unsigned int subdevice)
 	comedi_async *async;
 	int ret;
 
-	if (subdevice &gt;= dev-&gt;n_subdevices) {
+	if (subdevice &gt;= dev-&gt;n_subdevices)
 		return -EINVAL;
-	}
+
 	s = dev-&gt;subdevices + subdevice;
 
 	async = s-&gt;async;
@@ -425,9 +425,9 @@ int comedi_cancel(comedi_t *d, unsigned int subdevice)
 	comedi_subdevice *s;
 	int ret = 0;
 
-	if (subdevice &gt;= dev-&gt;n_subdevices) {
+	if (subdevice &gt;= dev-&gt;n_subdevices)
 		return -EINVAL;
-	}
+
 	s = dev-&gt;subdevices + subdevice;
 
 	if (s-&gt;lock &amp;&amp; s-&gt;lock != d)
@@ -450,9 +450,9 @@ int comedi_cancel(comedi_t *d, unsigned int subdevice)
 		return ret;
 
 #ifdef CONFIG_COMEDI_RT
-	if (comedi_get_subdevice_runflags(s) &amp; SRF_RT) {
+	if (comedi_get_subdevice_runflags(s) &amp; SRF_RT)
 		comedi_switch_to_non_rt(dev);
-	}
+
 #endif
 	comedi_set_subdevice_runflags(s, SRF_RUNNING | SRF_RT, 0);
 	s-&gt;async-&gt;inttrig = NULL;
@@ -471,9 +471,9 @@ int comedi_register_callback(comedi_t *d, unsigned int subdevice,
 	comedi_subdevice *s;
 	comedi_async *async;
 
-	if (subdevice &gt;= dev-&gt;n_subdevices) {
+	if (subdevice &gt;= dev-&gt;n_subdevices)
 		return -EINVAL;
-	}
+
 	s = dev-&gt;subdevices + subdevice;
 
 	async = s-&gt;async;
@@ -507,9 +507,9 @@ int comedi_poll(comedi_t *d, unsigned int subdevice)
 	comedi_subdevice *s = dev-&gt;subdevices;
 	comedi_async *async;
 
-	if (subdevice &gt;= dev-&gt;n_subdevices) {
+	if (subdevice &gt;= dev-&gt;n_subdevices)
 		return -EINVAL;
-	}
+
 	s = dev-&gt;subdevices + subdevice;
 
 	async = s-&gt;async;
@@ -533,17 +533,16 @@ int comedi_map(comedi_t *d, unsigned int subdevice, void *ptr)
 	comedi_device *dev = (comedi_device *) d;
 	comedi_subdevice *s;
 
-	if (subdevice &gt;= dev-&gt;n_subdevices) {
+	if (subdevice &gt;= dev-&gt;n_subdevices)
 		return -EINVAL;
-	}
+
 	s = dev-&gt;subdevices + subdevice;
 
 	if (!s-&gt;async)
 		return -EINVAL;
 
-	if (ptr) {
+	if (ptr)
 		*((void **)ptr) = s-&gt;async-&gt;prealloc_buf;
-	}
 
 	/* XXX no reference counting */
 
@@ -556,9 +555,9 @@ int comedi_unmap(comedi_t *d, unsigned int subdevice)
 	comedi_device *dev = (comedi_device *) d;
 	comedi_subdevice *s;
 
-	if (subdevice &gt;= dev-&gt;n_subdevices) {
+	if (subdevice &gt;= dev-&gt;n_subdevices)
 		return -EINVAL;
-	}
+
 	s = dev-&gt;subdevices + subdevice;
 
 	if (!s-&gt;async)
diff --git a/drivers/staging/comedi/proc.c b/drivers/staging/comedi/proc.c
index 3f61828294fd..6a1efa86ae97 100644
--- a/drivers/staging/comedi/proc.c
+++ b/drivers/staging/comedi/proc.c
@@ -67,9 +67,8 @@ int comedi_read_procmem(char *buf, char **start, off_t offset, int len,
 				dev-&gt;board_name, dev-&gt;n_subdevices);
 		}
 	}
-	if (!devices_q) {
+	if (!devices_q)
 		l += sprintf(buf + l, "no devices\n");
-	}
 
 	for (driv = comedi_drivers; driv; driv = driv-&gt;next) {
 		l += sprintf(buf + l, "%s:\n", driv-&gt;driver_name);
@@ -78,9 +77,8 @@ int comedi_read_procmem(char *buf, char **start, off_t offset, int len,
 				*(char **)((char *)driv-&gt;board_name +
 					i * driv-&gt;offset));
 		}
-		if (!driv-&gt;num_names) {
+		if (!driv-&gt;num_names)
 			l += sprintf(buf + l, " %s\n", driv-&gt;driver_name);
-		}
 	}
 
 	return l;
diff --git a/drivers/staging/comedi/range.c b/drivers/staging/comedi/range.c
index b8eb4ec41854..e54be6182eea 100644
--- a/drivers/staging/comedi/range.c
+++ b/drivers/staging/comedi/range.c
@@ -135,9 +135,8 @@ int check_chanlist(comedi_subdevice *s, int n, unsigned int *chanlist)
 					i, chanlist[i], s-&gt;n_chan,
 					s-&gt;range_table-&gt;length);
 #if 0
-				for (i = 0; i &lt; n; i++) {
+				for (i = 0; i &lt; n; i++)
 					printk("[%d]=0x%08x\n", i, chanlist[i]);
-				}
 #endif
 				return -EINVAL;
 			}
diff --git a/drivers/staging/comedi/rt.c b/drivers/staging/comedi/rt.c
index f4b851252541..e6ec8b98a15d 100644
--- a/drivers/staging/comedi/rt.c
+++ b/drivers/staging/comedi/rt.c
@@ -84,9 +84,9 @@ int comedi_request_irq(unsigned irq, irqreturn_t(*handler) (int,
 				("comedi: cannot get unshared interrupt, will not use RT interrupts.\n");
 			ret = request_irq(irq, handler, flags, device, dev_id);
 		}
-		if (ret &lt; 0) {
+		if (ret &lt; 0)
 			return ret;
-		}
+
 	} else {
 		it = kzalloc(sizeof(struct comedi_irq_struct), GFP_KERNEL);
 		if (!it)</pre><hr><pre>commit dedd1325f1d53e2a2604457c4b3af9e62dde5001
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Mon Mar 16 22:04:18 2009 -0400

    Staging: comedi: Remove checks for NULL before calling kfree()
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/drivers.c b/drivers/staging/comedi/drivers.c
index a252081b6a08..07456c0709dc 100644
--- a/drivers/staging/comedi/drivers.c
+++ b/drivers/staging/comedi/drivers.c
@@ -81,10 +81,8 @@ static void cleanup_device(comedi_device *dev)
 		dev-&gt;subdevices = NULL;
 		dev-&gt;n_subdevices = 0;
 	}
-	if (dev-&gt;private) {
-		kfree(dev-&gt;private);
-		dev-&gt;private = NULL;
-	}
+	kfree(dev-&gt;private);
+	dev-&gt;private = NULL;
 	dev-&gt;driver = 0;
 	dev-&gt;board_name = NULL;
 	dev-&gt;board_ptr = NULL;</pre><hr><pre>commit 51b713a684d403bd672b3e4cac55db43dc5cca2d
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Mon Mar 16 22:04:12 2009 -0400

    Staging: comedi: Misc code cleanups for checkpatch
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/comedidev.h b/drivers/staging/comedi/comedidev.h
index 8a3a1786c152..d4750e503aad 100644
--- a/drivers/staging/comedi/comedidev.h
+++ b/drivers/staging/comedi/comedidev.h
@@ -53,9 +53,9 @@
 
 #define COMEDI_INITCLEANUP_NOMODULE(x)					\
 	static int __init x ## _init_module(void)			\
-		{return comedi_driver_register(&amp;(x));}			\
+		{return comedi_driver_register(&amp;(x)); }			\
 	static void __exit x ## _cleanup_module(void)			\
-		{comedi_driver_unregister(&amp;(x));} 			\
+		{comedi_driver_unregister(&amp;(x)); } 			\
 	module_init(x ## _init_module);					\
 	module_exit(x ## _cleanup_module);					\
 
diff --git a/drivers/staging/comedi/drivers/icp_multi.c b/drivers/staging/comedi/drivers/icp_multi.c
index d474cb2cb7e5..9603d9e24d30 100644
--- a/drivers/staging/comedi/drivers/icp_multi.c
+++ b/drivers/staging/comedi/drivers/icp_multi.c
@@ -179,7 +179,7 @@ static comedi_driver driver_icp_multi = {
       attach : icp_multi_attach,
       detach : icp_multi_detach,
       num_names : n_boardtypes,
-      board_name:&amp;boardtypes[0].name,
+      board_name : &amp;boardtypes[0].name,
       offset : sizeof(boardtype),
 };
 
@@ -947,7 +947,7 @@ static int icp_multi_attach(comedi_device *dev, comedi_devconfig *it)
 		n_subdevices++;
 
 	ret = alloc_subdevices(dev, n_subdevices);
-	if ( ret &lt; 0 )
+	if (ret &lt; 0)
 		return ret;
 
 	icp_multi_reset(dev);
diff --git a/drivers/staging/comedi/drivers/icp_multi.h b/drivers/staging/comedi/drivers/icp_multi.h
index 0796056a07a4..21d84766fea8 100644
--- a/drivers/staging/comedi/drivers/icp_multi.h
+++ b/drivers/staging/comedi/drivers/icp_multi.h
@@ -246,7 +246,7 @@ static struct pcilst_struct *select_and_alloc_pci_card(unsigned short vendor_id,
 
 	if ((pci_bus &lt; 1) &amp; (pci_slot &lt; 1)) {	/* use autodetection */
 
-		card = find_free_pci_card_by_device(vendor_id,device_id);
+		card = find_free_pci_card_by_device(vendor_id, device_id);
 		if (card == NULL) {
 			rt_printk(" - Unused card not found in system!\n");
 			return NULL;
@@ -268,7 +268,7 @@ static struct pcilst_struct *select_and_alloc_pci_card(unsigned short vendor_id,
 	}
 
 	err = pci_card_alloc(card);
-	if ( err != 0) {
+	if (err != 0) {
 		if (err &gt; 0)
 			rt_printk(" - Can't allocate card!\n");
 		/* else: error already printed. */
diff --git a/drivers/staging/comedi/drivers/mite.c b/drivers/staging/comedi/drivers/mite.c
index c82aeff8ff58..c7fe073f27b7 100644
--- a/drivers/staging/comedi/drivers/mite.c
+++ b/drivers/staging/comedi/drivers/mite.c
@@ -63,7 +63,7 @@
 
 MODULE_LICENSE("GPL");
 
-struct mite_struct *mite_devices = NULL;
+struct mite_struct *mite_devices;
 
 #define TOP_OF_PAGE(x) ((x)|(~(PAGE_MASK)))
 
diff --git a/drivers/staging/comedi/drivers/rtd520.c b/drivers/staging/comedi/drivers/rtd520.c
index 578b731ae500..95e4af27bd8d 100644
--- a/drivers/staging/comedi/drivers/rtd520.c
+++ b/drivers/staging/comedi/drivers/rtd520.c
@@ -2155,7 +2155,7 @@ static int rtd_ao_winsn(comedi_device *dev,
 		/* VERIFY: comedi range and offset conversions */
 
 		if ((range &gt; 1)	/* bipolar */
-			&amp;&amp;(data[i] &lt; 2048)) {
+			&amp;&amp; (data[i] &lt; 2048)) {
 			/* offset and sign extend */
 			val = (((int)data[i]) - 2048) &lt;&lt; 3;
 		} else {	/* unipolor */
diff --git a/drivers/staging/comedi/rt.c b/drivers/staging/comedi/rt.c
index ba9c70ecd044..f4b851252541 100644
--- a/drivers/staging/comedi/rt.c
+++ b/drivers/staging/comedi/rt.c
@@ -180,7 +180,7 @@ void comedi_rt_pend_wakeup(wait_queue_head_t *q)
 
 #ifndef HAVE_RT_REQUEST_IRQ_WITH_ARG
 #define DECLARE_VOID_IRQ(irq) \
-static void handle_void_irq_ ## irq (void){ handle_void_irq(irq);}
+static void handle_void_irq_ ## irq (void){ handle_void_irq(irq); }
 
 static void handle_void_irq(int irq)
 {</pre><hr><pre>commit a87e4f5a4a7be43e610399ebcbb09ba3da021094
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Mon Mar 16 22:04:07 2009 -0400

    Staging: comedi: Add spaces around colons as requested by checkpatch
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/drivers/s626.c b/drivers/staging/comedi/drivers/s626.c
index ff6118e8ad4a..22b1e72a9f71 100644
--- a/drivers/staging/comedi/drivers/s626.c
+++ b/drivers/staging/comedi/drivers/s626.c
@@ -358,15 +358,15 @@ static enc_private enc_private_data[] = {
 	      GetEnable:GetEnable_A,
 	      GetIntSrc : GetIntSrc_A,
 	      GetLoadTrig : GetLoadTrig_A,
-	      GetMode:	GetMode_A,
+	      GetMode :	GetMode_A,
 	      PulseIndex : PulseIndex_A,
 	      SetEnable : SetEnable_A,
 	      SetIntSrc : SetIntSrc_A,
 	      SetLoadTrig : SetLoadTrig_A,
-	      SetMode:	SetMode_A,
+	      SetMode :	SetMode_A,
 	      ResetCapFlags : ResetCapFlags_A,
-	      MyCRA:	LP_CR0A,
-	      MyCRB:	LP_CR0B,
+	      MyCRA :	LP_CR0A,
+	      MyCRB :	LP_CR0B,
 	      MyLatchLsw : LP_CNTR0ALSW,
 	      MyEventBits : EVBITS(0),
 		},
@@ -374,15 +374,15 @@ static enc_private enc_private_data[] = {
 	      GetEnable:GetEnable_A,
 	      GetIntSrc : GetIntSrc_A,
 	      GetLoadTrig : GetLoadTrig_A,
-	      GetMode:	GetMode_A,
+	      GetMode :	GetMode_A,
 	      PulseIndex : PulseIndex_A,
 	      SetEnable : SetEnable_A,
 	      SetIntSrc : SetIntSrc_A,
 	      SetLoadTrig : SetLoadTrig_A,
-	      SetMode:	SetMode_A,
+	      SetMode :	SetMode_A,
 	      ResetCapFlags : ResetCapFlags_A,
-	      MyCRA:	LP_CR1A,
-	      MyCRB:	LP_CR1B,
+	      MyCRA :	LP_CR1A,
+	      MyCRB :	LP_CR1B,
 	      MyLatchLsw : LP_CNTR1ALSW,
 	      MyEventBits : EVBITS(1),
 		},
@@ -390,15 +390,15 @@ static enc_private enc_private_data[] = {
 	      GetEnable:GetEnable_A,
 	      GetIntSrc : GetIntSrc_A,
 	      GetLoadTrig : GetLoadTrig_A,
-	      GetMode:	GetMode_A,
+	      GetMode :	GetMode_A,
 	      PulseIndex : PulseIndex_A,
 	      SetEnable : SetEnable_A,
 	      SetIntSrc : SetIntSrc_A,
 	      SetLoadTrig : SetLoadTrig_A,
-	      SetMode:	SetMode_A,
+	      SetMode :	SetMode_A,
 	      ResetCapFlags : ResetCapFlags_A,
-	      MyCRA:	LP_CR2A,
-	      MyCRB:	LP_CR2B,
+	      MyCRA :	LP_CR2A,
+	      MyCRB :	LP_CR2B,
 	      MyLatchLsw : LP_CNTR2ALSW,
 	      MyEventBits : EVBITS(2),
 		},
@@ -406,15 +406,15 @@ static enc_private enc_private_data[] = {
 	      GetEnable:GetEnable_B,
 	      GetIntSrc : GetIntSrc_B,
 	      GetLoadTrig : GetLoadTrig_B,
-	      GetMode:	GetMode_B,
+	      GetMode :	GetMode_B,
 	      PulseIndex : PulseIndex_B,
 	      SetEnable : SetEnable_B,
 	      SetIntSrc : SetIntSrc_B,
 	      SetLoadTrig : SetLoadTrig_B,
-	      SetMode:	SetMode_B,
+	      SetMode :	SetMode_B,
 	      ResetCapFlags : ResetCapFlags_B,
-	      MyCRA:	LP_CR0A,
-	      MyCRB:	LP_CR0B,
+	      MyCRA :	LP_CR0A,
+	      MyCRB :	LP_CR0B,
 	      MyLatchLsw : LP_CNTR0BLSW,
 	      MyEventBits : EVBITS(3),
 		},
@@ -422,15 +422,15 @@ static enc_private enc_private_data[] = {
 	      GetEnable:GetEnable_B,
 	      GetIntSrc : GetIntSrc_B,
 	      GetLoadTrig : GetLoadTrig_B,
-	      GetMode:	GetMode_B,
+	      GetMode :	GetMode_B,
 	      PulseIndex : PulseIndex_B,
 	      SetEnable : SetEnable_B,
 	      SetIntSrc : SetIntSrc_B,
 	      SetLoadTrig : SetLoadTrig_B,
-	      SetMode:	SetMode_B,
+	      SetMode :	SetMode_B,
 	      ResetCapFlags : ResetCapFlags_B,
-	      MyCRA:	LP_CR1A,
-	      MyCRB:	LP_CR1B,
+	      MyCRA :	LP_CR1A,
+	      MyCRB :	LP_CR1B,
 	      MyLatchLsw : LP_CNTR1BLSW,
 	      MyEventBits : EVBITS(4),
 		},
@@ -438,15 +438,15 @@ static enc_private enc_private_data[] = {
 	      GetEnable:GetEnable_B,
 	      GetIntSrc : GetIntSrc_B,
 	      GetLoadTrig : GetLoadTrig_B,
-	      GetMode:	GetMode_B,
+	      GetMode :	GetMode_B,
 	      PulseIndex : PulseIndex_B,
 	      SetEnable : SetEnable_B,
 	      SetIntSrc : SetIntSrc_B,
 	      SetLoadTrig : SetLoadTrig_B,
-	      SetMode:	SetMode_B,
+	      SetMode :	SetMode_B,
 	      ResetCapFlags : ResetCapFlags_B,
-	      MyCRA:	LP_CR2A,
-	      MyCRB:	LP_CR2B,
+	      MyCRA :	LP_CR2A,
+	      MyCRB :	LP_CR2B,
 	      MyLatchLsw : LP_CNTR2BLSW,
 	      MyEventBits : EVBITS(5),
 		},</pre><hr><pre>commit f10fe5742ba6ad6a2219cbe774e1b9d3db0ef23d
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Mon Mar 16 22:04:02 2009 -0400

    Staging: comedi: Fix cases of open curly on wrong line
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/drivers/s626.c b/drivers/staging/comedi/drivers/s626.c
index 26cc41073b0b..ff6118e8ad4a 100644
--- a/drivers/staging/comedi/drivers/s626.c
+++ b/drivers/staging/comedi/drivers/s626.c
@@ -2431,8 +2431,7 @@ static uint8_t I2Cread(comedi_device *dev, uint8_t addr)
 			 /* Byte2 = I2C command: write to I2C EEPROM  device. */
 			| I2C_B1(I2C_ATTRSTOP, addr)
 			 /* Byte1 = EEPROM internal target address. */
-			| I2C_B0(I2C_ATTRNOP, 0)))	/*  Byte0 = Not sent. */
-	{
+			| I2C_B0(I2C_ATTRNOP, 0))) {	/*  Byte0 = Not sent. */
 		/*  Abort function and declare error if handshake failed. */
 		DEBUG("I2Cread: error handshake I2Cread  a\n");
 		return 0;
@@ -2445,9 +2444,8 @@ static uint8_t I2Cread(comedi_device *dev, uint8_t addr)
 			| I2C_B1(I2C_ATTRSTOP, 0)	/*  Byte1 receives */
 			/*  uint8_t from */
 			/*  EEPROM. */
-			| I2C_B0(I2C_ATTRNOP, 0)))	/*  Byte0 = Not */
-		/*  sent. */
-	{
+			| I2C_B0(I2C_ATTRNOP, 0))) {	/*  Byte0 = Not  sent. */
+
 		/*  Abort function and declare error if handshake failed. */
 		DEBUG("I2Cread: error handshake I2Cread b\n");
 		return 0;</pre><hr><pre>commit c7427409cd071a34c4a13c5c24531b7a10334e31
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Mon Mar 16 22:03:56 2009 -0400

    Staging: comedi: Move trailing statements to next line as requested by checkpatch
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/drivers/s626.c b/drivers/staging/comedi/drivers/s626.c
index 9110ae3c7fec..26cc41073b0b 100644
--- a/drivers/staging/comedi/drivers/s626.c
+++ b/drivers/staging/comedi/drivers/s626.c
@@ -749,7 +749,8 @@ static int s626_attach(comedi_device *dev, comedi_devconfig *it)
 		/*  Write I2C control: abort any I2C activity. */
 		MC_ENABLE(P_MC2, MC2_UPLD_IIC);
 		/*  Invoke command  upload */
-		while ((RR7146(P_MC2) &amp; MC2_UPLD_IIC) == 0);
+		while ((RR7146(P_MC2) &amp; MC2_UPLD_IIC) == 0)
+			;
 		/*  and wait for upload to complete. */
 
 		/* Per SAA7146 data sheet, write to STATUS reg twice to
@@ -758,7 +759,8 @@ static int s626_attach(comedi_device *dev, comedi_devconfig *it)
 			WR7146(P_I2CSTAT, I2C_CLKSEL);
 			/*  Write I2C control: reset  error flags. */
 			MC_ENABLE(P_MC2, MC2_UPLD_IIC);	/*  Invoke command upload */
-			while (!MC_TEST(P_MC2, MC2_UPLD_IIC));
+			while (!MC_TEST(P_MC2, MC2_UPLD_IIC))
+				;
 			/* and wait for upload to complete. */
 		}
 
@@ -1592,7 +1594,8 @@ static int s626_ai_insn_read(comedi_device *dev, comedi_subdevice *s,
 		/*  shift into FB BUFFER 1 register. */
 
 		/*  Wait for ADC done. */
-		while (!(RR7146(P_PSR) &amp; PSR_GPIO2)) ;
+		while (!(RR7146(P_PSR) &amp; PSR_GPIO2))
+			;
 
 		/*  Fetch ADC data. */
 		if (n != 0)
@@ -1624,7 +1627,8 @@ static int s626_ai_insn_read(comedi_device *dev, comedi_subdevice *s,
 	/*  Wait for the data to arrive in FB BUFFER 1 register. */
 
 	/*  Wait for ADC done. */
-	while (!(RR7146(P_PSR) &amp; PSR_GPIO2)) ;
+	while (!(RR7146(P_PSR) &amp; PSR_GPIO2))
+		;
 
 	/*  Fetch ADC data from audio interface's input shift register. */
 
@@ -2462,10 +2466,12 @@ static uint32_t I2Chandshake(comedi_device *dev, uint32_t val)
 	/*  upload confirmation. */
 
 	MC_ENABLE(P_MC2, MC2_UPLD_IIC);
-	while (!MC_TEST(P_MC2, MC2_UPLD_IIC)) ;
+	while (!MC_TEST(P_MC2, MC2_UPLD_IIC))
+		;
 
 	/*  Wait until I2C bus transfer is finished or an error occurs. */
-	while ((RR7146(P_I2CCTRL) &amp; (I2C_BUSY | I2C_ERR)) == I2C_BUSY) ;
+	while ((RR7146(P_I2CCTRL) &amp; (I2C_BUSY | I2C_ERR)) == I2C_BUSY)
+		;
 
 	/*  Return non-zero if I2C error occured. */
 	return RR7146(P_I2CCTRL) &amp; I2C_ERR;
@@ -2579,7 +2585,8 @@ static void SendDAC(comedi_device *dev, uint32_t val)
 	 * Done by polling the DMAC enable flag; this flag is automatically
 	 * cleared when the transfer has finished.
 	 */
-	while ((RR7146(P_MC1) &amp; MC1_A2OUT) != 0) ;
+	while ((RR7146(P_MC1) &amp; MC1_A2OUT) != 0)
+		;
 
 	/* START THE OUTPUT STREAM TO THE TARGET DAC -------------------- */
 
@@ -2596,7 +2603,8 @@ static void SendDAC(comedi_device *dev, uint32_t val)
 	 * finished transferring the DAC's data DWORD from the output FIFO
 	 * to the output buffer register.
 	 */
-	while ((RR7146(P_SSR) &amp; SSR_AF2_OUT) == 0) ;
+	while ((RR7146(P_SSR) &amp; SSR_AF2_OUT) == 0)
+		;
 
 	/* Set up to trap execution at slot 0 when the TSL sequencer cycles
 	 * back to slot 0 after executing the EOS in slot 5.  Also,
@@ -2632,7 +2640,8 @@ static void SendDAC(comedi_device *dev, uint32_t val)
 		 * from 0xFF to 0x00, which slot 0 causes to happen by shifting
 		 * out/in on SD2 the 0x00 that is always referenced by slot 5.
 		 */
-		 while ((RR7146(P_FB_BUFFER2) &amp; 0xFF000000) != 0) ;
+		 while ((RR7146(P_FB_BUFFER2) &amp; 0xFF000000) != 0)
+			;
 	}
 	/* Either (1) we were too late setting the slot 0 trap; the TSL
 	 * sequencer restarted slot 0 before we could set the EOS trap flag,
@@ -2648,7 +2657,8 @@ static void SendDAC(comedi_device *dev, uint32_t val)
 	 * the next DAC write.  This is detected when FB_BUFFER2 MSB changes
 	 * from 0x00 to 0xFF.
 	 */
-	while ((RR7146(P_FB_BUFFER2) &amp; 0xFF000000) == 0) ;
+	while ((RR7146(P_FB_BUFFER2) &amp; 0xFF000000) == 0)
+		;
 }
 
 static void WriteMISC2(comedi_device *dev, uint16_t NewImage)
@@ -2687,10 +2697,12 @@ static void DEBItransfer(comedi_device *dev)
 
 	/*  Wait for completion of upload from shadow RAM to DEBI control */
 	/*  register. */
-	while (!MC_TEST(P_MC2, MC2_UPLD_DEBI)) ;
+	while (!MC_TEST(P_MC2, MC2_UPLD_DEBI))
+		;
 
 	/*  Wait until DEBI transfer is done. */
-	while (RR7146(P_PSR) &amp; PSR_DEBI_S) ;
+	while (RR7146(P_PSR) &amp; PSR_DEBI_S)
+		;
 }
 
 /*  Write a value to a gate array register. */
diff --git a/drivers/staging/comedi/proc.c b/drivers/staging/comedi/proc.c
index 100877362577..3f61828294fd 100644
--- a/drivers/staging/comedi/proc.c
+++ b/drivers/staging/comedi/proc.c
@@ -55,7 +55,8 @@ int comedi_read_procmem(char *buf, char **start, off_t offset, int len,
 		struct comedi_device_file_info *dev_file_info = comedi_get_device_file_info(i);
 		comedi_device *dev;
 
-		if (dev_file_info == NULL) continue;
+		if (dev_file_info == NULL)
+			continue;
 		dev = dev_file_info-&gt;device;
 
 		if (dev-&gt;attached) {</pre><hr><pre>commit 197c82bf25b9e379cb5646561be1a727ab9e84a7
Author: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
Date:   Mon Mar 16 22:03:51 2009 -0400

    Staging: comedi: Remove instances of assignments in conditionals
    
    Signed-off-by: Bill Pemberton &lt;wfp5p@virginia.edu&gt;
    Signed-off-by: Greg Kroah-Hartman &lt;gregkh@suse.de&gt;

diff --git a/drivers/staging/comedi/drivers/icp_multi.c b/drivers/staging/comedi/drivers/icp_multi.c
index aefd1c16ab2b..d474cb2cb7e5 100644
--- a/drivers/staging/comedi/drivers/icp_multi.c
+++ b/drivers/staging/comedi/drivers/icp_multi.c
@@ -882,7 +882,8 @@ static int icp_multi_attach(comedi_device *dev, comedi_devconfig *it)
 	printk("icp_multi EDBG: BGN: icp_multi_attach(...)\n");
 
 	/*  Alocate private data storage space */
-	if ((ret = alloc_private(dev, sizeof(icp_multi_private))) &lt; 0)
+	ret = alloc_private(dev, sizeof(icp_multi_private));
+	if (ret &lt; 0)
 		return ret;
 
 	/*  Initialise list of PCI cards in system, if not already done so */
@@ -899,9 +900,11 @@ static int icp_multi_attach(comedi_device *dev, comedi_devconfig *it)
 	printk("Anne's comedi%d: icp_multi: board=%s", dev-&gt;minor,
 		this_board-&gt;name);
 
-	if ((card = select_and_alloc_pci_card(PCI_VENDOR_ID_ICP,
-				this_board-&gt;device_id, it-&gt;options[0],
-				it-&gt;options[1])) == NULL)
+	card = select_and_alloc_pci_card(PCI_VENDOR_ID_ICP,
+					 this_board-&gt;device_id, it-&gt;options[0],
+					 it-&gt;options[1]);
+
+	if (card == NULL)
 		return -EIO;
 
 	devpriv-&gt;card = card;
@@ -943,9 +946,9 @@ static int icp_multi_attach(comedi_device *dev, comedi_devconfig *it)
 	if (this_board-&gt;n_ctrs)
 		n_subdevices++;
 
-	if ((ret = alloc_subdevices(dev, n_subdevices)) &lt; 0) {
+	ret = alloc_subdevices(dev, n_subdevices);
+	if ( ret &lt; 0 )
 		return ret;
-	}
 
 	icp_multi_reset(dev);
 
diff --git a/drivers/staging/comedi/drivers/icp_multi.h b/drivers/staging/comedi/drivers/icp_multi.h
index c0abc1062b8d..0796056a07a4 100644
--- a/drivers/staging/comedi/drivers/icp_multi.h
+++ b/drivers/staging/comedi/drivers/icp_multi.h
@@ -245,8 +245,9 @@ static struct pcilst_struct *select_and_alloc_pci_card(unsigned short vendor_id,
 	int err;
 
 	if ((pci_bus &lt; 1) &amp; (pci_slot &lt; 1)) {	/* use autodetection */
-		if ((card = find_free_pci_card_by_device(vendor_id,
-					device_id)) == NULL) {
+
+		card = find_free_pci_card_by_device(vendor_id,device_id);
+		if (card == NULL) {
 			rt_printk(" - Unused card not found in system!\n");
 			return NULL;
 		}
@@ -266,7 +267,8 @@ static struct pcilst_struct *select_and_alloc_pci_card(unsigned short vendor_id,
 		}
 	}
 
-	if ((err = pci_card_alloc(card)) != 0) {
+	err = pci_card_alloc(card);
+	if ( err != 0) {
 		if (err &gt; 0)
 			rt_printk(" - Can't allocate card!\n");
 		/* else: error already printed. */
diff --git a/drivers/staging/comedi/drivers/rtd520.c b/drivers/staging/comedi/drivers/rtd520.c
index 08e3dde67f8c..578b731ae500 100644
--- a/drivers/staging/comedi/drivers/rtd520.c
+++ b/drivers/staging/comedi/drivers/rtd520.c
@@ -779,7 +779,8 @@ static int rtd_attach(comedi_device *dev, comedi_devconfig *it)
 	devpriv-&gt;pci_dev = pcidev;
 	dev-&gt;board_name = thisboard-&gt;name;
 
-	if ((ret = comedi_pci_enable(pcidev, DRV_NAME)) &lt; 0) {
+	ret = comedi_pci_enable(pcidev, DRV_NAME);
+	if (ret &lt; 0) {
 		printk("Failed to enable PCI device and request regions.\n");
 		return ret;
 	}
@@ -918,8 +919,10 @@ static int rtd_attach(comedi_device *dev, comedi_devconfig *it)
 	/* TODO: set user out source ??? */
 
 	/* check if our interrupt is available and get it */
-	if ((ret = comedi_request_irq(devpriv-&gt;pci_dev-&gt;irq, rtd_interrupt,
-				IRQF_SHARED, DRV_NAME, dev)) &lt; 0) {
+	ret = comedi_request_irq(devpriv-&gt;pci_dev-&gt;irq, rtd_interrupt,
+				 IRQF_SHARED, DRV_NAME, dev);
+
+	if (ret &lt; 0) {
 		printk("Could not get interrupt! (%u)\n",
 			devpriv-&gt;pci_dev-&gt;irq);
 		return ret;
diff --git a/drivers/staging/comedi/drivers/s626.c b/drivers/staging/comedi/drivers/s626.c
index 71309d3e1227..9110ae3c7fec 100644
--- a/drivers/staging/comedi/drivers/s626.c
+++ b/drivers/staging/comedi/drivers/s626.c
@@ -525,7 +525,8 @@ static int s626_attach(comedi_device *dev, comedi_devconfig *it)
 		return -ENODEV;
 	}
 
-	if ((result = comedi_pci_enable(pdev, "s626")) &lt; 0) {
+	result = comedi_pci_enable(pdev, "s626");
+	if (result &lt; 0) {
 		printk("s626_attach: comedi_pci_enable fails\n");
 		return -ENODEV;
 	}
@@ -552,9 +553,10 @@ static int s626_attach(comedi_device *dev, comedi_devconfig *it)
 		/* adc buffer allocation */
 		devpriv-&gt;allocatedBuf = 0;
 
-		if ((devpriv-&gt;ANABuf.LogicalBase =
-				pci_alloc_consistent(devpriv-&gt;pdev, DMABUF_SIZE,
-					&amp;appdma)) == NULL) {
+		devpriv-&gt;ANABuf.LogicalBase =
+			pci_alloc_consistent(devpriv-&gt;pdev, DMABUF_SIZE, &amp;appdma);
+
+		if (devpriv-&gt;ANABuf.LogicalBase == NULL) {
 			printk("s626_attach: DMA Memory mapping error\n");
 			return -ENOMEM;
 		}
@@ -565,9 +567,10 @@ static int s626_attach(comedi_device *dev, comedi_devconfig *it)
 
 		devpriv-&gt;allocatedBuf++;
 
-		if ((devpriv-&gt;RPSBuf.LogicalBase =
-				pci_alloc_consistent(devpriv-&gt;pdev, DMABUF_SIZE,
-					&amp;appdma)) == NULL) {
+		devpriv-&gt;RPSBuf.LogicalBase =
+			pci_alloc_consistent(devpriv-&gt;pdev, DMABUF_SIZE,  &amp;appdma);
+
+		if (devpriv-&gt;RPSBuf.LogicalBase == NULL) {
 			printk("s626_attach: DMA Memory mapping error\n");
 			return -ENOMEM;
 		}
@@ -593,8 +596,10 @@ static int s626_attach(comedi_device *dev, comedi_devconfig *it)
 	if (dev-&gt;irq == 0) {
 		printk(" unknown irq (bad)\n");
 	} else {
-		if ((ret = comedi_request_irq(dev-&gt;irq, s626_irq_handler,
-					IRQF_SHARED, "s626", dev)) &lt; 0) {
+		ret = comedi_request_irq(dev-&gt;irq, s626_irq_handler,
+					 IRQF_SHARED, "s626", dev);
+
+		if (ret &lt; 0) {
 			printk(" irq not available\n");
 			dev-&gt;irq = 0;
 		}
diff --git a/drivers/staging/comedi/kcomedilib/kcomedilib_main.c b/drivers/staging/comedi/kcomedilib/kcomedilib_main.c
index 7133f2f2607c..94a5067f6bd5 100644
--- a/drivers/staging/comedi/kcomedilib/kcomedilib_main.c
+++ b/drivers/staging/comedi/kcomedilib/kcomedilib_main.c
@@ -256,7 +256,8 @@ int comedi_do_insn(comedi_t *d, comedi_insn *insn)
 
 		/* XXX check lock */
 
-		if ((ret = check_chanlist(s, 1, &amp;insn-&gt;chanspec)) &lt; 0) {
+		ret = check_chanlist(s, 1, &amp;insn-&gt;chanspec);
+		if (ret &lt; 0) {
 			rt_printk("bad chanspec\n");
 			ret = -EINVAL;
 			goto error;
@@ -443,7 +444,9 @@ int comedi_cancel(comedi_t *d, unsigned int subdevice)
 	if (!s-&gt;cancel || !s-&gt;async)
 		return -EINVAL;
 
-	if ((ret = s-&gt;cancel(dev, s)))
+	ret = s-&gt;cancel(dev, s);
+
+	if (ret)
 		return ret;
 
 #ifdef CONFIG_COMEDI_RT</pre>
    <div class="pagination">
        <a href='3_81.html'>&lt;&lt;Prev</a><a href='3.html'>1</a><a href='3_2.html'>2</a><a href='3_3.html'>3</a><a href='3_4.html'>4</a><a href='3_5.html'>5</a><a href='3_6.html'>6</a><a href='3_7.html'>7</a><a href='3_8.html'>8</a><a href='3_9.html'>9</a><a href='3_10.html'>10</a><a href='3_11.html'>11</a><a href='3_12.html'>12</a><a href='3_13.html'>13</a><a href='3_14.html'>14</a><a href='3_15.html'>15</a><a href='3_16.html'>16</a><a href='3_17.html'>17</a><a href='3_18.html'>18</a><a href='3_19.html'>19</a><a href='3_20.html'>20</a><a href='3_21.html'>21</a><a href='3_22.html'>22</a><a href='3_23.html'>23</a><a href='3_24.html'>24</a><a href='3_25.html'>25</a><a href='3_26.html'>26</a><a href='3_27.html'>27</a><a href='3_28.html'>28</a><a href='3_29.html'>29</a><a href='3_30.html'>30</a><a href='3_31.html'>31</a><a href='3_32.html'>32</a><a href='3_33.html'>33</a><a href='3_34.html'>34</a><a href='3_35.html'>35</a><a href='3_36.html'>36</a><a href='3_37.html'>37</a><a href='3_38.html'>38</a><a href='3_39.html'>39</a><a href='3_40.html'>40</a><a href='3_41.html'>41</a><a href='3_42.html'>42</a><a href='3_43.html'>43</a><a href='3_44.html'>44</a><a href='3_45.html'>45</a><a href='3_46.html'>46</a><a href='3_47.html'>47</a><a href='3_48.html'>48</a><a href='3_49.html'>49</a><a href='3_50.html'>50</a><a href='3_51.html'>51</a><a href='3_52.html'>52</a><a href='3_53.html'>53</a><a href='3_54.html'>54</a><a href='3_55.html'>55</a><a href='3_56.html'>56</a><a href='3_57.html'>57</a><a href='3_58.html'>58</a><a href='3_59.html'>59</a><a href='3_60.html'>60</a><a href='3_61.html'>61</a><a href='3_62.html'>62</a><a href='3_63.html'>63</a><a href='3_64.html'>64</a><a href='3_65.html'>65</a><a href='3_66.html'>66</a><a href='3_67.html'>67</a><a href='3_68.html'>68</a><a href='3_69.html'>69</a><a href='3_70.html'>70</a><a href='3_71.html'>71</a><a href='3_72.html'>72</a><a href='3_73.html'>73</a><a href='3_74.html'>74</a><a href='3_75.html'>75</a><a href='3_76.html'>76</a><a href='3_77.html'>77</a><a href='3_78.html'>78</a><a href='3_79.html'>79</a><a href='3_80.html'>80</a><a href='3_81.html'>81</a><span>[82]</span><a href='3_83.html'>83</a><a href='3_83.html'>Next&gt;&gt;</a>
    <div>
</body>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of Minnesota</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of Minnesota</h1>
    <div class="pagination">
        <a href='7_9.html'>&lt;&lt;Prev</a><a href='7.html'>1</a><a href='7_2.html'>2</a><a href='7_3.html'>3</a><a href='7_4.html'>4</a><a href='7_5.html'>5</a><a href='7_6.html'>6</a><a href='7_7.html'>7</a><a href='7_8.html'>8</a><a href='7_9.html'>9</a><span>[10]</span><a href='7_11.html'>11</a><a href='7_12.html'>12</a><a href='7_13.html'>13</a><a href='7_14.html'>14</a><a href='7_15.html'>15</a><a href='7_16.html'>16</a><a href='7_17.html'>17</a><a href='7_18.html'>18</a><a href='7_19.html'>19</a><a href='7_20.html'>20</a><a href='7_21.html'>21</a><a href='7_22.html'>22</a><a href='7_23.html'>23</a><a href='7_24.html'>24</a><a href='7_25.html'>25</a><a href='7_26.html'>26</a><a href='7_27.html'>27</a><a href='7_28.html'>28</a><a href='7_29.html'>29</a><a href='7_30.html'>30</a><a href='7_11.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit fc1b20659597015a30e8ea032f168e97848c1d39
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Tue Dec 17 16:50:47 2019 -0600

    nfsd: remove unnecessary assertion in nfsd4_encode_replay
    
    The replay variable is set in the only caller of nfsd4_encode_replay.
    The assertion is unnecessary and the patch removes this check.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: J. Bruce Fields &lt;bfields@redhat.com&gt;

diff --git a/fs/nfsd/nfs4xdr.c b/fs/nfsd/nfs4xdr.c
index 1d8a08b84e32..85949fd6ae7f 100644
--- a/fs/nfsd/nfs4xdr.c
+++ b/fs/nfsd/nfs4xdr.c
@@ -4649,8 +4649,6 @@ nfsd4_encode_replay(struct xdr_stream *xdr, struct nfsd4_op *op)
 	__be32 *p;
 	struct nfs4_replay *rp = op-&gt;replay;
 
-	BUG_ON(!rp);
-
 	p = xdr_reserve_space(xdr, 8 + rp-&gt;rp_buflen);
 	if (!p) {
 		WARN_ON_ONCE(1);</pre><hr><pre>commit 5bf2fc1f9c88397b125d5ec5f65b1ed9300ba59d
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Thu Dec 19 11:57:35 2019 -0600

    bpf: Remove unnecessary assertion on fp_old
    
    The two callers of bpf_prog_realloc - bpf_patch_insn_single and
    bpf_migrate_filter dereference the struct fp_old, before passing
    it to the function. Thus assertion to check fp_old is unnecessary
    and can be removed.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: Daniel Borkmann &lt;daniel@iogearbox.net&gt;
    Link: https://lore.kernel.org/bpf/20191219175735.19231-1-pakki001@umn.edu

diff --git a/kernel/bpf/core.c b/kernel/bpf/core.c
index 2ff01a716128..7622dfc36705 100644
--- a/kernel/bpf/core.c
+++ b/kernel/bpf/core.c
@@ -222,8 +222,6 @@ struct bpf_prog *bpf_prog_realloc(struct bpf_prog *fp_old, unsigned int size,
 	u32 pages, delta;
 	int ret;
 
-	BUG_ON(fp_old == NULL);
-
 	size = round_up(size, PAGE_SIZE);
 	pages = size / PAGE_SIZE;
 	if (pages &lt;= fp_old-&gt;pages)</pre><hr><pre>commit c705f9fc6a1736dcf6ec01f8206707c108dca824
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sun Dec 15 13:58:58 2019 -0600

    orinoco: avoid assertion in case of NULL pointer
    
    In ezusb_init, if upriv is NULL, the code crashes. However, the caller
    in ezusb_probe can handle the error and print the failure message.
    The patch replaces the BUG_ON call to error return.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: Kalle Valo &lt;kvalo@codeaurora.org&gt;

diff --git a/drivers/net/wireless/intersil/orinoco/orinoco_usb.c b/drivers/net/wireless/intersil/orinoco/orinoco_usb.c
index 8c79b963bcff..e753f43e0162 100644
--- a/drivers/net/wireless/intersil/orinoco/orinoco_usb.c
+++ b/drivers/net/wireless/intersil/orinoco/orinoco_usb.c
@@ -1361,7 +1361,8 @@ static int ezusb_init(struct hermes *hw)
 	int retval;
 
 	BUG_ON(in_interrupt());
-	BUG_ON(!upriv);
+	if (!upriv)
+		return -EINVAL;
 
 	upriv-&gt;reply_count = 0;
 	/* Write the MAGIC number on the simulated registers to keep</pre><hr><pre>commit 8b6fc114beeb9f1a270e5b6d25c30a5143801bf8
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sun Dec 15 13:43:44 2019 -0600

    drm: remove duplicate check on parent and avoid BUG_ON
    
    In drm_dev_init, parent is checked for NULL via assert after
    checked in devm_drm_dev_init(). The patch removes the duplicate
    check and replaces the assertion with WARN_ON. Further, it returns
    -EINVAL consistent with the usage in devm_drm_dev_init.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: Daniel Vetter &lt;daniel.vetter@ffwll.ch&gt;
    Link: https://patchwork.freedesktop.org/patch/msgid/20191215194345.4679-1-pakki001@umn.edu

diff --git a/drivers/gpu/drm/drm_drv.c b/drivers/gpu/drm/drm_drv.c
index 1b9b40a1c7c9..7c18a980cd4b 100644
--- a/drivers/gpu/drm/drm_drv.c
+++ b/drivers/gpu/drm/drm_drv.c
@@ -622,7 +622,8 @@ int drm_dev_init(struct drm_device *dev,
 		return -ENODEV;
 	}
 
-	BUG_ON(!parent);
+	if (WARN_ON(!parent))
+		return -EINVAL;
 
 	kref_init(&amp;dev-&gt;ref);
 	dev-&gt;dev = get_device(parent);
@@ -725,7 +726,7 @@ int devm_drm_dev_init(struct device *parent,
 {
 	int ret;
 
-	if (WARN_ON(!parent || !driver-&gt;release))
+	if (WARN_ON(!driver-&gt;release))
 		return -EINVAL;
 
 	ret = drm_dev_init(dev, driver, parent);</pre><hr><pre>commit c5dea815834c7d2e9fc633785455bc428b7a1956
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sun Dec 15 11:51:30 2019 -0600

    net: caif: replace BUG_ON with recovery code
    
    In caif_xmit, there is a crash if the ptr dev is NULL. However, by
    returning the error to the callers, the error can be handled. The
    patch fixes this issue.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/net/caif/caif_serial.c b/drivers/net/caif/caif_serial.c
index bd40b114d6cd..d737ceb61203 100644
--- a/drivers/net/caif/caif_serial.c
+++ b/drivers/net/caif/caif_serial.c
@@ -270,7 +270,9 @@ static int caif_xmit(struct sk_buff *skb, struct net_device *dev)
 {
 	struct ser_device *ser;
 
-	BUG_ON(dev == NULL);
+	if (WARN_ON(!dev))
+		return -EINVAL;
+
 	ser = netdev_priv(dev);
 
 	/* Send flow off once, on high water mark */</pre><hr><pre>commit bbd20c939c8aa3f27fa30e86691af250bf92973a
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sun Dec 15 10:14:51 2019 -0600

    fore200e: Fix incorrect checks of NULL pointer dereference
    
    In fore200e_send and fore200e_close, the pointers from the arguments
    are dereferenced in the variable declaration block and then checked
    for NULL. The patch fixes these issues by avoiding NULL pointer
    dereferences.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/atm/fore200e.c b/drivers/atm/fore200e.c
index f1a500205313..8fbd36eb8941 100644
--- a/drivers/atm/fore200e.c
+++ b/drivers/atm/fore200e.c
@@ -1414,12 +1414,14 @@ fore200e_open(struct atm_vcc *vcc)
 static void
 fore200e_close(struct atm_vcc* vcc)
 {
-    struct fore200e*        fore200e = FORE200E_DEV(vcc-&gt;dev);
     struct fore200e_vcc*    fore200e_vcc;
+    struct fore200e*        fore200e;
     struct fore200e_vc_map* vc_map;
     unsigned long           flags;
 
     ASSERT(vcc);
+    fore200e = FORE200E_DEV(vcc-&gt;dev);
+
     ASSERT((vcc-&gt;vpi &gt;= 0) &amp;&amp; (vcc-&gt;vpi &lt; 1&lt;&lt;FORE200E_VPI_BITS));
     ASSERT((vcc-&gt;vci &gt;= 0) &amp;&amp; (vcc-&gt;vci &lt; 1&lt;&lt;FORE200E_VCI_BITS));
 
@@ -1464,10 +1466,10 @@ fore200e_close(struct atm_vcc* vcc)
 static int
 fore200e_send(struct atm_vcc *vcc, struct sk_buff *skb)
 {
-    struct fore200e*        fore200e     = FORE200E_DEV(vcc-&gt;dev);
-    struct fore200e_vcc*    fore200e_vcc = FORE200E_VCC(vcc);
+    struct fore200e*        fore200e;
+    struct fore200e_vcc*    fore200e_vcc;
     struct fore200e_vc_map* vc_map;
-    struct host_txq*        txq          = &amp;fore200e-&gt;host_txq;
+    struct host_txq*        txq;
     struct host_txq_entry*  entry;
     struct tpd*             tpd;
     struct tpd_haddr        tpd_haddr;
@@ -1480,9 +1482,18 @@ fore200e_send(struct atm_vcc *vcc, struct sk_buff *skb)
     unsigned char*          data;
     unsigned long           flags;
 
-    ASSERT(vcc);
-    ASSERT(fore200e);
-    ASSERT(fore200e_vcc);
+    if (!vcc)
+        return -EINVAL;
+
+    fore200e = FORE200E_DEV(vcc-&gt;dev);
+    fore200e_vcc = FORE200E_VCC(vcc);
+
+    if (!fore200e)
+        return -EINVAL;
+
+    txq = &amp;fore200e-&gt;host_txq;
+    if (!fore200e_vcc)
+        return -EINVAL;
 
     if (!test_bit(ATM_VF_READY, &amp;vcc-&gt;flags)) {
 	DPRINTK(1, "VC %d.%d.%d not ready for tx\n", vcc-&gt;itf, vcc-&gt;vpi, vcc-&gt;vpi);</pre><hr><pre>commit 1ee7826ab68f7e9fa1a01533983acf6a6f62e297
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sun Dec 15 09:23:48 2019 -0600

    mac80211: Remove redundant assertion
    
    In wiphy_to_ieee80211_hw, the assertion to check if wiphy is NULL is
    repeated in wiphy_priv. The patch removes the duplicated BUG_ON check.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Link: https://lore.kernel.org/r/20191215152348.20912-1-pakki001@umn.edu
    Signed-off-by: Johannes Berg &lt;johannes.berg@intel.com&gt;

diff --git a/net/mac80211/util.c b/net/mac80211/util.c
index 32a7a53833c0..780df3e9092e 100644
--- a/net/mac80211/util.c
+++ b/net/mac80211/util.c
@@ -39,7 +39,6 @@ const void *const mac80211_wiphy_privid = &amp;mac80211_wiphy_privid;
 struct ieee80211_hw *wiphy_to_ieee80211_hw(struct wiphy *wiphy)
 {
 	struct ieee80211_local *local;
-	BUG_ON(!wiphy);
 
 	local = wiphy_priv(wiphy);
 	return &amp;local-&gt;hw;</pre><hr><pre>commit 6fc232db9e8cd50b9b83534de9cd91ace711b2d7
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sun Dec 15 09:34:08 2019 -0600

    rfkill: Fix incorrect check to avoid NULL pointer dereference
    
    In rfkill_register, the struct rfkill pointer is first derefernced
    and then checked for NULL. This patch removes the BUG_ON and returns
    an error to the caller in case rfkill is NULL.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Link: https://lore.kernel.org/r/20191215153409.21696-1-pakki001@umn.edu
    Signed-off-by: Johannes Berg &lt;johannes.berg@intel.com&gt;

diff --git a/net/rfkill/core.c b/net/rfkill/core.c
index 461d75274fb3..971c73c7d34c 100644
--- a/net/rfkill/core.c
+++ b/net/rfkill/core.c
@@ -1002,10 +1002,13 @@ static void rfkill_sync_work(struct work_struct *work)
 int __must_check rfkill_register(struct rfkill *rfkill)
 {
 	static unsigned long rfkill_no;
-	struct device *dev = &amp;rfkill-&gt;dev;
+	struct device *dev;
 	int error;
 
-	BUG_ON(!rfkill);
+	if (!rfkill)
+		return -EINVAL;
+
+	dev = &amp;rfkill-&gt;dev;
 
 	mutex_lock(&amp;rfkill_global_mutex);
 </pre><hr><pre>commit 169f9acae08685d4f2a6fd32983958d44e10905d
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Thu Dec 5 17:14:21 2019 -0600

    spi: dw: Avoid BUG_ON() in case of host failure
    
    If dws is NULL in dw_spi_host_add(), we return the error to the
    upper callers instead of crashing. The patch replaces BUG_ON by
    returning -EINVAL to the caller.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Link: https://lore.kernel.org/r/20191205231421.9333-1-pakki001@umn.edu
    Signed-off-by: Mark Brown &lt;broonie@kernel.org&gt;

diff --git a/drivers/spi/spi-dw.c b/drivers/spi/spi-dw.c
index a92aa5cd4fbe..a160d9a141ea 100644
--- a/drivers/spi/spi-dw.c
+++ b/drivers/spi/spi-dw.c
@@ -460,7 +460,8 @@ int dw_spi_add_host(struct device *dev, struct dw_spi *dws)
 	struct spi_controller *master;
 	int ret;
 
-	BUG_ON(dws == NULL);
+	if (!dws)
+		return -EINVAL;
 
 	master = spi_alloc_master(dev, 0);
 	if (!master)</pre><hr><pre>commit 02a896ca84874bbfcedc006303f2951dda89b298
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Thu Dec 5 17:04:49 2019 -0600

    pppoe: remove redundant BUG_ON() check in pppoe_pernet
    
    Passing NULL to pppoe_pernet causes a crash via BUG_ON.
    Dereferencing net in net_generici() also has the same effect. This patch
    removes the redundant BUG_ON check on the same parameter.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/net/ppp/pppoe.c b/drivers/net/ppp/pppoe.c
index a44dd3c8af63..d760a36db28c 100644
--- a/drivers/net/ppp/pppoe.c
+++ b/drivers/net/ppp/pppoe.c
@@ -119,8 +119,6 @@ static inline bool stage_session(__be16 sid)
 
 static inline struct pppoe_net *pppoe_pernet(struct net *net)
 {
-	BUG_ON(!net);
-
 	return net_generic(net, pppoe_net_id);
 }
 </pre>
    <div class="pagination">
        <a href='7_9.html'>&lt;&lt;Prev</a><a href='7.html'>1</a><a href='7_2.html'>2</a><a href='7_3.html'>3</a><a href='7_4.html'>4</a><a href='7_5.html'>5</a><a href='7_6.html'>6</a><a href='7_7.html'>7</a><a href='7_8.html'>8</a><a href='7_9.html'>9</a><span>[10]</span><a href='7_11.html'>11</a><a href='7_12.html'>12</a><a href='7_13.html'>13</a><a href='7_14.html'>14</a><a href='7_15.html'>15</a><a href='7_16.html'>16</a><a href='7_17.html'>17</a><a href='7_18.html'>18</a><a href='7_19.html'>19</a><a href='7_20.html'>20</a><a href='7_21.html'>21</a><a href='7_22.html'>22</a><a href='7_23.html'>23</a><a href='7_24.html'>24</a><a href='7_25.html'>25</a><a href='7_26.html'>26</a><a href='7_27.html'>27</a><a href='7_28.html'>28</a><a href='7_29.html'>29</a><a href='7_30.html'>30</a><a href='7_11.html'>Next&gt;&gt;</a>
    <div>
</body>

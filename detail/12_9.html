<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of Science and Technology of China</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of Science and Technology of China</h1>
    <div class="pagination">
        <a href='12_8.html'>&lt;&lt;Prev</a><a href='12.html'>1</a><a href='12_2.html'>2</a><a href='12_3.html'>3</a><a href='12_4.html'>4</a><a href='12_5.html'>5</a><a href='12_6.html'>6</a><a href='12_7.html'>7</a><a href='12_8.html'>8</a><span>[9]</span>
    </div>
    <hr>
    <pre>commit c9b02d970c385a253edb36c87643b0df706b50b4
Author: Wu Fengguang &lt;wfg@mail.ustc.edu.cn&gt;
Date:   Wed Mar 22 00:08:23 2006 -0800

    [PATCH] mm: isolate_lru_pages() scan count fix
    
    In isolate_lru_pages(), *scanned reports one more scan because the scan
    counter is increased one more time on exit of the while-loop.
    
    Change the while-loop to for-loop to fix it.
    
    Signed-off-by: Nick Piggin &lt;npiggin@suse.de&gt;
    Signed-off-by: Wu Fengguang &lt;wfg@mail.ustc.edu.cn&gt;
    Signed-off-by: Andrew Morton &lt;akpm@osdl.org&gt;
    Signed-off-by: Linus Torvalds &lt;torvalds@osdl.org&gt;

diff --git a/mm/vmscan.c b/mm/vmscan.c
index c712b946e4ff..85e95f445022 100644
--- a/mm/vmscan.c
+++ b/mm/vmscan.c
@@ -1074,9 +1074,9 @@ static unsigned long isolate_lru_pages(unsigned long nr_to_scan,
 {
 	unsigned long nr_taken = 0;
 	struct page *page;
-	unsigned long scan = 0;
+	unsigned long scan;
 
-	while (scan++ &lt; nr_to_scan &amp;&amp; !list_empty(src)) {
+	for (scan = 0; scan &lt; nr_to_scan &amp;&amp; !list_empty(src); scan++) {
 		struct list_head *target;
 		page = lru_to_page(src);
 		prefetchw_prev_lru_page(page, src, flags);</pre>
    <div class="pagination">
        <a href='12_8.html'>&lt;&lt;Prev</a><a href='12.html'>1</a><a href='12_2.html'>2</a><a href='12_3.html'>3</a><a href='12_4.html'>4</a><a href='12_5.html'>5</a><a href='12_6.html'>6</a><a href='12_7.html'>7</a><a href='12_8.html'>8</a><span>[9]</span>
    <div>
</body>

<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patches contributed by University of Minnesota</title>
    <style>
    .pagination {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        overflow-wrap: break-word;
    }
    .pagination a, .pagination span {
        margin: 0 4px;
    }

    </style>
</head>
<body>
    <h1>Patches contributed by University of Minnesota</h1>
    <div class="pagination">
        <a href='7_20.html'>&lt;&lt;Prev</a><a href='7.html'>1</a><a href='7_2.html'>2</a><a href='7_3.html'>3</a><a href='7_4.html'>4</a><a href='7_5.html'>5</a><a href='7_6.html'>6</a><a href='7_7.html'>7</a><a href='7_8.html'>8</a><a href='7_9.html'>9</a><a href='7_10.html'>10</a><a href='7_11.html'>11</a><a href='7_12.html'>12</a><a href='7_13.html'>13</a><a href='7_14.html'>14</a><a href='7_15.html'>15</a><a href='7_16.html'>16</a><a href='7_17.html'>17</a><a href='7_18.html'>18</a><a href='7_19.html'>19</a><a href='7_20.html'>20</a><span>[21]</span><a href='7_22.html'>22</a><a href='7_23.html'>23</a><a href='7_24.html'>24</a><a href='7_25.html'>25</a><a href='7_26.html'>26</a><a href='7_27.html'>27</a><a href='7_28.html'>28</a><a href='7_29.html'>29</a><a href='7_30.html'>30</a><a href='7_22.html'>Next&gt;&gt;</a>
    </div>
    <hr>
    <pre>commit 5c149314d91876f743ee43efd75b6287ec55480e
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Mon Mar 11 02:06:06 2019 -0500

    net: rocker: fix a potential NULL pointer dereference
    
    In case kzalloc fails, the fix releases resources and returns
    NOTIFY_BAD to avoid NULL pointer dereference.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/net/ethernet/rocker/rocker_main.c b/drivers/net/ethernet/rocker/rocker_main.c
index c883aa89b7ca..a71c900ca04f 100644
--- a/drivers/net/ethernet/rocker/rocker_main.c
+++ b/drivers/net/ethernet/rocker/rocker_main.c
@@ -2805,6 +2805,11 @@ static int rocker_switchdev_event(struct notifier_block *unused,
 		memcpy(&amp;switchdev_work-&gt;fdb_info, ptr,
 		       sizeof(switchdev_work-&gt;fdb_info));
 		switchdev_work-&gt;fdb_info.addr = kzalloc(ETH_ALEN, GFP_ATOMIC);
+		if (unlikely(!switchdev_work-&gt;fdb_info.addr)) {
+			kfree(switchdev_work);
+			return NOTIFY_BAD;
+		}
+
 		ether_addr_copy((u8 *)switchdev_work-&gt;fdb_info.addr,
 				fdb_info-&gt;addr);
 		/* Take a reference on the rocker device */</pre><hr><pre>commit 4280b73092fe136d412db9e8e0d69cbc753cdac6
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Mon Mar 11 01:53:15 2019 -0500

    net: qlge: fix a potential NULL pointer dereference
    
    In case alloc_ordered_workqueue fails, the fix returns
    -ENOMEM to avoid NULL pointer dereference.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/net/ethernet/qlogic/qlge/qlge_main.c b/drivers/net/ethernet/qlogic/qlge/qlge_main.c
index 096515c27263..07e1c623048e 100644
--- a/drivers/net/ethernet/qlogic/qlge/qlge_main.c
+++ b/drivers/net/ethernet/qlogic/qlge/qlge_main.c
@@ -4681,6 +4681,11 @@ static int ql_init_device(struct pci_dev *pdev, struct net_device *ndev,
 	 */
 	qdev-&gt;workqueue = alloc_ordered_workqueue("%s", WQ_MEM_RECLAIM,
 						  ndev-&gt;name);
+	if (!qdev-&gt;workqueue) {
+		err = -ENOMEM;
+		goto err_out2;
+	}
+
 	INIT_DELAYED_WORK(&amp;qdev-&gt;asic_reset_work, ql_asic_reset_work);
 	INIT_DELAYED_WORK(&amp;qdev-&gt;mpi_reset_work, ql_mpi_reset_work);
 	INIT_DELAYED_WORK(&amp;qdev-&gt;mpi_work, ql_mpi_work);</pre><hr><pre>commit 0b31d98d90f09868dce71319615e19cd1f146fb6
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Mon Mar 11 01:05:41 2019 -0500

    net: thunder: fix a potential NULL pointer dereference
    
    In case alloc_ordered_workqueue fails, the fix reports the error
    and returns -ENOMEM.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/net/ethernet/cavium/thunder/nicvf_main.c b/drivers/net/ethernet/cavium/thunder/nicvf_main.c
index 503cfadff4ac..aa2be4807191 100644
--- a/drivers/net/ethernet/cavium/thunder/nicvf_main.c
+++ b/drivers/net/ethernet/cavium/thunder/nicvf_main.c
@@ -2234,6 +2234,12 @@ static int nicvf_probe(struct pci_dev *pdev, const struct pci_device_id *ent)
 	nic-&gt;nicvf_rx_mode_wq = alloc_ordered_workqueue("nicvf_rx_mode_wq_VF%d",
 							WQ_MEM_RECLAIM,
 							nic-&gt;vf_id);
+	if (!nic-&gt;nicvf_rx_mode_wq) {
+		err = -ENOMEM;
+		dev_err(dev, "Failed to allocate work queue\n");
+		goto err_unregister_interrupts;
+	}
+
 	INIT_WORK(&amp;nic-&gt;rx_mode_work.work, nicvf_set_rx_mode_task);
 	spin_lock_init(&amp;nic-&gt;rx_mode_wq_lock);
 	mutex_init(&amp;nic-&gt;rx_mode_mtx);</pre><hr><pre>commit 41af8b3a097c6fd17a4867efa25966927094f57c
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Mon Mar 11 01:01:41 2019 -0500

    net: lio_core: fix two NULL pointer dereferences
    
    In case octeon_alloc_soft_command fails, the fix reports the
    error and returns to avoid NULL pointer dereferences.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/net/ethernet/cavium/liquidio/lio_core.c b/drivers/net/ethernet/cavium/liquidio/lio_core.c
index e21bf3724611..1c50c10b5a16 100644
--- a/drivers/net/ethernet/cavium/liquidio/lio_core.c
+++ b/drivers/net/ethernet/cavium/liquidio/lio_core.c
@@ -1211,6 +1211,11 @@ int liquidio_change_mtu(struct net_device *netdev, int new_mtu)
 
 	sc = (struct octeon_soft_command *)
 		octeon_alloc_soft_command(oct, OCTNET_CMD_SIZE, 16, 0);
+	if (!sc) {
+		netif_info(lio, rx_err, lio-&gt;netdev,
+			   "Failed to allocate soft command\n");
+		return -ENOMEM;
+	}
 
 	ncmd = (union octnet_cmd *)sc-&gt;virtdptr;
 
@@ -1684,6 +1689,11 @@ int liquidio_set_fec(struct lio *lio, int on_off)
 
 	sc = octeon_alloc_soft_command(oct, OCTNET_CMD_SIZE,
 				       sizeof(struct oct_nic_seapi_resp), 0);
+	if (!sc) {
+		dev_err(&amp;oct-&gt;pci_dev-&gt;dev,
+			"Failed to allocate soft command\n");
+		return -ENOMEM;
+	}
 
 	ncmd = sc-&gt;virtdptr;
 	resp = sc-&gt;virtrptr;</pre><hr><pre>commit fe543b2f174f34a7a751aa08b334fe6b105c4569
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Mon Mar 11 00:02:32 2019 -0500

    net: liquidio: fix a NULL pointer dereference
    
    In case octeon_alloc_soft_command fails, the fix reports the
    error and returns to avoid NULL pointer dereference.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/net/ethernet/cavium/liquidio/lio_main.c b/drivers/net/ethernet/cavium/liquidio/lio_main.c
index 9b7819fdc9de..fb6f813cff65 100644
--- a/drivers/net/ethernet/cavium/liquidio/lio_main.c
+++ b/drivers/net/ethernet/cavium/liquidio/lio_main.c
@@ -1192,6 +1192,11 @@ static void send_rx_ctrl_cmd(struct lio *lio, int start_stop)
 	sc = (struct octeon_soft_command *)
 		octeon_alloc_soft_command(oct, OCTNET_CMD_SIZE,
 					  16, 0);
+	if (!sc) {
+		netif_info(lio, rx_err, lio-&gt;netdev,
+			   "Failed to allocate octeon_soft_command\n");
+		return;
+	}
 
 	ncmd = (union octnet_cmd *)sc-&gt;virtdptr;
 </pre><hr><pre>commit d721fe99f6ada070ae8fc0ec3e01ce5a42def0d9
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Fri Mar 8 23:49:34 2019 -0600

    isdn: mISDNinfineon: fix potential NULL pointer dereference
    
    In case ioremap fails, the fix returns -ENOMEM to avoid NULL
    pointer dereference.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/isdn/hardware/mISDN/mISDNinfineon.c b/drivers/isdn/hardware/mISDN/mISDNinfineon.c
index 3e01012be4ab..0fe6ddcb3fdc 100644
--- a/drivers/isdn/hardware/mISDN/mISDNinfineon.c
+++ b/drivers/isdn/hardware/mISDN/mISDNinfineon.c
@@ -712,8 +712,11 @@ setup_io(struct inf_hw *hw)
 				(ulong)hw-&gt;addr.start, (ulong)hw-&gt;addr.size);
 			return err;
 		}
-		if (hw-&gt;ci-&gt;addr_mode == AM_MEMIO)
+		if (hw-&gt;ci-&gt;addr_mode == AM_MEMIO) {
 			hw-&gt;addr.p = ioremap(hw-&gt;addr.start, hw-&gt;addr.size);
+			if (unlikely(!hw-&gt;addr.p))
+				return -ENOMEM;
+		}
 		hw-&gt;addr.mode = hw-&gt;ci-&gt;addr_mode;
 		if (debug &amp; DEBUG_HW)
 			pr_notice("%s: IO addr %lx (%lu bytes) mode%d\n",</pre><hr><pre>commit 38d22659803a033b1b66cd2624c33570c0dde77d
Author: Aditya Pakki &lt;pakki001@umn.edu&gt;
Date:   Sat Mar 2 15:20:43 2019 -0600

    isdn: mISDN: Fix potential NULL pointer dereference of kzalloc
    
    Allocating memory via kzalloc for phi may fail and causes a
    NULL pointer dereference. This patch avoids such a scenario.
    
    Signed-off-by: Aditya Pakki &lt;pakki001@umn.edu&gt;
    Signed-off-by: David S. Miller &lt;davem@davemloft.net&gt;

diff --git a/drivers/isdn/hardware/mISDN/hfcsusb.c b/drivers/isdn/hardware/mISDN/hfcsusb.c
index 124ff530da82..26e3182bbca8 100644
--- a/drivers/isdn/hardware/mISDN/hfcsusb.c
+++ b/drivers/isdn/hardware/mISDN/hfcsusb.c
@@ -263,6 +263,9 @@ hfcsusb_ph_info(struct hfcsusb *hw)
 	int i;
 
 	phi = kzalloc(struct_size(phi, bch, dch-&gt;dev.nrbchan), GFP_ATOMIC);
+	if (!phi)
+		return;
+
 	phi-&gt;dch.ch.protocol = hw-&gt;protocol;
 	phi-&gt;dch.ch.Flags = dch-&gt;Flags;
 	phi-&gt;dch.state = dch-&gt;state;</pre><hr><pre>commit 434256833d8eb988cb7f3b8a41699e2fe48d9332
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Tue Jan 8 11:42:21 2019 -0600

    libertas: add checks for the return value of sysfs_create_group
    
    sysfs_create_group() could fail. The fix checkes its return values
    and issue error messages if it fails.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: Kalle Valo &lt;kvalo@codeaurora.org&gt;

diff --git a/drivers/net/wireless/marvell/libertas/mesh.c b/drivers/net/wireless/marvell/libertas/mesh.c
index b0cb16ef8d1d..2315fdff56c2 100644
--- a/drivers/net/wireless/marvell/libertas/mesh.c
+++ b/drivers/net/wireless/marvell/libertas/mesh.c
@@ -797,7 +797,12 @@ static void lbs_persist_config_init(struct net_device *dev)
 {
 	int ret;
 	ret = sysfs_create_group(&amp;(dev-&gt;dev.kobj), &amp;boot_opts_group);
+	if (ret)
+		pr_err("failed to create boot_opts_group.\n");
+
 	ret = sysfs_create_group(&amp;(dev-&gt;dev.kobj), &amp;mesh_ie_group);
+	if (ret)
+		pr_err("failed to create mesh_ie_group.\n");
 }
 
 static void lbs_persist_config_remove(struct net_device *dev)</pre><hr><pre>commit 9a20b5e35a536d6bb4b2d4a3b14a0457e205356c
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Tue Dec 25 21:09:11 2018 -0600

    rtc: hym8563: fix a missing check of block data read
    
    When i2c_smbus_read_i2c_block_data() fails, the read data in "buf" could
    be incorrect and should not be used. The fix checks if
    i2c_smbus_read_i2c_block_data fails, and if so, return its error code
    upstream.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Signed-off-by: Alexandre Belloni &lt;alexandre.belloni@bootlin.com&gt;

diff --git a/drivers/rtc/rtc-hym8563.c b/drivers/rtc/rtc-hym8563.c
index e5ad527cb75e..d03f5d212eea 100644
--- a/drivers/rtc/rtc-hym8563.c
+++ b/drivers/rtc/rtc-hym8563.c
@@ -109,6 +109,8 @@ static int hym8563_rtc_read_time(struct device *dev, struct rtc_time *tm)
 	}
 
 	ret = i2c_smbus_read_i2c_block_data(client, HYM8563_SEC, 7, buf);
+	if (ret &lt; 0)
+		return ret;
 
 	tm-&gt;tm_sec = bcd2bin(buf[0] &amp; HYM8563_SEC_MASK);
 	tm-&gt;tm_min = bcd2bin(buf[1] &amp; HYM8563_MIN_MASK);</pre><hr><pre>commit 5910fa0d0d9809c4d8fbf1fb905a8c86fbf2eccb
Author: Kangjie Lu &lt;kjlu@umn.edu&gt;
Date:   Tue Dec 25 20:43:33 2018 -0600

    rtc: coh901331: fix a missing check of clk_prepare
    
    clk_prepare() could fail, so let's check its status and if it fails
    return its error code upstream.
    
    Signed-off-by: Kangjie Lu &lt;kjlu@umn.edu&gt;
    Acked-by: Linus Walleij &lt;linus.walleij@linaro.org&gt;
    Signed-off-by: Alexandre Belloni &lt;alexandre.belloni@bootlin.com&gt;

diff --git a/drivers/rtc/rtc-coh901331.c b/drivers/rtc/rtc-coh901331.c
index fc5cf5c44ae7..0b232c84f674 100644
--- a/drivers/rtc/rtc-coh901331.c
+++ b/drivers/rtc/rtc-coh901331.c
@@ -235,9 +235,13 @@ static int coh901331_suspend(struct device *dev)
 
 static int coh901331_resume(struct device *dev)
 {
+	int ret;
 	struct coh901331_port *rtap = dev_get_drvdata(dev);
 
-	clk_prepare(rtap-&gt;clk);
+	ret = clk_prepare(rtap-&gt;clk);
+	if (ret)
+		return ret;
+
 	if (device_may_wakeup(dev)) {
 		disable_irq_wake(rtap-&gt;irq);
 	} else {</pre>
    <div class="pagination">
        <a href='7_20.html'>&lt;&lt;Prev</a><a href='7.html'>1</a><a href='7_2.html'>2</a><a href='7_3.html'>3</a><a href='7_4.html'>4</a><a href='7_5.html'>5</a><a href='7_6.html'>6</a><a href='7_7.html'>7</a><a href='7_8.html'>8</a><a href='7_9.html'>9</a><a href='7_10.html'>10</a><a href='7_11.html'>11</a><a href='7_12.html'>12</a><a href='7_13.html'>13</a><a href='7_14.html'>14</a><a href='7_15.html'>15</a><a href='7_16.html'>16</a><a href='7_17.html'>17</a><a href='7_18.html'>18</a><a href='7_19.html'>19</a><a href='7_20.html'>20</a><span>[21]</span><a href='7_22.html'>22</a><a href='7_23.html'>23</a><a href='7_24.html'>24</a><a href='7_25.html'>25</a><a href='7_26.html'>26</a><a href='7_27.html'>27</a><a href='7_28.html'>28</a><a href='7_29.html'>29</a><a href='7_30.html'>30</a><a href='7_22.html'>Next&gt;&gt;</a>
    <div>
</body>
